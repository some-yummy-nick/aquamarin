/*! For license information please see app.js.LICENSE */
const newLocal = !function (e, t) { "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.IntvrPlayer = t() : e.IntvrPlayer = t(); } (this, (function () {
return function (e) {
var t = {}; function i(n) {
if (t[n])
    return t[n].exports; var r = t[n] = { i: n, l: !1, exports: {} }; return e[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports;
} return i.m = e, i.c = t, i.d = function (e, t, n) { i.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n }); }, i.r = function (e) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }); }, i.t = function (e, t) {
if (1 & t && (e = i(e)), 8 & t)
    return e; if (4 & t && "object" == typeof e && e && e.__esModule)
        return e; var n = Object.create(null); if (i.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: e }), 2 & t && "string" != typeof e)
        for (var r in e)
            i.d(n, r, function (t) { return e[t]; }.bind(null, r)); return n;
}, i.n = function (e) { var t = e && e.__esModule ? function () { return e.default; } : function () { return e; }; return i.d(t, "a", t), t; }, i.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t); }, i.p = "js", i(i.s = 55);
} ([function (e, t) {
function i(e, t) {
for (var i = 0; i < t.length; i++) {
    var n = t[i];
    n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
}
} e.exports = function (e, t, n) { return t && i(e.prototype, t), n && i(e, n), e; };
}, function (e, t) {
e.exports = function (e, t) {
if (!(e instanceof t))
    throw new TypeError("Cannot call a class as a function");
};
}, function (e, t, i) {
(function (i) {
var n, r, a, o = o || (r = [], {
getAll: function () { return r; }, removeAll: function () { r = []; }, add: function (e) { r.push(e); }, remove: function (e) { var t = r.indexOf(e); -1 !== t && r.splice(t, 1); }, update: function (e, t) {
if (0 === r.length)
    return !1; var i = 0; for (e = void 0 !== e ? e : o.now(); i < r.length;)
        r[i].update(e) || t ? i++ : r.splice(i, 1); return !0;
}
}); "undefined" == typeof window && void 0 !== i ? o.now = function () { var e = i.hrtime(); return 1e3 * e[0] + e[1] / 1e6; } : "undefined" != typeof window && void 0 !== window.performance && void 0 !== window.performance.now ? o.now = window.performance.now.bind(window.performance) : void 0 !== Date.now ? o.now = Date.now : o.now = function () { return (new Date).getTime(); }, o.Tween = function (e) {
var t, i = e, n = {}, r = {}, a = {}, s = 1e3, l = 0, c = !1, u = !1, h = !1, d = 0, p = null, f = o.Easing.Linear.None, m = o.Interpolation.Linear, v = [], g = null, y = !1, b = null, x = null, _ = null; this.to = function (e, t) { return r = e, void 0 !== t && (s = t), this; }, this.start = function (e) {
for (var t in o.add(this), u = !0, y = !1, p = void 0 !== e ? e : o.now(), p += d, r) {
    if (r[t] instanceof Array) {
        if (0 === r[t].length)
            continue;
        r[t] = [i[t]].concat(r[t]);
    }
    void 0 !== i[t] && (n[t] = i[t], n[t] instanceof Array == !1 && (n[t] *= 1), a[t] = n[t] || 0);
} return this;
}, this.stop = function () { return u ? (o.remove(this), u = !1, null !== _ && _.call(i, i), this.stopChainedTweens(), this) : this; }, this.end = function () { return this.update(p + s), this; }, this.stopChainedTweens = function () {
for (var e = 0, t = v.length; e < t; e++)
    v[e].stop();
}, this.delay = function (e) { return d = e, this; }, this.repeat = function (e) { return l = e, this; }, this.repeatDelay = function (e) { return t = e, this; }, this.yoyo = function (e) { return c = e, this; }, this.easing = function (e) { return f = e, this; }, this.interpolation = function (e) { return m = e, this; }, this.chain = function () { return v = arguments, this; }, this.onStart = function (e) { return g = e, this; }, this.onUpdate = function (e) { return b = e, this; }, this.onComplete = function (e) { return x = e, this; }, this.onStop = function (e) { return _ = e, this; }, this.update = function (e) {
var o, u, _; if (e < p)
    return !0; for (o in !1 === y && (null !== g && g.call(i, i), y = !0), _ = f(u = (u = (e - p) / s) > 1 ? 1 : u), r)
        if (void 0 !== n[o]) {
            var w = n[o] || 0, T = r[o];
            T instanceof Array ? i[o] = m(T, _) : ("string" == typeof T && (T = "+" === T.charAt(0) || "-" === T.charAt(0) ? w + parseFloat(T) : parseFloat(T)), "number" == typeof T && (i[o] = w + (T - w) * _));
        } if (null !== b && b.call(i, _), 1 === u) {
            if (l > 0) {
                for (o in isFinite(l) && l-- , a) {
                    if ("string" == typeof r[o] && (a[o] = a[o] + parseFloat(r[o])), c) {
                        var M = a[o];
                        a[o] = r[o], r[o] = M;
                    }
                    n[o] = a[o];
                }
                return c && (h = !h), p = void 0 !== t ? e + t : e + d, !0;
            }
            null !== x && x.call(i, i);
            for (var A = 0, S = v.length; A < S; A++)
                v[A].start(p + s);
            return !1;
        } return !0;
};
}, o.Easing = { Linear: { None: function (e) { return e; } }, Quadratic: { In: function (e) { return e * e; }, Out: function (e) { return e * (2 - e); }, InOut: function (e) { return (e *= 2) < 1 ? .5 * e * e : -.5 * (--e * (e - 2) - 1); } }, Cubic: { In: function (e) { return e * e * e; }, Out: function (e) { return --e * e * e + 1; }, InOut: function (e) { return (e *= 2) < 1 ? .5 * e * e * e : .5 * ((e -= 2) * e * e + 2); } }, Quartic: { In: function (e) { return e * e * e * e; }, Out: function (e) { return 1 - --e * e * e * e; }, InOut: function (e) { return (e *= 2) < 1 ? .5 * e * e * e * e : -.5 * ((e -= 2) * e * e * e - 2); } }, Quintic: { In: function (e) { return e * e * e * e * e; }, Out: function (e) { return --e * e * e * e * e + 1; }, InOut: function (e) { return (e *= 2) < 1 ? .5 * e * e * e * e * e : .5 * ((e -= 2) * e * e * e * e + 2); } }, Sinusoidal: { In: function (e) { return 1 - Math.cos(e * Math.PI / 2); }, Out: function (e) { return Math.sin(e * Math.PI / 2); }, InOut: function (e) { return .5 * (1 - Math.cos(Math.PI * e)); } }, Exponential: { In: function (e) { return 0 === e ? 0 : Math.pow(1024, e - 1); }, Out: function (e) { return 1 === e ? 1 : 1 - Math.pow(2, -10 * e); }, InOut: function (e) { return 0 === e ? 0 : 1 === e ? 1 : (e *= 2) < 1 ? .5 * Math.pow(1024, e - 1) : .5 * (2 - Math.pow(2, -10 * (e - 1))); } }, Circular: { In: function (e) { return 1 - Math.sqrt(1 - e * e); }, Out: function (e) { return Math.sqrt(1 - --e * e); }, InOut: function (e) { return (e *= 2) < 1 ? -.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1); } }, Elastic: { In: function (e) { return 0 === e ? 0 : 1 === e ? 1 : -Math.pow(2, 10 * (e - 1)) * Math.sin(5 * (e - 1.1) * Math.PI); }, Out: function (e) { return 0 === e ? 0 : 1 === e ? 1 : Math.pow(2, -10 * e) * Math.sin(5 * (e - .1) * Math.PI) + 1; }, InOut: function (e) { return 0 === e ? 0 : 1 === e ? 1 : (e *= 2) < 1 ? -.5 * Math.pow(2, 10 * (e - 1)) * Math.sin(5 * (e - 1.1) * Math.PI) : .5 * Math.pow(2, -10 * (e - 1)) * Math.sin(5 * (e - 1.1) * Math.PI) + 1; } }, Back: { In: function (e) { var t = 1.70158; return e * e * ((t + 1) * e - t); }, Out: function (e) { var t = 1.70158; return --e * e * ((t + 1) * e + t) + 1; }, InOut: function (e) { var t = 2.5949095; return (e *= 2) < 1 ? e * e * ((t + 1) * e - t) * .5 : .5 * ((e -= 2) * e * ((t + 1) * e + t) + 2); } }, Bounce: { In: function (e) { return 1 - o.Easing.Bounce.Out(1 - e); }, Out: function (e) { return e < 1 / 2.75 ? 7.5625 * e * e : e < 2 / 2.75 ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : e < 2.5 / 2.75 ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375; }, InOut: function (e) { return e < .5 ? .5 * o.Easing.Bounce.In(2 * e) : .5 * o.Easing.Bounce.Out(2 * e - 1) + .5; } } }, o.Interpolation = {
Linear: function (e, t) { var i = e.length - 1, n = i * t, r = Math.floor(n), a = o.Interpolation.Utils.Linear; return t < 0 ? a(e[0], e[1], n) : t > 1 ? a(e[i], e[i - 1], i - n) : a(e[r], e[r + 1 > i ? i : r + 1], n - r); }, Bezier: function (e, t) {
for (var i = 0, n = e.length - 1, r = Math.pow, a = o.Interpolation.Utils.Bernstein, s = 0; s <= n; s++)
    i += r(1 - t, n - s) * r(t, s) * e[s] * a(n, s); return i;
}, CatmullRom: function (e, t) { var i = e.length - 1, n = i * t, r = Math.floor(n), a = o.Interpolation.Utils.CatmullRom; return e[0] === e[i] ? (t < 0 && (r = Math.floor(n = i * (1 + t))), a(e[(r - 1 + i) % i], e[r], e[(r + 1) % i], e[(r + 2) % i], n - r)) : t < 0 ? e[0] - (a(e[0], e[0], e[1], e[1], -n) - e[0]) : t > 1 ? e[i] - (a(e[i], e[i], e[i - 1], e[i - 1], n - i) - e[i]) : a(e[r ? r - 1 : 0], e[r], e[i < r + 1 ? i : r + 1], e[i < r + 2 ? i : r + 2], n - r); }, Utils: {
Linear: function (e, t, i) { return (t - e) * i + e; }, Bernstein: function (e, t) { var i = o.Interpolation.Utils.Factorial; return i(e) / i(t) / i(e - t); }, Factorial: (a = [1], function (e) {
var t = 1; if (a[e])
    return a[e]; for (var i = e; i > 1; i--)
        t *= i; return a[e] = t, t;
}), CatmullRom: function (e, t, i, n, r) { var a = .5 * (i - e), o = .5 * (n - t), s = r * r; return (2 * t - 2 * i + a + o) * (r * s) + (-3 * t + 3 * i - 2 * a - o) * s + a * r + t; }
}
}, void 0 === (n = function () { return o; }.apply(t, [])) || (e.exports = n);
}).call(this, i(27));
}, function (e, t) { e.exports = function (e, t, i) { return t in e ? Object.defineProperty(e, t, { value: i, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = i, e; }; }, function (e, t) { function i(t) { return e.exports = i = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) { return e.__proto__ || Object.getPrototypeOf(e); }, i(t); } e.exports = i; }, function (e, t, i) { e.exports = i(56); }, function (e, t, i) { var n = i(98), r = i(8); e.exports = function (e, t) { return !t || "object" !== n(t) && "function" != typeof t ? r(e) : t; }; }, function (e, t, i) {
var n = i(100); e.exports = function (e, t) {
if ("function" != typeof t && null !== t)
    throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), t && n(e, t);
};
}, function (e, t) {
e.exports = function (e) {
if (void 0 === e)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e;
};
}, function (e, t, i) {
var n; e.exports = (n = i(91), function (e) {
function t(n) {
if (i[n])
    return i[n].exports; var r = i[n] = { i: n, l: !1, exports: {} }; return e[n].call(r.exports, r, r.exports, t), r.l = !0, r.exports;
} var i = {}; return t.m = e, t.c = i, t.i = function (e) { return e; }, t.d = function (e, i, n) { t.o(e, i) || Object.defineProperty(e, i, { configurable: !1, enumerable: !0, get: n }); }, t.n = function (e) { var i = e && e.__esModule ? function () { return e.default; } : function () { return e; }; return t.d(i, "a", i), i; }, t.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t); }, t.p = "/", t(t.s = 4);
} ([function (e, t) { e.exports = n; }, function (e, t) {
e.exports = function (e, t, i, n, r, a) {
var o, s = e = e || {}, l = typeof e.default; "object" !== l && "function" !== l || (o = e, s = e.default); var c, u = "function" == typeof s ? s.options : s; if (t && (u.render = t.render, u.staticRenderFns = t.staticRenderFns, u._compiled = !0), i && (u.functional = !0), r && (u._scopeId = r), a ? (c = function (e) { (e = e || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (e = __VUE_SSR_CONTEXT__), n && n.call(this, e), e && e._registeredComponents && e._registeredComponents.add(a); }, u._ssrRegister = c) : n && (c = n), c) {
    var h = u.functional, d = h ? u.render : u.beforeCreate;
    h ? (u._injectStyles = c, u.render = function (e, t) { return c.call(t), d(e, t); }) : u.beforeCreate = d ? [].concat(d, c) : [c];
} return { esModule: o, exports: s, options: u };
};
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", { value: !0 });
    var n = i(5), r = i.n(n), a = i(8), o = i(1)(r.a, a.a, !1, null, null, null);
    t.default = o.exports;
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", { value: !0 });
    var n = i(6), r = i.n(n), a = i(7), o = i(1)(r.a, a.a, !1, null, null, null);
    t.default = o.exports;
}, function (e, t, i) {
    "use strict";
    function n(e) { return e && e.__esModule ? e : { default: e }; }
    Object.defineProperty(t, "__esModule", { value: !0 }), t.install = t.swiperSlide = t.swiper = t.Swiper = void 0;
    var r = n(i(0)), a = n(i(2)), o = n(i(3)), s = window.Swiper || r.default, l = o.default, c = a.default, u = function (e, t) { t && (o.default.props.globalOptions.default = function () { return t; }), e.component(o.default.name, o.default), e.component(a.default.name, a.default); }, h = { Swiper: s, swiper: l, swiperSlide: c, install: u };
    t.default = h, t.Swiper = s, t.swiper = l, t.swiperSlide = c, t.install = u;
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", { value: !0 }), t.default = { name: "swiper-slide", data: function () { return { slideClass: "swiper-slide" }; }, ready: function () { this.update(); }, mounted: function () { this.update(), this.$parent && this.$parent.options && this.$parent.options.slideClass && (this.slideClass = this.$parent.options.slideClass); }, updated: function () { this.update(); }, attached: function () { this.update(); }, methods: { update: function () { this.$parent && this.$parent.swiper && this.$parent.update(); } } };
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", { value: !0 });
    var n = function (e) { return e && e.__esModule ? e : { default: e }; } (i(0)), r = window.Swiper || n.default;
    "function" != typeof Object.assign && Object.defineProperty(Object, "assign", {
    value: function (e, t) {
    if (null == e)
        throw new TypeError("Cannot convert undefined or null to object"); for (var i = Object(e), n = 1; n < arguments.length; n++) {
            var r = arguments[n];
            if (null != r)
                for (var a in r)
                    Object.prototype.hasOwnProperty.call(r, a) && (i[a] = r[a]);
        } return i;
    }, writable: !0, configurable: !0
    });
    var a = ["beforeDestroy", "slideChange", "slideChangeTransitionStart", "slideChangeTransitionEnd", "slideNextTransitionStart", "slideNextTransitionEnd", "slidePrevTransitionStart", "slidePrevTransitionEnd", "transitionStart", "transitionEnd", "touchStart", "touchMove", "touchMoveOpposite", "sliderMove", "touchEnd", "click", "tap", "doubleTap", "imagesReady", "progress", "reachBeginning", "reachEnd", "fromEdge", "setTranslate", "setTransition", "resize"];
    t.default = {
    name: "swiper", props: { options: { type: Object, default: function () { return {}; } }, globalOptions: { type: Object, required: !1, default: function () { return {}; } } }, data: function () { return { swiper: null, classes: { wrapperClass: "swiper-wrapper" } }; }, ready: function () { this.swiper || this.mountInstance(); }, mounted: function () {
    if (!this.swiper) {
        var e = !1;
        for (var t in this.classes)
            this.classes.hasOwnProperty(t) && this.options[t] && (e = !0, this.classes[t] = this.options[t]);
        e ? this.$nextTick(this.mountInstance) : this.mountInstance();
    }
    }, activated: function () { this.update(); }, updated: function () { this.update(); }, beforeDestroy: function () { this.$nextTick((function () { this.swiper && (this.swiper.destroy && this.swiper.destroy(), delete this.swiper); })); }, methods: { update: function () { this.swiper && (this.swiper.update && this.swiper.update(), this.swiper.navigation && this.swiper.navigation.update(), this.swiper.pagination && this.swiper.pagination.render(), this.swiper.pagination && this.swiper.pagination.update()); }, mountInstance: function () { var e = Object.assign({}, this.globalOptions, this.options); this.swiper = new r(this.$el, e), this.bindEvents(), this.$emit("ready", this.swiper); }, bindEvents: function () { var e = this, t = this; a.forEach((function (i) { e.swiper.on(i, (function () { t.$emit.apply(t, [i].concat(Array.prototype.slice.call(arguments))), t.$emit.apply(t, [i.replace(/([A-Z])/g, "-$1").toLowerCase()].concat(Array.prototype.slice.call(arguments))); })); })); } }
    };
}, function (e, t, i) {
    "use strict";
    var n = { render: function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { staticClass: "swiper-container" }, [e._t("parallax-bg"), e._v(" "), i("div", { class: e.classes.wrapperClass }, [e._t("default")], 2), e._v(" "), e._t("pagination"), e._v(" "), e._t("button-prev"), e._v(" "), e._t("button-next"), e._v(" "), e._t("scrollbar")], 2); }, staticRenderFns: [] };
    t.a = n;
}, function (e, t, i) {
    "use strict";
    var n = { render: function () { var e = this, t = e.$createElement; return (e._self._c || t)("div", { class: e.slideClass }, [e._t("default")], 2); }, staticRenderFns: [] };
    t.a = n;
} ]));
}, function (e, t) { var i = e.exports = { version: "2.6.11" }; "number" == typeof __e && (__e = i); }, function (e, t) {
var i; i = function () { return this; } (); try {
    i = i || new Function("return this")();
}
    catch (e) {
        "object" == typeof window && (i = window);
    } e.exports = i;
}, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) { var n = i(101), r = i(102), a = i(103); e.exports = function (e) { return n(e) || r(e) || a(); }; }, function (e, t) { var i = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")(); "number" == typeof __g && (__g = i); }, function (e, t) { e.exports = function (e) { return "object" == typeof e ? null !== e : "function" == typeof e; }; }, function (e, t, i) { e.exports = !i(25)((function () { return 7 != Object.defineProperty({}, "a", { get: function () { return 7; } }).a; })); }, function (e, t) {
e.exports = function (e) {
try {
    return !!e();
}
    catch (e) {
        return !0;
    }
};
}, function (e, t, i) {
    "use strict";
    (function (e, i) {
    var n = Object.freeze({}); function r(e) { return null == e; } function a(e) { return null != e; } function o(e) { return !0 === e; } function s(e) { return "string" == typeof e || "number" == typeof e || "symbol" == typeof e || "boolean" == typeof e; } function l(e) { return null !== e && "object" == typeof e; } var c = Object.prototype.toString; function u(e) { return "[object Object]" === c.call(e); } function h(e) { return "[object RegExp]" === c.call(e); } function d(e) { var t = parseFloat(String(e)); return t >= 0 && Math.floor(t) === t && isFinite(e); } function p(e) { return a(e) && "function" == typeof e.then && "function" == typeof e.catch; } function f(e) { return null == e ? "" : Array.isArray(e) || u(e) && e.toString === c ? JSON.stringify(e, null, 2) : String(e); } function m(e) { var t = parseFloat(e); return isNaN(t) ? e : t; } function v(e, t) {
    for (var i = Object.create(null), n = e.split(","), r = 0; r < n.length; r++)
        i[n[r]] = !0; return t ? function (e) { return i[e.toLowerCase()]; } : function (e) { return i[e]; };
    } var g = v("slot,component", !0), y = v("key,ref,slot,slot-scope,is"); function b(e, t) {
    if (e.length) {
        var i = e.indexOf(t);
        if (i > -1)
            return e.splice(i, 1);
    }
    } var x = Object.prototype.hasOwnProperty; function _(e, t) { return x.call(e, t); } function w(e) { var t = Object.create(null); return function (i) { return t[i] || (t[i] = e(i)); }; } var T = /-(\w)/g, M = w((function (e) { return e.replace(T, (function (e, t) { return t ? t.toUpperCase() : ""; })); })), A = w((function (e) { return e.charAt(0).toUpperCase() + e.slice(1); })), S = /\B([A-Z])/g, E = w((function (e) { return e.replace(S, "-$1").toLowerCase(); })); var P = Function.prototype.bind ? function (e, t) { return e.bind(t); } : function (e, t) { function i(i) { var n = arguments.length; return n ? n > 1 ? e.apply(t, arguments) : e.call(t, i) : e.call(t); } return i._length = e.length, i; }; function C(e, t) {
    t = t || 0; for (var i = e.length - t, n = new Array(i); i--;)
        n[i] = e[i + t]; return n;
    } function L(e, t) {
    for (var i in t)
        e[i] = t[i]; return e;
    } function R(e) {
    for (var t = {}, i = 0; i < e.length; i++)
        e[i] && L(t, e[i]); return t;
    } function I(e, t, i) { } var O = function (e, t, i) { return !1; }, D = function (e) { return e; }; function F(e, t) {
    if (e === t)
        return !0; var i = l(e), n = l(t); if (!i || !n)
            return !i && !n && String(e) === String(t); try {
                var r = Array.isArray(e), a = Array.isArray(t);
                if (r && a)
                    return e.length === t.length && e.every((function (e, i) { return F(e, t[i]); }));
                if (e instanceof Date && t instanceof Date)
                    return e.getTime() === t.getTime();
                if (r || a)
                    return !1;
                var o = Object.keys(e), s = Object.keys(t);
                return o.length === s.length && o.every((function (i) { return F(e[i], t[i]); }));
            }
        catch (e) {
            return !1;
        }
    } function k(e, t) {
    for (var i = 0; i < e.length; i++)
        if (F(e[i], t))
            return i; return -1;
    } function N(e) { var t = !1; return function () { t || (t = !0, e.apply(this, arguments)); }; } var B = "data-server-rendered", G = ["component", "directive", "filter"], H = ["beforeCreate", "created", "beforeMount", "mounted", "beforeUpdate", "updated", "beforeDestroy", "destroyed", "activated", "deactivated", "errorCaptured", "serverPrefetch"], U = { optionMergeStrategies: Object.create(null), silent: !1, productionTip: !1, devtools: !1, performance: !1, errorHandler: null, warnHandler: null, ignoredElements: [], keyCodes: Object.create(null), isReservedTag: O, isReservedAttr: O, isUnknownElement: O, getTagNamespace: I, parsePlatformTagName: D, mustUseProp: O, async: !0, _lifecycleHooks: H }, z = /a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/; function V(e) { var t = (e + "").charCodeAt(0); return 36 === t || 95 === t; } function j(e, t, i, n) { Object.defineProperty(e, t, { value: i, enumerable: !!n, writable: !0, configurable: !0 }); } var W = new RegExp("[^" + z.source + ".$_\\d]"); var X, Y = "__proto__" in {}, Q = "undefined" != typeof window, q = "undefined" != typeof WXEnvironment && !!WXEnvironment.platform, $ = q && WXEnvironment.platform.toLowerCase(), Z = Q && window.navigator.userAgent.toLowerCase(), K = Z && /msie|trident/.test(Z), J = Z && Z.indexOf("msie 9.0") > 0, ee = Z && Z.indexOf("edge/") > 0, te = (Z && Z.indexOf("android"), Z && /iphone|ipad|ipod|ios/.test(Z) || "ios" === $), ie = (Z && /chrome\/\d+/.test(Z), Z && /phantomjs/.test(Z), Z && Z.match(/firefox\/(\d+)/)), ne = {}.watch, re = !1; if (Q)
            try {
                var ae = {};
                Object.defineProperty(ae, "passive", { get: function () { re = !0; } }), window.addEventListener("test-passive", null, ae);
            }
            catch (e) { } var oe = function () { return void 0 === X && (X = !Q && !q && void 0 !== e && (e.process && "server" === e.process.env.VUE_ENV)), X; }, se = Q && window.__VUE_DEVTOOLS_GLOBAL_HOOK__; function le(e) { return "function" == typeof e && /native code/.test(e.toString()); } var ce, ue = "undefined" != typeof Symbol && le(Symbol) && "undefined" != typeof Reflect && le(Reflect.ownKeys); ce = "undefined" != typeof Set && le(Set) ? Set : function () { function e() { this.set = Object.create(null); } return e.prototype.has = function (e) { return !0 === this.set[e]; }, e.prototype.add = function (e) { this.set[e] = !0; }, e.prototype.clear = function () { this.set = Object.create(null); }, e; } (); var he = I, de = 0, pe = function () { this.id = de++ , this.subs = []; }; pe.prototype.addSub = function (e) { this.subs.push(e); }, pe.prototype.removeSub = function (e) { b(this.subs, e); }, pe.prototype.depend = function () { pe.target && pe.target.addDep(this); }, pe.prototype.notify = function () {
            var e = this.subs.slice(); for (var t = 0, i = e.length; t < i; t++)
                e[t].update();
            }, pe.target = null; var fe = []; function me(e) { fe.push(e), pe.target = e; } function ve() { fe.pop(), pe.target = fe[fe.length - 1]; } var ge = function (e, t, i, n, r, a, o, s) { this.tag = e, this.data = t, this.children = i, this.text = n, this.elm = r, this.ns = void 0, this.context = a, this.fnContext = void 0, this.fnOptions = void 0, this.fnScopeId = void 0, this.key = t && t.key, this.componentOptions = o, this.componentInstance = void 0, this.parent = void 0, this.raw = !1, this.isStatic = !1, this.isRootInsert = !0, this.isComment = !1, this.isCloned = !1, this.isOnce = !1, this.asyncFactory = s, this.asyncMeta = void 0, this.isAsyncPlaceholder = !1; }, ye = { child: { configurable: !0 } }; ye.child.get = function () { return this.componentInstance; }, Object.defineProperties(ge.prototype, ye); var be = function (e) { void 0 === e && (e = ""); var t = new ge; return t.text = e, t.isComment = !0, t; }; function xe(e) { return new ge(void 0, void 0, void 0, String(e)); } function _e(e) { var t = new ge(e.tag, e.data, e.children && e.children.slice(), e.text, e.elm, e.context, e.componentOptions, e.asyncFactory); return t.ns = e.ns, t.isStatic = e.isStatic, t.key = e.key, t.isComment = e.isComment, t.fnContext = e.fnContext, t.fnOptions = e.fnOptions, t.fnScopeId = e.fnScopeId, t.asyncMeta = e.asyncMeta, t.isCloned = !0, t; } var we = Array.prototype, Te = Object.create(we);["push", "pop", "shift", "unshift", "splice", "sort", "reverse"].forEach((function (e) {
            var t = we[e]; j(Te, e, (function () {
            for (var i = [], n = arguments.length; n--;)
                i[n] = arguments[n]; var r, a = t.apply(this, i), o = this.__ob__; switch (e) {
                    case "push":
                    case "unshift":
                        r = i;
                        break;
                    case "splice": r = i.slice(2);
                } return r && o.observeArray(r), o.dep.notify(), a;
            }));
            })); var Me = Object.getOwnPropertyNames(Te), Ae = !0; function Se(e) { Ae = e; } var Ee = function (e) {
            this.value = e, this.dep = new pe, this.vmCount = 0, j(e, "__ob__", this), Array.isArray(e) ? (Y ? function (e, t) { e.__proto__ = t; } (e, Te) : function (e, t, i) {
            for (var n = 0, r = i.length; n < r; n++) {
                var a = i[n];
                j(e, a, t[a]);
            }
            } (e, Te, Me), this.observeArray(e)) : this.walk(e);
            }; function Pe(e, t) {
            var i; if (l(e) && !(e instanceof ge))
                return _(e, "__ob__") && e.__ob__ instanceof Ee ? i = e.__ob__ : Ae && !oe() && (Array.isArray(e) || u(e)) && Object.isExtensible(e) && !e._isVue && (i = new Ee(e)), t && i && i.vmCount++ , i;
            } function Ce(e, t, i, n, r) {
            var a = new pe, o = Object.getOwnPropertyDescriptor(e, t); if (!o || !1 !== o.configurable) {
                var s = o && o.get, l = o && o.set;
                s && !l || 2 !== arguments.length || (i = e[t]);
                var c = !r && Pe(i);
                Object.defineProperty(e, t, {
                enumerable: !0, configurable: !0, get: function () {
                var t = s ? s.call(e) : i; return pe.target && (a.depend(), c && (c.dep.depend(), Array.isArray(t) && function e(t) {
                for (var i = void 0, n = 0, r = t.length; n < r; n++)
                    (i = t[n]) && i.__ob__ && i.__ob__.dep.depend(), Array.isArray(i) && e(i);
                } (t))), t;
                }, set: function (t) { var n = s ? s.call(e) : i; t === n || t != t && n != n || s && !l || (l ? l.call(e, t) : i = t, c = !r && Pe(t), a.notify()); }
                });
            }
            } function Le(e, t, i) {
            if (Array.isArray(e) && d(t))
                return e.length = Math.max(e.length, t), e.splice(t, 1, i), i; if (t in e && !(t in Object.prototype))
                    return e[t] = i, i; var n = e.__ob__; return e._isVue || n && n.vmCount ? i : n ? (Ce(n.value, t, i), n.dep.notify(), i) : (e[t] = i, i);
            } function Re(e, t) {
            if (Array.isArray(e) && d(t))
                e.splice(t, 1);
            else {
                var i = e.__ob__;
                e._isVue || i && i.vmCount || _(e, t) && (delete e[t], i && i.dep.notify());
            }
            } Ee.prototype.walk = function (e) {
            for (var t = Object.keys(e), i = 0; i < t.length; i++)
                Ce(e, t[i]);
            }, Ee.prototype.observeArray = function (e) {
            for (var t = 0, i = e.length; t < i; t++)
                Pe(e[t]);
            }; var Ie = U.optionMergeStrategies; function Oe(e, t) {
            if (!t)
                return e; for (var i, n, r, a = ue ? Reflect.ownKeys(t) : Object.keys(t), o = 0; o < a.length; o++)
                    "__ob__" !== (i = a[o]) && (n = e[i], r = t[i], _(e, i) ? n !== r && u(n) && u(r) && Oe(n, r) : Le(e, i, r)); return e;
            } function De(e, t, i) { return i ? function () { var n = "function" == typeof t ? t.call(i, i) : t, r = "function" == typeof e ? e.call(i, i) : e; return n ? Oe(n, r) : r; } : t ? e ? function () { return Oe("function" == typeof t ? t.call(this, this) : t, "function" == typeof e ? e.call(this, this) : e); } : t : e; } function Fe(e, t) {
            var i = t ? e ? e.concat(t) : Array.isArray(t) ? t : [t] : e; return i ? function (e) {
            for (var t = [], i = 0; i < e.length; i++)
                -1 === t.indexOf(e[i]) && t.push(e[i]); return t;
            } (i) : i;
            } function ke(e, t, i, n) { var r = Object.create(e || null); return t ? L(r, t) : r; } Ie.data = function (e, t, i) { return i ? De(e, t, i) : t && "function" != typeof t ? e : De(e, t); }, H.forEach((function (e) { Ie[e] = Fe; })), G.forEach((function (e) { Ie[e + "s"] = ke; })), Ie.watch = function (e, t, i, n) {
            if (e === ne && (e = void 0), t === ne && (t = void 0), !t)
                return Object.create(e || null); if (!e)
                    return t; var r = {}; for (var a in L(r, e), t) {
                        var o = r[a], s = t[a];
                        o && !Array.isArray(o) && (o = [o]), r[a] = o ? o.concat(s) : Array.isArray(s) ? s : [s];
                    } return r;
            }, Ie.props = Ie.methods = Ie.inject = Ie.computed = function (e, t, i, n) {
            if (!e)
                return t; var r = Object.create(null); return L(r, e), t && L(r, t), r;
            }, Ie.provide = De; var Ne = function (e, t) { return void 0 === t ? e : t; }; function Be(e, t, i) {
            if ("function" == typeof t && (t = t.options), function (e, t) {
            var i = e.props; if (i) {
                var n, r, a = {};
                if (Array.isArray(i))
                    for (n = i.length; n--;)
                        "string" == typeof (r = i[n]) && (a[M(r)] = { type: null });
                else if (u(i))
                    for (var o in i)
                        r = i[o], a[M(o)] = u(r) ? r : { type: r };
                else
                    0;
                e.props = a;
            }
            } (t), function (e, t) {
            var i = e.inject; if (i) {
                var n = e.inject = {};
                if (Array.isArray(i))
                    for (var r = 0; r < i.length; r++)
                        n[i[r]] = { from: i[r] };
                else if (u(i))
                    for (var a in i) {
                        var o = i[a];
                        n[a] = u(o) ? L({ from: a }, o) : { from: o };
                    }
                else
                    0;
            }
            } (t), function (e) {
            var t = e.directives; if (t)
                for (var i in t) {
                    var n = t[i];
                    "function" == typeof n && (t[i] = { bind: n, update: n });
                }
            } (t), !t._base && (t.extends && (e = Be(e, t.extends, i)), t.mixins))
                for (var n = 0, r = t.mixins.length; n < r; n++)
                    e = Be(e, t.mixins[n], i); var a, o = {}; for (a in e)
                    s(a); for (a in t)
                    _(e, a) || s(a); function s(n) { var r = Ie[n] || Ne; o[n] = r(e[n], t[n], i, n); } return o;
            } function Ge(e, t, i, n) {
            if ("string" == typeof i) {
                var r = e[t];
                if (_(r, i))
                    return r[i];
                var a = M(i);
                if (_(r, a))
                    return r[a];
                var o = A(a);
                return _(r, o) ? r[o] : r[i] || r[a] || r[o];
            }
            } function He(e, t, i, n) {
            var r = t[e], a = !_(i, e), o = i[e], s = Ve(Boolean, r.type); if (s > -1)
                if (a && !_(r, "default"))
                    o = !1;
                else if ("" === o || o === E(e)) {
                    var l = Ve(String, r.type);
                    (l < 0 || s < l) && (o = !0);
                } if (void 0 === o) {
                    o = function (e, t, i) {
                    if (!_(t, "default"))
                        return; var n = t.default; 0; if (e && e.$options.propsData && void 0 === e.$options.propsData[i] && void 0 !== e._props[i])
                            return e._props[i]; return "function" == typeof n && "Function" !== Ue(t.type) ? n.call(e) : n;
                    } (n, r, e);
                    var c = Ae;
                    Se(!0), Pe(o), Se(c);
                } return o;
            } function Ue(e) { var t = e && e.toString().match(/^\s*function (\w+)/); return t ? t[1] : ""; } function ze(e, t) { return Ue(e) === Ue(t); } function Ve(e, t) {
            if (!Array.isArray(t))
                return ze(t, e) ? 0 : -1; for (var i = 0, n = t.length; i < n; i++)
                    if (ze(t[i], e))
                        return i; return -1;
            } function je(e, t, i) {
            me(); try {
                if (t)
                    for (var n = t; n = n.$parent;) {
                        var r = n.$options.errorCaptured;
                        if (r)
                            for (var a = 0; a < r.length; a++)
                                try {
                                    if (!1 === r[a].call(n, e, t, i))
                                        return;
                                }
                                catch (e) {
                                    Xe(e, n, "errorCaptured hook");
                                }
                    }
                Xe(e, t, i);
            }
                finally {
                    ve();
                }
            } function We(e, t, i, n, r) {
            var a; try {
                (a = i ? e.apply(t, i) : e.call(t)) && !a._isVue && p(a) && !a._handled && (a.catch((function (e) { return je(e, n, r + " (Promise/async)"); })), a._handled = !0);
            }
                catch (e) {
                    je(e, n, r);
                } return a;
            } function Xe(e, t, i) {
            if (U.errorHandler)
                try {
                    return U.errorHandler.call(null, e, t, i);
                }
                catch (t) {
                    t !== e && Ye(t, null, "config.errorHandler");
                } Ye(e, t, i);
            } function Ye(e, t, i) {
            if (!Q && !q || "undefined" == typeof console)
                throw e; console.error(e);
            } var Qe, qe = !1, $e = [], Ze = !1; function Ke() {
            Ze = !1; var e = $e.slice(0); $e.length = 0; for (var t = 0; t < e.length; t++)
                e[t]();
            } if ("undefined" != typeof Promise && le(Promise)) {
                var Je = Promise.resolve();
                Qe = function () { Je.then(Ke), te && setTimeout(I); }, qe = !0;
            }
        else if (K || "undefined" == typeof MutationObserver || !le(MutationObserver) && "[object MutationObserverConstructor]" !== MutationObserver.toString())
            Qe = void 0 !== i && le(i) ? function () { i(Ke); } : function () { setTimeout(Ke, 0); };
        else {
            var et = 1, tt = new MutationObserver(Ke), it = document.createTextNode(String(et));
            tt.observe(it, { characterData: !0 }), Qe = function () { et = (et + 1) % 2, it.data = String(et); }, qe = !0;
        } function nt(e, t) {
        var i; if ($e.push((function () {
        if (e)
            try {
                e.call(t);
            }
            catch (e) {
                je(e, t, "nextTick");
            }
        else
            i && i(t);
        })), Ze || (Ze = !0, Qe()), !e && "undefined" != typeof Promise)
            return new Promise((function (e) { i = e; }));
        } var rt = new ce; function at(e) {
        !function e(t, i) {
        var n, r, a = Array.isArray(t); if (!a && !l(t) || Object.isFrozen(t) || t instanceof ge)
            return; if (t.__ob__) {
                var o = t.__ob__.dep.id;
                if (i.has(o))
                    return;
                i.add(o);
            } if (a)
                for (n = t.length; n--;)
                    e(t[n], i);
            else
                for (r = Object.keys(t), n = r.length; n--;)
                    e(t[r[n]], i);
        } (e, rt), rt.clear();
        } var ot = w((function (e) { var t = "&" === e.charAt(0), i = "~" === (e = t ? e.slice(1) : e).charAt(0), n = "!" === (e = i ? e.slice(1) : e).charAt(0); return { name: e = n ? e.slice(1) : e, once: i, capture: n, passive: t }; })); function st(e, t) {
        function i() {
        var e = arguments, n = i.fns; if (!Array.isArray(n))
            return We(n, null, arguments, t, "v-on handler"); for (var r = n.slice(), a = 0; a < r.length; a++)
                We(r[a], null, e, t, "v-on handler");
        } return i.fns = e, i;
        } function lt(e, t, i, n, a, s) {
        var l, c, u, h; for (l in e)
            c = e[l], u = t[l], h = ot(l), r(c) || (r(u) ? (r(c.fns) && (c = e[l] = st(c, s)), o(h.once) && (c = e[l] = a(h.name, c, h.capture)), i(h.name, c, h.capture, h.passive, h.params)) : c !== u && (u.fns = c, e[l] = u)); for (l in t)
                r(e[l]) && n((h = ot(l)).name, t[l], h.capture);
        } function ct(e, t, i) { var n; e instanceof ge && (e = e.data.hook || (e.data.hook = {})); var s = e[t]; function l() { i.apply(this, arguments), b(n.fns, l); } r(s) ? n = st([l]) : a(s.fns) && o(s.merged) ? (n = s).fns.push(l) : n = st([s, l]), n.merged = !0, e[t] = n; } function ut(e, t, i, n, r) {
        if (a(t)) {
            if (_(t, i))
                return e[i] = t[i], r || delete t[i], !0;
            if (_(t, n))
                return e[i] = t[n], r || delete t[n], !0;
        } return !1;
        } function ht(e) {
        return s(e) ? [xe(e)] : Array.isArray(e) ? function e(t, i) {
        var n, l, c, u, h = []; for (n = 0; n < t.length; n++)
            r(l = t[n]) || "boolean" == typeof l || (c = h.length - 1, u = h[c], Array.isArray(l) ? l.length > 0 && (dt((l = e(l, (i || "") + "_" + n))[0]) && dt(u) && (h[c] = xe(u.text + l[0].text), l.shift()), h.push.apply(h, l)) : s(l) ? dt(u) ? h[c] = xe(u.text + l) : "" !== l && h.push(xe(l)) : dt(l) && dt(u) ? h[c] = xe(u.text + l.text) : (o(t._isVList) && a(l.tag) && r(l.key) && a(i) && (l.key = "__vlist" + i + "_" + n + "__"), h.push(l))); return h;
        } (e) : void 0;
        } function dt(e) { return a(e) && a(e.text) && !1 === e.isComment; } function pt(e, t) {
        if (e) {
            for (var i = Object.create(null), n = ue ? Reflect.ownKeys(e) : Object.keys(e), r = 0; r < n.length; r++) {
                var a = n[r];
                if ("__ob__" !== a) {
                    for (var o = e[a].from, s = t; s;) {
                        if (s._provided && _(s._provided, o)) {
                            i[a] = s._provided[o];
                            break;
                        }
                        s = s.$parent;
                    }
                    if (!s)
                        if ("default" in e[a]) {
                            var l = e[a].default;
                            i[a] = "function" == typeof l ? l.call(t) : l;
                        }
                        else
                            0;
                }
            }
            return i;
        }
        } function ft(e, t) {
        if (!e || !e.length)
            return {}; for (var i = {}, n = 0, r = e.length; n < r; n++) {
                var a = e[n], o = a.data;
                if (o && o.attrs && o.attrs.slot && delete o.attrs.slot, a.context !== t && a.fnContext !== t || !o || null == o.slot)
                    (i.default || (i.default = [])).push(a);
                else {
                    var s = o.slot, l = i[s] || (i[s] = []);
                    "template" === a.tag ? l.push.apply(l, a.children || []) : l.push(a);
                }
            } for (var c in i)
                i[c].every(mt) && delete i[c]; return i;
        } function mt(e) { return e.isComment && !e.asyncFactory || " " === e.text; } function vt(e, t, i) {
        var r, a = Object.keys(t).length > 0, o = e ? !!e.$stable : !a, s = e && e.$key; if (e) {
            if (e._normalized)
                return e._normalized;
            if (o && i && i !== n && s === i.$key && !a && !i.$hasNormal)
                return i;
            for (var l in r = {}, e)
                e[l] && "$" !== l[0] && (r[l] = gt(t, l, e[l]));
        }
        else
            r = {}; for (var c in t)
                c in r || (r[c] = yt(t, c)); return e && Object.isExtensible(e) && (e._normalized = r), j(r, "$stable", o), j(r, "$key", s), j(r, "$hasNormal", a), r;
        } function gt(e, t, i) { var n = function () { var e = arguments.length ? i.apply(null, arguments) : i({}); return (e = e && "object" == typeof e && !Array.isArray(e) ? [e] : ht(e)) && (0 === e.length || 1 === e.length && e[0].isComment) ? void 0 : e; }; return i.proxy && Object.defineProperty(e, t, { get: n, enumerable: !0, configurable: !0 }), n; } function yt(e, t) { return function () { return e[t]; }; } function bt(e, t) {
        var i, n, r, o, s; if (Array.isArray(e) || "string" == typeof e)
            for (i = new Array(e.length), n = 0, r = e.length; n < r; n++)
                i[n] = t(e[n], n);
        else if ("number" == typeof e)
            for (i = new Array(e), n = 0; n < e; n++)
                i[n] = t(n + 1, n);
        else if (l(e))
            if (ue && e[Symbol.iterator]) {
                i = [];
                for (var c = e[Symbol.iterator](), u = c.next(); !u.done;)
                    i.push(t(u.value, i.length)), u = c.next();
            }
            else
                for (o = Object.keys(e), i = new Array(o.length), n = 0, r = o.length; n < r; n++)
                    s = o[n], i[n] = t(e[s], s, n); return a(i) || (i = []), i._isVList = !0, i;
        } function xt(e, t, i, n) { var r, a = this.$scopedSlots[e]; a ? (i = i || {}, n && (i = L(L({}, n), i)), r = a(i) || t) : r = this.$slots[e] || t; var o = i && i.slot; return o ? this.$createElement("template", { slot: o }, r) : r; } function _t(e) { return Ge(this.$options, "filters", e) || D; } function wt(e, t) { return Array.isArray(e) ? -1 === e.indexOf(t) : e !== t; } function Tt(e, t, i, n, r) { var a = U.keyCodes[t] || i; return r && n && !U.keyCodes[t] ? wt(r, n) : a ? wt(a, e) : n ? E(n) !== t : void 0; } function Mt(e, t, i, n, r) {
        if (i)
            if (l(i)) {
                var a;
                Array.isArray(i) && (i = R(i));
                var o = function (o) {
                if ("class" === o || "style" === o || y(o))
                    a = e;
                else {
                    var s = e.attrs && e.attrs.type;
                    a = n || U.mustUseProp(t, s, o) ? e.domProps || (e.domProps = {}) : e.attrs || (e.attrs = {});
                } var l = M(o), c = E(o); l in a || c in a || (a[o] = i[o], r && ((e.on || (e.on = {}))["update:" + o] = function (e) { i[o] = e; }));
                };
                for (var s in i)
                    o(s);
            }
            else
                ; return e;
        } function At(e, t) { var i = this._staticTrees || (this._staticTrees = []), n = i[e]; return n && !t ? n : (Et(n = i[e] = this.$options.staticRenderFns[e].call(this._renderProxy, null, this), "__static__" + e, !1), n); } function St(e, t, i) { return Et(e, "__once__" + t + (i ? "_" + i : ""), !0), e; } function Et(e, t, i) {
        if (Array.isArray(e))
            for (var n = 0; n < e.length; n++)
                e[n] && "string" != typeof e[n] && Pt(e[n], t + "_" + n, i);
        else
            Pt(e, t, i);
        } function Pt(e, t, i) { e.isStatic = !0, e.key = t, e.isOnce = i; } function Ct(e, t) {
        if (t)
            if (u(t)) {
                var i = e.on = e.on ? L({}, e.on) : {};
                for (var n in t) {
                    var r = i[n], a = t[n];
                    i[n] = r ? [].concat(r, a) : a;
                }
            }
            else
                ; return e;
        } function Lt(e, t, i, n) {
        t = t || { $stable: !i }; for (var r = 0; r < e.length; r++) {
            var a = e[r];
            Array.isArray(a) ? Lt(a, t, i) : a && (a.proxy && (a.fn.proxy = !0), t[a.key] = a.fn);
        } return n && (t.$key = n), t;
        } function Rt(e, t) {
        for (var i = 0; i < t.length; i += 2) {
            var n = t[i];
            "string" == typeof n && n && (e[t[i]] = t[i + 1]);
        } return e;
        } function It(e, t) { return "string" == typeof e ? t + e : e; } function Ot(e) { e._o = St, e._n = m, e._s = f, e._l = bt, e._t = xt, e._q = F, e._i = k, e._m = At, e._f = _t, e._k = Tt, e._b = Mt, e._v = xe, e._e = be, e._u = Lt, e._g = Ct, e._d = Rt, e._p = It; } function Dt(e, t, i, r, a) { var s, l = this, c = a.options; _(r, "_uid") ? (s = Object.create(r))._original = r : (s = r, r = r._original); var u = o(c._compiled), h = !u; this.data = e, this.props = t, this.children = i, this.parent = r, this.listeners = e.on || n, this.injections = pt(c.inject, r), this.slots = function () { return l.$slots || vt(e.scopedSlots, l.$slots = ft(i, r)), l.$slots; }, Object.defineProperty(this, "scopedSlots", { enumerable: !0, get: function () { return vt(e.scopedSlots, this.slots()); } }), u && (this.$options = c, this.$slots = this.slots(), this.$scopedSlots = vt(e.scopedSlots, this.$slots)), c._scopeId ? this._c = function (e, t, i, n) { var a = Vt(s, e, t, i, n, h); return a && !Array.isArray(a) && (a.fnScopeId = c._scopeId, a.fnContext = r), a; } : this._c = function (e, t, i, n) { return Vt(s, e, t, i, n, h); }; } function Ft(e, t, i, n, r) { var a = _e(e); return a.fnContext = i, a.fnOptions = n, t.slot && ((a.data || (a.data = {})).slot = t.slot), a; } function kt(e, t) {
        for (var i in t)
            e[M(i)] = t[i];
        } Ot(Dt.prototype); var Nt = {
        init: function (e, t) {
        if (e.componentInstance && !e.componentInstance._isDestroyed && e.data.keepAlive) {
            var i = e;
            Nt.prepatch(i, i);
        }
        else {
            (e.componentInstance = function (e, t) { var i = { _isComponent: !0, _parentVnode: e, parent: t }, n = e.data.inlineTemplate; a(n) && (i.render = n.render, i.staticRenderFns = n.staticRenderFns); return new e.componentOptions.Ctor(i); } (e, Jt)).$mount(t ? e.elm : void 0, t);
        }
        }, prepatch: function (e, t) {
        var i = t.componentOptions; !function (e, t, i, r, a) {
        0; var o = r.data.scopedSlots, s = e.$scopedSlots, l = !!(o && !o.$stable || s !== n && !s.$stable || o && e.$scopedSlots.$key !== o.$key), c = !!(a || e.$options._renderChildren || l); e.$options._parentVnode = r, e.$vnode = r, e._vnode && (e._vnode.parent = r); if (e.$options._renderChildren = a, e.$attrs = r.data.attrs || n, e.$listeners = i || n, t && e.$options.props) {
            Se(!1);
            for (var u = e._props, h = e.$options._propKeys || [], d = 0; d < h.length; d++) {
                var p = h[d], f = e.$options.props;
                u[p] = He(p, f, t, e);
            }
            Se(!0), e.$options.propsData = t;
        } i = i || n; var m = e.$options._parentListeners; e.$options._parentListeners = i, Kt(e, i, m), c && (e.$slots = ft(a, r.context), e.$forceUpdate()); 0;
        } (t.componentInstance = e.componentInstance, i.propsData, i.listeners, t, i.children);
        }, insert: function (e) { var t, i = e.context, n = e.componentInstance; n._isMounted || (n._isMounted = !0, ni(n, "mounted")), e.data.keepAlive && (i._isMounted ? ((t = n)._inactive = !1, ai.push(t)) : ii(n, !0)); }, destroy: function (e) {
        var t = e.componentInstance; t._isDestroyed || (e.data.keepAlive ? function e(t, i) {
        if (i && (t._directInactive = !0, ti(t)))
            return; if (!t._inactive) {
                t._inactive = !0;
                for (var n = 0; n < t.$children.length; n++)
                    e(t.$children[n]);
                ni(t, "deactivated");
            }
        } (t, !0) : t.$destroy());
        }
        }, Bt = Object.keys(Nt); function Gt(e, t, i, s, c) {
        if (!r(e)) {
            var u = i.$options._base;
            if (l(e) && (e = u.extend(e)), "function" == typeof e) {
                var h;
                if (r(e.cid) && void 0 === (e = function (e, t) {
                if (o(e.error) && a(e.errorComp))
                    return e.errorComp; if (a(e.resolved))
                        return e.resolved; var i = Wt; i && a(e.owners) && -1 === e.owners.indexOf(i) && e.owners.push(i); if (o(e.loading) && a(e.loadingComp))
                        return e.loadingComp; if (i && !a(e.owners)) {
                            var n = e.owners = [i], s = !0, c = null, u = null;
                            i.$on("hook:destroyed", (function () { return b(n, i); }));
                            var h = function (e) {
                            for (var t = 0, i = n.length; t < i; t++)
                                n[t].$forceUpdate(); e && (n.length = 0, null !== c && (clearTimeout(c), c = null), null !== u && (clearTimeout(u), u = null));
                            }, d = N((function (i) { e.resolved = Xt(i, t), s ? n.length = 0 : h(!0); })), f = N((function (t) { a(e.errorComp) && (e.error = !0, h(!0)); })), m = e(d, f);
                            return l(m) && (p(m) ? r(e.resolved) && m.then(d, f) : p(m.component) && (m.component.then(d, f), a(m.error) && (e.errorComp = Xt(m.error, t)), a(m.loading) && (e.loadingComp = Xt(m.loading, t), 0 === m.delay ? e.loading = !0 : c = setTimeout((function () { c = null, r(e.resolved) && r(e.error) && (e.loading = !0, h(!1)); }), m.delay || 200)), a(m.timeout) && (u = setTimeout((function () { u = null, r(e.resolved) && f(null); }), m.timeout)))), s = !1, e.loading ? e.loadingComp : e.resolved;
                        }
                } (h = e, u)))
                    return function (e, t, i, n, r) { var a = be(); return a.asyncFactory = e, a.asyncMeta = { data: t, context: i, children: n, tag: r }, a; } (h, t, i, s, c);
                t = t || {}, Ai(e), a(t.model) && function (e, t) { var i = e.model && e.model.prop || "value", n = e.model && e.model.event || "input"; (t.attrs || (t.attrs = {}))[i] = t.model.value; var r = t.on || (t.on = {}), o = r[n], s = t.model.callback; a(o) ? (Array.isArray(o) ? -1 === o.indexOf(s) : o !== s) && (r[n] = [s].concat(o)) : r[n] = s; } (e.options, t);
                var d = function (e, t, i) {
                var n = t.options.props; if (!r(n)) {
                    var o = {}, s = e.attrs, l = e.props;
                    if (a(s) || a(l))
                        for (var c in n) {
                            var u = E(c);
                            ut(o, l, c, u, !0) || ut(o, s, c, u, !1);
                        }
                    return o;
                }
                } (t, e);
                if (o(e.options.functional))
                    return function (e, t, i, r, o) {
                    var s = e.options, l = {}, c = s.props; if (a(c))
                        for (var u in c)
                            l[u] = He(u, c, t || n);
                    else
                        a(i.attrs) && kt(l, i.attrs), a(i.props) && kt(l, i.props); var h = new Dt(i, l, o, r, e), d = s.render.call(null, h._c, h); if (d instanceof ge)
                            return Ft(d, i, h.parent, s, h); if (Array.isArray(d)) {
                                for (var p = ht(d) || [], f = new Array(p.length), m = 0; m < p.length; m++)
                                    f[m] = Ft(p[m], i, h.parent, s, h);
                                return f;
                            }
                    } (e, d, t, i, s);
                var f = t.on;
                if (t.on = t.nativeOn, o(e.options.abstract)) {
                    var m = t.slot;
                    t = {}, m && (t.slot = m);
                }
                !function (e) {
                for (var t = e.hook || (e.hook = {}), i = 0; i < Bt.length; i++) {
                    var n = Bt[i], r = t[n], a = Nt[n];
                    r === a || r && r._merged || (t[n] = r ? Ht(a, r) : a);
                }
                } (t);
                var v = e.options.name || c;
                return new ge("vue-component-" + e.cid + (v ? "-" + v : ""), t, void 0, void 0, void 0, i, { Ctor: e, propsData: d, listeners: f, tag: c, children: s }, h);
            }
        }
        } function Ht(e, t) { var i = function (i, n) { e(i, n), t(i, n); }; return i._merged = !0, i; } var Ut = 1, zt = 2; function Vt(e, t, i, n, c, u) {
        return (Array.isArray(i) || s(i)) && (c = n, n = i, i = void 0), o(u) && (c = zt), function (e, t, i, n, s) {
        if (a(i) && a(i.__ob__))
            return be(); a(i) && a(i.is) && (t = i.is); if (!t)
                return be(); 0; Array.isArray(n) && "function" == typeof n[0] && ((i = i || {}).scopedSlots = { default: n[0] }, n.length = 0); s === zt ? n = ht(n) : s === Ut && (n = function (e) {
                for (var t = 0; t < e.length; t++)
                    if (Array.isArray(e[t]))
                        return Array.prototype.concat.apply([], e); return e;
                } (n)); var c, u; if ("string" == typeof t) {
                    var h;
                    u = e.$vnode && e.$vnode.ns || U.getTagNamespace(t), c = U.isReservedTag(t) ? new ge(U.parsePlatformTagName(t), i, n, void 0, void 0, e) : i && i.pre || !a(h = Ge(e.$options, "components", t)) ? new ge(t, i, n, void 0, void 0, e) : Gt(h, i, e, n, t);
                }
            else
                c = Gt(t, i, e, n); return Array.isArray(c) ? c : a(c) ? (a(u) && function e(t, i, n) {
                t.ns = i, "foreignObject" === t.tag && (i = void 0, n = !0); if (a(t.children))
                    for (var s = 0, l = t.children.length; s < l; s++) {
                        var c = t.children[s];
                        a(c.tag) && (r(c.ns) || o(n) && "svg" !== c.tag) && e(c, i, n);
                    }
                } (c, u), a(i) && function (e) { l(e.style) && at(e.style); l(e.class) && at(e.class); } (i), c) : be();
        } (e, t, i, n, c);
        } var jt, Wt = null; function Xt(e, t) { return (e.__esModule || ue && "Module" === e[Symbol.toStringTag]) && (e = e.default), l(e) ? t.extend(e) : e; } function Yt(e) { return e.isComment && e.asyncFactory; } function Qt(e) {
        if (Array.isArray(e))
            for (var t = 0; t < e.length; t++) {
                var i = e[t];
                if (a(i) && (a(i.componentOptions) || Yt(i)))
                    return i;
            }
        } function qt(e, t) { jt.$on(e, t); } function $t(e, t) { jt.$off(e, t); } function Zt(e, t) { var i = jt; return function n() { var r = t.apply(null, arguments); null !== r && i.$off(e, n); }; } function Kt(e, t, i) { jt = e, lt(t, i || {}, qt, $t, Zt, e), jt = void 0; } var Jt = null; function ei(e) { var t = Jt; return Jt = e, function () { Jt = t; }; } function ti(e) {
        for (; e && (e = e.$parent);)
            if (e._inactive)
                return !0; return !1;
        } function ii(e, t) {
        if (t) {
            if (e._directInactive = !1, ti(e))
                return;
        }
        else if (e._directInactive)
            return; if (e._inactive || null === e._inactive) {
                e._inactive = !1;
                for (var i = 0; i < e.$children.length; i++)
                    ii(e.$children[i]);
                ni(e, "activated");
            }
        } function ni(e, t) {
        me(); var i = e.$options[t], n = t + " hook"; if (i)
            for (var r = 0, a = i.length; r < a; r++)
                We(i[r], e, null, e, n); e._hasHookEvent && e.$emit("hook:" + t), ve();
        } var ri = [], ai = [], oi = {}, si = !1, li = !1, ci = 0; var ui = 0, hi = Date.now; if (Q && !K) {
            var di = window.performance;
            di && "function" == typeof di.now && hi() > document.createEvent("Event").timeStamp && (hi = function () { return di.now(); });
        } function pi() {
        var e, t; for (ui = hi(), li = !0, ri.sort((function (e, t) { return e.id - t.id; })), ci = 0; ci < ri.length; ci++)
            (e = ri[ci]).before && e.before(), t = e.id, oi[t] = null, e.run(); var i = ai.slice(), n = ri.slice(); ci = ri.length = ai.length = 0, oi = {}, si = li = !1, function (e) {
            for (var t = 0; t < e.length; t++)
                e[t]._inactive = !0, ii(e[t], !0);
            } (i), function (e) {
            var t = e.length; for (; t--;) {
                var i = e[t], n = i.vm;
                n._watcher === i && n._isMounted && !n._isDestroyed && ni(n, "updated");
            }
            } (n), se && U.devtools && se.emit("flush");
        } var fi = 0, mi = function (e, t, i, n, r) {
        this.vm = e, r && (e._watcher = this), e._watchers.push(this), n ? (this.deep = !!n.deep, this.user = !!n.user, this.lazy = !!n.lazy, this.sync = !!n.sync, this.before = n.before) : this.deep = this.user = this.lazy = this.sync = !1, this.cb = i, this.id = ++fi, this.active = !0, this.dirty = this.lazy, this.deps = [], this.newDeps = [], this.depIds = new ce, this.newDepIds = new ce, this.expression = "", "function" == typeof t ? this.getter = t : (this.getter = function (e) {
        if (!W.test(e)) {
            var t = e.split(".");
            return function (e) {
            for (var i = 0; i < t.length; i++) {
                if (!e)
                    return;
                e = e[t[i]];
            } return e;
            };
        }
        } (t), this.getter || (this.getter = I)), this.value = this.lazy ? void 0 : this.get();
        }; mi.prototype.get = function () {
        var e; me(this); var t = this.vm; try {
            e = this.getter.call(t, t);
        }
            catch (e) {
                if (!this.user)
                    throw e;
                je(e, t, 'getter for watcher "' + this.expression + '"');
            }
            finally {
                this.deep && at(e), ve(), this.cleanupDeps();
            } return e;
        }, mi.prototype.addDep = function (e) { var t = e.id; this.newDepIds.has(t) || (this.newDepIds.add(t), this.newDeps.push(e), this.depIds.has(t) || e.addSub(this)); }, mi.prototype.cleanupDeps = function () {
        for (var e = this.deps.length; e--;) {
            var t = this.deps[e];
            this.newDepIds.has(t.id) || t.removeSub(this);
        } var i = this.depIds; this.depIds = this.newDepIds, this.newDepIds = i, this.newDepIds.clear(), i = this.deps, this.deps = this.newDeps, this.newDeps = i, this.newDeps.length = 0;
        }, mi.prototype.update = function () {
        this.lazy ? this.dirty = !0 : this.sync ? this.run() : function (e) {
        var t = e.id; if (null == oi[t]) {
            if (oi[t] = !0, li) {
                for (var i = ri.length - 1; i > ci && ri[i].id > e.id;)
                    i--;
                ri.splice(i + 1, 0, e);
            }
            else
                ri.push(e);
            si || (si = !0, nt(pi));
        }
        } (this);
        }, mi.prototype.run = function () {
        if (this.active) {
            var e = this.get();
            if (e !== this.value || l(e) || this.deep) {
                var t = this.value;
                if (this.value = e, this.user)
                    try {
                        this.cb.call(this.vm, e, t);
                    }
                    catch (e) {
                        je(e, this.vm, 'callback for watcher "' + this.expression + '"');
                    }
                else
                    this.cb.call(this.vm, e, t);
            }
        }
        }, mi.prototype.evaluate = function () { this.value = this.get(), this.dirty = !1; }, mi.prototype.depend = function () {
        for (var e = this.deps.length; e--;)
            this.deps[e].depend();
        }, mi.prototype.teardown = function () {
        if (this.active) {
            this.vm._isBeingDestroyed || b(this.vm._watchers, this);
            for (var e = this.deps.length; e--;)
                this.deps[e].removeSub(this);
            this.active = !1;
        }
        }; var vi = { enumerable: !0, configurable: !0, get: I, set: I }; function gi(e, t, i) { vi.get = function () { return this[t][i]; }, vi.set = function (e) { this[t][i] = e; }, Object.defineProperty(e, i, vi); } function yi(e) {
        e._watchers = []; var t = e.$options; t.props && function (e, t) {
        var i = e.$options.propsData || {}, n = e._props = {}, r = e.$options._propKeys = []; e.$parent && Se(!1); var a = function (a) { r.push(a); var o = He(a, t, i, e); Ce(n, a, o), a in e || gi(e, "_props", a); }; for (var o in t)
            a(o); Se(!0);
        } (e, t.props), t.methods && function (e, t) {
        e.$options.props; for (var i in t)
            e[i] = "function" != typeof t[i] ? I : P(t[i], e);
        } (e, t.methods), t.data ? function (e) {
        var t = e.$options.data; u(t = e._data = "function" == typeof t ? function (e, t) {
        me(); try {
            return e.call(t, t);
        }
            catch (e) {
                return je(e, t, "data()"), {};
            }
            finally {
                ve();
            }
        } (t, e) : t || {}) || (t = {}); var i = Object.keys(t), n = e.$options.props, r = (e.$options.methods, i.length); for (; r--;) {
            var a = i[r];
            0, n && _(n, a) || V(a) || gi(e, "_data", a);
        } Pe(t, !0);
        } (e) : Pe(e._data = {}, !0), t.computed && function (e, t) {
        var i = e._computedWatchers = Object.create(null), n = oe(); for (var r in t) {
            var a = t[r], o = "function" == typeof a ? a : a.get;
            0, n || (i[r] = new mi(e, o || I, I, bi)), r in e || xi(e, r, a);
        }
        } (e, t.computed), t.watch && t.watch !== ne && function (e, t) {
        for (var i in t) {
            var n = t[i];
            if (Array.isArray(n))
                for (var r = 0; r < n.length; r++)
                    Ti(e, i, n[r]);
            else
                Ti(e, i, n);
        }
        } (e, t.watch);
        } var bi = { lazy: !0 }; function xi(e, t, i) { var n = !oe(); "function" == typeof i ? (vi.get = n ? _i(t) : wi(i), vi.set = I) : (vi.get = i.get ? n && !1 !== i.cache ? _i(t) : wi(i.get) : I, vi.set = i.set || I), Object.defineProperty(e, t, vi); } function _i(e) {
        return function () {
        var t = this._computedWatchers && this._computedWatchers[e]; if (t)
            return t.dirty && t.evaluate(), pe.target && t.depend(), t.value;
        };
        } function wi(e) { return function () { return e.call(this, this); }; } function Ti(e, t, i, n) { return u(i) && (n = i, i = i.handler), "string" == typeof i && (i = e[i]), e.$watch(t, i, n); } var Mi = 0; function Ai(e) {
        var t = e.options; if (e.super) {
            var i = Ai(e.super);
            if (i !== e.superOptions) {
                e.superOptions = i;
                var n = function (e) {
                var t, i = e.options, n = e.sealedOptions; for (var r in i)
                    i[r] !== n[r] && (t || (t = {}), t[r] = i[r]); return t;
                } (e);
                n && L(e.extendOptions, n), (t = e.options = Be(i, e.extendOptions)).name && (t.components[t.name] = e);
            }
        } return t;
        } function Si(e) { this._init(e); } function Ei(e) {
        e.cid = 0; var t = 1; e.extend = function (e) {
        e = e || {}; var i = this, n = i.cid, r = e._Ctor || (e._Ctor = {}); if (r[n])
            return r[n]; var a = e.name || i.options.name; var o = function (e) { this._init(e); }; return (o.prototype = Object.create(i.prototype)).constructor = o, o.cid = t++ , o.options = Be(i.options, e), o.super = i, o.options.props && function (e) {
            var t = e.options.props; for (var i in t)
                gi(e.prototype, "_props", i);
            } (o), o.options.computed && function (e) {
            var t = e.options.computed; for (var i in t)
                xi(e.prototype, i, t[i]);
            } (o), o.extend = i.extend, o.mixin = i.mixin, o.use = i.use, G.forEach((function (e) { o[e] = i[e]; })), a && (o.options.components[a] = o), o.superOptions = i.options, o.extendOptions = e, o.sealedOptions = L({}, o.options), r[n] = o, o;
        };
        } function Pi(e) { return e && (e.Ctor.options.name || e.tag); } function Ci(e, t) { return Array.isArray(e) ? e.indexOf(t) > -1 : "string" == typeof e ? e.split(",").indexOf(t) > -1 : !!h(e) && e.test(t); } function Li(e, t) {
        var i = e.cache, n = e.keys, r = e._vnode; for (var a in i) {
            var o = i[a];
            if (o) {
                var s = Pi(o.componentOptions);
                s && !t(s) && Ri(i, a, n, r);
            }
        }
        } function Ri(e, t, i, n) { var r = e[t]; !r || n && r.tag === n.tag || r.componentInstance.$destroy(), e[t] = null, b(i, t); } !function (e) {
        e.prototype._init = function (e) {
        var t = this; t._uid = Mi++ , t._isVue = !0, e && e._isComponent ? function (e, t) { var i = e.$options = Object.create(e.constructor.options), n = t._parentVnode; i.parent = t.parent, i._parentVnode = n; var r = n.componentOptions; i.propsData = r.propsData, i._parentListeners = r.listeners, i._renderChildren = r.children, i._componentTag = r.tag, t.render && (i.render = t.render, i.staticRenderFns = t.staticRenderFns); } (t, e) : t.$options = Be(Ai(t.constructor), e || {}, t), t._renderProxy = t, t._self = t, function (e) {
        var t = e.$options, i = t.parent; if (i && !t.abstract) {
            for (; i.$options.abstract && i.$parent;)
                i = i.$parent;
            i.$children.push(e);
        } e.$parent = i, e.$root = i ? i.$root : e, e.$children = [], e.$refs = {}, e._watcher = null, e._inactive = null, e._directInactive = !1, e._isMounted = !1, e._isDestroyed = !1, e._isBeingDestroyed = !1;
        } (t), function (e) { e._events = Object.create(null), e._hasHookEvent = !1; var t = e.$options._parentListeners; t && Kt(e, t); } (t), function (e) { e._vnode = null, e._staticTrees = null; var t = e.$options, i = e.$vnode = t._parentVnode, r = i && i.context; e.$slots = ft(t._renderChildren, r), e.$scopedSlots = n, e._c = function (t, i, n, r) { return Vt(e, t, i, n, r, !1); }, e.$createElement = function (t, i, n, r) { return Vt(e, t, i, n, r, !0); }; var a = i && i.data; Ce(e, "$attrs", a && a.attrs || n, null, !0), Ce(e, "$listeners", t._parentListeners || n, null, !0); } (t), ni(t, "beforeCreate"), function (e) { var t = pt(e.$options.inject, e); t && (Se(!1), Object.keys(t).forEach((function (i) { Ce(e, i, t[i]); })), Se(!0)); } (t), yi(t), function (e) { var t = e.$options.provide; t && (e._provided = "function" == typeof t ? t.call(e) : t); } (t), ni(t, "created"), t.$options.el && t.$mount(t.$options.el);
        };
        } (Si), function (e) {
        var t = { get: function () { return this._data; } }, i = { get: function () { return this._props; } }; Object.defineProperty(e.prototype, "$data", t), Object.defineProperty(e.prototype, "$props", i), e.prototype.$set = Le, e.prototype.$delete = Re, e.prototype.$watch = function (e, t, i) {
        if (u(t))
            return Ti(this, e, t, i); (i = i || {}).user = !0; var n = new mi(this, e, t, i); if (i.immediate)
                try {
                    t.call(this, n.value);
                }
                catch (e) {
                    je(e, this, 'callback for immediate watcher "' + n.expression + '"');
                } return function () { n.teardown(); };
        };
        } (Si), function (e) {
        var t = /^hook:/; e.prototype.$on = function (e, i) {
        var n = this; if (Array.isArray(e))
            for (var r = 0, a = e.length; r < a; r++)
                n.$on(e[r], i);
        else
            (n._events[e] || (n._events[e] = [])).push(i), t.test(e) && (n._hasHookEvent = !0); return n;
        }, e.prototype.$once = function (e, t) { var i = this; function n() { i.$off(e, n), t.apply(i, arguments); } return n.fn = t, i.$on(e, n), i; }, e.prototype.$off = function (e, t) {
        var i = this; if (!arguments.length)
            return i._events = Object.create(null), i; if (Array.isArray(e)) {
                for (var n = 0, r = e.length; n < r; n++)
                    i.$off(e[n], t);
                return i;
            } var a, o = i._events[e]; if (!o)
                return i; if (!t)
                return i._events[e] = null, i; for (var s = o.length; s--;)
                if ((a = o[s]) === t || a.fn === t) {
                    o.splice(s, 1);
                    break;
                } return i;
        }, e.prototype.$emit = function (e) {
        var t = this, i = t._events[e]; if (i) {
            i = i.length > 1 ? C(i) : i;
            for (var n = C(arguments, 1), r = 'event handler for "' + e + '"', a = 0, o = i.length; a < o; a++)
                We(i[a], t, n, t, r);
        } return t;
        };
        } (Si), function (e) {
        e.prototype._update = function (e, t) { var i = this, n = i.$el, r = i._vnode, a = ei(i); i._vnode = e, i.$el = r ? i.__patch__(r, e) : i.__patch__(i.$el, e, t, !1), a(), n && (n.__vue__ = null), i.$el && (i.$el.__vue__ = i), i.$vnode && i.$parent && i.$vnode === i.$parent._vnode && (i.$parent.$el = i.$el); }, e.prototype.$forceUpdate = function () { this._watcher && this._watcher.update(); }, e.prototype.$destroy = function () {
        var e = this; if (!e._isBeingDestroyed) {
            ni(e, "beforeDestroy"), e._isBeingDestroyed = !0;
            var t = e.$parent;
            !t || t._isBeingDestroyed || e.$options.abstract || b(t.$children, e), e._watcher && e._watcher.teardown();
            for (var i = e._watchers.length; i--;)
                e._watchers[i].teardown();
            e._data.__ob__ && e._data.__ob__.vmCount-- , e._isDestroyed = !0, e.__patch__(e._vnode, null), ni(e, "destroyed"), e.$off(), e.$el && (e.$el.__vue__ = null), e.$vnode && (e.$vnode.parent = null);
        }
        };
        } (Si), function (e) {
        Ot(e.prototype), e.prototype.$nextTick = function (e) { return nt(e, this); }, e.prototype._render = function () {
        var e, t = this, i = t.$options, n = i.render, r = i._parentVnode; r && (t.$scopedSlots = vt(r.data.scopedSlots, t.$slots, t.$scopedSlots)), t.$vnode = r; try {
            Wt = t, e = n.call(t._renderProxy, t.$createElement);
        }
            catch (i) {
                je(i, t, "render"), e = t._vnode;
            }
            finally {
                Wt = null;
            } return Array.isArray(e) && 1 === e.length && (e = e[0]), e instanceof ge || (e = be()), e.parent = r, e;
        };
        } (Si); var Ii = [String, RegExp, Array], Oi = {
        KeepAlive: {
        name: "keep-alive", abstract: !0, props: { include: Ii, exclude: Ii, max: [String, Number] }, created: function () { this.cache = Object.create(null), this.keys = []; }, destroyed: function () {
        for (var e in this.cache)
            Ri(this.cache, e, this.keys);
        }, mounted: function () { var e = this; this.$watch("include", (function (t) { Li(e, (function (e) { return Ci(t, e); })); })), this.$watch("exclude", (function (t) { Li(e, (function (e) { return !Ci(t, e); })); })); }, render: function () {
        var e = this.$slots.default, t = Qt(e), i = t && t.componentOptions; if (i) {
            var n = Pi(i), r = this.include, a = this.exclude;
            if (r && (!n || !Ci(r, n)) || a && n && Ci(a, n))
                return t;
            var o = this.cache, s = this.keys, l = null == t.key ? i.Ctor.cid + (i.tag ? "::" + i.tag : "") : t.key;
            o[l] ? (t.componentInstance = o[l].componentInstance, b(s, l), s.push(l)) : (o[l] = t, s.push(l), this.max && s.length > parseInt(this.max) && Ri(o, s[0], s, this._vnode)), t.data.keepAlive = !0;
        } return t || e && e[0];
        }
        }
        }; !function (e) {
        var t = { get: function () { return U; } }; Object.defineProperty(e, "config", t), e.util = { warn: he, extend: L, mergeOptions: Be, defineReactive: Ce }, e.set = Le, e.delete = Re, e.nextTick = nt, e.observable = function (e) { return Pe(e), e; }, e.options = Object.create(null), G.forEach((function (t) { e.options[t + "s"] = Object.create(null); })), e.options._base = e, L(e.options.components, Oi), function (e) {
        e.use = function (e) {
        var t = this._installedPlugins || (this._installedPlugins = []); if (t.indexOf(e) > -1)
            return this; var i = C(arguments, 1); return i.unshift(this), "function" == typeof e.install ? e.install.apply(e, i) : "function" == typeof e && e.apply(null, i), t.push(e), this;
        };
        } (e), function (e) { e.mixin = function (e) { return this.options = Be(this.options, e), this; }; } (e), Ei(e), function (e) { G.forEach((function (t) { e[t] = function (e, i) { return i ? ("component" === t && u(i) && (i.name = i.name || e, i = this.options._base.extend(i)), "directive" === t && "function" == typeof i && (i = { bind: i, update: i }), this.options[t + "s"][e] = i, i) : this.options[t + "s"][e]; }; })); } (e);
        } (Si), Object.defineProperty(Si.prototype, "$isServer", { get: oe }), Object.defineProperty(Si.prototype, "$ssrContext", { get: function () { return this.$vnode && this.$vnode.ssrContext; } }), Object.defineProperty(Si, "FunctionalRenderContext", { value: Dt }), Si.version = "2.6.10"; var Di = v("style,class"), Fi = v("input,textarea,option,select,progress"), ki = function (e, t, i) { return "value" === i && Fi(e) && "button" !== t || "selected" === i && "option" === e || "checked" === i && "input" === e || "muted" === i && "video" === e; }, Ni = v("contenteditable,draggable,spellcheck"), Bi = v("events,caret,typing,plaintext-only"), Gi = function (e, t) { return ji(t) || "false" === t ? "false" : "contenteditable" === e && Bi(t) ? t : "true"; }, Hi = v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"), Ui = "http://www.w3.org/1999/xlink", zi = function (e) { return ":" === e.charAt(5) && "xlink" === e.slice(0, 5); }, Vi = function (e) { return zi(e) ? e.slice(6, e.length) : ""; }, ji = function (e) { return null == e || !1 === e; }; function Wi(e) {
        for (var t = e.data, i = e, n = e; a(n.componentInstance);)
            (n = n.componentInstance._vnode) && n.data && (t = Xi(n.data, t)); for (; a(i = i.parent);)
                i && i.data && (t = Xi(t, i.data)); return function (e, t) {
                if (a(e) || a(t))
                    return Yi(e, Qi(t)); return "";
                } (t.staticClass, t.class);
        } function Xi(e, t) { return { staticClass: Yi(e.staticClass, t.staticClass), class: a(e.class) ? [e.class, t.class] : t.class }; } function Yi(e, t) { return e ? t ? e + " " + t : e : t || ""; } function Qi(e) {
        return Array.isArray(e) ? function (e) {
        for (var t, i = "", n = 0, r = e.length; n < r; n++)
            a(t = Qi(e[n])) && "" !== t && (i && (i += " "), i += t); return i;
        } (e) : l(e) ? function (e) {
        var t = ""; for (var i in e)
            e[i] && (t && (t += " "), t += i); return t;
        } (e) : "string" == typeof e ? e : "";
        } var qi = { svg: "http://www.w3.org/2000/svg", math: "http://www.w3.org/1998/Math/MathML" }, $i = v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"), Zi = v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view", !0), Ki = function (e) { return $i(e) || Zi(e); }; function Ji(e) { return Zi(e) ? "svg" : "math" === e ? "math" : void 0; } var en = Object.create(null); var tn = v("text,number,password,search,email,tel,url"); function nn(e) {
        if ("string" == typeof e) {
            var t = document.querySelector(e);
            return t || document.createElement("div");
        } return e;
        } var rn = Object.freeze({ createElement: function (e, t) { var i = document.createElement(e); return "select" !== e ? i : (t.data && t.data.attrs && void 0 !== t.data.attrs.multiple && i.setAttribute("multiple", "multiple"), i); }, createElementNS: function (e, t) { return document.createElementNS(qi[e], t); }, createTextNode: function (e) { return document.createTextNode(e); }, createComment: function (e) { return document.createComment(e); }, insertBefore: function (e, t, i) { e.insertBefore(t, i); }, removeChild: function (e, t) { e.removeChild(t); }, appendChild: function (e, t) { e.appendChild(t); }, parentNode: function (e) { return e.parentNode; }, nextSibling: function (e) { return e.nextSibling; }, tagName: function (e) { return e.tagName; }, setTextContent: function (e, t) { e.textContent = t; }, setStyleScope: function (e, t) { e.setAttribute(t, ""); } }), an = { create: function (e, t) { on(t); }, update: function (e, t) { e.data.ref !== t.data.ref && (on(e, !0), on(t)); }, destroy: function (e) { on(e, !0); } }; function on(e, t) {
        var i = e.data.ref; if (a(i)) {
            var n = e.context, r = e.componentInstance || e.elm, o = n.$refs;
            t ? Array.isArray(o[i]) ? b(o[i], r) : o[i] === r && (o[i] = void 0) : e.data.refInFor ? Array.isArray(o[i]) ? o[i].indexOf(r) < 0 && o[i].push(r) : o[i] = [r] : o[i] = r;
        }
        } var sn = new ge("", {}, []), ln = ["create", "activate", "update", "remove", "destroy"]; function cn(e, t) {
        return e.key === t.key && (e.tag === t.tag && e.isComment === t.isComment && a(e.data) === a(t.data) && function (e, t) {
        if ("input" !== e.tag)
            return !0; var i, n = a(i = e.data) && a(i = i.attrs) && i.type, r = a(i = t.data) && a(i = i.attrs) && i.type; return n === r || tn(n) && tn(r);
        } (e, t) || o(e.isAsyncPlaceholder) && e.asyncFactory === t.asyncFactory && r(t.asyncFactory.error));
        } function un(e, t, i) {
        var n, r, o = {}; for (n = t; n <= i; ++n)
            a(r = e[n].key) && (o[r] = n); return o;
        } var hn = { create: dn, update: dn, destroy: function (e) { dn(e, sn); } }; function dn(e, t) {
        (e.data.directives || t.data.directives) && function (e, t) {
        var i, n, r, a = e === sn, o = t === sn, s = fn(e.data.directives, e.context), l = fn(t.data.directives, t.context), c = [], u = []; for (i in l)
            n = s[i], r = l[i], n ? (r.oldValue = n.value, r.oldArg = n.arg, vn(r, "update", t, e), r.def && r.def.componentUpdated && u.push(r)) : (vn(r, "bind", t, e), r.def && r.def.inserted && c.push(r)); if (c.length) {
                var h = function () {
                for (var i = 0; i < c.length; i++)
                    vn(c[i], "inserted", t, e);
                };
                a ? ct(t, "insert", h) : h();
            } u.length && ct(t, "postpatch", (function () {
            for (var i = 0; i < u.length; i++)
                vn(u[i], "componentUpdated", t, e);
            })); if (!a)
                for (i in s)
                    l[i] || vn(s[i], "unbind", e, e, o);
        } (e, t);
        } var pn = Object.create(null); function fn(e, t) {
        var i, n, r = Object.create(null); if (!e)
            return r; for (i = 0; i < e.length; i++)
                (n = e[i]).modifiers || (n.modifiers = pn), r[mn(n)] = n, n.def = Ge(t.$options, "directives", n.name); return r;
        } function mn(e) { return e.rawName || e.name + "." + Object.keys(e.modifiers || {}).join("."); } function vn(e, t, i, n, r) {
        var a = e.def && e.def[t]; if (a)
            try {
                a(i.elm, e, i, n, r);
            }
            catch (n) {
                je(n, i.context, "directive " + e.name + " " + t + " hook");
            }
        } var gn = [an, hn]; function yn(e, t) {
        var i = t.componentOptions; if (!(a(i) && !1 === i.Ctor.options.inheritAttrs || r(e.data.attrs) && r(t.data.attrs))) {
            var n, o, s = t.elm, l = e.data.attrs || {}, c = t.data.attrs || {};
            for (n in a(c.__ob__) && (c = t.data.attrs = L({}, c)), c)
                o = c[n], l[n] !== o && bn(s, n, o);
            for (n in (K || ee) && c.value !== l.value && bn(s, "value", c.value), l)
                r(c[n]) && (zi(n) ? s.removeAttributeNS(Ui, Vi(n)) : Ni(n) || s.removeAttribute(n));
        }
        } function bn(e, t, i) { e.tagName.indexOf("-") > -1 ? xn(e, t, i) : Hi(t) ? ji(i) ? e.removeAttribute(t) : (i = "allowfullscreen" === t && "EMBED" === e.tagName ? "true" : t, e.setAttribute(t, i)) : Ni(t) ? e.setAttribute(t, Gi(t, i)) : zi(t) ? ji(i) ? e.removeAttributeNS(Ui, Vi(t)) : e.setAttributeNS(Ui, t, i) : xn(e, t, i); } function xn(e, t, i) {
        if (ji(i))
            e.removeAttribute(t);
        else {
            if (K && !J && "TEXTAREA" === e.tagName && "placeholder" === t && "" !== i && !e.__ieph) {
                var n = function (t) { t.stopImmediatePropagation(), e.removeEventListener("input", n); };
                e.addEventListener("input", n), e.__ieph = !0;
            }
            e.setAttribute(t, i);
        }
        } var _n = { create: yn, update: yn }; function wn(e, t) {
        var i = t.elm, n = t.data, o = e.data; if (!(r(n.staticClass) && r(n.class) && (r(o) || r(o.staticClass) && r(o.class)))) {
            var s = Wi(t), l = i._transitionClasses;
            a(l) && (s = Yi(s, Qi(l))), s !== i._prevClass && (i.setAttribute("class", s), i._prevClass = s);
        }
        } var Tn, Mn, An, Sn, En, Pn, Cn = { create: wn, update: wn }, Ln = /[\w).+\-_$\]]/; function Rn(e) {
        var t, i, n, r, a, o = !1, s = !1, l = !1, c = !1, u = 0, h = 0, d = 0, p = 0; for (n = 0; n < e.length; n++)
            if (i = t, t = e.charCodeAt(n), o)
                39 === t && 92 !== i && (o = !1);
            else if (s)
                34 === t && 92 !== i && (s = !1);
            else if (l)
                96 === t && 92 !== i && (l = !1);
            else if (c)
                47 === t && 92 !== i && (c = !1);
            else if (124 !== t || 124 === e.charCodeAt(n + 1) || 124 === e.charCodeAt(n - 1) || u || h || d) {
                switch (t) {
                    case 34:
                        s = !0;
                        break;
                    case 39:
                        o = !0;
                        break;
                    case 96:
                        l = !0;
                        break;
                    case 40:
                        d++;
                        break;
                    case 41:
                        d--;
                        break;
                    case 91:
                        h++;
                        break;
                    case 93:
                        h--;
                        break;
                    case 123:
                        u++;
                        break;
                    case 125: u--;
                }
                if (47 === t) {
                    for (var f = n - 1, m = void 0; f >= 0 && " " === (m = e.charAt(f)); f--)
                        ;
                    m && Ln.test(m) || (c = !0);
                }
            }
            else
                void 0 === r ? (p = n + 1, r = e.slice(0, n).trim()) : v(); function v() { (a || (a = [])).push(e.slice(p, n).trim()), p = n + 1; } if (void 0 === r ? r = e.slice(0, n).trim() : 0 !== p && v(), a)
                for (n = 0; n < a.length; n++)
                    r = In(r, a[n]); return r;
        } function In(e, t) {
        var i = t.indexOf("("); if (i < 0)
            return '_f("' + t + '")(' + e + ")"; var n = t.slice(0, i), r = t.slice(i + 1); return '_f("' + n + '")(' + e + (")" !== r ? "," + r : r);
        } function On(e, t) { console.error("[Vue compiler]: " + e); } function Dn(e, t) { return e ? e.map((function (e) { return e[t]; })).filter((function (e) { return e; })) : []; } function Fn(e, t, i, n, r) { (e.props || (e.props = [])).push(jn({ name: t, value: i, dynamic: r }, n)), e.plain = !1; } function kn(e, t, i, n, r) { (r ? e.dynamicAttrs || (e.dynamicAttrs = []) : e.attrs || (e.attrs = [])).push(jn({ name: t, value: i, dynamic: r }, n)), e.plain = !1; } function Nn(e, t, i, n) { e.attrsMap[t] = i, e.attrsList.push(jn({ name: t, value: i }, n)); } function Bn(e, t, i, n, r, a, o, s) { (e.directives || (e.directives = [])).push(jn({ name: t, rawName: i, value: n, arg: r, isDynamicArg: a, modifiers: o }, s)), e.plain = !1; } function Gn(e, t, i) { return i ? "_p(" + t + ',"' + e + '")' : e + t; } function Hn(e, t, i, r, a, o, s, l) { var c; (r = r || n).right ? l ? t = "(" + t + ")==='click'?'contextmenu':(" + t + ")" : "click" === t && (t = "contextmenu", delete r.right) : r.middle && (l ? t = "(" + t + ")==='click'?'mouseup':(" + t + ")" : "click" === t && (t = "mouseup")), r.capture && (delete r.capture, t = Gn("!", t, l)), r.once && (delete r.once, t = Gn("~", t, l)), r.passive && (delete r.passive, t = Gn("&", t, l)), r.native ? (delete r.native, c = e.nativeEvents || (e.nativeEvents = {})) : c = e.events || (e.events = {}); var u = jn({ value: i.trim(), dynamic: l }, s); r !== n && (u.modifiers = r); var h = c[t]; Array.isArray(h) ? a ? h.unshift(u) : h.push(u) : c[t] = h ? a ? [u, h] : [h, u] : u, e.plain = !1; } function Un(e, t, i) {
        var n = zn(e, ":" + t) || zn(e, "v-bind:" + t); if (null != n)
            return Rn(n); if (!1 !== i) {
                var r = zn(e, t);
                if (null != r)
                    return JSON.stringify(r);
            }
        } function zn(e, t, i) {
        var n; if (null != (n = e.attrsMap[t]))
            for (var r = e.attrsList, a = 0, o = r.length; a < o; a++)
                if (r[a].name === t) {
                    r.splice(a, 1);
                    break;
                } return i && delete e.attrsMap[t], n;
        } function Vn(e, t) {
        for (var i = e.attrsList, n = 0, r = i.length; n < r; n++) {
            var a = i[n];
            if (t.test(a.name))
                return i.splice(n, 1), a;
        }
        } function jn(e, t) { return t && (null != t.start && (e.start = t.start), null != t.end && (e.end = t.end)), e; } function Wn(e, t, i) { var n = i || {}, r = n.number, a = "$$v"; n.trim && (a = "(typeof $$v === 'string'? $$v.trim(): $$v)"), r && (a = "_n(" + a + ")"); var o = Xn(t, a); e.model = { value: "(" + t + ")", expression: JSON.stringify(t), callback: "function ($$v) {" + o + "}" }; } function Xn(e, t) {
        var i = function (e) {
        if (e = e.trim(), Tn = e.length, e.indexOf("[") < 0 || e.lastIndexOf("]") < Tn - 1)
            return (Sn = e.lastIndexOf(".")) > -1 ? { exp: e.slice(0, Sn), key: '"' + e.slice(Sn + 1) + '"' } : { exp: e, key: null }; Mn = e, Sn = En = Pn = 0; for (; !Qn();)
                qn(An = Yn()) ? Zn(An) : 91 === An && $n(An); return { exp: e.slice(0, En), key: e.slice(En + 1, Pn) };
        } (e); return null === i.key ? e + "=" + t : "$set(" + i.exp + ", " + i.key + ", " + t + ")";
        } function Yn() { return Mn.charCodeAt(++Sn); } function Qn() { return Sn >= Tn; } function qn(e) { return 34 === e || 39 === e; } function $n(e) {
        var t = 1; for (En = Sn; !Qn();)
            if (qn(e = Yn()))
                Zn(e);
            else if (91 === e && t++ , 93 === e && t-- , 0 === t) {
                Pn = Sn;
                break;
            }
        } function Zn(e) {
        for (var t = e; !Qn() && (e = Yn()) !== t;)
            ;
        } var Kn, Jn = "__r", er = "__c"; function tr(e, t, i) { var n = Kn; return function r() { var a = t.apply(null, arguments); null !== a && rr(e, r, i, n); }; } var ir = qe && !(ie && Number(ie[1]) <= 53); function nr(e, t, i, n) {
        if (ir) {
            var r = ui, a = t;
            t = a._wrapper = function (e) {
            if (e.target === e.currentTarget || e.timeStamp >= r || e.timeStamp <= 0 || e.target.ownerDocument !== document)
                return a.apply(this, arguments);
            };
        } Kn.addEventListener(e, t, re ? { capture: i, passive: n } : i);
        } function rr(e, t, i, n) { (n || Kn).removeEventListener(e, t._wrapper || t, i); } function ar(e, t) {
        if (!r(e.data.on) || !r(t.data.on)) {
            var i = t.data.on || {}, n = e.data.on || {};
            Kn = t.elm, function (e) {
            if (a(e[Jn])) {
                var t = K ? "change" : "input";
                e[t] = [].concat(e[Jn], e[t] || []), delete e[Jn];
            } a(e[er]) && (e.change = [].concat(e[er], e.change || []), delete e[er]);
            } (i), lt(i, n, nr, rr, tr, t.context), Kn = void 0;
        }
        } var or, sr = { create: ar, update: ar }; function lr(e, t) {
        if (!r(e.data.domProps) || !r(t.data.domProps)) {
            var i, n, o = t.elm, s = e.data.domProps || {}, l = t.data.domProps || {};
            for (i in a(l.__ob__) && (l = t.data.domProps = L({}, l)), s)
                i in l || (o[i] = "");
            for (i in l) {
                if (n = l[i], "textContent" === i || "innerHTML" === i) {
                    if (t.children && (t.children.length = 0), n === s[i])
                        continue;
                    1 === o.childNodes.length && o.removeChild(o.childNodes[0]);
                }
                if ("value" === i && "PROGRESS" !== o.tagName) {
                    o._value = n;
                    var c = r(n) ? "" : String(n);
                    cr(o, c) && (o.value = c);
                }
                else if ("innerHTML" === i && Zi(o.tagName) && r(o.innerHTML)) {
                    (or = or || document.createElement("div")).innerHTML = "<svg>" + n + "</svg>";
                    for (var u = or.firstChild; o.firstChild;)
                        o.removeChild(o.firstChild);
                    for (; u.firstChild;)
                        o.appendChild(u.firstChild);
                }
                else if (n !== s[i])
                    try {
                        o[i] = n;
                    }
                    catch (e) { }
            }
        }
        } function cr(e, t) {
        return !e.composing && ("OPTION" === e.tagName || function (e, t) {
        var i = !0; try {
            i = document.activeElement !== e;
        }
            catch (e) { } return i && e.value !== t;
        } (e, t) || function (e, t) {
        var i = e.value, n = e._vModifiers; if (a(n)) {
            if (n.number)
                return m(i) !== m(t);
            if (n.trim)
                return i.trim() !== t.trim();
        } return i !== t;
        } (e, t));
        } var ur = { create: lr, update: lr }, hr = w((function (e) {
        var t = {}, i = /:(.+)/; return e.split(/;(?![^(]*\))/g).forEach((function (e) {
        if (e) {
            var n = e.split(i);
            n.length > 1 && (t[n[0].trim()] = n[1].trim());
        }
        })), t;
        })); function dr(e) { var t = pr(e.style); return e.staticStyle ? L(e.staticStyle, t) : t; } function pr(e) { return Array.isArray(e) ? R(e) : "string" == typeof e ? hr(e) : e; } var fr, mr = /^--/, vr = /\s*!important$/, gr = function (e, t, i) {
        if (mr.test(t))
            e.style.setProperty(t, i);
        else if (vr.test(i))
            e.style.setProperty(E(t), i.replace(vr, ""), "important");
        else {
            var n = br(t);
            if (Array.isArray(i))
                for (var r = 0, a = i.length; r < a; r++)
                    e.style[n] = i[r];
            else
                e.style[n] = i;
        }
        }, yr = ["Webkit", "Moz", "ms"], br = w((function (e) {
        if (fr = fr || document.createElement("div").style, "filter" !== (e = M(e)) && e in fr)
            return e; for (var t = e.charAt(0).toUpperCase() + e.slice(1), i = 0; i < yr.length; i++) {
                var n = yr[i] + t;
                if (n in fr)
                    return n;
            }
        })); function xr(e, t) {
        var i = t.data, n = e.data; if (!(r(i.staticStyle) && r(i.style) && r(n.staticStyle) && r(n.style))) {
            var o, s, l = t.elm, c = n.staticStyle, u = n.normalizedStyle || n.style || {}, h = c || u, d = pr(t.data.style) || {};
            t.data.normalizedStyle = a(d.__ob__) ? L({}, d) : d;
            var p = function (e, t) {
            var i, n = {}; if (t)
                for (var r = e; r.componentInstance;)
                    (r = r.componentInstance._vnode) && r.data && (i = dr(r.data)) && L(n, i); (i = dr(e.data)) && L(n, i); for (var a = e; a = a.parent;)
                    a.data && (i = dr(a.data)) && L(n, i); return n;
            } (t, !0);
            for (s in h)
                r(p[s]) && gr(l, s, "");
            for (s in p)
                (o = p[s]) !== h[s] && gr(l, s, null == o ? "" : o);
        }
        } var _r = { create: xr, update: xr }, wr = /\s+/; function Tr(e, t) {
        if (t && (t = t.trim()))
            if (e.classList)
                t.indexOf(" ") > -1 ? t.split(wr).forEach((function (t) { return e.classList.add(t); })) : e.classList.add(t);
            else {
                var i = " " + (e.getAttribute("class") || "") + " ";
                i.indexOf(" " + t + " ") < 0 && e.setAttribute("class", (i + t).trim());
            }
        } function Mr(e, t) {
        if (t && (t = t.trim()))
            if (e.classList)
                t.indexOf(" ") > -1 ? t.split(wr).forEach((function (t) { return e.classList.remove(t); })) : e.classList.remove(t), e.classList.length || e.removeAttribute("class");
            else {
                for (var i = " " + (e.getAttribute("class") || "") + " ", n = " " + t + " "; i.indexOf(n) >= 0;)
                    i = i.replace(n, " ");
                (i = i.trim()) ? e.setAttribute("class", i) : e.removeAttribute("class");
            }
        } function Ar(e) {
        if (e) {
            if ("object" == typeof e) {
                var t = {};
                return !1 !== e.css && L(t, Sr(e.name || "v")), L(t, e), t;
            }
            return "string" == typeof e ? Sr(e) : void 0;
        }
        } var Sr = w((function (e) { return { enterClass: e + "-enter", enterToClass: e + "-enter-to", enterActiveClass: e + "-enter-active", leaveClass: e + "-leave", leaveToClass: e + "-leave-to", leaveActiveClass: e + "-leave-active" }; })), Er = Q && !J, Pr = "transition", Cr = "animation", Lr = "transition", Rr = "transitionend", Ir = "animation", Or = "animationend"; Er && (void 0 === window.ontransitionend && void 0 !== window.onwebkittransitionend && (Lr = "WebkitTransition", Rr = "webkitTransitionEnd"), void 0 === window.onanimationend && void 0 !== window.onwebkitanimationend && (Ir = "WebkitAnimation", Or = "webkitAnimationEnd")); var Dr = Q ? window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : setTimeout : function (e) { return e(); }; function Fr(e) { Dr((function () { Dr(e); })); } function kr(e, t) { var i = e._transitionClasses || (e._transitionClasses = []); i.indexOf(t) < 0 && (i.push(t), Tr(e, t)); } function Nr(e, t) { e._transitionClasses && b(e._transitionClasses, t), Mr(e, t); } function Br(e, t, i) {
        var n = Hr(e, t), r = n.type, a = n.timeout, o = n.propCount; if (!r)
            return i(); var s = r === Pr ? Rr : Or, l = 0, c = function () { e.removeEventListener(s, u), i(); }, u = function (t) { t.target === e && ++l >= o && c(); }; setTimeout((function () { l < o && c(); }), a + 1), e.addEventListener(s, u);
        } var Gr = /\b(transform|all)(,|$)/; function Hr(e, t) { var i, n = window.getComputedStyle(e), r = (n[Lr + "Delay"] || "").split(", "), a = (n[Lr + "Duration"] || "").split(", "), o = Ur(r, a), s = (n[Ir + "Delay"] || "").split(", "), l = (n[Ir + "Duration"] || "").split(", "), c = Ur(s, l), u = 0, h = 0; return t === Pr ? o > 0 && (i = Pr, u = o, h = a.length) : t === Cr ? c > 0 && (i = Cr, u = c, h = l.length) : h = (i = (u = Math.max(o, c)) > 0 ? o > c ? Pr : Cr : null) ? i === Pr ? a.length : l.length : 0, { type: i, timeout: u, propCount: h, hasTransform: i === Pr && Gr.test(n[Lr + "Property"]) }; } function Ur(e, t) {
        for (; e.length < t.length;)
            e = e.concat(e); return Math.max.apply(null, t.map((function (t, i) { return zr(t) + zr(e[i]); })));
        } function zr(e) { return 1e3 * Number(e.slice(0, -1).replace(",", ".")); } function Vr(e, t) {
        var i = e.elm; a(i._leaveCb) && (i._leaveCb.cancelled = !0, i._leaveCb()); var n = Ar(e.data.transition); if (!r(n) && !a(i._enterCb) && 1 === i.nodeType) {
            for (var o = n.css, s = n.type, c = n.enterClass, u = n.enterToClass, h = n.enterActiveClass, d = n.appearClass, p = n.appearToClass, f = n.appearActiveClass, v = n.beforeEnter, g = n.enter, y = n.afterEnter, b = n.enterCancelled, x = n.beforeAppear, _ = n.appear, w = n.afterAppear, T = n.appearCancelled, M = n.duration, A = Jt, S = Jt.$vnode; S && S.parent;)
                A = S.context, S = S.parent;
            var E = !A._isMounted || !e.isRootInsert;
            if (!E || _ || "" === _) {
                var P = E && d ? d : c, C = E && f ? f : h, L = E && p ? p : u, R = E && x || v, I = E && "function" == typeof _ ? _ : g, O = E && w || y, D = E && T || b, F = m(l(M) ? M.enter : M);
                0;
                var k = !1 !== o && !J, B = Xr(I), G = i._enterCb = N((function () { k && (Nr(i, L), Nr(i, C)), G.cancelled ? (k && Nr(i, P), D && D(i)) : O && O(i), i._enterCb = null; }));
                e.data.show || ct(e, "insert", (function () { var t = i.parentNode, n = t && t._pending && t._pending[e.key]; n && n.tag === e.tag && n.elm._leaveCb && n.elm._leaveCb(), I && I(i, G); })), R && R(i), k && (kr(i, P), kr(i, C), Fr((function () { Nr(i, P), G.cancelled || (kr(i, L), B || (Wr(F) ? setTimeout(G, F) : Br(i, s, G))); }))), e.data.show && (t && t(), I && I(i, G)), k || B || G();
            }
        }
        } function jr(e, t) {
        var i = e.elm; a(i._enterCb) && (i._enterCb.cancelled = !0, i._enterCb()); var n = Ar(e.data.transition); if (r(n) || 1 !== i.nodeType)
            return t(); if (!a(i._leaveCb)) {
                var o = n.css, s = n.type, c = n.leaveClass, u = n.leaveToClass, h = n.leaveActiveClass, d = n.beforeLeave, p = n.leave, f = n.afterLeave, v = n.leaveCancelled, g = n.delayLeave, y = n.duration, b = !1 !== o && !J, x = Xr(p), _ = m(l(y) ? y.leave : y);
                0;
                var w = i._leaveCb = N((function () { i.parentNode && i.parentNode._pending && (i.parentNode._pending[e.key] = null), b && (Nr(i, u), Nr(i, h)), w.cancelled ? (b && Nr(i, c), v && v(i)) : (t(), f && f(i)), i._leaveCb = null; }));
                g ? g(T) : T();
            } function T() { w.cancelled || (!e.data.show && i.parentNode && ((i.parentNode._pending || (i.parentNode._pending = {}))[e.key] = e), d && d(i), b && (kr(i, c), kr(i, h), Fr((function () { Nr(i, c), w.cancelled || (kr(i, u), x || (Wr(_) ? setTimeout(w, _) : Br(i, s, w))); }))), p && p(i, w), b || x || w()); }
        } function Wr(e) { return "number" == typeof e && !isNaN(e); } function Xr(e) {
        if (r(e))
            return !1; var t = e.fns; return a(t) ? Xr(Array.isArray(t) ? t[0] : t) : (e._length || e.length) > 1;
        } function Yr(e, t) { !0 !== t.data.show && Vr(t); } var Qr = function (e) {
        var t, i, n = {}, l = e.modules, c = e.nodeOps; for (t = 0; t < ln.length; ++t)
            for (n[ln[t]] = [], i = 0; i < l.length; ++i)
                a(l[i][ln[t]]) && n[ln[t]].push(l[i][ln[t]]); function u(e) { var t = c.parentNode(e); a(t) && c.removeChild(t, e); } function h(e, t, i, r, s, l, u) {
                if (a(e.elm) && a(l) && (e = l[u] = _e(e)), e.isRootInsert = !s, !function (e, t, i, r) {
                var s = e.data; if (a(s)) {
                    var l = a(e.componentInstance) && s.keepAlive;
                    if (a(s = s.hook) && a(s = s.init) && s(e, !1), a(e.componentInstance))
                        return d(e, t), p(i, e.elm, r), o(l) && function (e, t, i, r) {
                        var o, s = e; for (; s.componentInstance;)
                            if (s = s.componentInstance._vnode, a(o = s.data) && a(o = o.transition)) {
                                for (o = 0; o < n.activate.length; ++o)
                                    n.activate[o](sn, s);
                                t.push(s);
                                break;
                            } p(i, e.elm, r);
                        } (e, t, i, r), !0;
                }
                } (e, t, i, r)) {
                    var h = e.data, m = e.children, v = e.tag;
                    a(v) ? (e.elm = e.ns ? c.createElementNS(e.ns, v) : c.createElement(v, e), y(e), f(e, m, t), a(h) && g(e, t), p(i, e.elm, r)) : o(e.isComment) ? (e.elm = c.createComment(e.text), p(i, e.elm, r)) : (e.elm = c.createTextNode(e.text), p(i, e.elm, r));
                }
                } function d(e, t) { a(e.data.pendingInsert) && (t.push.apply(t, e.data.pendingInsert), e.data.pendingInsert = null), e.elm = e.componentInstance.$el, m(e) ? (g(e, t), y(e)) : (on(e), t.push(e)); } function p(e, t, i) { a(e) && (a(i) ? c.parentNode(i) === e && c.insertBefore(e, t, i) : c.appendChild(e, t)); } function f(e, t, i) {
                if (Array.isArray(t)) {
                    0;
                    for (var n = 0; n < t.length; ++n)
                        h(t[n], i, e.elm, null, !0, t, n);
                }
                else
                    s(e.text) && c.appendChild(e.elm, c.createTextNode(String(e.text)));
                } function m(e) {
                for (; e.componentInstance;)
                    e = e.componentInstance._vnode; return a(e.tag);
                } function g(e, i) {
                for (var r = 0; r < n.create.length; ++r)
                    n.create[r](sn, e); a(t = e.data.hook) && (a(t.create) && t.create(sn, e), a(t.insert) && i.push(e));
                } function y(e) {
                var t; if (a(t = e.fnScopeId))
                    c.setStyleScope(e.elm, t);
                else
                    for (var i = e; i;)
                        a(t = i.context) && a(t = t.$options._scopeId) && c.setStyleScope(e.elm, t), i = i.parent; a(t = Jt) && t !== e.context && t !== e.fnContext && a(t = t.$options._scopeId) && c.setStyleScope(e.elm, t);
                } function b(e, t, i, n, r, a) {
                for (; n <= r; ++n)
                    h(i[n], a, e, t, !1, i, n);
                } function x(e) {
                var t, i, r = e.data; if (a(r))
                    for (a(t = r.hook) && a(t = t.destroy) && t(e), t = 0; t < n.destroy.length; ++t)
                        n.destroy[t](e); if (a(t = e.children))
                        for (i = 0; i < e.children.length; ++i)
                            x(e.children[i]);
                } function _(e, t, i, n) {
                for (; i <= n; ++i) {
                    var r = t[i];
                    a(r) && (a(r.tag) ? (w(r), x(r)) : u(r.elm));
                }
                } function w(e, t) {
                if (a(t) || a(e.data)) {
                    var i, r = n.remove.length + 1;
                    for (a(t) ? t.listeners += r : t = function (e, t) { function i() { 0 == --i.listeners && u(e); } return i.listeners = t, i; } (e.elm, r), a(i = e.componentInstance) && a(i = i._vnode) && a(i.data) && w(i, t), i = 0; i < n.remove.length; ++i)
                        n.remove[i](e, t);
                    a(i = e.data.hook) && a(i = i.remove) ? i(e, t) : t();
                }
                else
                    u(e.elm);
                } function T(e, t, i, n) {
                for (var r = i; r < n; r++) {
                    var o = t[r];
                    if (a(o) && cn(e, o))
                        return r;
                }
                } function M(e, t, i, s, l, u) {
                if (e !== t) {
                    a(t.elm) && a(s) && (t = s[l] = _e(t));
                    var d = t.elm = e.elm;
                    if (o(e.isAsyncPlaceholder))
                        a(t.asyncFactory.resolved) ? E(e.elm, t, i) : t.isAsyncPlaceholder = !0;
                    else if (o(t.isStatic) && o(e.isStatic) && t.key === e.key && (o(t.isCloned) || o(t.isOnce)))
                        t.componentInstance = e.componentInstance;
                    else {
                        var p, f = t.data;
                        a(f) && a(p = f.hook) && a(p = p.prepatch) && p(e, t);
                        var v = e.children, g = t.children;
                        if (a(f) && m(t)) {
                            for (p = 0; p < n.update.length; ++p)
                                n.update[p](e, t);
                            a(p = f.hook) && a(p = p.update) && p(e, t);
                        }
                        r(t.text) ? a(v) && a(g) ? v !== g && function (e, t, i, n, o) {
                        var s, l, u, d = 0, p = 0, f = t.length - 1, m = t[0], v = t[f], g = i.length - 1, y = i[0], x = i[g], w = !o; for (0; d <= f && p <= g;)
                            r(m) ? m = t[++d] : r(v) ? v = t[--f] : cn(m, y) ? (M(m, y, n, i, p), m = t[++d], y = i[++p]) : cn(v, x) ? (M(v, x, n, i, g), v = t[--f], x = i[--g]) : cn(m, x) ? (M(m, x, n, i, g), w && c.insertBefore(e, m.elm, c.nextSibling(v.elm)), m = t[++d], x = i[--g]) : cn(v, y) ? (M(v, y, n, i, p), w && c.insertBefore(e, v.elm, m.elm), v = t[--f], y = i[++p]) : (r(s) && (s = un(t, d, f)), r(l = a(y.key) ? s[y.key] : T(y, t, d, f)) ? h(y, n, e, m.elm, !1, i, p) : cn(u = t[l], y) ? (M(u, y, n, i, p), t[l] = void 0, w && c.insertBefore(e, u.elm, m.elm)) : h(y, n, e, m.elm, !1, i, p), y = i[++p]); d > f ? b(e, r(i[g + 1]) ? null : i[g + 1].elm, i, p, g, n) : p > g && _(0, t, d, f);
                        } (d, v, g, i, u) : a(g) ? (a(e.text) && c.setTextContent(d, ""), b(d, null, g, 0, g.length - 1, i)) : a(v) ? _(0, v, 0, v.length - 1) : a(e.text) && c.setTextContent(d, "") : e.text !== t.text && c.setTextContent(d, t.text), a(f) && a(p = f.hook) && a(p = p.postpatch) && p(e, t);
                    }
                }
                } function A(e, t, i) {
                if (o(i) && a(e.parent))
                    e.parent.data.pendingInsert = t;
                else
                    for (var n = 0; n < t.length; ++n)
                        t[n].data.hook.insert(t[n]);
                } var S = v("attrs,class,staticClass,staticStyle,key"); function E(e, t, i, n) {
                var r, s = t.tag, l = t.data, c = t.children; if (n = n || l && l.pre, t.elm = e, o(t.isComment) && a(t.asyncFactory))
                    return t.isAsyncPlaceholder = !0, !0; if (a(l) && (a(r = l.hook) && a(r = r.init) && r(t, !0), a(r = t.componentInstance)))
                        return d(t, i), !0; if (a(s)) {
                            if (a(c))
                                if (e.hasChildNodes())
                                    if (a(r = l) && a(r = r.domProps) && a(r = r.innerHTML)) {
                                        if (r !== e.innerHTML)
                                            return !1;
                                    }
                                    else {
                                        for (var u = !0, h = e.firstChild, p = 0; p < c.length; p++) {
                                            if (!h || !E(h, c[p], i, n)) {
                                                u = !1;
                                                break;
                                            }
                                            h = h.nextSibling;
                                        }
                                        if (!u || h)
                                            return !1;
                                    }
                                else
                                    f(t, c, i);
                            if (a(l)) {
                                var m = !1;
                                for (var v in l)
                                    if (!S(v)) {
                                        m = !0, g(t, i);
                                        break;
                                    }
                                !m && l.class && at(l.class);
                            }
                        }
                    else
                        e.data !== t.text && (e.data = t.text); return !0;
                } return function (e, t, i, s) {
                if (!r(t)) {
                    var l, u = !1, d = [];
                    if (r(e))
                        u = !0, h(t, d);
                    else {
                        var p = a(e.nodeType);
                        if (!p && cn(e, t))
                            M(e, t, d, null, null, s);
                        else {
                            if (p) {
                                if (1 === e.nodeType && e.hasAttribute(B) && (e.removeAttribute(B), i = !0), o(i) && E(e, t, d))
                                    return A(t, d, !0), e;
                                l = e, e = new ge(c.tagName(l).toLowerCase(), {}, [], void 0, l);
                            }
                            var f = e.elm, v = c.parentNode(f);
                            if (h(t, d, f._leaveCb ? null : v, c.nextSibling(f)), a(t.parent))
                                for (var g = t.parent, y = m(t); g;) {
                                    for (var b = 0; b < n.destroy.length; ++b)
                                        n.destroy[b](g);
                                    if (g.elm = t.elm, y) {
                                        for (var w = 0; w < n.create.length; ++w)
                                            n.create[w](sn, g);
                                        var T = g.data.hook.insert;
                                        if (T.merged)
                                            for (var S = 1; S < T.fns.length; S++)
                                                T.fns[S]();
                                    }
                                    else
                                        on(g);
                                    g = g.parent;
                                }
                            a(v) ? _(0, [e], 0, 0) : a(e.tag) && x(e);
                        }
                    }
                    return A(t, d, u), t.elm;
                } a(e) && x(e);
                };
        } ({ nodeOps: rn, modules: [_n, Cn, sr, ur, _r, Q ? { create: Yr, activate: Yr, remove: function (e, t) { !0 !== e.data.show ? jr(e, t) : t(); } } : {}].concat(gn) }); J && document.addEventListener("selectionchange", (function () { var e = document.activeElement; e && e.vmodel && ia(e, "input"); })); var qr = {
        inserted: function (e, t, i, n) { "select" === i.tag ? (n.elm && !n.elm._vOptions ? ct(i, "postpatch", (function () { qr.componentUpdated(e, t, i); })) : $r(e, t, i.context), e._vOptions = [].map.call(e.options, Jr)) : ("textarea" === i.tag || tn(e.type)) && (e._vModifiers = t.modifiers, t.modifiers.lazy || (e.addEventListener("compositionstart", ea), e.addEventListener("compositionend", ta), e.addEventListener("change", ta), J && (e.vmodel = !0))); }, componentUpdated: function (e, t, i) {
        if ("select" === i.tag) {
            $r(e, t, i.context);
            var n = e._vOptions, r = e._vOptions = [].map.call(e.options, Jr);
            if (r.some((function (e, t) { return !F(e, n[t]); })))
                (e.multiple ? t.value.some((function (e) { return Kr(e, r); })) : t.value !== t.oldValue && Kr(t.value, r)) && ia(e, "change");
        }
        }
        }; function $r(e, t, i) { Zr(e, t, i), (K || ee) && setTimeout((function () { Zr(e, t, i); }), 0); } function Zr(e, t, i) {
        var n = t.value, r = e.multiple; if (!r || Array.isArray(n)) {
            for (var a, o, s = 0, l = e.options.length; s < l; s++)
                if (o = e.options[s], r)
                    a = k(n, Jr(o)) > -1, o.selected !== a && (o.selected = a);
                else if (F(Jr(o), n))
                    return void (e.selectedIndex !== s && (e.selectedIndex = s));
            r || (e.selectedIndex = -1);
        }
        } function Kr(e, t) { return t.every((function (t) { return !F(t, e); })); } function Jr(e) { return "_value" in e ? e._value : e.value; } function ea(e) { e.target.composing = !0; } function ta(e) { e.target.composing && (e.target.composing = !1, ia(e.target, "input")); } function ia(e, t) { var i = document.createEvent("HTMLEvents"); i.initEvent(t, !0, !0), e.dispatchEvent(i); } function na(e) { return !e.componentInstance || e.data && e.data.transition ? e : na(e.componentInstance._vnode); } var ra = { model: qr, show: { bind: function (e, t, i) { var n = t.value, r = (i = na(i)).data && i.data.transition, a = e.__vOriginalDisplay = "none" === e.style.display ? "" : e.style.display; n && r ? (i.data.show = !0, Vr(i, (function () { e.style.display = a; }))) : e.style.display = n ? a : "none"; }, update: function (e, t, i) { var n = t.value; !n != !t.oldValue && ((i = na(i)).data && i.data.transition ? (i.data.show = !0, n ? Vr(i, (function () { e.style.display = e.__vOriginalDisplay; })) : jr(i, (function () { e.style.display = "none"; }))) : e.style.display = n ? e.__vOriginalDisplay : "none"); }, unbind: function (e, t, i, n, r) { r || (e.style.display = e.__vOriginalDisplay); } } }, aa = { name: String, appear: Boolean, css: Boolean, mode: String, type: String, enterClass: String, leaveClass: String, enterToClass: String, leaveToClass: String, enterActiveClass: String, leaveActiveClass: String, appearClass: String, appearActiveClass: String, appearToClass: String, duration: [Number, String, Object] }; function oa(e) { var t = e && e.componentOptions; return t && t.Ctor.options.abstract ? oa(Qt(t.children)) : e; } function sa(e) {
        var t = {}, i = e.$options; for (var n in i.propsData)
            t[n] = e[n]; var r = i._parentListeners; for (var a in r)
                t[M(a)] = r[a]; return t;
        } function la(e, t) {
        if (/\d-keep-alive$/.test(t.tag))
            return e("keep-alive", { props: t.componentOptions.propsData });
        } var ca = function (e) { return e.tag || Yt(e); }, ua = function (e) { return "show" === e.name; }, ha = {
        name: "transition", props: aa, abstract: !0, render: function (e) {
        var t = this, i = this.$slots.default; if (i && (i = i.filter(ca)).length) {
            0;
            var n = this.mode;
            0;
            var r = i[0];
            if (function (e) {
            for (; e = e.parent;)
                if (e.data.transition)
                    return !0;
            } (this.$vnode))
                return r;
            var a = oa(r);
            if (!a)
                return r;
            if (this._leaving)
                return la(e, r);
            var o = "__transition-" + this._uid + "-";
            a.key = null == a.key ? a.isComment ? o + "comment" : o + a.tag : s(a.key) ? 0 === String(a.key).indexOf(o) ? a.key : o + a.key : a.key;
            var l = (a.data || (a.data = {})).transition = sa(this), c = this._vnode, u = oa(c);
            if (a.data.directives && a.data.directives.some(ua) && (a.data.show = !0), u && u.data && !function (e, t) { return t.key === e.key && t.tag === e.tag; } (a, u) && !Yt(u) && (!u.componentInstance || !u.componentInstance._vnode.isComment)) {
                var h = u.data.transition = L({}, l);
                if ("out-in" === n)
                    return this._leaving = !0, ct(h, "afterLeave", (function () { t._leaving = !1, t.$forceUpdate(); })), la(e, r);
                if ("in-out" === n) {
                    if (Yt(a))
                        return c;
                    var d, p = function () { d(); };
                    ct(l, "afterEnter", p), ct(l, "enterCancelled", p), ct(h, "delayLeave", (function (e) { d = e; }));
                }
            }
            return r;
        }
        }
        }, da = L({ tag: String, moveClass: String }, aa); function pa(e) { e.elm._moveCb && e.elm._moveCb(), e.elm._enterCb && e.elm._enterCb(); } function fa(e) { e.data.newPos = e.elm.getBoundingClientRect(); } function ma(e) {
        var t = e.data.pos, i = e.data.newPos, n = t.left - i.left, r = t.top - i.top; if (n || r) {
            e.data.moved = !0;
            var a = e.elm.style;
            a.transform = a.WebkitTransform = "translate(" + n + "px," + r + "px)", a.transitionDuration = "0s";
        }
        } delete da.mode; var va = {
        Transition: ha, TransitionGroup: {
        props: da, beforeMount: function () { var e = this, t = this._update; this._update = function (i, n) { var r = ei(e); e.__patch__(e._vnode, e.kept, !1, !0), e._vnode = e.kept, r(), t.call(e, i, n); }; }, render: function (e) {
        for (var t = this.tag || this.$vnode.data.tag || "span", i = Object.create(null), n = this.prevChildren = this.children, r = this.$slots.default || [], a = this.children = [], o = sa(this), s = 0; s < r.length; s++) {
            var l = r[s];
            if (l.tag)
                if (null != l.key && 0 !== String(l.key).indexOf("__vlist"))
                    a.push(l), i[l.key] = l, (l.data || (l.data = {})).transition = o;
                else
                    ;
        } if (n) {
            for (var c = [], u = [], h = 0; h < n.length; h++) {
                var d = n[h];
                d.data.transition = o, d.data.pos = d.elm.getBoundingClientRect(), i[d.key] ? c.push(d) : u.push(d);
            }
            this.kept = e(t, null, c), this.removed = u;
        } return e(t, null, a);
        }, updated: function () {
        var e = this.prevChildren, t = this.moveClass || (this.name || "v") + "-move"; e.length && this.hasMove(e[0].elm, t) && (e.forEach(pa), e.forEach(fa), e.forEach(ma), this._reflow = document.body.offsetHeight, e.forEach((function (e) {
        if (e.data.moved) {
            var i = e.elm, n = i.style;
            kr(i, t), n.transform = n.WebkitTransform = n.transitionDuration = "", i.addEventListener(Rr, i._moveCb = function e(n) { n && n.target !== i || n && !/transform$/.test(n.propertyName) || (i.removeEventListener(Rr, e), i._moveCb = null, Nr(i, t)); });
        }
        })));
        }, methods: {
        hasMove: function (e, t) {
        if (!Er)
            return !1; if (this._hasMove)
                return this._hasMove; var i = e.cloneNode(); e._transitionClasses && e._transitionClasses.forEach((function (e) { Mr(i, e); })), Tr(i, t), i.style.display = "none", this.$el.appendChild(i); var n = Hr(i); return this.$el.removeChild(i), this._hasMove = n.hasTransform;
        }
        }
        }
        }; Si.config.mustUseProp = ki, Si.config.isReservedTag = Ki, Si.config.isReservedAttr = Di, Si.config.getTagNamespace = Ji, Si.config.isUnknownElement = function (e) {
        if (!Q)
            return !0; if (Ki(e))
                return !1; if (e = e.toLowerCase(), null != en[e])
                return en[e]; var t = document.createElement(e); return e.indexOf("-") > -1 ? en[e] = t.constructor === window.HTMLUnknownElement || t.constructor === window.HTMLElement : en[e] = /HTMLUnknownElement/.test(t.toString());
        }, L(Si.options.directives, ra), L(Si.options.components, va), Si.prototype.__patch__ = Q ? Qr : I, Si.prototype.$mount = function (e, t) { return function (e, t, i) { var n; return e.$el = t, e.$options.render || (e.$options.render = be), ni(e, "beforeMount"), n = function () { e._update(e._render(), i); }, new mi(e, n, I, { before: function () { e._isMounted && !e._isDestroyed && ni(e, "beforeUpdate"); } }, !0), i = !1, null == e.$vnode && (e._isMounted = !0, ni(e, "mounted")), e; } (this, e = e && Q ? nn(e) : void 0, t); }, Q && setTimeout((function () { U.devtools && se && se.emit("init", Si); }), 0); var ga = /\{\{((?:.|\r?\n)+?)\}\}/g, ya = /[-.*+?^${}()|[\]\/\\]/g, ba = w((function (e) { var t = e[0].replace(ya, "\\$&"), i = e[1].replace(ya, "\\$&"); return new RegExp(t + "((?:.|\\n)+?)" + i, "g"); })); var xa = { staticKeys: ["staticClass"], transformNode: function (e, t) { t.warn; var i = zn(e, "class"); i && (e.staticClass = JSON.stringify(i)); var n = Un(e, "class", !1); n && (e.classBinding = n); }, genData: function (e) { var t = ""; return e.staticClass && (t += "staticClass:" + e.staticClass + ","), e.classBinding && (t += "class:" + e.classBinding + ","), t; } }; var _a, wa = { staticKeys: ["staticStyle"], transformNode: function (e, t) { t.warn; var i = zn(e, "style"); i && (e.staticStyle = JSON.stringify(hr(i))); var n = Un(e, "style", !1); n && (e.styleBinding = n); }, genData: function (e) { var t = ""; return e.staticStyle && (t += "staticStyle:" + e.staticStyle + ","), e.styleBinding && (t += "style:(" + e.styleBinding + "),"), t; } }, Ta = function (e) { return (_a = _a || document.createElement("div")).innerHTML = e, _a.textContent; }, Ma = v("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"), Aa = v("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"), Sa = v("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"), Ea = /^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/, Pa = /^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/, Ca = "[a-zA-Z_][\\-\\.0-9_a-zA-Z" + z.source + "]*", La = "((?:" + Ca + "\\:)?" + Ca + ")", Ra = new RegExp("^<" + La), Ia = /^\s*(\/?)>/, Oa = new RegExp("^<\\/" + La + "[^>]*>"), Da = /^<!DOCTYPE [^>]+>/i, Fa = /^<!\--/, ka = /^<!\[/, Na = v("script,style,textarea", !0), Ba = {}, Ga = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&amp;": "&", "&#10;": "\n", "&#9;": "\t", "&#39;": "'" }, Ha = /&(?:lt|gt|quot|amp|#39);/g, Ua = /&(?:lt|gt|quot|amp|#39|#10|#9);/g, za = v("pre,textarea", !0), Va = function (e, t) { return e && za(e) && "\n" === t[0]; }; function ja(e, t) { var i = t ? Ua : Ha; return e.replace(i, (function (e) { return Ga[e]; })); } var Wa, Xa, Ya, Qa, qa, $a, Za, Ka, Ja = /^@|^v-on:/, eo = /^v-|^@|^:/, to = /([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/, io = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/, no = /^\(|\)$/g, ro = /^\[.*\]$/, ao = /:(.*)$/, oo = /^:|^\.|^v-bind:/, so = /\.[^.\]]+(?=[^\]]*$)/g, lo = /^v-slot(:|$)|^#/, co = /[\r\n]/, uo = /\s+/g, ho = w(Ta), po = "_empty_"; function fo(e, t, i) { return { type: 1, tag: e, attrsList: t, attrsMap: _o(t), rawAttrsMap: {}, parent: i, children: [] }; } function mo(e, t) {
        Wa = t.warn || On, $a = t.isPreTag || O, Za = t.mustUseProp || O, Ka = t.getTagNamespace || O; var i = t.isReservedTag || O; (function (e) { return !!e.component || !i(e.tag); }), Ya = Dn(t.modules, "transformNode"), Qa = Dn(t.modules, "preTransformNode"), qa = Dn(t.modules, "postTransformNode"), Xa = t.delimiters; var n, r, a = [], o = !1 !== t.preserveWhitespace, s = t.whitespace, l = !1, c = !1; function u(e) {
        if (h(e), l || e.processed || (e = vo(e, t)), a.length || e === n || n.if && (e.elseif || e.else) && yo(n, { exp: e.elseif, block: e }), r && !e.forbidden)
            if (e.elseif || e.else)
                o = e, (s = function (e) {
                for (var t = e.length; t--;) {
                    if (1 === e[t].type)
                        return e[t];
                    e.pop();
                }
                } (r.children)) && s.if && yo(s, { exp: o.elseif, block: o });
            else {
                if (e.slotScope) {
                    var i = e.slotTarget || '"default"';
                    (r.scopedSlots || (r.scopedSlots = {}))[i] = e;
                }
                r.children.push(e), e.parent = r;
            } var o, s; e.children = e.children.filter((function (e) { return !e.slotScope; })), h(e), e.pre && (l = !1), $a(e.tag) && (c = !1); for (var u = 0; u < qa.length; u++)
                qa[u](e, t);
        } function h(e) {
        if (!c)
            for (var t; (t = e.children[e.children.length - 1]) && 3 === t.type && " " === t.text;)
                e.children.pop();
        } return function (e, t) {
        for (var i, n, r = [], a = t.expectHTML, o = t.isUnaryTag || O, s = t.canBeLeftOpenTag || O, l = 0; e;) {
            if (i = e, n && Na(n)) {
                var c = 0, u = n.toLowerCase(), h = Ba[u] || (Ba[u] = new RegExp("([\\s\\S]*?)(</" + u + "[^>]*>)", "i")), d = e.replace(h, (function (e, i, n) { return c = n.length, Na(u) || "noscript" === u || (i = i.replace(/<!\--([\s\S]*?)-->/g, "$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g, "$1")), Va(u, i) && (i = i.slice(1)), t.chars && t.chars(i), ""; }));
                l += e.length - d.length, e = d, S(u, l - c, l);
            }
            else {
                var p = e.indexOf("<");
                if (0 === p) {
                    if (Fa.test(e)) {
                        var f = e.indexOf("--\x3e");
                        if (f >= 0) {
                            t.shouldKeepComment && t.comment(e.substring(4, f), l, l + f + 3), T(f + 3);
                            continue;
                        }
                    }
                    if (ka.test(e)) {
                        var m = e.indexOf("]>");
                        if (m >= 0) {
                            T(m + 2);
                            continue;
                        }
                    }
                    var v = e.match(Da);
                    if (v) {
                        T(v[0].length);
                        continue;
                    }
                    var g = e.match(Oa);
                    if (g) {
                        var y = l;
                        T(g[0].length), S(g[1], y, l);
                        continue;
                    }
                    var b = M();
                    if (b) {
                        A(b), Va(b.tagName, e) && T(1);
                        continue;
                    }
                }
                var x = void 0, _ = void 0, w = void 0;
                if (p >= 0) {
                    for (_ = e.slice(p); !(Oa.test(_) || Ra.test(_) || Fa.test(_) || ka.test(_) || (w = _.indexOf("<", 1)) < 0);)
                        p += w, _ = e.slice(p);
                    x = e.substring(0, p);
                }
                p < 0 && (x = e), x && T(x.length), t.chars && x && t.chars(x, l - x.length, l);
            }
            if (e === i) {
                t.chars && t.chars(e);
                break;
            }
        } function T(t) { l += t, e = e.substring(t); } function M() {
        var t = e.match(Ra); if (t) {
            var i, n, r = { tagName: t[1], attrs: [], start: l };
            for (T(t[0].length); !(i = e.match(Ia)) && (n = e.match(Pa) || e.match(Ea));)
                n.start = l, T(n[0].length), n.end = l, r.attrs.push(n);
            if (i)
                return r.unarySlash = i[1], T(i[0].length), r.end = l, r;
        }
        } function A(e) {
        var i = e.tagName, l = e.unarySlash; a && ("p" === n && Sa(i) && S(n), s(i) && n === i && S(i)); for (var c = o(i) || !!l, u = e.attrs.length, h = new Array(u), d = 0; d < u; d++) {
            var p = e.attrs[d], f = p[3] || p[4] || p[5] || "", m = "a" === i && "href" === p[1] ? t.shouldDecodeNewlinesForHref : t.shouldDecodeNewlines;
            h[d] = { name: p[1], value: ja(f, m) };
        } c || (r.push({ tag: i, lowerCasedTag: i.toLowerCase(), attrs: h, start: e.start, end: e.end }), n = i), t.start && t.start(i, h, c, e.start, e.end);
        } function S(e, i, a) {
        var o, s; if (null == i && (i = l), null == a && (a = l), e)
            for (s = e.toLowerCase(), o = r.length - 1; o >= 0 && r[o].lowerCasedTag !== s; o--)
                ;
        else
            o = 0; if (o >= 0) {
                for (var c = r.length - 1; c >= o; c--)
                    t.end && t.end(r[c].tag, i, a);
                r.length = o, n = o && r[o - 1].tag;
            }
            else
                "br" === s ? t.start && t.start(e, [], !0, i, a) : "p" === s && (t.start && t.start(e, [], !1, i, a), t.end && t.end(e, i, a));
        } S();
        } (e, {
        warn: Wa, expectHTML: t.expectHTML, isUnaryTag: t.isUnaryTag, canBeLeftOpenTag: t.canBeLeftOpenTag, shouldDecodeNewlines: t.shouldDecodeNewlines, shouldDecodeNewlinesForHref: t.shouldDecodeNewlinesForHref, shouldKeepComment: t.comments, outputSourceRange: t.outputSourceRange, start: function (e, i, o, s, h) {
        var d = r && r.ns || Ka(e); K && "svg" === d && (i = function (e) {
        for (var t = [], i = 0; i < e.length; i++) {
            var n = e[i];
            wo.test(n.name) || (n.name = n.name.replace(To, ""), t.push(n));
        } return t;
        } (i)); var p, f = fo(e, i, r); d && (f.ns = d), "style" !== (p = f).tag && ("script" !== p.tag || p.attrsMap.type && "text/javascript" !== p.attrsMap.type) || oe() || (f.forbidden = !0); for (var m = 0; m < Qa.length; m++)
                f = Qa[m](f, t) || f; l || (!function (e) { null != zn(e, "v-pre") && (e.pre = !0); } (f), f.pre && (l = !0)), $a(f.tag) && (c = !0), l ? function (e) {
                var t = e.attrsList, i = t.length; if (i)
                    for (var n = e.attrs = new Array(i), r = 0; r < i; r++)
                        n[r] = { name: t[r].name, value: JSON.stringify(t[r].value) }, null != t[r].start && (n[r].start = t[r].start, n[r].end = t[r].end);
                else
                    e.pre || (e.plain = !0);
                } (f) : f.processed || (go(f), function (e) {
                var t = zn(e, "v-if"); if (t)
                    e.if = t, yo(e, { exp: t, block: e });
                else {
                    null != zn(e, "v-else") && (e.else = !0);
                    var i = zn(e, "v-else-if");
                    i && (e.elseif = i);
                }
                } (f), function (e) { null != zn(e, "v-once") && (e.once = !0); } (f)), n || (n = f), o ? u(f) : (r = f, a.push(f));
        }, end: function (e, t, i) { var n = a[a.length - 1]; a.length -= 1, r = a[a.length - 1], u(n); }, chars: function (e, t, i) {
        if (r && (!K || "textarea" !== r.tag || r.attrsMap.placeholder !== e)) {
            var n, a, u, h = r.children;
            if (e = c || e.trim() ? "script" === (n = r).tag || "style" === n.tag ? e : ho(e) : h.length ? s ? "condense" === s && co.test(e) ? "" : " " : o ? " " : "" : "")
                c || "condense" !== s || (e = e.replace(uo, " ")), !l && " " !== e && (a = function (e, t) {
                var i = t ? ba(t) : ga; if (i.test(e)) {
                    for (var n, r, a, o = [], s = [], l = i.lastIndex = 0; n = i.exec(e);) {
                        (r = n.index) > l && (s.push(a = e.slice(l, r)), o.push(JSON.stringify(a)));
                        var c = Rn(n[1].trim());
                        o.push("_s(" + c + ")"), s.push({ "@binding": c }), l = r + n[0].length;
                    }
                    return l < e.length && (s.push(a = e.slice(l)), o.push(JSON.stringify(a))), { expression: o.join("+"), tokens: s };
                }
                } (e, Xa)) ? u = { type: 2, expression: a.expression, tokens: a.tokens, text: e } : " " === e && h.length && " " === h[h.length - 1].text || (u = { type: 3, text: e }), u && h.push(u);
        }
        }, comment: function (e, t, i) {
        if (r) {
            var n = { type: 3, text: e, isComment: !0 };
            0, r.children.push(n);
        }
        }
        }), n;
        } function vo(e, t) {
        var i; !function (e) {
        var t = Un(e, "key"); if (t) {
            e.key = t;
        }
        } (e), e.plain = !e.key && !e.scopedSlots && !e.attrsList.length, function (e) {
        var t = Un(e, "ref"); t && (e.ref = t, e.refInFor = function (e) {
        var t = e; for (; t;) {
            if (void 0 !== t.for)
                return !0;
            t = t.parent;
        } return !1;
        } (e));
        } (e), function (e) {
        var t; "template" === e.tag ? (t = zn(e, "scope"), e.slotScope = t || zn(e, "slot-scope")) : (t = zn(e, "slot-scope")) && (e.slotScope = t); var i = Un(e, "slot"); i && (e.slotTarget = '""' === i ? '"default"' : i, e.slotTargetDynamic = !(!e.attrsMap[":slot"] && !e.attrsMap["v-bind:slot"]), "template" === e.tag || e.slotScope || kn(e, "slot", i, function (e, t) { return e.rawAttrsMap[":" + t] || e.rawAttrsMap["v-bind:" + t] || e.rawAttrsMap[t]; } (e, "slot"))); if ("template" === e.tag) {
            var n = Vn(e, lo);
            if (n) {
                0;
                var r = bo(n), a = r.name, o = r.dynamic;
                e.slotTarget = a, e.slotTargetDynamic = o, e.slotScope = n.value || po;
            }
        }
        else {
            var s = Vn(e, lo);
            if (s) {
                0;
                var l = e.scopedSlots || (e.scopedSlots = {}), c = bo(s), u = c.name, h = c.dynamic, d = l[u] = fo("template", [], e);
                d.slotTarget = u, d.slotTargetDynamic = h, d.children = e.children.filter((function (e) {
                if (!e.slotScope)
                    return e.parent = d, !0;
                })), d.slotScope = s.value || po, e.children = [], e.plain = !1;
            }
        }
        } (e), "slot" === (i = e).tag && (i.slotName = Un(i, "name")), function (e) { var t; (t = Un(e, "is")) && (e.component = t); null != zn(e, "inline-template") && (e.inlineTemplate = !0); } (e); for (var n = 0; n < Ya.length; n++)
                e = Ya[n](e, t) || e; return function (e) {
                var t, i, n, r, a, o, s, l, c = e.attrsList; for (t = 0, i = c.length; t < i; t++) {
                    if (n = r = c[t].name, a = c[t].value, eo.test(n))
                        if (e.hasBindings = !0, (o = xo(n.replace(eo, ""))) && (n = n.replace(so, "")), oo.test(n))
                            n = n.replace(oo, ""), a = Rn(a), (l = ro.test(n)) && (n = n.slice(1, -1)), o && (o.prop && !l && "innerHtml" === (n = M(n)) && (n = "innerHTML"), o.camel && !l && (n = M(n)), o.sync && (s = Xn(a, "$event"), l ? Hn(e, '"update:"+(' + n + ")", s, null, !1, 0, c[t], !0) : (Hn(e, "update:" + M(n), s, null, !1, 0, c[t]), E(n) !== M(n) && Hn(e, "update:" + E(n), s, null, !1, 0, c[t])))), o && o.prop || !e.component && Za(e.tag, e.attrsMap.type, n) ? Fn(e, n, a, c[t], l) : kn(e, n, a, c[t], l);
                        else if (Ja.test(n))
                            n = n.replace(Ja, ""), (l = ro.test(n)) && (n = n.slice(1, -1)), Hn(e, n, a, o, !1, 0, c[t], l);
                        else {
                            var u = (n = n.replace(eo, "")).match(ao), h = u && u[1];
                            l = !1, h && (n = n.slice(0, -(h.length + 1)), ro.test(h) && (h = h.slice(1, -1), l = !0)), Bn(e, n, r, a, h, l, o, c[t]);
                        }
                    else
                        kn(e, n, JSON.stringify(a), c[t]), !e.component && "muted" === n && Za(e.tag, e.attrsMap.type, n) && Fn(e, n, "true", c[t]);
                }
                } (e), e;
        } function go(e) {
        var t; if (t = zn(e, "v-for")) {
            var i = function (e) {
            var t = e.match(to); if (!t)
                return; var i = {}; i.for = t[2].trim(); var n = t[1].trim().replace(no, ""), r = n.match(io); r ? (i.alias = n.replace(io, "").trim(), i.iterator1 = r[1].trim(), r[2] && (i.iterator2 = r[2].trim())) : i.alias = n; return i;
            } (t);
            i && L(e, i);
        }
        } function yo(e, t) { e.ifConditions || (e.ifConditions = []), e.ifConditions.push(t); } function bo(e) { var t = e.name.replace(lo, ""); return t || "#" !== e.name[0] && (t = "default"), ro.test(t) ? { name: t.slice(1, -1), dynamic: !0 } : { name: '"' + t + '"', dynamic: !1 }; } function xo(e) {
        var t = e.match(so); if (t) {
            var i = {};
            return t.forEach((function (e) { i[e.slice(1)] = !0; })), i;
        }
        } function _o(e) {
        for (var t = {}, i = 0, n = e.length; i < n; i++)
            t[e[i].name] = e[i].value; return t;
        } var wo = /^xmlns:NS\d+/, To = /^NS\d+:/; function Mo(e) { return fo(e.tag, e.attrsList.slice(), e.parent); } var Ao = [xa, wa, {
        preTransformNode: function (e, t) {
        if ("input" === e.tag) {
            var i, n = e.attrsMap;
            if (!n["v-model"])
                return;
            if ((n[":type"] || n["v-bind:type"]) && (i = Un(e, "type")), n.type || i || !n["v-bind"] || (i = "(" + n["v-bind"] + ").type"), i) {
                var r = zn(e, "v-if", !0), a = r ? "&&(" + r + ")" : "", o = null != zn(e, "v-else", !0), s = zn(e, "v-else-if", !0), l = Mo(e);
                go(l), Nn(l, "type", "checkbox"), vo(l, t), l.processed = !0, l.if = "(" + i + ")==='checkbox'" + a, yo(l, { exp: l.if, block: l });
                var c = Mo(e);
                zn(c, "v-for", !0), Nn(c, "type", "radio"), vo(c, t), yo(l, { exp: "(" + i + ")==='radio'" + a, block: c });
                var u = Mo(e);
                return zn(u, "v-for", !0), Nn(u, ":type", i), vo(u, t), yo(l, { exp: r, block: u }), o ? l.else = !0 : s && (l.elseif = s), l;
            }
        }
        }
        }]; var So, Eo, Po = {
        expectHTML: !0, modules: Ao, directives: {
        model: function (e, t, i) {
        i; var n = t.value, r = t.modifiers, a = e.tag, o = e.attrsMap.type; if (e.component)
            return Wn(e, n, r), !1; if ("select" === a)
                !function (e, t, i) { var n = 'var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return ' + (i && i.number ? "_n(val)" : "val") + "});"; n = n + " " + Xn(t, "$event.target.multiple ? $$selectedVal : $$selectedVal[0]"), Hn(e, "change", n, null, !0); } (e, n, r);
            else if ("input" === a && "checkbox" === o)
                !function (e, t, i) { var n = i && i.number, r = Un(e, "value") || "null", a = Un(e, "true-value") || "true", o = Un(e, "false-value") || "false"; Fn(e, "checked", "Array.isArray(" + t + ")?_i(" + t + "," + r + ")>-1" + ("true" === a ? ":(" + t + ")" : ":_q(" + t + "," + a + ")")), Hn(e, "change", "var $$a=" + t + ",$$el=$event.target,$$c=$$el.checked?(" + a + "):(" + o + ");if(Array.isArray($$a)){var $$v=" + (n ? "_n(" + r + ")" : r) + ",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&(" + Xn(t, "$$a.concat([$$v])") + ")}else{$$i>-1&&(" + Xn(t, "$$a.slice(0,$$i).concat($$a.slice($$i+1))") + ")}}else{" + Xn(t, "$$c") + "}", null, !0); } (e, n, r);
            else if ("input" === a && "radio" === o)
                !function (e, t, i) { var n = i && i.number, r = Un(e, "value") || "null"; Fn(e, "checked", "_q(" + t + "," + (r = n ? "_n(" + r + ")" : r) + ")"), Hn(e, "change", Xn(t, r), null, !0); } (e, n, r);
            else if ("input" === a || "textarea" === a)
                !function (e, t, i) { var n = e.attrsMap.type; 0; var r = i || {}, a = r.lazy, o = r.number, s = r.trim, l = !a && "range" !== n, c = a ? "change" : "range" === n ? Jn : "input", u = "$event.target.value"; s && (u = "$event.target.value.trim()"); o && (u = "_n(" + u + ")"); var h = Xn(t, u); l && (h = "if($event.target.composing)return;" + h); Fn(e, "value", "(" + t + ")"), Hn(e, c, h, null, !0), (s || o) && Hn(e, "blur", "$forceUpdate()"); } (e, n, r);
            else {
                if (!U.isReservedTag(a))
                    return Wn(e, n, r), !1;
            } return !0;
        }, text: function (e, t) { t.value && Fn(e, "textContent", "_s(" + t.value + ")", t); }, html: function (e, t) { t.value && Fn(e, "innerHTML", "_s(" + t.value + ")", t); }
        }, isPreTag: function (e) { return "pre" === e; }, isUnaryTag: Ma, mustUseProp: ki, canBeLeftOpenTag: Aa, isReservedTag: Ki, getTagNamespace: Ji, staticKeys: function (e) { return e.reduce((function (e, t) { return e.concat(t.staticKeys || []); }), []).join(","); } (Ao)
        }, Co = w((function (e) { return v("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap" + (e ? "," + e : "")); })); function Lo(e, t) {
        e && (So = Co(t.staticKeys || ""), Eo = t.isReservedTag || O, function e(t) {
        if (t.static = function (e) {
        if (2 === e.type)
            return !1; if (3 === e.type)
                return !0; return !(!e.pre && (e.hasBindings || e.if || e.for || g(e.tag) || !Eo(e.tag) || function (e) {
                for (; e.parent;) {
                    if ("template" !== (e = e.parent).tag)
                        return !1;
                    if (e.for)
                        return !0;
                } return !1;
                } (e) || !Object.keys(e).every(So)));
        } (t), 1 === t.type) {
            if (!Eo(t.tag) && "slot" !== t.tag && null == t.attrsMap["inline-template"])
                return;
            for (var i = 0, n = t.children.length; i < n; i++) {
                var r = t.children[i];
                e(r), r.static || (t.static = !1);
            }
            if (t.ifConditions)
                for (var a = 1, o = t.ifConditions.length; a < o; a++) {
                    var s = t.ifConditions[a].block;
                    e(s), s.static || (t.static = !1);
                }
        }
        } (e), function e(t, i) {
        if (1 === t.type) {
            if ((t.static || t.once) && (t.staticInFor = i), t.static && t.children.length && (1 !== t.children.length || 3 !== t.children[0].type))
                return void (t.staticRoot = !0);
            if (t.staticRoot = !1, t.children)
                for (var n = 0, r = t.children.length; n < r; n++)
                    e(t.children[n], i || !!t.for);
            if (t.ifConditions)
                for (var a = 1, o = t.ifConditions.length; a < o; a++)
                    e(t.ifConditions[a].block, i);
        }
        } (e, !1));
        } var Ro = /^([\w$_]+|\([^)]*?\))\s*=>|^function\s*(?:[\w$]+)?\s*\(/, Io = /\([^)]*?\);*$/, Oo = /^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/, Do = { esc: 27, tab: 9, enter: 13, space: 32, up: 38, left: 37, right: 39, down: 40, delete: [8, 46] }, Fo = { esc: ["Esc", "Escape"], tab: "Tab", enter: "Enter", space: [" ", "Spacebar"], up: ["Up", "ArrowUp"], left: ["Left", "ArrowLeft"], right: ["Right", "ArrowRight"], down: ["Down", "ArrowDown"], delete: ["Backspace", "Delete", "Del"] }, ko = function (e) { return "if(" + e + ")return null;"; }, No = { stop: "$event.stopPropagation();", prevent: "$event.preventDefault();", self: ko("$event.target !== $event.currentTarget"), ctrl: ko("!$event.ctrlKey"), shift: ko("!$event.shiftKey"), alt: ko("!$event.altKey"), meta: ko("!$event.metaKey"), left: ko("'button' in $event && $event.button !== 0"), middle: ko("'button' in $event && $event.button !== 1"), right: ko("'button' in $event && $event.button !== 2") }; function Bo(e, t) {
        var i = t ? "nativeOn:" : "on:", n = "", r = ""; for (var a in e) {
            var o = Go(e[a]);
            e[a] && e[a].dynamic ? r += a + "," + o + "," : n += '"' + a + '":' + o + ",";
        } return n = "{" + n.slice(0, -1) + "}", r ? i + "_d(" + n + ",[" + r.slice(0, -1) + "])" : i + n;
        } function Go(e) {
        if (!e)
            return "function(){}"; if (Array.isArray(e))
                return "[" + e.map((function (e) { return Go(e); })).join(",") + "]"; var t = Oo.test(e.value), i = Ro.test(e.value), n = Oo.test(e.value.replace(Io, "")); if (e.modifiers) {
                    var r = "", a = "", o = [];
                    for (var s in e.modifiers)
                        if (No[s])
                            a += No[s], Do[s] && o.push(s);
                        else if ("exact" === s) {
                            var l = e.modifiers;
                            a += ko(["ctrl", "shift", "alt", "meta"].filter((function (e) { return !l[e]; })).map((function (e) { return "$event." + e + "Key"; })).join("||"));
                        }
                        else
                            o.push(s);
                    return o.length && (r += function (e) { return "if(!$event.type.indexOf('key')&&" + e.map(Ho).join("&&") + ")return null;"; } (o)), a && (r += a), "function($event){" + r + (t ? "return " + e.value + "($event)" : i ? "return (" + e.value + ")($event)" : n ? "return " + e.value : e.value) + "}";
                } return t || i ? e.value : "function($event){" + (n ? "return " + e.value : e.value) + "}";
        } function Ho(e) {
        var t = parseInt(e, 10); if (t)
            return "$event.keyCode!==" + t; var i = Do[e], n = Fo[e]; return "_k($event.keyCode," + JSON.stringify(e) + "," + JSON.stringify(i) + ",$event.key," + JSON.stringify(n) + ")";
        } var Uo = { on: function (e, t) { e.wrapListeners = function (e) { return "_g(" + e + "," + t.value + ")"; }; }, bind: function (e, t) { e.wrapData = function (i) { return "_b(" + i + ",'" + e.tag + "'," + t.value + "," + (t.modifiers && t.modifiers.prop ? "true" : "false") + (t.modifiers && t.modifiers.sync ? ",true" : "") + ")"; }; }, cloak: I }, zo = function (e) { this.options = e, this.warn = e.warn || On, this.transforms = Dn(e.modules, "transformCode"), this.dataGenFns = Dn(e.modules, "genData"), this.directives = L(L({}, Uo), e.directives); var t = e.isReservedTag || O; this.maybeComponent = function (e) { return !!e.component || !t(e.tag); }, this.onceId = 0, this.staticRenderFns = [], this.pre = !1; }; function Vo(e, t) { var i = new zo(t); return { render: "with(this){return " + (e ? jo(e, i) : '_c("div")') + "}", staticRenderFns: i.staticRenderFns }; } function jo(e, t) {
        if (e.parent && (e.pre = e.pre || e.parent.pre), e.staticRoot && !e.staticProcessed)
            return Wo(e, t); if (e.once && !e.onceProcessed)
                return Xo(e, t); if (e.for && !e.forProcessed)
                return Qo(e, t); if (e.if && !e.ifProcessed)
                return Yo(e, t); if ("template" !== e.tag || e.slotTarget || t.pre) {
                    if ("slot" === e.tag)
                        return function (e, t) { var i = e.slotName || '"default"', n = Ko(e, t), r = "_t(" + i + (n ? "," + n : ""), a = e.attrs || e.dynamicAttrs ? ts((e.attrs || []).concat(e.dynamicAttrs || []).map((function (e) { return { name: M(e.name), value: e.value, dynamic: e.dynamic }; }))) : null, o = e.attrsMap["v-bind"]; !a && !o || n || (r += ",null"); a && (r += "," + a); o && (r += (a ? "" : ",null") + "," + o); return r + ")"; } (e, t);
                    var i;
                    if (e.component)
                        i = function (e, t, i) { var n = t.inlineTemplate ? null : Ko(t, i, !0); return "_c(" + e + "," + qo(t, i) + (n ? "," + n : "") + ")"; } (e.component, e, t);
                    else {
                        var n;
                        (!e.plain || e.pre && t.maybeComponent(e)) && (n = qo(e, t));
                        var r = e.inlineTemplate ? null : Ko(e, t, !0);
                        i = "_c('" + e.tag + "'" + (n ? "," + n : "") + (r ? "," + r : "") + ")";
                    }
                    for (var a = 0; a < t.transforms.length; a++)
                        i = t.transforms[a](e, i);
                    return i;
                } return Ko(e, t) || "void 0";
        } function Wo(e, t) { e.staticProcessed = !0; var i = t.pre; return e.pre && (t.pre = e.pre), t.staticRenderFns.push("with(this){return " + jo(e, t) + "}"), t.pre = i, "_m(" + (t.staticRenderFns.length - 1) + (e.staticInFor ? ",true" : "") + ")"; } function Xo(e, t) {
        if (e.onceProcessed = !0, e.if && !e.ifProcessed)
            return Yo(e, t); if (e.staticInFor) {
                for (var i = "", n = e.parent; n;) {
                    if (n.for) {
                        i = n.key;
                        break;
                    }
                    n = n.parent;
                }
                return i ? "_o(" + jo(e, t) + "," + t.onceId++ + "," + i + ")" : jo(e, t);
            } return Wo(e, t);
        } function Yo(e, t, i, n) {
        return e.ifProcessed = !0, function e(t, i, n, r) {
        if (!t.length)
            return r || "_e()"; var a = t.shift(); return a.exp ? "(" + a.exp + ")?" + o(a.block) + ":" + e(t, i, n, r) : "" + o(a.block); function o(e) { return n ? n(e, i) : e.once ? Xo(e, i) : jo(e, i); }
        } (e.ifConditions.slice(), t, i, n);
        } function Qo(e, t, i, n) { var r = e.for, a = e.alias, o = e.iterator1 ? "," + e.iterator1 : "", s = e.iterator2 ? "," + e.iterator2 : ""; return e.forProcessed = !0, (n || "_l") + "((" + r + "),function(" + a + o + s + "){return " + (i || jo)(e, t) + "})"; } function qo(e, t) {
        var i = "{", n = function (e, t) {
        var i = e.directives; if (!i)
            return; var n, r, a, o, s = "directives:[", l = !1; for (n = 0, r = i.length; n < r; n++) {
                a = i[n], o = !0;
                var c = t.directives[a.name];
                c && (o = !!c(e, a, t.warn)), o && (l = !0, s += '{name:"' + a.name + '",rawName:"' + a.rawName + '"' + (a.value ? ",value:(" + a.value + "),expression:" + JSON.stringify(a.value) : "") + (a.arg ? ",arg:" + (a.isDynamicArg ? a.arg : '"' + a.arg + '"') : "") + (a.modifiers ? ",modifiers:" + JSON.stringify(a.modifiers) : "") + "},");
            } if (l)
                return s.slice(0, -1) + "]";
        } (e, t); n && (i += n + ","), e.key && (i += "key:" + e.key + ","), e.ref && (i += "ref:" + e.ref + ","), e.refInFor && (i += "refInFor:true,"), e.pre && (i += "pre:true,"), e.component && (i += 'tag:"' + e.tag + '",'); for (var r = 0; r < t.dataGenFns.length; r++)
                i += t.dataGenFns[r](e); if (e.attrs && (i += "attrs:" + ts(e.attrs) + ","), e.props && (i += "domProps:" + ts(e.props) + ","), e.events && (i += Bo(e.events, !1) + ","), e.nativeEvents && (i += Bo(e.nativeEvents, !0) + ","), e.slotTarget && !e.slotScope && (i += "slot:" + e.slotTarget + ","), e.scopedSlots && (i += function (e, t, i) {
                var n = e.for || Object.keys(t).some((function (e) { var i = t[e]; return i.slotTargetDynamic || i.if || i.for || $o(i); })), r = !!e.if; if (!n)
                    for (var a = e.parent; a;) {
                        if (a.slotScope && a.slotScope !== po || a.for) {
                            n = !0;
                            break;
                        }
                        a.if && (r = !0), a = a.parent;
                    } var o = Object.keys(t).map((function (e) { return Zo(t[e], i); })).join(","); return "scopedSlots:_u([" + o + "]" + (n ? ",null,true" : "") + (!n && r ? ",null,false," + function (e) {
                    var t = 5381, i = e.length; for (; i;)
                        t = 33 * t ^ e.charCodeAt(--i); return t >>> 0;
                    } (o) : "") + ")";
                } (e, e.scopedSlots, t) + ","), e.model && (i += "model:{value:" + e.model.value + ",callback:" + e.model.callback + ",expression:" + e.model.expression + "},"), e.inlineTemplate) {
                var a = function (e, t) {
                var i = e.children[0]; 0; if (i && 1 === i.type) {
                    var n = Vo(i, t.options);
                    return "inlineTemplate:{render:function(){" + n.render + "},staticRenderFns:[" + n.staticRenderFns.map((function (e) { return "function(){" + e + "}"; })).join(",") + "]}";
                }
                } (e, t);
                a && (i += a + ",");
            } return i = i.replace(/,$/, "") + "}", e.dynamicAttrs && (i = "_b(" + i + ',"' + e.tag + '",' + ts(e.dynamicAttrs) + ")"), e.wrapData && (i = e.wrapData(i)), e.wrapListeners && (i = e.wrapListeners(i)), i;
        } function $o(e) { return 1 === e.type && ("slot" === e.tag || e.children.some($o)); } function Zo(e, t) {
        var i = e.attrsMap["slot-scope"]; if (e.if && !e.ifProcessed && !i)
            return Yo(e, t, Zo, "null"); if (e.for && !e.forProcessed)
                return Qo(e, t, Zo); var n = e.slotScope === po ? "" : String(e.slotScope), r = "function(" + n + "){return " + ("template" === e.tag ? e.if && i ? "(" + e.if + ")?" + (Ko(e, t) || "undefined") + ":undefined" : Ko(e, t) || "undefined" : jo(e, t)) + "}", a = n ? "" : ",proxy:true"; return "{key:" + (e.slotTarget || '"default"') + ",fn:" + r + a + "}";
        } function Ko(e, t, i, n, r) {
        var a = e.children; if (a.length) {
            var o = a[0];
            if (1 === a.length && o.for && "template" !== o.tag && "slot" !== o.tag) {
                var s = i ? t.maybeComponent(o) ? ",1" : ",0" : "";
                return "" + (n || jo)(o, t) + s;
            }
            var l = i ? function (e, t) {
            for (var i = 0, n = 0; n < e.length; n++) {
                var r = e[n];
                if (1 === r.type) {
                    if (Jo(r) || r.ifConditions && r.ifConditions.some((function (e) { return Jo(e.block); }))) {
                        i = 2;
                        break;
                    }
                    (t(r) || r.ifConditions && r.ifConditions.some((function (e) { return t(e.block); }))) && (i = 1);
                }
            } return i;
            } (a, t.maybeComponent) : 0, c = r || es;
            return "[" + a.map((function (e) { return c(e, t); })).join(",") + "]" + (l ? "," + l : "");
        }
        } function Jo(e) { return void 0 !== e.for || "template" === e.tag || "slot" === e.tag; } function es(e, t) { return 1 === e.type ? jo(e, t) : 3 === e.type && e.isComment ? function (e) { return "_e(" + JSON.stringify(e.text) + ")"; } (e) : function (e) { return "_v(" + (2 === e.type ? e.expression : is(JSON.stringify(e.text))) + ")"; } (e); } function ts(e) {
        for (var t = "", i = "", n = 0; n < e.length; n++) {
            var r = e[n], a = is(r.value);
            r.dynamic ? i += r.name + "," + a + "," : t += '"' + r.name + '":' + a + ",";
        } return t = "{" + t.slice(0, -1) + "}", i ? "_d(" + t + ",[" + i.slice(0, -1) + "])" : t;
        } function is(e) { return e.replace(/\u2028/g, "\\u2028").replace(/\u2029/g, "\\u2029"); } new RegExp("\\b" + "do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b") + "\\b"), new RegExp("\\b" + "delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b") + "\\s*\\([^\\)]*\\)"); function ns(e, t) {
        try {
            return new Function(e);
        }
            catch (i) {
                return t.push({ err: i, code: e }), I;
            }
        } function rs(e) {
        var t = Object.create(null); return function (i, n, r) {
        (n = L({}, n)).warn; delete n.warn; var a = n.delimiters ? String(n.delimiters) + i : i; if (t[a])
            return t[a]; var o = e(i, n); var s = {}, l = []; return s.render = ns(o.render, l), s.staticRenderFns = o.staticRenderFns.map((function (e) { return ns(e, l); })), t[a] = s;
        };
        } var as, os, ss = (as = function (e, t) { var i = mo(e.trim(), t); !1 !== t.optimize && Lo(i, t); var n = Vo(i, t); return { ast: i, render: n.render, staticRenderFns: n.staticRenderFns }; }, function (e) {
        function t(t, i) {
        var n = Object.create(e), r = [], a = []; if (i)
            for (var o in i.modules && (n.modules = (e.modules || []).concat(i.modules)), i.directives && (n.directives = L(Object.create(e.directives || null), i.directives)), i)
                "modules" !== o && "directives" !== o && (n[o] = i[o]); n.warn = function (e, t, i) { (i ? a : r).push(e); }; var s = as(t.trim(), n); return s.errors = r, s.tips = a, s;
        } return { compile: t, compileToFunctions: rs(t) };
        })(Po), ls = (ss.compile, ss.compileToFunctions); function cs(e) { return (os = os || document.createElement("div")).innerHTML = e ? '<a href="\n"/>' : '<div a="\n"/>', os.innerHTML.indexOf("&#10;") > 0; } var us = !!Q && cs(!1), hs = !!Q && cs(!0), ds = w((function (e) { var t = nn(e); return t && t.innerHTML; })), ps = Si.prototype.$mount; Si.prototype.$mount = function (e, t) {
        if ((e = e && nn(e)) === document.body || e === document.documentElement)
            return this; var i = this.$options; if (!i.render) {
                var n = i.template;
                if (n)
                    if ("string" == typeof n)
                        "#" === n.charAt(0) && (n = ds(n));
                    else {
                        if (!n.nodeType)
                            return this;
                        n = n.innerHTML;
                    }
                else
                    e && (n = function (e) {
                    if (e.outerHTML)
                        return e.outerHTML; var t = document.createElement("div"); return t.appendChild(e.cloneNode(!0)), t.innerHTML;
                    } (e));
                if (n) {
                    0;
                    var r = ls(n, { outputSourceRange: !1, shouldDecodeNewlines: us, shouldDecodeNewlinesForHref: hs, delimiters: i.delimiters, comments: i.comments }, this), a = r.render, o = r.staticRenderFns;
                    i.render = a, i.staticRenderFns = o;
                }
            } return ps.call(this, e, t);
        }, Si.compile = ls, t.a = Si;
    }).call(this, i(11), i(96).setImmediate);
}, function (e, t) {
var i, n, r = e.exports = {}; function a() { throw new Error("setTimeout has not been defined"); } function o() { throw new Error("clearTimeout has not been defined"); } function s(e) {
if (i === setTimeout)
    return setTimeout(e, 0); if ((i === a || !i) && setTimeout)
        return i = setTimeout, setTimeout(e, 0); try {
            return i(e, 0);
        }
    catch (t) {
        try {
            return i.call(null, e, 0);
        }
        catch (t) {
            return i.call(this, e, 0);
        }
    }
} !function () {
try {
    i = "function" == typeof setTimeout ? setTimeout : a;
}
    catch (e) {
        i = a;
    } try {
        n = "function" == typeof clearTimeout ? clearTimeout : o;
    }
    catch (e) {
        n = o;
    }
} (); var l, c = [], u = !1, h = -1; function d() { u && l && (u = !1, l.length ? c = l.concat(c) : h = -1, c.length && p()); } function p() {
if (!u) {
    var e = s(d);
    u = !0;
    for (var t = c.length; t;) {
        for (l = c, c = []; ++h < t;)
            l && l[h].run();
        h = -1, t = c.length;
    }
    l = null, u = !1, function (e) {
    if (n === clearTimeout)
        return clearTimeout(e); if ((n === o || !n) && clearTimeout)
            return n = clearTimeout, clearTimeout(e); try {
                n(e);
            }
        catch (t) {
            try {
                return n.call(null, e);
            }
            catch (t) {
                return n.call(this, e);
            }
        }
    } (e);
}
} function f(e, t) { this.fun = e, this.array = t; } function m() { } r.nextTick = function (e) {
var t = new Array(arguments.length - 1); if (arguments.length > 1)
    for (var i = 1; i < arguments.length; i++)
        t[i - 1] = arguments[i]; c.push(new f(e, t)), 1 !== c.length || u || s(p);
}, f.prototype.run = function () { this.fun.apply(null, this.array); }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = m, r.addListener = m, r.once = m, r.off = m, r.removeListener = m, r.removeAllListeners = m, r.emit = m, r.prependListener = m, r.prependOnceListener = m, r.listeners = function (e) { return []; }, r.binding = function (e) { throw new Error("process.binding is not supported"); }, r.cwd = function () { return "/"; }, r.chdir = function (e) { throw new Error("process.chdir is not supported"); }, r.umask = function () { return 0; };
}, function (e, t) {
e.exports = function (e) {
if (null == e)
    throw TypeError("Can't call method on  " + e); return e;
};
}, function (e, t) { var i = {}.hasOwnProperty; e.exports = function (e, t) { return i.call(e, t); }; }, function (e, t, i) { var n = i(63), r = i(28); e.exports = function (e) { return n(r(e)); }; }, function (e, t) { var i = Math.ceil, n = Math.floor; e.exports = function (e) { return isNaN(e = +e) ? 0 : (e > 0 ? n : i)(e); }; }, function (e, t, i) {
var n; e.exports = ((n = function () {
function e(e) { return r.appendChild(e.dom), e; } function t(e) {
for (var t = 0; t < r.children.length; t++)
    r.children[t].style.display = t === e ? "block" : "none"; i = e;
} var i = 0, r = document.createElement("div"); r.style.cssText = "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000", r.addEventListener("click", (function (e) { e.preventDefault(), t(++i % r.children.length); }), !1); var a = (performance || Date).now(), o = a, s = 0, l = e(new n.Panel("FPS", "#0ff", "#002")), c = e(new n.Panel("MS", "#0f0", "#020")); if (self.performance && self.performance.memory)
        var u = e(new n.Panel("MB", "#f08", "#201")); return t(0), {
        REVISION: 16, dom: r, addPanel: e, showPanel: t, begin: function () { a = (performance || Date).now(); }, end: function () {
        s++; var e = (performance || Date).now(); if (c.update(e - a, 200), e > o + 1e3 && (l.update(1e3 * s / (e - o), 100), o = e, s = 0, u)) {
            var t = performance.memory;
            u.update(t.usedJSHeapSize / 1048576, t.jsHeapSizeLimit / 1048576);
        } return e;
        }, update: function () { a = this.end(); }, domElement: r, setMode: t
        };
}).Panel = function (e, t, i) { var n = 1 / 0, r = 0, a = Math.round, o = a(window.devicePixelRatio || 1), s = 80 * o, l = 48 * o, c = 3 * o, u = 2 * o, h = 3 * o, d = 15 * o, p = 74 * o, f = 30 * o, m = document.createElement("canvas"); m.width = s, m.height = l, m.style.cssText = "width:80px;height:48px"; var v = m.getContext("2d"); return v.font = "bold " + 9 * o + "px Helvetica,Arial,sans-serif", v.textBaseline = "top", v.fillStyle = i, v.fillRect(0, 0, s, l), v.fillStyle = t, v.fillText(e, c, u), v.fillRect(h, d, p, f), v.fillStyle = i, v.globalAlpha = .9, v.fillRect(h, d, p, f), { dom: m, update: function (l, g) { n = Math.min(n, l), r = Math.max(r, l), v.fillStyle = i, v.globalAlpha = 1, v.fillRect(0, 0, s, d), v.fillStyle = t, v.fillText(a(l) + " " + e + " (" + a(n) + "-" + a(r) + ")", c, u), v.drawImage(m, h + o, d, p - o, f, h, d, p - o, f), v.fillRect(h + p - o, d, o, f), v.fillStyle = i, v.globalAlpha = .9, v.fillRect(h + p - o, d, o, a((1 - l / g) * f)); } }; }, n);
}, function (e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", { value: !0 }), t.VueHammer = void 0;
    var n = a(i(57)), r = a(i(84));
    function a(e) { return e && e.__esModule ? e : { default: e }; }
    var o = ["tap", "pan", "pinch", "press", "rotate", "swipe"], s = ["panstart", "panend", "panmove", "pancancel", "pinchstart", "pinchmove", "pinchend", "pinchcancel", "pinchin", "pinchout", "pressup", "rotatestart", "rotatemove", "rotateend", "rotatecancel"], l = ["up", "down", "left", "right", "horizontal", "vertical", "all"];
    t.VueHammer = {
    config: {}, customEvents: {}, install: function (e) {
    var t = this; e.directive("hammer", {
    bind: function (e, i) {
    e.hammer || (e.hammer = new r.default.Manager(e)); var a = e.hammer, l = i.arg; l || console.warn("[vue-hammer] event type argument is required."), e.__hammerConfig = e.__hammerConfig || {}, e.__hammerConfig[l] = {}; var c = i.modifiers; e.__hammerConfig[l].direction = e.__hammerConfig[l].direction || [], (0, n.default)(c).length && (0, n.default)(c).filter((function (e) { return i.modifiers[e]; })).forEach((function (t) { var i = e.__hammerConfig[l].direction; -1 === i.indexOf(t) && i.push(String(t)); })); var u = void 0, h = void 0; if (t.customEvents[l]) {
        var d = t.customEvents[l];
        u = d.type, (h = new (r.default[t.capitalize(u)])(d)).recognizeWith(a.recognizers), a.add(h);
    }
    else {
        u = o.find((function (e) { return e === l; }));
        var p = s.find((function (e) { return e === l; }));
        if (!u && !p)
            return void console.warn("[vue-hammer] invalid event type: " + l);
        if (p && 0 !== e.__hammerConfig[p].direction.length && console.warn("[vue-hammer] " + p + " should not have directions"), !u)
            return;
        if (("tap" === u || "pinch" === u || "press" === u || "rotate" === u) && 0 !== e.__hammerConfig[u].direction.length)
            throw Error("[vue-hammer] " + u + " should not have directions");
        (h = a.get(u)) || ((h = new (r.default[t.capitalize(u)])).recognizeWith(a.recognizers), a.add(h));
        var f = t.config[u];
        f && (t.guardDirections(f), h.set(f));
        var m = e.hammerOptions && e.hammerOptions[u];
        m && (t.guardDirections(m), h.set(m));
    }
    }, inserted: function (e, i) { var n = e.hammer, r = i.arg, a = s.find((function (e) { return e === r; })) ? r : t.buildEventWithDirections(r, e.__hammerConfig[r].direction); n.handler && n.off(a, n.handler), "function" != typeof i.value ? (n.handler = null, console.warn("[vue-hammer] invalid handler function for v-hammer: " + i.arg)) : n.on(a, n.handler = i.value); }, componentUpdated: function (e, i) { var n = e.hammer, r = i.arg, a = s.find((function (e) { return e === r; })) ? r : t.buildEventWithDirections(r, e.__hammerConfig[r].direction); n.handler && n.off(a, n.handler), "function" != typeof i.value ? (n.handler = null, console.warn("[vue-hammer] invalid handler function for v-hammer: " + i.arg)) : n.on(a, n.handler = i.value); }, unbind: function (e, i) { var r = e.hammer, a = i.arg, o = s.find((function (e) { return e === a; })) ? a : t.buildEventWithDirections(a, e.__hammerConfig[a].direction); r.handler && e.hammer.off(o, r.handler), (0, n.default)(r.handlers).length || (e.hammer.destroy(), e.hammer = null); }
    });
    }, guardDirections: function (e) {
    var t = e.direction; if ("string" == typeof t) {
        var i = "DIRECTION_" + t.toUpperCase();
        l.indexOf(t) > -1 && r.default.hasOwnProperty(i) ? e.direction = r.default[i] : console.warn("[vue-hammer] invalid direction: " + t);
    }
    }, buildEventWithDirections: function (e, t) { var i = {}; t.forEach((function (e) { "horizontal" === (e = e.toLowerCase()) ? (i.left = 1, i.right = 1) : "vertical" === e ? (i.up = 1, i.down = 1) : "all" === e ? (i.left = 1, i.right = 1, i.up = 1, i.down = 1) : i[e] = 1; })); var r = (0, n.default)(i); return 0 === r.length ? e : r.map((function (t) { return e + t; })).join(" "); }, capitalize: function (e) { return e.charAt(0).toUpperCase() + e.slice(1); }
    };
}, function (e, t) { e.exports = '<svg width="11" height="6" viewBox="0 0 11 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.124492 0.125671C-0.0414974 0.293233 -0.0414974 0.576799 0.124492 0.744361L5.19356 5.87433C5.35955 6.04189 5.64045 6.04189 5.80644 5.87433L10.8755 0.75725C11.0415 0.589689 11.0415 0.306122 10.8755 0.138561C10.7095 -0.0290008 10.4286 -0.0290008 10.2626 0.138561L5.5 4.94629L0.724608 0.125671C0.558619 -0.0418901 0.290482 -0.0418901 0.124492 0.125671Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="36" viewBox="0 0 35 36" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.6295 5.83319C10.44 1.48972 15.8642 -0.0241131 17 2.26495C18.1358 4.55401 14.5576 7.26694 15.1963 9.91034C15.835 12.5537 17 18.0001 17 18.0001H5.91246C5.91246 18.0001 4.81902 10.1767 7.6295 5.83319Z" fill="white" fill-opacity="0.50071" style="fill: rgba(255, 255, 255, 0.50071);"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M29 12.2804C29 5.5088 23.6166 0 17 0C10.3834 0 5 5.5088 5 12.2804V23.7196C5 30.4912 10.3834 36 17 36C23.6166 36 29 30.4912 29 23.7196V12.2804ZM18.4603 8.2536V10.5872C18.4603 11.4116 17.8048 12.0816 17 12.0816C16.1952 12.0816 15.5397 11.4112 15.5397 10.5872V8.2536C15.5397 7.4288 16.1952 6.7592 17 6.7592C17.8048 6.7592 18.4603 7.4288 18.4603 8.2536ZM16.1784 1.7172C10.8505 2.148 6.64281 6.7188 6.64281 12.2804V17.1588H16.1784V13.646C14.8655 13.2764 13.8969 12.0464 13.8969 10.5868V8.2532C13.8969 6.7936 14.8655 5.564 16.1784 5.1944V1.7172ZM27.3572 23.7196C27.3572 29.564 22.711 34.3192 17 34.3192C11.289 34.3192 6.64281 29.564 6.64281 23.7196V18.8408H27.3572V23.7196ZM17.8216 17.1592H27.3572V12.2804C27.3572 6.7188 23.1499 2.148 17.8216 1.7172V5.1948C19.1345 5.564 20.1031 6.794 20.1031 8.2536V10.5872C20.1031 12.0468 19.1345 13.2764 17.8216 13.6464V17.1592Z" fill="white" style="\n fill: #fff;\n"></path><path d="M9.22786 9.3778H1.68786L3.22786 7.8378C3.408 7.64121 3.40218 7.33787 3.21465 7.14833C3.02712 6.95879 2.72385 6.94976 2.52536 7.1278L0.127865 9.5228C0.104635 9.5457 0.0837016 9.57082 0.0653647 9.5978V9.6178C0.0521123 9.63857 0.0404138 9.6603 0.0303647 9.6828C0.0303647 9.6828 0.0303647 9.7028 0.0303647 9.7128C-0.0101216 9.81735 -0.0101216 9.93324 0.0303647 10.0378C0.0303647 10.0378 0.0303647 10.0578 0.0303647 10.0678C0.0404138 10.0903 0.0521123 10.112 0.0653647 10.1328V10.1528C0.0837016 10.1798 0.104635 10.2049 0.127865 10.2278L2.52536 12.6278C2.72074 12.8232 3.03749 12.8232 3.23286 12.6278C3.42824 12.4324 3.42824 12.1157 3.23286 11.9203L1.68786 10.3778H9.22786C9.50401 10.3778 9.72786 10.1539 9.72786 9.8778C9.72786 9.60165 9.50401 9.3778 9.22786 9.3778Z" fill="white" style="\n fill: #fff;\n"></path><path d="M24.9999 9.3778H32.5399L30.9999 7.8378C30.8198 7.64121 30.8256 7.33787 31.0131 7.14833C31.2007 6.95879 31.5039 6.94976 31.7024 7.1278L34.0999 9.5228C34.1231 9.5457 34.1441 9.57082 34.1624 9.5978V9.6178C34.1757 9.63857 34.1874 9.6603 34.1974 9.6828C34.1974 9.6828 34.1974 9.7028 34.1974 9.7128C34.2379 9.81735 34.2379 9.93324 34.1974 10.0378C34.1974 10.0378 34.1974 10.0578 34.1974 10.0678C34.1874 10.0903 34.1757 10.112 34.1624 10.1328V10.1528C34.1441 10.1798 34.1231 10.2049 34.0999 10.2278L31.7024 12.6278C31.507 12.8232 31.1903 12.8232 30.9949 12.6278C30.7995 12.4324 30.7995 12.1157 30.9949 11.9203L32.5399 10.3778H24.9999C24.7238 10.3778 24.4999 10.1539 24.4999 9.8778C24.4999 9.60165 24.7238 9.3778 24.9999 9.3778Z" fill="white" style="\n fill: #fff;\n"></path></svg>'; }, function (e, t) { e.exports = '<svg xmlns="http://www.w3.org/2000/svg" width="23" height="37" viewBox="0 0 23 37" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12Z" fill="white" fill-opacity="0.50071"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M6.58566 7.22804L22.8423 26.3004C22.9527 26.4305 23.0112 26.6061 22.9982 26.7817C22.9657 27.1395 22.654 27.4062 22.2968 27.3802L14.5289 26.7492L16.984 35.1145C17.0814 35.4593 16.8865 35.817 16.5423 35.9211L12.9701 36.9749C12.6259 37.0725 12.2687 36.8773 12.1648 36.5326L9.65773 27.9786L3.03945 33.0264C2.90306 33.1305 2.7277 33.176 2.55883 33.15C2.20811 33.098 1.95481 32.7727 2.00677 32.415L5.44905 7.55979C5.46854 7.40367 5.54648 7.26057 5.66988 7.15649C5.94266 6.92231 6.35184 6.95484 6.58566 7.22804ZM12.9896 25.9621C13.0221 25.6044 13.3338 25.3377 13.6911 25.3637L20.8419 25.9426L6.54019 9.1665L3.50708 31.0229L9.62526 26.3589C9.68371 26.3134 9.75516 26.2744 9.8331 26.2548C10.1773 26.1573 10.5345 26.3524 10.6385 26.6972L13.2299 35.5308L15.5551 34.8478L13.0156 26.1963C12.9896 26.1182 12.9831 26.0402 12.9896 25.9621Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="35" height="36" viewBox="0 0 35 36" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M25.5949 5.83303C22.7844 1.48956 17.9666 -0.0259765 16.8308 2.26309C15.695 4.55215 19.7644 6.7947 19.1257 9.4381C18.4871 12.0815 16.2244 17.9999 16.2244 17.9999H27.3119C27.3119 17.9999 28.4053 10.1765 25.5949 5.83303Z" fill="white" fill-opacity="0.50071"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M29 12.2804C29 5.5088 23.6166 0 17 0C10.3834 0 5 5.5088 5 12.2804V23.7196C5 30.4912 10.3834 36 17 36C23.6166 36 29 30.4912 29 23.7196V12.2804ZM18.4603 8.2536V10.5872C18.4603 11.4116 17.8048 12.0816 17 12.0816C16.1952 12.0816 15.5397 11.4112 15.5397 10.5872V8.2536C15.5397 7.4288 16.1952 6.7592 17 6.7592C17.8048 6.7592 18.4603 7.4288 18.4603 8.2536ZM16.1784 1.7172C10.8505 2.148 6.64281 6.7188 6.64281 12.2804V17.1588H16.1784V13.646C14.8655 13.2764 13.8969 12.0464 13.8969 10.5868V8.2532C13.8969 6.7936 14.8655 5.564 16.1784 5.1944V1.7172ZM27.3572 23.7196C27.3572 29.564 22.711 34.3192 17 34.3192C11.289 34.3192 6.64281 29.564 6.64281 23.7196V18.8408H27.3572V23.7196ZM17.8216 17.1592H27.3572V12.2804C27.3572 6.7188 23.1499 2.148 17.8216 1.7172V5.1948C19.1345 5.564 20.1031 6.794 20.1031 8.2536V10.5872C20.1031 12.0468 19.1345 13.2764 17.8216 13.6464V17.1592Z" fill="white"></path><path d="M9.22786 9.3778H1.68786L3.22786 7.8378C3.408 7.64121 3.40218 7.33787 3.21465 7.14833C3.02712 6.95879 2.72385 6.94976 2.52536 7.1278L0.127865 9.5228C0.104635 9.5457 0.0837016 9.57082 0.0653647 9.5978V9.6178C0.0521123 9.63857 0.0404138 9.6603 0.0303647 9.6828C0.0303647 9.6828 0.0303647 9.7028 0.0303647 9.7128C-0.0101216 9.81735 -0.0101216 9.93324 0.0303647 10.0378C0.0303647 10.0378 0.0303647 10.0578 0.0303647 10.0678C0.0404138 10.0903 0.0521123 10.112 0.0653647 10.1328V10.1528C0.0837016 10.1798 0.104635 10.2049 0.127865 10.2278L2.52536 12.6278C2.72074 12.8232 3.03749 12.8232 3.23286 12.6278C3.42824 12.4324 3.42824 12.1157 3.23286 11.9203L1.68786 10.3778H9.22786C9.50401 10.3778 9.72786 10.1539 9.72786 9.8778C9.72786 9.60165 9.50401 9.3778 9.22786 9.3778Z" fill="white"></path><path d="M24.9999 9.3778H32.5399L30.9999 7.8378C30.8198 7.64121 30.8256 7.33787 31.0131 7.14833C31.2007 6.95879 31.5039 6.94976 31.7024 7.1278L34.0999 9.5228C34.1231 9.5457 34.1441 9.57082 34.1624 9.5978V9.6178C34.1757 9.63857 34.1874 9.6603 34.1974 9.6828C34.1974 9.6828 34.1974 9.7028 34.1974 9.7128C34.2379 9.81735 34.2379 9.93324 34.1974 10.0378C34.1974 10.0378 34.1974 10.0578 34.1974 10.0678C34.1874 10.0903 34.1757 10.112 34.1624 10.1328V10.1528C34.1441 10.1798 34.1231 10.2049 34.0999 10.2278L31.7024 12.6278C31.507 12.8232 31.1903 12.8232 30.9949 12.6278C30.7995 12.4324 30.7995 12.1157 30.9949 11.9203L32.5399 10.3778H24.9999C24.7238 10.3778 24.4999 10.1539 24.4999 9.8778C24.4999 9.60165 24.7238 9.3778 24.9999 9.3778Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8327 11.0606C12.0558 11.2842 12.0558 11.6421 11.8327 11.8434C11.7212 11.9553 11.5874 12 11.4312 12C11.2974 12 11.1413 11.9553 11.0297 11.8434L6.01115 6.78844L0.97026 11.8434C0.858736 11.9553 0.724907 12 0.568773 12C0.434944 12 0.27881 11.9553 0.167286 11.8434C-0.0557621 11.6198 -0.0557621 11.2619 0.167286 11.0606L5.20818 6.00559L0.167286 0.950606C-0.0557621 0.726934 -0.0557621 0.369059 0.167286 0.167754C0.390335 -0.055918 0.747212 -0.055918 0.947955 0.167754L6.01115 5.22274L11.052 0.167754C11.2751 -0.055918 11.632 -0.055918 11.8327 0.167754C12.0558 0.391426 12.0558 0.749301 11.8327 0.950606L6.79182 6.00559L11.8327 11.0606Z" fill="#6D6F73"></path></svg>'; }, function (e, t) { e.exports = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.5"><path d="M8 14.0232C9.66343 14.0232 11.1696 13.3488 12.2592 12.2592C13.3488 11.1696 14.0232 9.66295 14.0232 8C14.0232 6.33657 13.3488 4.83088 12.2592 3.74081C11.1696 2.65122 9.66295 1.97628 8 1.97628C6.33657 1.97628 4.83039 2.65074 3.74081 3.74081C2.65122 4.83039 1.97628 6.33657 1.97628 8C1.97628 9.66343 2.65074 11.1696 3.74081 12.2592C4.83039 13.3488 6.33657 14.0232 8 14.0232ZM12.9498 12.9498C11.6829 14.2161 9.93253 15 8 15C6.06698 15 4.31661 14.2161 3.05023 12.9498C1.78337 11.6829 1 9.93253 1 8C1 6.06698 1.78386 4.31661 3.05023 3.05023C4.31661 1.78337 6.06698 1 8 1C9.93302 1 11.6834 1.78386 12.9498 3.05023C14.2161 4.31661 15 6.06698 15 8C15 9.93302 14.2161 11.6834 12.9498 12.9498Z" fill="#6D6F73" stroke="#6D6F73" stroke-width="0.2"></path><path d="M1.48789 8.48166C1.21928 8.48166 1.00146 8.26384 1.00146 7.99523C1.00146 7.72662 1.21928 7.5088 1.48789 7.5088L14.5116 7.45801C14.7802 7.45801 14.998 7.67583 14.998 7.94444C14.998 8.21305 14.7802 8.43087 14.5116 8.43087L1.48789 8.48166Z" fill="#6D6F73" stroke="#6D6F73" stroke-width="0.2"></path><path d="M7.48828 1.48789C7.48828 1.21928 7.7061 1.00146 7.97471 1.00146C8.24332 1.00146 8.46114 1.21928 8.46114 1.48789L8.51193 14.5116C8.51193 14.7802 8.29411 14.998 8.0255 14.998C7.75689 14.998 7.53907 14.7802 7.53907 14.5116L7.48828 1.48789Z" fill="#6D6F73" stroke="#6D6F73" stroke-width="0.2"></path><path d="M7.99981 14.0232C8.69917 14.0232 9.36191 13.3976 9.86739 12.3867C10.4237 11.2746 10.7675 9.724 10.7675 7.99951C10.7675 6.27503 10.4232 4.72441 9.86739 3.61236C9.36191 2.60141 8.69966 1.97579 7.99981 1.97579C7.30044 1.97579 6.63771 2.60141 6.13223 3.61236C5.57596 4.72441 5.23214 6.27503 5.23214 7.99951C5.23214 9.724 5.57645 11.2746 6.13223 12.3867C6.63771 13.3976 7.29995 14.0232 7.99981 14.0232ZM10.7372 12.8218C10.0647 14.1678 9.09867 15 7.99981 15C6.90094 15 5.93492 14.1673 5.26242 12.8218C4.64022 11.5779 4.25537 9.87149 4.25537 8C4.25537 6.12803 4.64022 4.4221 5.26242 3.17819C5.93492 1.83221 6.90094 1 7.99981 1C9.09867 1 10.0647 1.83269 10.7372 3.17819C11.3594 4.4221 11.7442 6.12852 11.7442 8C11.7442 9.87197 11.3594 11.5779 10.7372 12.8218Z" fill="#6D6F73" stroke="#6D6F73" stroke-width="0.2"></path><path d="M2.41759 5.26706C2.14898 5.26804 1.93018 5.0512 1.9292 4.78259C1.92823 4.51398 2.14507 4.29518 2.41368 4.2942L13.582 4.24341C13.8506 4.24243 14.0694 4.45928 14.0704 4.72789C14.0714 4.9965 13.8546 5.21529 13.5859 5.21627L2.41759 5.26706Z" fill="#6D6F73" stroke="#6D6F73" stroke-width="0.2"></path><path d="M2.41759 11.781C2.14898 11.782 1.93018 11.5651 1.9292 11.2965C1.92823 11.0279 2.14507 10.8091 2.41368 10.8081L13.582 10.7573C13.8506 10.7564 14.0694 10.9732 14.0704 11.2418C14.0714 11.5104 13.8546 11.7292 13.5859 11.7302L2.41759 11.781Z" fill="#6D6F73" stroke="#6D6F73" stroke-width="0.2"></path></g></svg>'; }, function (e, t) { e.exports = '<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.5" d="M5.40015 6.50008C6.50015 7.60008 7.70014 8.60008 8.20014 8.10008C8.90014 7.40008 9.30015 6.80008 10.9002 8.00008C12.5002 9.30008 11.3001 10.1001 10.6001 10.8001C9.8001 11.6001 6.90015 10.8001 3.90015 7.90008C1.00015 5.00008 0.200128 2.00007 1.00013 1.20007C1.70013 0.500075 2.50012 -0.699921 3.80012 0.900079C5.10012 2.50008 4.40014 2.90008 3.70014 3.60008C3.30014 4.20008 4.30015 5.50008 5.40015 6.50008Z" fill="#6D6F73"></path></svg>'; }, function (e, t) { e.exports = '<svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.5" d="M1.05 0C0.84 0 0.6475 0.0524936 0.49 0.157494L6.475 5.37249C6.79 5.65249 7.175 5.65249 7.49 5.37249L13.4925 0.157494C13.335 0.0524936 13.1425 0 12.9325 0H1.05ZM0.0525 0.7C0.0175 0.805 0 0.927494 0 1.03249V8.7325C0 9.31001 0.4725 9.78251 1.05 9.78251H12.95C13.5275 9.78251 14 9.31001 14 8.7325V1.03249C14 0.909994 13.9825 0.805 13.9475 0.7L7.9625 5.89749C7.4025 6.38749 6.58 6.38749 6.02 5.89749L0.0525 0.7Z" fill="#6D6F73"></path></svg>'; }, function (e, t) { e.exports = '<svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.04343 0C1.55368 0 0.106152 1.56929 0 3.5856H1.25452C1.37998 2.08288 2.45115 1.13179 3.99517 1.13179C5.54885 1.13179 6.63932 2.11141 6.63932 3.46196C6.63932 4.50815 6.18577 5.1644 4.96984 5.94429C3.60917 6.80027 3.04946 7.59918 3.05911 8.86413V9.75815H4.34258V9.04484C4.34258 7.98913 4.69964 7.44701 5.96381 6.6481C7.28589 5.81114 8 4.8125 8 3.40489C8 1.46467 6.36912 0 4.04343 0ZM2.6924 12.8872C2.6924 13.5245 3.16526 14 3.82147 14C4.46803 14 4.94089 13.5245 4.94089 12.8872C4.94089 12.2405 4.46803 11.7649 3.82147 11.7649C3.16526 11.7649 2.6924 12.2405 2.6924 12.8872Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.8327 11.0606C12.0558 11.2842 12.0558 11.6421 11.8327 11.8434C11.7212 11.9553 11.5874 12 11.4312 12C11.2974 12 11.1413 11.9553 11.0297 11.8434L6.01115 6.78844L0.97026 11.8434C0.858736 11.9553 0.724907 12 0.568773 12C0.434944 12 0.27881 11.9553 0.167286 11.8434C-0.0557621 11.6198 -0.0557621 11.2619 0.167286 11.0606L5.20818 6.00559L0.167286 0.950606C-0.0557621 0.726934 -0.0557621 0.369059 0.167286 0.167754C0.390335 -0.055918 0.747212 -0.055918 0.947955 0.167754L6.01115 5.22274L11.052 0.167754C11.2751 -0.055918 11.632 -0.055918 11.8327 0.167754C12.0558 0.391426 12.0558 0.749301 11.8327 0.950606L6.79182 6.00559L11.8327 11.0606Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.3443 0.157471H9.71139C9.41012 0.157471 9.17974 0.384971 9.17974 0.682471C9.17974 0.979971 9.41012 1.20747 9.71139 1.20747H12.0684L7.83291 5.38997C7.60253 5.56497 7.54936 5.89747 7.72658 6.12497C7.90379 6.35247 8.2405 6.40497 8.47088 6.22997C8.50633 6.19497 8.54177 6.15997 8.57721 6.12497L12.8127 1.94247V4.26997C12.8127 4.56747 13.043 4.79497 13.3443 4.79497C13.6456 4.79497 13.8759 4.56747 13.8759 4.26997V0.682471C13.8759 0.384971 13.6456 0.157471 13.3443 0.157471Z" fill="white"></path><path d="M6.07844 7.78752C5.86578 7.59502 5.52907 7.59502 5.33413 7.80502L1.13413 12.04L1.11641 9.71252C1.11641 9.41502 0.868312 9.18752 0.567046 9.20502C0.26578 9.20502 0.0354004 9.45002 0.0354004 9.73002L0.0885649 13.3175C0.0885649 13.615 0.318945 13.8425 0.620211 13.8425L4.25312 13.79C4.55439 13.79 4.78477 13.545 4.78477 13.265C4.78477 12.9675 4.53667 12.74 4.25312 12.74L1.89616 12.775L6.07844 8.54002C6.2911 8.33002 6.2911 7.99752 6.07844 7.78752C6.09616 7.78752 6.09616 7.78752 6.07844 7.78752Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.9266 5.78438V1H1L1.29876 18.8094H16.9266V11.5381L20.4273 7.92874" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.85066 4.96179V1" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.85066 18.7361V14.7743" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path><path d="M13.2988 13.9131H16.8069" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.0988 5.26245L8.85065 8.56091V11.326H1.60767" stroke="white" stroke-linecap="round" stroke-linejoin="round"></path></svg>'; }, function (e, t) { e.exports = '<svg width="21" height="22" viewBox="0 0 21 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 16.0308L10.6261 21L20.4043 16.0308V5.9597L10.7021 1L1 5.9597V16.0308Z" stroke="#fff" stroke-linejoin="round"></path><path d="M1.36523 5.95972L10.7022 11L20.4043 5.95972" stroke="#fff"></path><path d="M10.7021 21V11" stroke="#fff"></path><path d="M12.819 2.19763L10.8848 3.38477" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.66455 3.24005L10.7729 5.78931L11.6472 5.22852L13.9719 5.00183" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12.819 7.5238L14.611 8.82458" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8.95154 7.5238L7.26672 8.7048" stroke="#fff" stroke-linecap="round" stroke-linejoin="round"></path></svg>'; }, function (e, t) { e.exports = '<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.45247 10.5H1.91247L3.45247 8.96002C3.63261 8.76344 3.62679 8.46009 3.43926 8.27055C3.25173 8.08102 2.94846 8.07198 2.74997 8.25002L0.352474 10.645C0.329244 10.6679 0.308311 10.693 0.289974 10.72V10.74C0.276722 10.7608 0.265023 10.7825 0.254974 10.805C0.254974 10.805 0.254974 10.825 0.254974 10.835C0.214488 10.9396 0.214488 11.0555 0.254974 11.16C0.254974 11.16 0.254974 11.18 0.254974 11.19C0.265023 11.2125 0.276722 11.2342 0.289974 11.255V11.275C0.308311 11.302 0.329244 11.3271 0.352474 11.35L2.74997 13.75C2.94534 13.9454 3.2621 13.9454 3.45747 13.75C3.65284 13.5546 3.65284 13.2379 3.45747 13.0425L1.91247 11.5H5.45247C5.72862 11.5 5.95247 11.2762 5.95247 11C5.95247 10.7239 5.72862 10.5 5.45247 10.5Z" fill="white"></path><path d="M21.71 11.2775V11.2575C21.7232 11.2367 21.7349 11.215 21.745 11.1925C21.745 11.1925 21.745 11.1725 21.745 11.1625C21.7855 11.058 21.7855 10.9421 21.745 10.8375C21.745 10.8375 21.745 10.8175 21.745 10.8075C21.7349 10.785 21.7232 10.7633 21.71 10.7425V10.7225C21.6916 10.6955 21.6707 10.6704 21.6475 10.6475L19.25 8.25001C19.0546 8.05464 18.7379 8.05464 18.5425 8.25001C18.3471 8.44538 18.3471 8.76214 18.5425 8.95751L20.0875 10.5H16.5475C16.2713 10.5 16.0475 10.7239 16.0475 11C16.0475 11.2762 16.2713 11.5 16.5475 11.5H20.0875L18.55 13.04C18.4065 13.1612 18.343 13.3526 18.3857 13.5355C18.4283 13.7184 18.5699 13.862 18.7522 13.9073C18.9345 13.9525 19.1268 13.8918 19.25 13.75L21.6425 11.3575C21.6677 11.3333 21.6903 11.3065 21.71 11.2775Z" fill="white"></path><path d="M8.95992 3.45001L10.4999 1.91251V5.45251C10.4999 5.72865 10.7238 5.95251 10.9999 5.95251C11.2761 5.95251 11.4999 5.72865 11.4999 5.45251V1.91251L13.0399 3.45251C13.2365 3.63265 13.5399 3.62683 13.7294 3.4393C13.9189 3.25176 13.928 2.9485 13.7499 2.75001L11.3549 0.352512C11.3312 0.329152 11.3053 0.308215 11.2774 0.290012L11.2499 0.267512L11.1999 0.242512L11.1499 0.227512L11.1074 0.215012C11.0431 0.202214 10.9768 0.202214 10.9124 0.215012L10.8699 0.227512L10.8199 0.242512L10.7699 0.267512L10.7324 0.287512C10.7046 0.305715 10.6786 0.326652 10.6549 0.350012L8.24992 2.75001C8.05455 2.94538 8.05455 3.26214 8.24992 3.45751C8.44529 3.65288 8.76205 3.65288 8.95742 3.45751L8.95992 3.45001Z" fill="white"></path><path d="M13.04 18.55L11.5 20.0875V16.5475C11.5 16.2714 11.2761 16.0475 11 16.0475C10.7239 16.0475 10.5 16.2714 10.5 16.5475V20.0875L8.96 18.55C8.76284 18.3786 8.46696 18.3879 8.28092 18.5713C8.09489 18.7547 8.08141 19.0504 8.25 19.25L10.6425 21.6425C10.6662 21.6659 10.6921 21.6868 10.72 21.705L10.7575 21.725L10.8075 21.75L10.8575 21.765L10.9 21.7775C10.9644 21.7903 11.0306 21.7903 11.095 21.7775L11.1375 21.765L11.1875 21.75L11.2375 21.725L11.275 21.705C11.3028 21.6868 11.3288 21.6659 11.3525 21.6425L13.75 19.25C13.9454 19.0546 13.9454 18.7379 13.75 18.5425C13.5546 18.3471 13.2379 18.3471 13.0425 18.5425L13.04 18.55Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8.58996 13.4125C7.25827 12.0808 7.25826 9.92169 8.58994 8.59C9.9222 7.25967 12.0802 7.25967 13.4124 8.59C14.7441 9.92169 14.7441 12.0808 13.4124 13.4125C12.0807 14.7441 9.92164 14.7441 8.58996 13.4125ZM9.29865 12.7006C10.2382 13.6407 11.7618 13.6416 12.7024 12.7025C13.6417 11.7609 13.6417 10.2366 12.7024 9.295C11.7618 8.35595 10.2382 8.35678 9.29865 9.29686C8.35908 10.2369 8.35908 11.7606 9.29865 12.7006Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="120" height="32" viewBox="0 0 120 32" xmlns="http://www.w3.org/2000/svg"><path d="M2.07812 2.54492V11H3.13281V7.98242H5.25977C6.84766 7.98242 7.97852 6.86328 7.97852 5.28125C7.97852 3.66992 6.87109 2.54492 5.27148 2.54492H2.07812ZM3.13281 3.48242H4.99609C6.2207 3.48242 6.89453 4.12109 6.89453 5.28125C6.89453 6.40039 6.19727 7.04492 4.99609 7.04492H3.13281V3.48242ZM11.7123 10.2031C10.517 10.2031 9.84319 9.33594 9.84319 7.8418C9.84319 6.3418 10.517 5.48047 11.7123 5.48047C12.9076 5.48047 13.5815 6.3418 13.5815 7.8418C13.5815 9.33594 12.9076 10.2031 11.7123 10.2031ZM11.7123 11.1113C13.5112 11.1113 14.6244 9.86914 14.6244 7.8418C14.6244 5.80859 13.5112 4.57227 11.7123 4.57227C9.9135 4.57227 8.80022 5.80859 8.80022 7.8418C8.80022 9.86914 9.9135 11.1113 11.7123 11.1113ZM23.6317 4.68359H22.618L21.3758 9.73438H21.2821L19.87 4.68359H18.9032L17.4911 9.73438H17.3973L16.1551 4.68359H15.1356L16.9051 11H17.9247L19.3309 6.11328H19.4247L20.8368 11H21.8622L23.6317 4.68359ZM26.9788 5.46289C27.9807 5.46289 28.6487 6.20117 28.6722 7.32031H25.1917C25.2679 6.20117 25.971 5.46289 26.9788 5.46289ZM28.6429 9.36523C28.3792 9.92188 27.8284 10.2207 27.014 10.2207C25.9417 10.2207 25.2444 9.42969 25.1917 8.18164V8.13477H29.7327V7.74805C29.7327 5.78516 28.6956 4.57227 26.9905 4.57227C25.2561 4.57227 24.1429 5.86133 24.1429 7.84766C24.1429 9.8457 25.2386 11.1113 26.9905 11.1113C28.3733 11.1113 29.346 10.4492 29.6507 9.36523H28.6429ZM31.029 11H32.0368V7.08594C32.0368 6.19531 32.7341 5.55078 33.695 5.55078C33.8943 5.55078 34.2575 5.58594 34.3396 5.60938V4.60156C34.2107 4.58398 33.9997 4.57227 33.8357 4.57227C32.9978 4.57227 32.2712 5.00586 32.0837 5.62109H31.99V4.68359H31.029V11ZM37.6574 5.46289C38.6593 5.46289 39.3273 6.20117 39.3507 7.32031H35.8703C35.9464 6.20117 36.6496 5.46289 37.6574 5.46289ZM39.3214 9.36523C39.0578 9.92188 38.507 10.2207 37.6925 10.2207C36.6203 10.2207 35.923 9.42969 35.8703 8.18164V8.13477H40.4113V7.74805C40.4113 5.78516 39.3742 4.57227 37.6691 4.57227C35.9347 4.57227 34.8214 5.86133 34.8214 7.84766C34.8214 9.8457 35.9171 11.1113 37.6691 11.1113C39.0519 11.1113 40.0246 10.4492 40.3292 9.36523H39.3214ZM44.0455 11.1113C44.9185 11.1113 45.6685 10.6953 46.067 9.99219H46.1607V11H47.1217V2.17578H46.1138V5.67969H46.0259C45.6685 4.98828 44.9244 4.57227 44.0455 4.57227C42.44 4.57227 41.3912 5.86133 41.3912 7.8418C41.3912 9.82812 42.4283 11.1113 44.0455 11.1113ZM44.2799 5.48047C45.4224 5.48047 46.1373 6.39453 46.1373 7.8418C46.1373 9.30078 45.4283 10.2031 44.2799 10.2031C43.1256 10.2031 42.4342 9.31836 42.4342 7.8418C42.4342 6.37109 43.1314 5.48047 44.2799 5.48047ZM55.0346 11.1113C56.6342 11.1113 57.683 9.81641 57.683 7.8418C57.683 5.85547 56.6401 4.57227 55.0346 4.57227C54.1674 4.57227 53.3998 5 53.0541 5.67969H52.9604V2.17578H51.9526V11H52.9135V9.99219H53.0073C53.4057 10.6953 54.1557 11.1113 55.0346 11.1113ZM54.8002 5.48047C55.9545 5.48047 56.6401 6.36523 56.6401 7.8418C56.6401 9.31836 55.9545 10.2031 54.8002 10.2031C53.6518 10.2031 52.9369 9.30078 52.9369 7.8418C52.9369 6.38281 53.6518 5.48047 54.8002 5.48047ZM59.284 13.291C60.4032 13.291 60.9071 12.8516 61.4461 11.3867L63.9129 4.68359H62.8407L61.1122 9.88086H61.0184L59.284 4.68359H58.1942L60.5321 11.0059L60.4149 11.3809C60.1512 12.1426 59.8348 12.4238 59.2547 12.4238C59.1141 12.4238 58.9559 12.418 58.8329 12.3945V13.2559C58.9735 13.2793 59.1493 13.291 59.284 13.291Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.6011 31.1746H12.7618V22.4128H10.6011V31.1746Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M18.8399 31.3069C20.9641 31.3069 22.1342 30.3396 22.1342 28.5832C22.1342 27.2752 21.46 26.5189 19.8079 25.9722L18.6145 25.5742C18.2394 25.4489 17.8921 25.2675 17.8921 24.7918C17.8921 24.4296 18.1551 24.0427 18.8928 24.0427C19.5232 24.0427 20.0229 24.2329 20.4546 24.639L21.6647 23.3704C21.1977 22.866 20.3265 22.3064 18.7606 22.3064C17.2923 22.3064 15.8108 23.0996 15.8108 24.8717C15.8108 26.1366 16.5155 26.9861 17.9652 27.4692L19.026 27.8272C19.6429 28.0334 19.9999 28.2447 19.9999 28.7158C19.9999 29.0999 19.7801 29.5578 18.7338 29.5578C17.7785 29.5578 17.2151 29.0772 16.831 28.6232L15.2799 29.7864C15.7733 30.3966 16.8439 31.3069 18.8399 31.3069Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M28.5037 31.3069C30.8735 31.3069 32.2882 30.0014 32.2882 27.8143V22.4129H30.1275V27.7878C30.1275 28.9195 29.5661 29.5178 28.5037 29.5178C27.4413 29.5178 26.8799 28.9195 26.8799 27.7878V22.4129H24.7189V27.8143C24.7189 30.0014 26.1339 31.3069 28.5037 31.3069Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M44.9362 22.4128V31.1746H50.928V29.3987H47.0968V22.4128H44.9362Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M61.3504 31.3069C63.4746 31.3069 64.6447 30.3396 64.6447 28.5832C64.6447 27.2752 63.9705 26.5189 62.3184 25.9722L61.125 25.5742C60.7499 25.4489 60.4026 25.2675 60.4026 24.7918C60.4026 24.4296 60.6656 24.0427 61.4033 24.0427C62.0337 24.0427 62.5334 24.2329 62.9651 24.639L64.1752 23.3704C63.7082 22.866 62.837 22.3064 61.2711 22.3064C59.8028 22.3064 58.3213 23.0996 58.3213 24.8717C58.3213 26.1366 59.026 26.9861 60.4757 27.4692L61.5365 27.8272C62.153 28.0334 62.5104 28.2447 62.5104 28.7158C62.5104 29.0999 62.2906 29.5578 61.2443 29.5578C60.289 29.5578 59.7256 29.0772 59.3412 28.6232L57.7904 29.7864C58.2838 30.3966 59.3544 31.3069 61.3504 31.3069Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M73.5911 28.2578C73.108 29.0818 72.4348 29.4515 71.4256 29.4515C70.0481 29.4515 69.0861 28.3582 69.0861 26.7936C69.0861 25.2365 70.0156 24.1489 71.3463 24.1489C72.5211 24.1489 73.0929 24.7056 73.4213 25.1735L75.0275 24.0831C74.1717 22.8878 72.9531 22.3066 71.3063 22.3066C68.82 22.3066 66.8722 24.2771 66.8722 26.7936C66.8722 29.317 68.8783 31.2941 71.4389 31.2941C73.206 31.2941 74.3808 30.6817 75.2313 29.3123L73.5911 28.2578Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M77.8345 31.1746H79.9952V22.4128H77.8345V31.1746Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M88.6119 27.5954V25.9256H85.351V24.1884H89.2615V22.4128H83.1903V31.1746H89.4469V29.3987H85.351V27.5954H88.6119Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M109.475 28.2578C108.992 29.0818 108.319 29.4515 107.31 29.4515C105.932 29.4515 104.97 28.3582 104.97 26.7936C104.97 25.2365 105.9 24.1489 107.23 24.1489C108.405 24.1489 108.977 24.7056 109.305 25.1735L110.912 24.0831C110.056 22.8878 108.837 22.3066 107.19 22.3066C104.704 22.3066 102.756 24.2771 102.756 26.7936C102.756 29.317 104.762 31.2941 107.323 31.2941C109.09 31.2941 110.265 30.6817 111.115 29.3123L109.475 28.2578Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M119.088 27.5954V25.9256H115.827V24.1884H119.737V22.4128H113.666V31.1746H119.923V29.3987H115.827V27.5954H119.088Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M37.0906 28.5899L38.0885 26.2343L39.1027 28.5899H37.0906ZM38.1955 22.2822C38.1615 22.2822 38.1329 22.3027 38.1199 22.332L33.928 31.1747H36.0037L36.4542 30.0874H39.7624L40.2394 31.1747H42.4498L38.2695 22.3291C38.256 22.3017 38.2283 22.2822 38.1955 22.2822Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M98.035 22.4073V27.0641L92.2832 22.3217C92.274 22.3138 92.2602 22.3091 92.2492 22.3091C92.2196 22.3091 92.1959 22.333 92.1959 22.3623V22.3626L92.1953 31.1603H94.208V26.5307L99.9583 31.2573C99.9583 31.2573 99.9741 31.2702 99.9933 31.2702C100.023 31.2702 100.046 31.2466 100.046 31.217V31.2173L100.048 22.4073H98.035Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8.26082 22.4128H6.08943L4.21842 26.8759L2.29168 22.4128H0C0 22.4128 4.0487 31.2836 4.0487 31.2833C4.0613 31.3122 4.09027 31.3324 4.12396 31.3324C4.15828 31.3324 4.18788 31.3113 4.20016 31.2814L8.26082 22.4128Z" fill="white"></path></svg>'; }, function (e, t) { e.exports = '<svg width="17" height="12" viewBox="0 0 17 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.8639 0.318733C15.439 -0.106244 14.7679 -0.106244 14.343 0.318733L5.23952 9.42218L1.8397 6C1.41472 5.57502 0.743709 5.57502 0.318733 6C-0.106244 6.42498 -0.106244 7.09599 0.318733 7.52097L4.47903 11.6813C4.90401 12.1062 5.57502 12.1062 6 11.6813L15.8639 1.81733C16.2665 1.41473 16.2665 0.743709 15.8639 0.318733Z" fill="black"></path></svg>'; }, function (e, t) { e.exports = '<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_b)"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z" fill="black" fill-opacity="0.15"></path></g><path d="M18.5281 17.0679L18.5281 17.0679C18.6779 17.2176 18.9202 17.2176 19.07 17.0679L21.6733 14.465C22.1868 13.9516 22.8724 13.6689 23.6048 13.6689C24.3378 13.6689 25.0231 13.9519 25.5366 14.4653C26.0502 14.9787 26.3332 15.6643 26.3332 16.3968C26.3332 17.1294 26.0502 17.8146 25.5366 18.3281L25.5366 18.3281L22.1328 21.7323C22.1328 21.7323 22.1328 21.7323 22.1328 21.7323C21.0679 22.797 19.334 22.797 18.2688 21.7323C18.119 21.5825 17.8767 21.5825 17.727 21.7323C17.5772 21.882 17.5771 22.1243 17.727 22.2741L17.727 22.2741C18.4092 22.956 19.305 23.297 20.2007 23.297C21.0963 23.297 21.9924 22.956 22.6743 22.2741L22.6036 22.2034L22.6743 22.2741L26.0788 18.8699C26.7371 18.2116 27.0998 17.333 27.0998 16.3965C27.0998 15.4601 26.7371 14.5815 26.0788 13.9232C24.7152 12.5592 22.4955 12.5587 21.1314 13.9232C21.1314 13.9232 21.1314 13.9232 21.1314 13.9232L18.5281 16.526C18.3783 16.6758 18.3784 16.9181 18.5281 17.0679Z" fill="white" stroke="white" stroke-width="0.2"></path><path d="M19.5294 24.3348L19.5295 24.3347C19.6791 24.1855 19.921 24.1849 20.071 24.3348L19.5294 24.3348ZM19.5294 24.3348L17.3266 26.5373M19.5294 24.3348L17.3266 26.5373M17.3266 26.5373C16.8131 27.0507 16.1274 27.3337 15.3948 27.3337M17.3266 26.5373L15.3948 27.3337M15.3948 27.3337C14.6621 27.3337 13.9767 27.0507 13.4629 26.5373L15.3948 27.3337ZM13.4629 26.5372C12.398 25.4725 12.398 23.7392 13.4629 22.6742L16.6671 19.4705C16.6671 19.4705 16.6671 19.4705 16.6671 19.4705C17.7323 18.4058 19.4659 18.4063 20.5308 19.4705C20.5308 19.4705 20.5308 19.4705 20.5308 19.4705L20.6015 19.3998C20.7122 19.5105 20.8912 19.5105 21.002 19.3998L21.0726 19.4705C21.0727 19.4705 21.0727 19.4705 21.0727 19.4705C21.2225 19.3207 21.2225 19.0785 21.0727 18.9287C19.7091 17.5647 17.4894 17.5642 16.1252 18.9287C16.1252 18.9287 16.1252 18.9287 16.1252 18.9287L12.9208 22.1327C12.2624 22.7909 11.9 23.6696 11.9 24.606C11.9 25.5425 12.2627 26.4211 12.9211 27.0791C13.5794 27.7371 14.4582 28.1 15.3945 28.1C16.3313 28.1 17.2101 27.7373 17.8682 27.0791C17.8682 27.0791 17.8682 27.0791 17.8682 27.0791L20.071 24.8767C20.2208 24.7269 20.2208 24.4846 20.071 24.3348L13.4629 26.5372Z" fill="white" stroke="white" stroke-width="0.2"></path><defs><filter id="filter0_b" x="-27.1828" y="-27.1828" width="94.3656" height="94.3656" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImage" stdDeviation="13.5914"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur"></feComposite><feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur" result="shape"></feBlend></filter></defs></svg>'; }, function (e, t, i) {
var n = i(99); function r(t, i, a) {
return "undefined" != typeof Reflect && Reflect.get ? e.exports = r = Reflect.get : e.exports = r = function (e, t, i) {
var r = n(e, t); if (r) {
    var a = Object.getOwnPropertyDescriptor(r, t);
    return a.get ? a.get.call(i) : a.value;
}
}, r(t, i, a || t);
} e.exports = r;
}, function (e, t, i) {
!function (e, t) {
e((function () {
    "use strict";
    var e, t = { mobileDetectRules: { phones: { iPhone: "\\biPhone\\b|\\biPod\\b", BlackBerry: "BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+", HTC: "HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel", Nexus: "Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6", Dell: "Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b", Motorola: "Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052", Samsung: "\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F", LG: "\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710", Sony: "SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533", Asus: "Asus.*Galaxy|PadFone.*Mobile", NokiaLumia: "Lumia [0-9]{3,4}", Micromax: "Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b", Palm: "PalmSource|Palm", Vertu: "Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature", Pantech: "PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790", Fly: "IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250", Wiko: "KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM", iMobile: "i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)", SimValley: "\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b", Wolfgang: "AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q", Alcatel: "Alcatel", Nintendo: "Nintendo (3DS|Switch)", Amoi: "Amoi", INQ: "INQ", OnePlus: "ONEPLUS", GenericPhone: "Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser" }, tablets: { iPad: "iPad|iPad.*Mobile", NexusTablet: "Android.*Nexus[\\s]+(7|9|10)", GoogleTablet: "Android.*Pixel C", SamsungTablet: "SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V", Kindle: "Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)", SurfaceTablet: "Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)", HPTablet: "HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10", AsusTablet: "^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b", BlackBerryTablet: "PlayBook|RIM Tablet", HTCtablet: "HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410", MotorolaTablet: "xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617", NookTablet: "Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2", AcerTablet: "Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30", ToshibaTablet: "Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO", LGTablet: "\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b", FujitsuTablet: "Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b", PrestigioTablet: "PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002", LenovoTablet: "Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X", DellTablet: "Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7", YarvikTablet: "Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b", MedionTablet: "Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB", ArnovaTablet: "97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2", IntensoTablet: "INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004", IRUTablet: "M702pro", MegafonTablet: "MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b", EbodaTablet: "E-Boda (Supreme|Impresspeed|Izzycomm|Essential)", AllViewTablet: "Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)", ArchosTablet: "\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b", AinolTablet: "NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark", NokiaLumiaTablet: "Lumia 2520", SonyTablet: "Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712", PhilipsTablet: "\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b", CubeTablet: "Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT", CobyTablet: "MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010", MIDTablet: "M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10", MSITablet: "MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b", SMiTTablet: "Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)", RockChipTablet: "Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A", FlyTablet: "IQ310|Fly Vision", bqTablet: "Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus", HuaweiTablet: "MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19", NecTablet: "\\bN-06D|\\bN-08D", PantechTablet: "Pantech.*P4100", BronchoTablet: "Broncho.*(N701|N708|N802|a710)", VersusTablet: "TOUCHPAD.*[78910]|\\bTOUCHTAB\\b", ZyncTablet: "z1000|Z99 2G|z930|z990|z909|Z919|z900", PositivoTablet: "TB07STA|TB10STA|TB07FTA|TB10FTA", NabiTablet: "Android.*\\bNabi", KoboTablet: "Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build", DanewTablet: "DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b", TexetTablet: "NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE", PlaystationTablet: "Playstation.*(Portable|Vita)", TrekstorTablet: "ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab", PyleAudioTablet: "\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b", AdvanTablet: "Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ", DanyTechTablet: "Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1", GalapadTablet: "Android.*\\bG1\\b(?!\\))", MicromaxTablet: "Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b", KarbonnTablet: "Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b", AllFineTablet: "Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide", PROSCANTablet: "\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b", YONESTablet: "BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026", ChangJiaTablet: "TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503", GUTablet: "TX-A1301|TX-M9002|Q702|kf026", PointOfViewTablet: "TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10", OvermaxTablet: "OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027", HCLTablet: "HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync", DPSTablet: "DPS Dream 9|DPS Dual 7", VistureTablet: "V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10", CrestaTablet: "CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989", MediatekTablet: "\\bMT8125|MT8389|MT8135|MT8377\\b", ConcordeTablet: "Concorde([ ]+)?Tab|ConCorde ReadMan", GoCleverTablet: "GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042", ModecomTablet: "FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003", VoninoTablet: "\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b", ECSTablet: "V07OT2|TM105A|S10OT1|TR10CS1", StorexTablet: "eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab", VodafoneTablet: "SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400", EssentielBTablet: "Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2", RossMoorTablet: "RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711", iMobileTablet: "i-mobile i-note", TolinoTablet: "tolino tab [0-9.]+|tolino shine", AudioSonicTablet: "\\bC-22Q|T7-QC|T-17B|T-17P\\b", AMPETablet: "Android.* A78 ", SkkTablet: "Android.* (SKYPAD|PHOENIX|CYCLOPS)", TecnoTablet: "TECNO P9|TECNO DP8D", JXDTablet: "Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b", iJoyTablet: "Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)", FX2Tablet: "FX2 PAD7|FX2 PAD10", XoroTablet: "KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151", ViewsonicTablet: "ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a", VerizonTablet: "QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1", OdysTablet: "LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10", CaptivaTablet: "CAPTIVA PAD", IconbitTablet: "NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S", TeclastTablet: "T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi", OndaTablet: "\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b", JaytechTablet: "TPC-PA762", BlaupunktTablet: "Endeavour 800NG|Endeavour 1010", DigmaTablet: "\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b", EvolioTablet: "ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b", LavaTablet: "QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b", AocTablet: "MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712", MpmanTablet: "MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010", CelkonTablet: "CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b", WolderTablet: "miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b", MediacomTablet: "M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA", MiTablet: "\\bMI PAD\\b|\\bHM NOTE 1W\\b", NibiruTablet: "Nibiru M1|Nibiru Jupiter One", NexoTablet: "NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI", LeaderTablet: "TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100", UbislateTablet: "UbiSlate[\\s]?7C", PocketBookTablet: "Pocketbook", KocasoTablet: "\\b(TB-1207)\\b", HisenseTablet: "\\b(F5281|E2371)\\b", Hudl: "Hudl HT7S3|Hudl 2", TelstraTablet: "T-Hub2", GenericTablet: "Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107" }, oss: { AndroidOS: "Android", BlackBerryOS: "blackberry|\\bBB10\\b|rim tablet os", PalmOS: "PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino", SymbianOS: "Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b", WindowsMobileOS: "Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;", WindowsPhoneOS: "Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;", iOS: "\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia", iPadOS: "CPU OS 13", MeeGoOS: "MeeGo", MaemoOS: "Maemo", JavaOS: "J2ME/|\\bMIDP\\b|\\bCLDC\\b", webOS: "webOS|hpwOS", badaOS: "\\bBada\\b", BREWOS: "BREW" }, uas: { Chrome: "\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?", Dolfin: "\\bDolfin\\b", Opera: "Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+", Skyfire: "Skyfire", Edge: "Mobile Safari/[.0-9]* Edge", IE: "IEMobile|MSIEMobile", Firefox: "fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS", Bolt: "bolt", TeaShark: "teashark", Blazer: "Blazer", Safari: "Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari", WeChat: "\\bMicroMessenger\\b", UCBrowser: "UC.*Browser|UCWEB", baiduboxapp: "baiduboxapp", baidubrowser: "baidubrowser", DiigoBrowser: "DiigoBrowser", Mercury: "\\bMercury\\b", ObigoBrowser: "Obigo", NetFront: "NF-Browser", GenericBrowser: "NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger", PaleMoon: "Android.*PaleMoon|Mobile.*PaleMoon" }, props: { Mobile: "Mobile/[VER]", Build: "Build/[VER]", Version: "Version/[VER]", VendorID: "VendorID/[VER]", iPad: "iPad.*CPU[a-z ]+[VER]", iPhone: "iPhone.*CPU[a-z ]+[VER]", iPod: "iPod.*CPU[a-z ]+[VER]", Kindle: "Kindle/[VER]", Chrome: ["Chrome/[VER]", "CriOS/[VER]", "CrMo/[VER]"], Coast: ["Coast/[VER]"], Dolfin: "Dolfin/[VER]", Firefox: ["Firefox/[VER]", "FxiOS/[VER]"], Fennec: "Fennec/[VER]", Edge: "Edge/[VER]", IE: ["IEMobile/[VER];", "IEMobile [VER]", "MSIE [VER];", "Trident/[0-9.]+;.*rv:[VER]"], NetFront: "NetFront/[VER]", NokiaBrowser: "NokiaBrowser/[VER]", Opera: [" OPR/[VER]", "Opera Mini/[VER]", "Version/[VER]"], "Opera Mini": "Opera Mini/[VER]", "Opera Mobi": "Version/[VER]", UCBrowser: ["UCWEB[VER]", "UC.*Browser/[VER]"], MQQBrowser: "MQQBrowser/[VER]", MicroMessenger: "MicroMessenger/[VER]", baiduboxapp: "baiduboxapp/[VER]", baidubrowser: "baidubrowser/[VER]", SamsungBrowser: "SamsungBrowser/[VER]", Iron: "Iron/[VER]", Safari: ["Version/[VER]", "Safari/[VER]"], Skyfire: "Skyfire/[VER]", Tizen: "Tizen/[VER]", Webkit: "webkit[ /][VER]", PaleMoon: "PaleMoon/[VER]", Gecko: "Gecko/[VER]", Trident: "Trident/[VER]", Presto: "Presto/[VER]", Goanna: "Goanna/[VER]", iOS: " \\bi?OS\\b [VER][ ;]{1}", Android: "Android [VER]", BlackBerry: ["BlackBerry[\\w]+/[VER]", "BlackBerry.*Version/[VER]", "Version/[VER]"], BREW: "BREW [VER]", Java: "Java/[VER]", "Windows Phone OS": ["Windows Phone OS [VER]", "Windows Phone [VER]"], "Windows Phone": "Windows Phone [VER]", "Windows CE": "Windows CE/[VER]", "Windows NT": "Windows NT [VER]", Symbian: ["SymbianOS/[VER]", "Symbian/[VER]"], webOS: ["webOS/[VER]", "hpwOS/[VER];"] }, utils: { Bot: "Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp", MobileBot: "Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2", DesktopMode: "WPDesktop", TV: "SonyDTV|HbbTV", WebKit: "(webkit)[ /]([\\w.]+)", Console: "\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b", Watch: "SM-V700" } }, detectMobileBrowsers: { fullPattern: /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i, shortPattern: /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i, tabletPattern: /android|ipad|playbook|silk/i } }, i = Object.prototype.hasOwnProperty;
    function n(e, t) { return null != e && null != t && e.toLowerCase() === t.toLowerCase(); }
    function r(e, t) {
    var i, n, r = e.length; if (!r || !t)
        return !1; for (i = t.toLowerCase(), n = 0; n < r; ++n)
            if (i === e[n].toLowerCase())
                return !0; return !1;
    }
    function a(e) {
    for (var t in e)
        i.call(e, t) && (e[t] = new RegExp(e[t], "i"));
    }
    function o(e, t) { this.ua = function (e) { return (e || "").substr(0, 500); } (e), this._cache = {}, this.maxPhoneWidth = t || 600; }
    return t.FALLBACK_PHONE = "UnknownPhone", t.FALLBACK_TABLET = "UnknownTablet", t.FALLBACK_MOBILE = "UnknownMobile", e = "isArray" in Array ? Array.isArray : function (e) { return "[object Array]" === Object.prototype.toString.call(e); }, function () {
    var n, r, o, s, l, c, u = t.mobileDetectRules; for (n in u.props)
        if (i.call(u.props, n)) {
            for (r = u.props[n], e(r) || (r = [r]), l = r.length, s = 0; s < l; ++s)
                (c = (o = r[s]).indexOf("[VER]")) >= 0 && (o = o.substring(0, c) + "([\\w._\\+]+)" + o.substring(c + 5)), r[s] = new RegExp(o, "i");
            u.props[n] = r;
        } a(u.oss), a(u.phones), a(u.tablets), a(u.uas), a(u.utils), u.oss0 = { WindowsPhoneOS: u.oss.WindowsPhoneOS, WindowsMobileOS: u.oss.WindowsMobileOS };
    } (), t.findMatch = function (e, t) {
    for (var n in e)
        if (i.call(e, n) && e[n].test(t))
            return n; return null;
    }, t.findMatches = function (e, t) {
    var n = []; for (var r in e)
        i.call(e, r) && e[r].test(t) && n.push(r); return n;
    }, t.getVersionStr = function (e, n) {
    var r, a, o, s, l = t.mobileDetectRules.props; if (i.call(l, e))
        for (o = (r = l[e]).length, a = 0; a < o; ++a)
            if (null !== (s = r[a].exec(n)))
                return s[1]; return null;
    }, t.getVersion = function (e, i) { var n = t.getVersionStr(e, i); return n ? t.prepareVersionNo(n) : NaN; }, t.prepareVersionNo = function (e) { var t; return 1 === (t = e.split(/[a-z._ \/\-]/i)).length && (e = t[0]), t.length > 1 && (e = t[0] + ".", t.shift(), e += t.join("")), Number(e); }, t.isMobileFallback = function (e) { return t.detectMobileBrowsers.fullPattern.test(e) || t.detectMobileBrowsers.shortPattern.test(e.substr(0, 4)); }, t.isTabletFallback = function (e) { return t.detectMobileBrowsers.tabletPattern.test(e); }, t.prepareDetectionCache = function (e, i, n) {
    if (void 0 === e.mobile) {
        var r, a, s;
        if (a = t.findMatch(t.mobileDetectRules.tablets, i))
            return e.mobile = e.tablet = a, void (e.phone = null);
        if (r = t.findMatch(t.mobileDetectRules.phones, i))
            return e.mobile = e.phone = r, void (e.tablet = null);
        t.isMobileFallback(i) ? void 0 === (s = o.isPhoneSized(n)) ? (e.mobile = t.FALLBACK_MOBILE, e.tablet = e.phone = null) : s ? (e.mobile = e.phone = t.FALLBACK_PHONE, e.tablet = null) : (e.mobile = e.tablet = t.FALLBACK_TABLET, e.phone = null) : t.isTabletFallback(i) ? (e.mobile = e.tablet = t.FALLBACK_TABLET, e.phone = null) : e.mobile = e.tablet = e.phone = null;
    }
    }, t.mobileGrade = function (e) { var t = null !== e.mobile(); return e.os("iOS") && e.version("iPad") >= 4.3 || e.os("iOS") && e.version("iPhone") >= 3.1 || e.os("iOS") && e.version("iPod") >= 3.1 || e.version("Android") > 2.1 && e.is("Webkit") || e.version("Windows Phone OS") >= 7 || e.is("BlackBerry") && e.version("BlackBerry") >= 6 || e.match("Playbook.*Tablet") || e.version("webOS") >= 1.4 && e.match("Palm|Pre|Pixi") || e.match("hp.*TouchPad") || e.is("Firefox") && e.version("Firefox") >= 12 || e.is("Chrome") && e.is("AndroidOS") && e.version("Android") >= 4 || e.is("Skyfire") && e.version("Skyfire") >= 4.1 && e.is("AndroidOS") && e.version("Android") >= 2.3 || e.is("Opera") && e.version("Opera Mobi") > 11 && e.is("AndroidOS") || e.is("MeeGoOS") || e.is("Tizen") || e.is("Dolfin") && e.version("Bada") >= 2 || (e.is("UC Browser") || e.is("Dolfin")) && e.version("Android") >= 2.3 || e.match("Kindle Fire") || e.is("Kindle") && e.version("Kindle") >= 3 || e.is("AndroidOS") && e.is("NookTablet") || e.version("Chrome") >= 11 && !t || e.version("Safari") >= 5 && !t || e.version("Firefox") >= 4 && !t || e.version("MSIE") >= 7 && !t || e.version("Opera") >= 10 && !t ? "A" : e.os("iOS") && e.version("iPad") < 4.3 || e.os("iOS") && e.version("iPhone") < 3.1 || e.os("iOS") && e.version("iPod") < 3.1 || e.is("Blackberry") && e.version("BlackBerry") >= 5 && e.version("BlackBerry") < 6 || e.version("Opera Mini") >= 5 && e.version("Opera Mini") <= 6.5 && (e.version("Android") >= 2.3 || e.is("iOS")) || e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3") || e.version("Opera Mobi") >= 11 && e.is("SymbianOS") ? "B" : (e.version("BlackBerry") < 5 || e.match("MSIEMobile|Windows CE.*Mobile") || e.version("Windows Mobile"), "C"); }, t.detectOS = function (e) { return t.findMatch(t.mobileDetectRules.oss0, e) || t.findMatch(t.mobileDetectRules.oss, e); }, t.getDeviceSmallerSide = function () { return window.screen.width < window.screen.height ? window.screen.width : window.screen.height; }, o.prototype = { constructor: o, mobile: function () { return t.prepareDetectionCache(this._cache, this.ua, this.maxPhoneWidth), this._cache.mobile; }, phone: function () { return t.prepareDetectionCache(this._cache, this.ua, this.maxPhoneWidth), this._cache.phone; }, tablet: function () { return t.prepareDetectionCache(this._cache, this.ua, this.maxPhoneWidth), this._cache.tablet; }, userAgent: function () { return void 0 === this._cache.userAgent && (this._cache.userAgent = t.findMatch(t.mobileDetectRules.uas, this.ua)), this._cache.userAgent; }, userAgents: function () { return void 0 === this._cache.userAgents && (this._cache.userAgents = t.findMatches(t.mobileDetectRules.uas, this.ua)), this._cache.userAgents; }, os: function () { return void 0 === this._cache.os && (this._cache.os = t.detectOS(this.ua)), this._cache.os; }, version: function (e) { return t.getVersion(e, this.ua); }, versionStr: function (e) { return t.getVersionStr(e, this.ua); }, is: function (e) { return r(this.userAgents(), e) || n(e, this.os()) || n(e, this.phone()) || n(e, this.tablet()) || r(t.findMatches(t.mobileDetectRules.utils, this.ua), e); }, match: function (e) { return e instanceof RegExp || (e = new RegExp(e, "i")), e.test(this.ua); }, isPhoneSized: function (e) { return o.isPhoneSized(e || this.maxPhoneWidth); }, mobileGrade: function () { return void 0 === this._cache.grade && (this._cache.grade = t.mobileGrade(this)), this._cache.grade; } }, "undefined" != typeof window && window.screen ? o.isPhoneSized = function (e) { return e < 0 ? void 0 : t.getDeviceSmallerSide() <= e; } : o.isPhoneSized = function () { }, o._impl = t, o.version = "1.4.4 2019-09-21", o;
}));
} (e.exports ? function (t) { e.exports = t(); } : i(104));
}, function (e, t, i) {
    "use strict";
    (function (e) {
    var i = function () {
    if ("undefined" != typeof Map)
        return Map; function e(e, t) { var i = -1; return e.some((function (e, n) { return e[0] === t && (i = n, !0); })), i; } return (function () {
        function t() { this.__entries__ = []; } return Object.defineProperty(t.prototype, "size", { get: function () { return this.__entries__.length; }, enumerable: !0, configurable: !0 }), t.prototype.get = function (t) { var i = e(this.__entries__, t), n = this.__entries__[i]; return n && n[1]; }, t.prototype.set = function (t, i) { var n = e(this.__entries__, t); ~n ? this.__entries__[n][1] = i : this.__entries__.push([t, i]); }, t.prototype.delete = function (t) { var i = this.__entries__, n = e(i, t); ~n && i.splice(n, 1); }, t.prototype.has = function (t) { return !!~e(this.__entries__, t); }, t.prototype.clear = function () { this.__entries__.splice(0); }, t.prototype.forEach = function (e, t) {
        void 0 === t && (t = null); for (var i = 0, n = this.__entries__; i < n.length; i++) {
            var r = n[i];
            e.call(t, r[1], r[0]);
        }
        }, t;
        } ());
    } (), n = "undefined" != typeof window && "undefined" != typeof document && window.document === document, r = void 0 !== e && e.Math === Math ? e : "undefined" != typeof self && self.Math === Math ? self : "undefined" != typeof window && window.Math === Math ? window : Function("return this")(), a = "function" == typeof requestAnimationFrame ? requestAnimationFrame.bind(r) : function (e) { return setTimeout((function () { return e(Date.now()); }), 1e3 / 60); }, o = 2; var s = 20, l = ["top", "right", "bottom", "left", "width", "height", "size", "weight"], c = "undefined" != typeof MutationObserver, u = function () {
    function e() {
    this.connected_ = !1, this.mutationEventsAdded_ = !1, this.mutationsObserver_ = null, this.observers_ = [], this.onTransitionEnd_ = this.onTransitionEnd_.bind(this), this.refresh = function (e, t) {
    var i = !1, n = !1, r = 0; function s() { i && (i = !1, e()), n && c(); } function l() { a(s); } function c() {
    var e = Date.now(); if (i) {
        if (e - r < o)
            return;
        n = !0;
    }
    else
        i = !0, n = !1, setTimeout(l, t); r = e;
    } return c;
    } (this.refresh.bind(this), s);
    } return e.prototype.addObserver = function (e) { ~this.observers_.indexOf(e) || this.observers_.push(e), this.connected_ || this.connect_(); }, e.prototype.removeObserver = function (e) { var t = this.observers_, i = t.indexOf(e); ~i && t.splice(i, 1), !t.length && this.connected_ && this.disconnect_(); }, e.prototype.refresh = function () { this.updateObservers_() && this.refresh(); }, e.prototype.updateObservers_ = function () { var e = this.observers_.filter((function (e) { return e.gatherActive(), e.hasActive(); })); return e.forEach((function (e) { return e.broadcastActive(); })), e.length > 0; }, e.prototype.connect_ = function () { n && !this.connected_ && (document.addEventListener("transitionend", this.onTransitionEnd_), window.addEventListener("resize", this.refresh), c ? (this.mutationsObserver_ = new MutationObserver(this.refresh), this.mutationsObserver_.observe(document, { attributes: !0, childList: !0, characterData: !0, subtree: !0 })) : (document.addEventListener("DOMSubtreeModified", this.refresh), this.mutationEventsAdded_ = !0), this.connected_ = !0); }, e.prototype.disconnect_ = function () { n && this.connected_ && (document.removeEventListener("transitionend", this.onTransitionEnd_), window.removeEventListener("resize", this.refresh), this.mutationsObserver_ && this.mutationsObserver_.disconnect(), this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh), this.mutationsObserver_ = null, this.mutationEventsAdded_ = !1, this.connected_ = !1); }, e.prototype.onTransitionEnd_ = function (e) { var t = e.propertyName, i = void 0 === t ? "" : t; l.some((function (e) { return !!~i.indexOf(e); })) && this.refresh(); }, e.getInstance = function () { return this.instance_ || (this.instance_ = new e), this.instance_; }, e.instance_ = null, e;
    } (), h = function (e, t) {
    for (var i = 0, n = Object.keys(t); i < n.length; i++) {
        var r = n[i];
        Object.defineProperty(e, r, { value: t[r], enumerable: !1, writable: !1, configurable: !0 });
    } return e;
    }, d = function (e) { return e && e.ownerDocument && e.ownerDocument.defaultView || r; }, p = b(0, 0, 0, 0); function f(e) { return parseFloat(e) || 0; } function m(e) {
    for (var t = [], i = 1; i < arguments.length; i++)
        t[i - 1] = arguments[i]; return t.reduce((function (t, i) { return t + f(e["border-" + i + "-width"]); }), 0);
    } function v(e) {
    var t = e.clientWidth, i = e.clientHeight; if (!t && !i)
        return p; var n = d(e).getComputedStyle(e), r = function (e) {
        for (var t = {}, i = 0, n = ["top", "right", "bottom", "left"]; i < n.length; i++) {
            var r = n[i], a = e["padding-" + r];
            t[r] = f(a);
        } return t;
        } (n), a = r.left + r.right, o = r.top + r.bottom, s = f(n.width), l = f(n.height); if ("border-box" === n.boxSizing && (Math.round(s + a) !== t && (s -= m(n, "left", "right") + a), Math.round(l + o) !== i && (l -= m(n, "top", "bottom") + o)), !function (e) { return e === d(e).document.documentElement; } (e)) {
            var c = Math.round(s + a) - t, u = Math.round(l + o) - i;
            1 !== Math.abs(c) && (s -= c), 1 !== Math.abs(u) && (l -= u);
        } return b(r.left, r.top, s, l);
    } var g = "undefined" != typeof SVGGraphicsElement ? function (e) { return e instanceof d(e).SVGGraphicsElement; } : function (e) { return e instanceof d(e).SVGElement && "function" == typeof e.getBBox; }; function y(e) { return n ? g(e) ? function (e) { var t = e.getBBox(); return b(0, 0, t.width, t.height); } (e) : v(e) : p; } function b(e, t, i, n) { return { x: e, y: t, width: i, height: n }; } var x = function () { function e(e) { this.broadcastWidth = 0, this.broadcastHeight = 0, this.contentRect_ = b(0, 0, 0, 0), this.target = e; } return e.prototype.isActive = function () { var e = y(this.target); return this.contentRect_ = e, e.width !== this.broadcastWidth || e.height !== this.broadcastHeight; }, e.prototype.broadcastRect = function () { var e = this.contentRect_; return this.broadcastWidth = e.width, this.broadcastHeight = e.height, e; }, e; } (), _ = function (e, t) { var i, n, r, a, o, s, l, c = (n = (i = t).x, r = i.y, a = i.width, o = i.height, s = "undefined" != typeof DOMRectReadOnly ? DOMRectReadOnly : Object, l = Object.create(s.prototype), h(l, { x: n, y: r, width: a, height: o, top: r, right: n + a, bottom: o + r, left: n }), l); h(this, { target: e, contentRect: c }); }, w = function () {
    function e(e, t, n) {
    if (this.activeObservations_ = [], this.observations_ = new i, "function" != typeof e)
        throw new TypeError("The callback provided as parameter 1 is not a function."); this.callback_ = e, this.controller_ = t, this.callbackCtx_ = n;
    } return e.prototype.observe = function (e) {
    if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present."); if ("undefined" != typeof Element && Element instanceof Object) {
            if (!(e instanceof d(e).Element))
                throw new TypeError('parameter 1 is not of type "Element".');
            var t = this.observations_;
            t.has(e) || (t.set(e, new x(e)), this.controller_.addObserver(this), this.controller_.refresh());
        }
    }, e.prototype.unobserve = function (e) {
    if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present."); if ("undefined" != typeof Element && Element instanceof Object) {
            if (!(e instanceof d(e).Element))
                throw new TypeError('parameter 1 is not of type "Element".');
            var t = this.observations_;
            t.has(e) && (t.delete(e), t.size || this.controller_.removeObserver(this));
        }
    }, e.prototype.disconnect = function () { this.clearActive(), this.observations_.clear(), this.controller_.removeObserver(this); }, e.prototype.gatherActive = function () { var e = this; this.clearActive(), this.observations_.forEach((function (t) { t.isActive() && e.activeObservations_.push(t); })); }, e.prototype.broadcastActive = function () {
    if (this.hasActive()) {
        var e = this.callbackCtx_, t = this.activeObservations_.map((function (e) { return new _(e.target, e.broadcastRect()); }));
        this.callback_.call(e, t, e), this.clearActive();
    }
    }, e.prototype.clearActive = function () { this.activeObservations_.splice(0); }, e.prototype.hasActive = function () { return this.activeObservations_.length > 0; }, e;
    } (), T = "undefined" != typeof WeakMap ? new WeakMap : new i, M = function e(t) {
    if (!(this instanceof e))
        throw new TypeError("Cannot call a class as a function."); if (!arguments.length)
            throw new TypeError("1 argument required, but only 0 present."); var i = u.getInstance(), n = new w(t, i, this); T.set(this, n);
    };["observe", "unobserve", "disconnect"].forEach((function (e) { M.prototype[e] = function () { var t; return (t = T.get(this))[e].apply(t, arguments); }; })); var A = void 0 !== r.ResizeObserver ? r.ResizeObserver : M; t.a = A;
    }).call(this, i(11));
}, function (e, t, i) { var n = i(105), r = i(106), a = i(107); e.exports = function (e, t) { return n(e) || r(e, t) || a(); }; }, function (e, t, i) { e.exports = i(110); }, function (e, t, i) {
var n = function (e) {
    "use strict";
    var t, i = Object.prototype, n = i.hasOwnProperty, r = "function" == typeof Symbol ? Symbol : {}, a = r.iterator || "@@iterator", o = r.asyncIterator || "@@asyncIterator", s = r.toStringTag || "@@toStringTag";
    function l(e, t, i, n) {
    var r = t && t.prototype instanceof m ? t : m, a = Object.create(r.prototype), o = new E(n || []); return a._invoke = function (e, t, i) {
    var n = u; return function (r, a) {
    if (n === d)
        throw new Error("Generator is already running"); if (n === p) {
            if ("throw" === r)
                throw a;
            return C();
        } for (i.method = r, i.arg = a; ;) {
            var o = i.delegate;
            if (o) {
                var s = M(o, i);
                if (s) {
                    if (s === f)
                        continue;
                    return s;
                }
            }
            if ("next" === i.method)
                i.sent = i._sent = i.arg;
            else if ("throw" === i.method) {
                if (n === u)
                    throw n = p, i.arg;
                i.dispatchException(i.arg);
            }
            else
                "return" === i.method && i.abrupt("return", i.arg);
            n = d;
            var l = c(e, t, i);
            if ("normal" === l.type) {
                if (n = i.done ? p : h, l.arg === f)
                    continue;
                return { value: l.arg, done: i.done };
            }
            "throw" === l.type && (n = p, i.method = "throw", i.arg = l.arg);
        }
    };
    } (e, i, o), a;
    }
    function c(e, t, i) {
    try {
        return { type: "normal", arg: e.call(t, i) };
    }
        catch (e) {
            return { type: "throw", arg: e };
        }
    }
    e.wrap = l;
    var u = "suspendedStart", h = "suspendedYield", d = "executing", p = "completed", f = {};
    function m() { }
    function v() { }
    function g() { }
    var y = {};
    y[a] = function () { return this; };
    var b = Object.getPrototypeOf, x = b && b(b(P([])));
    x && x !== i && n.call(x, a) && (y = x);
    var _ = g.prototype = m.prototype = Object.create(y);
    function w(e) { ["next", "throw", "return"].forEach((function (t) { e[t] = function (e) { return this._invoke(t, e); }; })); }
    function T(e) {
    var t; this._invoke = function (i, r) {
    function a() {
    return new Promise((function (t, a) {
    !function t(i, r, a, o) {
    var s = c(e[i], e, r); if ("throw" !== s.type) {
        var l = s.arg, u = l.value;
        return u && "object" == typeof u && n.call(u, "__await") ? Promise.resolve(u.__await).then((function (e) { t("next", e, a, o); }), (function (e) { t("throw", e, a, o); })) : Promise.resolve(u).then((function (e) { l.value = e, a(l); }), (function (e) { return t("throw", e, a, o); }));
    } o(s.arg);
    } (i, r, t, a);
    }));
    } return t = t ? t.then(a, a) : a();
    };
    }
    function M(e, i) {
    var n = e.iterator[i.method]; if (n === t) {
        if (i.delegate = null, "throw" === i.method) {
            if (e.iterator.return && (i.method = "return", i.arg = t, M(e, i), "throw" === i.method))
                return f;
            i.method = "throw", i.arg = new TypeError("The iterator does not provide a 'throw' method");
        }
        return f;
    } var r = c(n, e.iterator, i.arg); if ("throw" === r.type)
            return i.method = "throw", i.arg = r.arg, i.delegate = null, f; var a = r.arg; return a ? a.done ? (i[e.resultName] = a.value, i.next = e.nextLoc, "return" !== i.method && (i.method = "next", i.arg = t), i.delegate = null, f) : a : (i.method = "throw", i.arg = new TypeError("iterator result is not an object"), i.delegate = null, f);
    }
    function A(e) { var t = { tryLoc: e[0] }; 1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t); }
    function S(e) { var t = e.completion || {}; t.type = "normal", delete t.arg, e.completion = t; }
    function E(e) { this.tryEntries = [{ tryLoc: "root" }], e.forEach(A, this), this.reset(!0); }
    function P(e) {
    if (e) {
        var i = e[a];
        if (i)
            return i.call(e);
        if ("function" == typeof e.next)
            return e;
        if (!isNaN(e.length)) {
            var r = -1, o = function i() {
            for (; ++r < e.length;)
                if (n.call(e, r))
                    return i.value = e[r], i.done = !1, i; return i.value = t, i.done = !0, i;
            };
            return o.next = o;
        }
    } return { next: C };
    }
    function C() { return { value: t, done: !0 }; }
    return v.prototype = _.constructor = g, g.constructor = v, g[s] = v.displayName = "GeneratorFunction", e.isGeneratorFunction = function (e) { var t = "function" == typeof e && e.constructor; return !!t && (t === v || "GeneratorFunction" === (t.displayName || t.name)); }, e.mark = function (e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, g) : (e.__proto__ = g, s in e || (e[s] = "GeneratorFunction")), e.prototype = Object.create(_), e; }, e.awrap = function (e) { return { __await: e }; }, w(T.prototype), T.prototype[o] = function () { return this; }, e.AsyncIterator = T, e.async = function (t, i, n, r) { var a = new T(l(t, i, n, r)); return e.isGeneratorFunction(i) ? a : a.next().then((function (e) { return e.done ? e.value : a.next(); })); }, w(_), _[s] = "Generator", _[a] = function () { return this; }, _.toString = function () { return "[object Generator]"; }, e.keys = function (e) {
    var t = []; for (var i in e)
        t.push(i); return t.reverse(), function i() {
        for (; t.length;) {
            var n = t.pop();
            if (n in e)
                return i.value = n, i.done = !1, i;
        } return i.done = !0, i;
        };
    }, e.values = P, E.prototype = {
    constructor: E, reset: function (e) {
    if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(S), !e)
        for (var i in this)
            "t" === i.charAt(0) && n.call(this, i) && !isNaN(+i.slice(1)) && (this[i] = t);
    }, stop: function () {
    this.done = !0; var e = this.tryEntries[0].completion; if ("throw" === e.type)
        throw e.arg; return this.rval;
    }, dispatchException: function (e) {
    if (this.done)
        throw e; var i = this; function r(n, r) { return s.type = "throw", s.arg = e, i.next = n, r && (i.method = "next", i.arg = t), !!r; } for (var a = this.tryEntries.length - 1; a >= 0; --a) {
            var o = this.tryEntries[a], s = o.completion;
            if ("root" === o.tryLoc)
                return r("end");
            if (o.tryLoc <= this.prev) {
                var l = n.call(o, "catchLoc"), c = n.call(o, "finallyLoc");
                if (l && c) {
                    if (this.prev < o.catchLoc)
                        return r(o.catchLoc, !0);
                    if (this.prev < o.finallyLoc)
                        return r(o.finallyLoc);
                }
                else if (l) {
                    if (this.prev < o.catchLoc)
                        return r(o.catchLoc, !0);
                }
                else {
                    if (!c)
                        throw new Error("try statement without catch or finally");
                    if (this.prev < o.finallyLoc)
                        return r(o.finallyLoc);
                }
            }
        }
    }, abrupt: function (e, t) {
    for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var r = this.tryEntries[i];
        if (r.tryLoc <= this.prev && n.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
            var a = r;
            break;
        }
    } a && ("break" === e || "continue" === e) && a.tryLoc <= t && t <= a.finallyLoc && (a = null); var o = a ? a.completion : {}; return o.type = e, o.arg = t, a ? (this.method = "next", this.next = a.finallyLoc, f) : this.complete(o);
    }, complete: function (e, t) {
    if ("throw" === e.type)
        throw e.arg; return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), f;
    }, finish: function (e) {
    for (var t = this.tryEntries.length - 1; t >= 0; --t) {
        var i = this.tryEntries[t];
        if (i.finallyLoc === e)
            return this.complete(i.completion, i.afterLoc), S(i), f;
    }
    }, catch: function (e) {
    for (var t = this.tryEntries.length - 1; t >= 0; --t) {
        var i = this.tryEntries[t];
        if (i.tryLoc === e) {
            var n = i.completion;
            if ("throw" === n.type) {
                var r = n.arg;
                S(i);
            }
            return r;
        }
    } throw new Error("illegal catch attempt");
    }, delegateYield: function (e, i, n) { return this.delegate = { iterator: P(e), resultName: i, nextLoc: n }, "next" === this.method && (this.arg = t), f; }
    }, e;
} (e.exports); try {
    regeneratorRuntime = n;
}
    catch (e) {
        Function("r", "regeneratorRuntime = r")(n);
    }
}, function (e, t, i) { e.exports = { default: i(58), __esModule: !0 }; }, function (e, t, i) { i(59), e.exports = i(10).Object.keys; }, function (e, t, i) { var n = i(60), r = i(61); i(73)("keys", (function () { return function (e) { return r(n(e)); }; })); }, function (e, t, i) { var n = i(28); e.exports = function (e) { return Object(n(e)); }; }, function (e, t, i) { var n = i(62), r = i(72); e.exports = Object.keys || function (e) { return n(e, r); }; }, function (e, t, i) {
var n = i(29), r = i(30), a = i(65)(!1), o = i(68)("IE_PROTO"); e.exports = function (e, t) {
var i, s = r(e), l = 0, c = []; for (i in s)
    i != o && n(s, i) && c.push(i); for (; t.length > l;)
        n(s, i = t[l++]) && (~a(c, i) || c.push(i)); return c;
};
}, function (e, t, i) { var n = i(64); e.exports = Object("z").propertyIsEnumerable(0) ? Object : function (e) { return "String" == n(e) ? e.split("") : Object(e); }; }, function (e, t) { var i = {}.toString; e.exports = function (e) { return i.call(e).slice(8, -1); }; }, function (e, t, i) {
var n = i(30), r = i(66), a = i(67); e.exports = function (e) {
return function (t, i, o) {
var s, l = n(t), c = r(l.length), u = a(o, c); if (e && i != i) {
    for (; c > u;)
        if ((s = l[u++]) != s)
            return !0;
}
else
    for (; c > u; u++)
        if ((e || u in l) && l[u] === i)
            return e || u || 0; return !e && -1;
};
};
}, function (e, t, i) { var n = i(31), r = Math.min; e.exports = function (e) { return e > 0 ? r(n(e), 9007199254740991) : 0; }; }, function (e, t, i) { var n = i(31), r = Math.max, a = Math.min; e.exports = function (e, t) { return (e = n(e)) < 0 ? r(e + t, 0) : a(e, t); }; }, function (e, t, i) { var n = i(69)("keys"), r = i(71); e.exports = function (e) { return n[e] || (n[e] = r(e)); }; }, function (e, t, i) { var n = i(10), r = i(22), a = r["__core-js_shared__"] || (r["__core-js_shared__"] = {}); (e.exports = function (e, t) { return a[e] || (a[e] = void 0 !== t ? t : {}); })("versions", []).push({ version: n.version, mode: i(70) ? "pure" : "global", copyright: " 2019 Denis Pushkarev (zloirock.ru)" }); }, function (e, t) { e.exports = !0; }, function (e, t) { var i = 0, n = Math.random(); e.exports = function (e) { return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++i + n).toString(36)); }; }, function (e, t) { e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","); }, function (e, t, i) { var n = i(74), r = i(10), a = i(25); e.exports = function (e, t) { var i = (r.Object || {})[e] || Object[e], o = {}; o[e] = t(i), n(n.S + n.F * a((function () { i(1); })), "Object", o); }; }, function (e, t, i) {
var n = i(22), r = i(10), a = i(75), o = i(77), s = i(29), l = function (e, t, i) {
var c, u, h, d = e & l.F, p = e & l.G, f = e & l.S, m = e & l.P, v = e & l.B, g = e & l.W, y = p ? r : r[t] || (r[t] = {}), b = y.prototype, x = p ? n : f ? n[t] : (n[t] || {}).prototype; for (c in p && (i = t), i)
    (u = !d && x && void 0 !== x[c]) && s(y, c) || (h = u ? x[c] : i[c], y[c] = p && "function" != typeof x[c] ? i[c] : v && u ? a(h, n) : g && x[c] == h ? function (e) {
    var t = function (t, i, n) {
    if (this instanceof e) {
        switch (arguments.length) {
            case 0: return new e;
            case 1: return new e(t);
            case 2: return new e(t, i);
        }
        return new e(t, i, n);
    } return e.apply(this, arguments);
    }; return t.prototype = e.prototype, t;
    } (h) : m && "function" == typeof h ? a(Function.call, h) : h, m && ((y.virtual || (y.virtual = {}))[c] = h, e & l.R && b && !b[c] && o(b, c, h)));
}; l.F = 1, l.G = 2, l.S = 4, l.P = 8, l.B = 16, l.W = 32, l.U = 64, l.R = 128, e.exports = l;
}, function (e, t, i) {
var n = i(76); e.exports = function (e, t, i) {
if (n(e), void 0 === t)
    return e; switch (i) {
        case 1: return function (i) { return e.call(t, i); };
        case 2: return function (i, n) { return e.call(t, i, n); };
        case 3: return function (i, n, r) { return e.call(t, i, n, r); };
    } return function () { return e.apply(t, arguments); };
};
}, function (e, t) {
e.exports = function (e) {
if ("function" != typeof e)
    throw TypeError(e + " is not a function!"); return e;
};
}, function (e, t, i) { var n = i(78), r = i(83); e.exports = i(24) ? function (e, t, i) { return n.f(e, t, r(1, i)); } : function (e, t, i) { return e[t] = i, e; }; }, function (e, t, i) {
var n = i(79), r = i(80), a = i(82), o = Object.defineProperty; t.f = i(24) ? Object.defineProperty : function (e, t, i) {
if (n(e), t = a(t, !0), n(i), r)
    try {
        return o(e, t, i);
    }
    catch (e) { } if ("get" in i || "set" in i)
        throw TypeError("Accessors not supported!"); return "value" in i && (e[t] = i.value), e;
};
}, function (e, t, i) {
var n = i(23); e.exports = function (e) {
if (!n(e))
    throw TypeError(e + " is not an object!"); return e;
};
}, function (e, t, i) { e.exports = !i(24) && !i(25)((function () { return 7 != Object.defineProperty(i(81)("div"), "a", { get: function () { return 7; } }).a; })); }, function (e, t, i) { var n = i(23), r = i(22).document, a = n(r) && n(r.createElement); e.exports = function (e) { return a ? r.createElement(e) : {}; }; }, function (e, t, i) {
var n = i(23); e.exports = function (e, t) {
if (!n(e))
    return e; var i, r; if (t && "function" == typeof (i = e.toString) && !n(r = i.call(e)))
        return r; if ("function" == typeof (i = e.valueOf) && !n(r = i.call(e)))
        return r; if (!t && "function" == typeof (i = e.toString) && !n(r = i.call(e)))
        return r; throw TypeError("Can't convert object to primitive value");
};
}, function (e, t) { e.exports = function (e, t) { return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t }; }; }, function (e, t, i) {
var n; !function (r, a, o, s) {
    "use strict";
    var l, c = ["", "webkit", "Moz", "MS", "ms", "o"], u = a.createElement("div"), h = "function", d = Math.round, p = Math.abs, f = Date.now;
    function m(e, t, i) { return setTimeout(w(e, i), t); }
    function v(e, t, i) { return !!Array.isArray(e) && (g(e, i[t], i), !0); }
    function g(e, t, i) {
    var n; if (e)
        if (e.forEach)
            e.forEach(t, i);
        else if (e.length !== s)
            for (n = 0; n < e.length;)
                t.call(i, e[n], n, e), n++;
        else
            for (n in e)
                e.hasOwnProperty(n) && t.call(i, e[n], n, e);
    }
    function y(e, t, i) { var n = "DEPRECATED METHOD: " + t + "\n" + i + " AT \n"; return function () { var t = new Error("get-stack-trace"), i = t && t.stack ? t.stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@") : "Unknown Stack Trace", a = r.console && (r.console.warn || r.console.log); return a && a.call(r.console, n, i), e.apply(this, arguments); }; }
    l = "function" != typeof Object.assign ? function (e) {
    if (e === s || null === e)
        throw new TypeError("Cannot convert undefined or null to object"); for (var t = Object(e), i = 1; i < arguments.length; i++) {
            var n = arguments[i];
            if (n !== s && null !== n)
                for (var r in n)
                    n.hasOwnProperty(r) && (t[r] = n[r]);
        } return t;
    } : Object.assign;
    var b = y((function (e, t, i) {
    for (var n = Object.keys(t), r = 0; r < n.length;)
        (!i || i && e[n[r]] === s) && (e[n[r]] = t[n[r]]), r++; return e;
    }), "extend", "Use `assign`."), x = y((function (e, t) { return b(e, t, !0); }), "merge", "Use `assign`.");
    function _(e, t, i) { var n, r = t.prototype; (n = e.prototype = Object.create(r)).constructor = e, n._super = r, i && l(n, i); }
    function w(e, t) { return function () { return e.apply(t, arguments); }; }
    function T(e, t) { return typeof e == h ? e.apply(t && t[0] || s, t) : e; }
    function M(e, t) { return e === s ? t : e; }
    function A(e, t, i) { g(C(t), (function (t) { e.addEventListener(t, i, !1); })); }
    function S(e, t, i) { g(C(t), (function (t) { e.removeEventListener(t, i, !1); })); }
    function E(e, t) {
    for (; e;) {
        if (e == t)
            return !0;
        e = e.parentNode;
    } return !1;
    }
    function P(e, t) { return e.indexOf(t) > -1; }
    function C(e) { return e.trim().split(/\s+/g); }
    function L(e, t, i) {
    if (e.indexOf && !i)
        return e.indexOf(t); for (var n = 0; n < e.length;) {
            if (i && e[n][i] == t || !i && e[n] === t)
                return n;
            n++;
        } return -1;
    }
    function R(e) { return Array.prototype.slice.call(e, 0); }
    function I(e, t, i) {
    for (var n = [], r = [], a = 0; a < e.length;) {
        var o = t ? e[a][t] : e[a];
        L(r, o) < 0 && n.push(e[a]), r[a] = o, a++;
    } return i && (n = t ? n.sort((function (e, i) { return e[t] > i[t]; })) : n.sort()), n;
    }
    function O(e, t) {
    for (var i, n, r = t[0].toUpperCase() + t.slice(1), a = 0; a < c.length;) {
        if ((n = (i = c[a]) ? i + r : t) in e)
            return n;
        a++;
    } return s;
    }
    var D = 1;
    function F(e) { var t = e.ownerDocument || e; return t.defaultView || t.parentWindow || r; }
    var k = "ontouchstart" in r, N = O(r, "PointerEvent") !== s, B = k && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent), G = 25, H = 1, U = 2, z = 4, V = 8, j = 1, W = 2, X = 4, Y = 8, Q = 16, q = W | X, $ = Y | Q, Z = q | $, K = ["x", "y"], J = ["clientX", "clientY"];
    function ee(e, t) { var i = this; this.manager = e, this.callback = t, this.element = e.element, this.target = e.options.inputTarget, this.domHandler = function (t) { T(e.options.enable, [e]) && i.handler(t); }, this.init(); }
    function te(e, t, i) {
    var n = i.pointers.length, r = i.changedPointers.length, a = t & H && n - r == 0, o = t & (z | V) && n - r == 0; i.isFirst = !!a, i.isFinal = !!o, a && (e.session = {}), i.eventType = t, function (e, t) {
    var i = e.session, n = t.pointers, r = n.length; i.firstInput || (i.firstInput = ie(t)); r > 1 && !i.firstMultiple ? i.firstMultiple = ie(t) : 1 === r && (i.firstMultiple = !1); var a = i.firstInput, o = i.firstMultiple, l = o ? o.center : a.center, c = t.center = ne(n); t.timeStamp = f(), t.deltaTime = t.timeStamp - a.timeStamp, t.angle = se(l, c), t.distance = oe(l, c), function (e, t) { var i = t.center, n = e.offsetDelta || {}, r = e.prevDelta || {}, a = e.prevInput || {}; t.eventType !== H && a.eventType !== z || (r = e.prevDelta = { x: a.deltaX || 0, y: a.deltaY || 0 }, n = e.offsetDelta = { x: i.x, y: i.y }); t.deltaX = r.x + (i.x - n.x), t.deltaY = r.y + (i.y - n.y); } (i, t), t.offsetDirection = ae(t.deltaX, t.deltaY); var u = re(t.deltaTime, t.deltaX, t.deltaY); t.overallVelocityX = u.x, t.overallVelocityY = u.y, t.overallVelocity = p(u.x) > p(u.y) ? u.x : u.y, t.scale = o ? (h = o.pointers, d = n, oe(d[0], d[1], J) / oe(h[0], h[1], J)) : 1, t.rotation = o ? function (e, t) { return se(t[1], t[0], J) + se(e[1], e[0], J); } (o.pointers, n) : 0, t.maxPointers = i.prevInput ? t.pointers.length > i.prevInput.maxPointers ? t.pointers.length : i.prevInput.maxPointers : t.pointers.length, function (e, t) {
    var i, n, r, a, o = e.lastInterval || t, l = t.timeStamp - o.timeStamp; if (t.eventType != V && (l > G || o.velocity === s)) {
        var c = t.deltaX - o.deltaX, u = t.deltaY - o.deltaY, h = re(l, c, u);
        n = h.x, r = h.y, i = p(h.x) > p(h.y) ? h.x : h.y, a = ae(c, u), e.lastInterval = t;
    }
    else
        i = o.velocity, n = o.velocityX, r = o.velocityY, a = o.direction; t.velocity = i, t.velocityX = n, t.velocityY = r, t.direction = a;
    } (i, t); var h, d; var m = e.element; E(t.srcEvent.target, m) && (m = t.srcEvent.target); t.target = m;
    } (e, i), e.emit("hammer.input", i), e.recognize(i), e.session.prevInput = i;
    }
    function ie(e) {
    for (var t = [], i = 0; i < e.pointers.length;)
        t[i] = { clientX: d(e.pointers[i].clientX), clientY: d(e.pointers[i].clientY) }, i++; return { timeStamp: f(), pointers: t, center: ne(t), deltaX: e.deltaX, deltaY: e.deltaY };
    }
    function ne(e) {
    var t = e.length; if (1 === t)
        return { x: d(e[0].clientX), y: d(e[0].clientY) }; for (var i = 0, n = 0, r = 0; r < t;)
            i += e[r].clientX, n += e[r].clientY, r++; return { x: d(i / t), y: d(n / t) };
    }
    function re(e, t, i) { return { x: t / e || 0, y: i / e || 0 }; }
    function ae(e, t) { return e === t ? j : p(e) >= p(t) ? e < 0 ? W : X : t < 0 ? Y : Q; }
    function oe(e, t, i) { i || (i = K); var n = t[i[0]] - e[i[0]], r = t[i[1]] - e[i[1]]; return Math.sqrt(n * n + r * r); }
    function se(e, t, i) { i || (i = K); var n = t[i[0]] - e[i[0]], r = t[i[1]] - e[i[1]]; return 180 * Math.atan2(r, n) / Math.PI; }
    ee.prototype = { handler: function () { }, init: function () { this.evEl && A(this.element, this.evEl, this.domHandler), this.evTarget && A(this.target, this.evTarget, this.domHandler), this.evWin && A(F(this.element), this.evWin, this.domHandler); }, destroy: function () { this.evEl && S(this.element, this.evEl, this.domHandler), this.evTarget && S(this.target, this.evTarget, this.domHandler), this.evWin && S(F(this.element), this.evWin, this.domHandler); } };
    var le = { mousedown: H, mousemove: U, mouseup: z }, ce = "mousedown", ue = "mousemove mouseup";
    function he() { this.evEl = ce, this.evWin = ue, this.pressed = !1, ee.apply(this, arguments); }
    _(he, ee, { handler: function (e) { var t = le[e.type]; t & H && 0 === e.button && (this.pressed = !0), t & U && 1 !== e.which && (t = z), this.pressed && (t & z && (this.pressed = !1), this.callback(this.manager, t, { pointers: [e], changedPointers: [e], pointerType: "mouse", srcEvent: e })); } });
    var de = { pointerdown: H, pointermove: U, pointerup: z, pointercancel: V, pointerout: V }, pe = { 2: "touch", 3: "pen", 4: "mouse", 5: "kinect" }, fe = "pointerdown", me = "pointermove pointerup pointercancel";
    function ve() { this.evEl = fe, this.evWin = me, ee.apply(this, arguments), this.store = this.manager.session.pointerEvents = []; }
    r.MSPointerEvent && !r.PointerEvent && (fe = "MSPointerDown", me = "MSPointerMove MSPointerUp MSPointerCancel"), _(ve, ee, { handler: function (e) { var t = this.store, i = !1, n = e.type.toLowerCase().replace("ms", ""), r = de[n], a = pe[e.pointerType] || e.pointerType, o = "touch" == a, s = L(t, e.pointerId, "pointerId"); r & H && (0 === e.button || o) ? s < 0 && (t.push(e), s = t.length - 1) : r & (z | V) && (i = !0), s < 0 || (t[s] = e, this.callback(this.manager, r, { pointers: t, changedPointers: [e], pointerType: a, srcEvent: e }), i && t.splice(s, 1)); } });
    var ge = { touchstart: H, touchmove: U, touchend: z, touchcancel: V }, ye = "touchstart", be = "touchstart touchmove touchend touchcancel";
    function xe() { this.evTarget = ye, this.evWin = be, this.started = !1, ee.apply(this, arguments); }
    function _e(e, t) { var i = R(e.touches), n = R(e.changedTouches); return t & (z | V) && (i = I(i.concat(n), "identifier", !0)), [i, n]; }
    _(xe, ee, {
    handler: function (e) {
    var t = ge[e.type]; if (t === H && (this.started = !0), this.started) {
        var i = _e.call(this, e, t);
        t & (z | V) && i[0].length - i[1].length == 0 && (this.started = !1), this.callback(this.manager, t, { pointers: i[0], changedPointers: i[1], pointerType: "touch", srcEvent: e });
    }
    }
    });
    var we = { touchstart: H, touchmove: U, touchend: z, touchcancel: V }, Te = "touchstart touchmove touchend touchcancel";
    function Me() { this.evTarget = Te, this.targetIds = {}, ee.apply(this, arguments); }
    function Ae(e, t) {
    var i = R(e.touches), n = this.targetIds; if (t & (H | U) && 1 === i.length)
        return n[i[0].identifier] = !0, [i, i]; var r, a, o = R(e.changedTouches), s = [], l = this.target; if (a = i.filter((function (e) { return E(e.target, l); })), t === H)
            for (r = 0; r < a.length;)
                n[a[r].identifier] = !0, r++; for (r = 0; r < o.length;)
            n[o[r].identifier] && s.push(o[r]), t & (z | V) && delete n[o[r].identifier], r++; return s.length ? [I(a.concat(s), "identifier", !0), s] : void 0;
    }
    _(Me, ee, { handler: function (e) { var t = we[e.type], i = Ae.call(this, e, t); i && this.callback(this.manager, t, { pointers: i[0], changedPointers: i[1], pointerType: "touch", srcEvent: e }); } });
    var Se = 2500, Ee = 25;
    function Pe() { ee.apply(this, arguments); var e = w(this.handler, this); this.touch = new Me(this.manager, e), this.mouse = new he(this.manager, e), this.primaryTouch = null, this.lastTouches = []; }
    function Ce(e, t) { e & H ? (this.primaryTouch = t.changedPointers[0].identifier, Le.call(this, t)) : e & (z | V) && Le.call(this, t); }
    function Le(e) {
    var t = e.changedPointers[0]; if (t.identifier === this.primaryTouch) {
        var i = { x: t.clientX, y: t.clientY };
        this.lastTouches.push(i);
        var n = this.lastTouches;
        setTimeout((function () { var e = n.indexOf(i); e > -1 && n.splice(e, 1); }), Se);
    }
    }
    function Re(e) {
    for (var t = e.srcEvent.clientX, i = e.srcEvent.clientY, n = 0; n < this.lastTouches.length; n++) {
        var r = this.lastTouches[n], a = Math.abs(t - r.x), o = Math.abs(i - r.y);
        if (a <= Ee && o <= Ee)
            return !0;
    } return !1;
    }
    _(Pe, ee, {
    handler: function (e, t, i) {
    var n = "touch" == i.pointerType, r = "mouse" == i.pointerType; if (!(r && i.sourceCapabilities && i.sourceCapabilities.firesTouchEvents)) {
        if (n)
            Ce.call(this, t, i);
        else if (r && Re.call(this, i))
            return;
        this.callback(e, t, i);
    }
    }, destroy: function () { this.touch.destroy(), this.mouse.destroy(); }
    });
    var Ie = O(u.style, "touchAction"), Oe = Ie !== s, De = "auto", Fe = "manipulation", ke = "none", Ne = "pan-x", Be = "pan-y", Ge = function () {
    if (!Oe)
        return !1; var e = {}, t = r.CSS && r.CSS.supports; return ["auto", "manipulation", "pan-y", "pan-x", "pan-x pan-y", "none"].forEach((function (i) { e[i] = !t || r.CSS.supports("touch-action", i); })), e;
    } ();
    function He(e, t) { this.manager = e, this.set(t); }
    He.prototype = {
    set: function (e) { "compute" == e && (e = this.compute()), Oe && this.manager.element.style && Ge[e] && (this.manager.element.style[Ie] = e), this.actions = e.toLowerCase().trim(); }, update: function () { this.set(this.manager.options.touchAction); }, compute: function () {
    var e = []; return g(this.manager.recognizers, (function (t) { T(t.options.enable, [t]) && (e = e.concat(t.getTouchAction())); })), function (e) {
    if (P(e, ke))
        return ke; var t = P(e, Ne), i = P(e, Be); if (t && i)
            return ke; if (t || i)
            return t ? Ne : Be; if (P(e, Fe))
            return Fe; return De;
    } (e.join(" "));
    }, preventDefaults: function (e) {
    var t = e.srcEvent, i = e.offsetDirection; if (this.manager.session.prevented)
        t.preventDefault();
    else {
        var n = this.actions, r = P(n, ke) && !Ge[ke], a = P(n, Be) && !Ge[Be], o = P(n, Ne) && !Ge[Ne];
        if (r) {
            var s = 1 === e.pointers.length, l = e.distance < 2, c = e.deltaTime < 250;
            if (s && l && c)
                return;
        }
        if (!o || !a)
            return r || a && i & q || o && i & $ ? this.preventSrc(t) : void 0;
    }
    }, preventSrc: function (e) { this.manager.session.prevented = !0, e.preventDefault(); }
    };
    var Ue = 1, ze = 2, Ve = 4, je = 8, We = je, Xe = 16;
    function Ye(e) { this.options = l({}, this.defaults, e || {}), this.id = D++ , this.manager = null, this.options.enable = M(this.options.enable, !0), this.state = Ue, this.simultaneous = {}, this.requireFail = []; }
    function Qe(e) { return e & Xe ? "cancel" : e & je ? "end" : e & Ve ? "move" : e & ze ? "start" : ""; }
    function qe(e) { return e == Q ? "down" : e == Y ? "up" : e == W ? "left" : e == X ? "right" : ""; }
    function $e(e, t) { var i = t.manager; return i ? i.get(e) : e; }
    function Ze() { Ye.apply(this, arguments); }
    function Ke() { Ze.apply(this, arguments), this.pX = null, this.pY = null; }
    function Je() { Ze.apply(this, arguments); }
    function et() { Ye.apply(this, arguments), this._timer = null, this._input = null; }
    function tt() { Ze.apply(this, arguments); }
    function it() { Ze.apply(this, arguments); }
    function nt() { Ye.apply(this, arguments), this.pTime = !1, this.pCenter = !1, this._timer = null, this._input = null, this.count = 0; }
    function rt(e, t) { return (t = t || {}).recognizers = M(t.recognizers, rt.defaults.preset), new at(e, t); }
    Ye.prototype = {
    defaults: {}, set: function (e) { return l(this.options, e), this.manager && this.manager.touchAction.update(), this; }, recognizeWith: function (e) {
    if (v(e, "recognizeWith", this))
        return this; var t = this.simultaneous; return t[(e = $e(e, this)).id] || (t[e.id] = e, e.recognizeWith(this)), this;
    }, dropRecognizeWith: function (e) { return v(e, "dropRecognizeWith", this) ? this : (e = $e(e, this), delete this.simultaneous[e.id], this); }, requireFailure: function (e) {
    if (v(e, "requireFailure", this))
        return this; var t = this.requireFail; return -1 === L(t, e = $e(e, this)) && (t.push(e), e.requireFailure(this)), this;
    }, dropRequireFailure: function (e) {
    if (v(e, "dropRequireFailure", this))
        return this; e = $e(e, this); var t = L(this.requireFail, e); return t > -1 && this.requireFail.splice(t, 1), this;
    }, hasRequireFailures: function () { return this.requireFail.length > 0; }, canRecognizeWith: function (e) { return !!this.simultaneous[e.id]; }, emit: function (e) { var t = this, i = this.state; function n(i) { t.manager.emit(i, e); } i < je && n(t.options.event + Qe(i)), n(t.options.event), e.additionalEvent && n(e.additionalEvent), i >= je && n(t.options.event + Qe(i)); }, tryEmit: function (e) {
    if (this.canEmit())
        return this.emit(e); this.state = 32;
    }, canEmit: function () {
    for (var e = 0; e < this.requireFail.length;) {
        if (!(this.requireFail[e].state & (32 | Ue)))
            return !1;
        e++;
    } return !0;
    }, recognize: function (e) {
    var t = l({}, e); if (!T(this.options.enable, [this, t]))
        return this.reset(), void (this.state = 32); this.state & (We | Xe | 32) && (this.state = Ue), this.state = this.process(t), this.state & (ze | Ve | je | Xe) && this.tryEmit(t);
    }, process: function (e) { }, getTouchAction: function () { }, reset: function () { }
    }, _(Ze, Ye, { defaults: { pointers: 1 }, attrTest: function (e) { var t = this.options.pointers; return 0 === t || e.pointers.length === t; }, process: function (e) { var t = this.state, i = e.eventType, n = t & (ze | Ve), r = this.attrTest(e); return n && (i & V || !r) ? t | Xe : n || r ? i & z ? t | je : t & ze ? t | Ve : ze : 32; } }), _(Ke, Ze, { defaults: { event: "pan", threshold: 10, pointers: 1, direction: Z }, getTouchAction: function () { var e = this.options.direction, t = []; return e & q && t.push(Be), e & $ && t.push(Ne), t; }, directionTest: function (e) { var t = this.options, i = !0, n = e.distance, r = e.direction, a = e.deltaX, o = e.deltaY; return r & t.direction || (t.direction & q ? (r = 0 === a ? j : a < 0 ? W : X, i = a != this.pX, n = Math.abs(e.deltaX)) : (r = 0 === o ? j : o < 0 ? Y : Q, i = o != this.pY, n = Math.abs(e.deltaY))), e.direction = r, i && n > t.threshold && r & t.direction; }, attrTest: function (e) { return Ze.prototype.attrTest.call(this, e) && (this.state & ze || !(this.state & ze) && this.directionTest(e)); }, emit: function (e) { this.pX = e.deltaX, this.pY = e.deltaY; var t = qe(e.direction); t && (e.additionalEvent = this.options.event + t), this._super.emit.call(this, e); } }), _(Je, Ze, {
    defaults: { event: "pinch", threshold: 0, pointers: 2 }, getTouchAction: function () { return [ke]; }, attrTest: function (e) { return this._super.attrTest.call(this, e) && (Math.abs(e.scale - 1) > this.options.threshold || this.state & ze); }, emit: function (e) {
    if (1 !== e.scale) {
        var t = e.scale < 1 ? "in" : "out";
        e.additionalEvent = this.options.event + t;
    } this._super.emit.call(this, e);
    }
    }), _(et, Ye, {
    defaults: { event: "press", pointers: 1, time: 251, threshold: 9 }, getTouchAction: function () { return [De]; }, process: function (e) {
    var t = this.options, i = e.pointers.length === t.pointers, n = e.distance < t.threshold, r = e.deltaTime > t.time; if (this._input = e, !n || !i || e.eventType & (z | V) && !r)
        this.reset();
    else if (e.eventType & H)
        this.reset(), this._timer = m((function () { this.state = We, this.tryEmit(); }), t.time, this);
    else if (e.eventType & z)
        return We; return 32;
    }, reset: function () { clearTimeout(this._timer); }, emit: function (e) { this.state === We && (e && e.eventType & z ? this.manager.emit(this.options.event + "up", e) : (this._input.timeStamp = f(), this.manager.emit(this.options.event, this._input))); }
    }), _(tt, Ze, { defaults: { event: "rotate", threshold: 0, pointers: 2 }, getTouchAction: function () { return [ke]; }, attrTest: function (e) { return this._super.attrTest.call(this, e) && (Math.abs(e.rotation) > this.options.threshold || this.state & ze); } }), _(it, Ze, { defaults: { event: "swipe", threshold: 10, velocity: .3, direction: q | $, pointers: 1 }, getTouchAction: function () { return Ke.prototype.getTouchAction.call(this); }, attrTest: function (e) { var t, i = this.options.direction; return i & (q | $) ? t = e.overallVelocity : i & q ? t = e.overallVelocityX : i & $ && (t = e.overallVelocityY), this._super.attrTest.call(this, e) && i & e.offsetDirection && e.distance > this.options.threshold && e.maxPointers == this.options.pointers && p(t) > this.options.velocity && e.eventType & z; }, emit: function (e) { var t = qe(e.offsetDirection); t && this.manager.emit(this.options.event + t, e), this.manager.emit(this.options.event, e); } }), _(nt, Ye, {
    defaults: { event: "tap", pointers: 1, taps: 1, interval: 300, time: 250, threshold: 9, posThreshold: 10 }, getTouchAction: function () { return [Fe]; }, process: function (e) {
    var t = this.options, i = e.pointers.length === t.pointers, n = e.distance < t.threshold, r = e.deltaTime < t.time; if (this.reset(), e.eventType & H && 0 === this.count)
        return this.failTimeout(); if (n && r && i) {
            if (e.eventType != z)
                return this.failTimeout();
            var a = !this.pTime || e.timeStamp - this.pTime < t.interval, o = !this.pCenter || oe(this.pCenter, e.center) < t.posThreshold;
            if (this.pTime = e.timeStamp, this.pCenter = e.center, o && a ? this.count += 1 : this.count = 1, this._input = e, 0 === this.count % t.taps)
                return this.hasRequireFailures() ? (this._timer = m((function () { this.state = We, this.tryEmit(); }), t.interval, this), ze) : We;
        } return 32;
    }, failTimeout: function () { return this._timer = m((function () { this.state = 32; }), this.options.interval, this), 32; }, reset: function () { clearTimeout(this._timer); }, emit: function () { this.state == We && (this._input.tapCount = this.count, this.manager.emit(this.options.event, this._input)); }
    }), rt.VERSION = "2.0.7", rt.defaults = { domEvents: !1, touchAction: "compute", enable: !0, inputTarget: null, inputClass: null, preset: [[tt, { enable: !1 }], [Je, { enable: !1 }, ["rotate"]], [it, { direction: q }], [Ke, { direction: q }, ["swipe"]], [nt], [nt, { event: "doubletap", taps: 2 }, ["tap"]], [et]], cssProps: { userSelect: "none", touchSelect: "none", touchCallout: "none", contentZooming: "none", userDrag: "none", tapHighlightColor: "rgba(0,0,0,0)" } };
    function at(e, t) { var i; this.options = l({}, rt.defaults, t || {}), this.options.inputTarget = this.options.inputTarget || e, this.handlers = {}, this.session = {}, this.recognizers = [], this.oldCssProps = {}, this.element = e, this.input = new ((i = this).options.inputClass || (N ? ve : B ? Me : k ? Pe : he))(i, te), this.touchAction = new He(this, this.options.touchAction), ot(this, !0), g(this.options.recognizers, (function (e) { var t = this.add(new e[0](e[1])); e[2] && t.recognizeWith(e[2]), e[3] && t.requireFailure(e[3]); }), this); }
    function ot(e, t) { var i, n = e.element; n.style && (g(e.options.cssProps, (function (r, a) { i = O(n.style, a), t ? (e.oldCssProps[i] = n.style[i], n.style[i] = r) : n.style[i] = e.oldCssProps[i] || ""; })), t || (e.oldCssProps = {})); }
    at.prototype = {
    set: function (e) { return l(this.options, e), e.touchAction && this.touchAction.update(), e.inputTarget && (this.input.destroy(), this.input.target = e.inputTarget, this.input.init()), this; }, stop: function (e) { this.session.stopped = e ? 2 : 1; }, recognize: function (e) {
    var t = this.session; if (!t.stopped) {
        var i;
        this.touchAction.preventDefaults(e);
        var n = this.recognizers, r = t.curRecognizer;
        (!r || r && r.state & We) && (r = t.curRecognizer = null);
        for (var a = 0; a < n.length;)
            i = n[a], 2 === t.stopped || r && i != r && !i.canRecognizeWith(r) ? i.reset() : i.recognize(e), !r && i.state & (ze | Ve | je) && (r = t.curRecognizer = i), a++;
    }
    }, get: function (e) {
    if (e instanceof Ye)
        return e; for (var t = this.recognizers, i = 0; i < t.length; i++)
            if (t[i].options.event == e)
                return t[i]; return null;
    }, add: function (e) {
    if (v(e, "add", this))
        return this; var t = this.get(e.options.event); return t && this.remove(t), this.recognizers.push(e), e.manager = this, this.touchAction.update(), e;
    }, remove: function (e) {
    if (v(e, "remove", this))
        return this; if (e = this.get(e)) {
            var t = this.recognizers, i = L(t, e);
            -1 !== i && (t.splice(i, 1), this.touchAction.update());
        } return this;
    }, on: function (e, t) {
    if (e !== s && t !== s) {
        var i = this.handlers;
        return g(C(e), (function (e) { i[e] = i[e] || [], i[e].push(t); })), this;
    }
    }, off: function (e, t) {
    if (e !== s) {
        var i = this.handlers;
        return g(C(e), (function (e) { t ? i[e] && i[e].splice(L(i[e], t), 1) : delete i[e]; })), this;
    }
    }, emit: function (e, t) {
    this.options.domEvents && function (e, t) { var i = a.createEvent("Event"); i.initEvent(e, !0, !0), i.gesture = t, t.target.dispatchEvent(i); } (e, t); var i = this.handlers[e] && this.handlers[e].slice(); if (i && i.length) {
        t.type = e, t.preventDefault = function () { t.srcEvent.preventDefault(); };
        for (var n = 0; n < i.length;)
            i[n](t), n++;
    }
    }, destroy: function () { this.element && ot(this, !1), this.handlers = {}, this.session = {}, this.input.destroy(), this.element = null; }
    }, l(rt, { INPUT_START: H, INPUT_MOVE: U, INPUT_END: z, INPUT_CANCEL: V, STATE_POSSIBLE: Ue, STATE_BEGAN: ze, STATE_CHANGED: Ve, STATE_ENDED: je, STATE_RECOGNIZED: We, STATE_CANCELLED: Xe, STATE_FAILED: 32, DIRECTION_NONE: j, DIRECTION_LEFT: W, DIRECTION_RIGHT: X, DIRECTION_UP: Y, DIRECTION_DOWN: Q, DIRECTION_HORIZONTAL: q, DIRECTION_VERTICAL: $, DIRECTION_ALL: Z, Manager: at, Input: ee, TouchAction: He, TouchInput: Me, MouseInput: he, PointerEventInput: ve, TouchMouseInput: Pe, SingleTouchInput: xe, Recognizer: Ye, AttrRecognizer: Ze, Tap: nt, Pan: Ke, Swipe: it, Pinch: Je, Rotate: tt, Press: et, on: A, off: S, each: g, merge: x, extend: b, assign: l, inherit: _, bindFn: w, prefixed: O }), (void 0 !== r ? r : "undefined" != typeof self ? self : {}).Hammer = rt, (n = function () { return rt; }.call(t, i, t, e)) === s || (e.exports = n);
} (window, document);
}, function (e, t, i) {
    "use strict";
    var n = i(12);
    i.n(n).a;
}, function (e, t, i) {
    "use strict";
    var n = i(13);
    i.n(n).a;
}, function (e, t, i) {
    "use strict";
    var n = i(14);
    i.n(n).a;
}, function (e, t, i) {
    "use strict";
    var n = i(15);
    i.n(n).a;
}, function (e, t, i) {
    "use strict";
    var n = i(16);
    i.n(n).a;
}, function (e, t, i) {
    "use strict";
    var n = i(17);
    i.n(n).a;
}, function (e, t, i) {
e.exports = function () {
    "use strict";
    var e = "undefined" == typeof document ? { body: {}, addEventListener: function () { }, removeEventListener: function () { }, activeElement: { blur: function () { }, nodeName: "" }, querySelector: function () { return null; }, querySelectorAll: function () { return []; }, getElementById: function () { return null; }, createEvent: function () { return { initEvent: function () { } }; }, createElement: function () { return { children: [], childNodes: [], style: {}, setAttribute: function () { }, getElementsByTagName: function () { return []; } }; }, location: { hash: "" } } : document, t = "undefined" == typeof window ? { document: e, navigator: { userAgent: "" }, location: {}, history: {}, CustomEvent: function () { return this; }, addEventListener: function () { }, removeEventListener: function () { }, getComputedStyle: function () { return { getPropertyValue: function () { return ""; } }; }, Image: function () { }, Date: function () { }, screen: {}, setTimeout: function () { }, clearTimeout: function () { } } : window, i = function (e) {
    for (var t = 0; t < e.length; t += 1)
        this[t] = e[t]; return this.length = e.length, this;
    };
    function n(n, r) {
    var a = [], o = 0; if (n && !r && n instanceof i)
        return n; if (n)
            if ("string" == typeof n) {
                var s, l, c = n.trim();
                if (c.indexOf("<") >= 0 && c.indexOf(">") >= 0) {
                    var u = "div";
                    for (0 === c.indexOf("<li") && (u = "ul"), 0 === c.indexOf("<tr") && (u = "tbody"), 0 !== c.indexOf("<td") && 0 !== c.indexOf("<th") || (u = "tr"), 0 === c.indexOf("<tbody") && (u = "table"), 0 === c.indexOf("<option") && (u = "select"), (l = e.createElement(u)).innerHTML = c, o = 0; o < l.childNodes.length; o += 1)
                        a.push(l.childNodes[o]);
                }
                else
                    for (s = r || "#" !== n[0] || n.match(/[ .<>:~]/) ? (r || e).querySelectorAll(n.trim()) : [e.getElementById(n.trim().split("#")[1])], o = 0; o < s.length; o += 1)
                        s[o] && a.push(s[o]);
            }
            else if (n.nodeType || n === t || n === e)
                a.push(n);
            else if (n.length > 0 && n[0].nodeType)
                for (o = 0; o < n.length; o += 1)
                    a.push(n[o]); return new i(a);
    }
    function r(e) {
    for (var t = [], i = 0; i < e.length; i += 1)
        -1 === t.indexOf(e[i]) && t.push(e[i]); return t;
    }
    n.fn = i.prototype, n.Class = i, n.Dom7 = i;
    var a = {
    addClass: function (e) {
    if (void 0 === e)
        return this; for (var t = e.split(" "), i = 0; i < t.length; i += 1)
            for (var n = 0; n < this.length; n += 1)
                void 0 !== this[n] && void 0 !== this[n].classList && this[n].classList.add(t[i]); return this;
    }, removeClass: function (e) {
    for (var t = e.split(" "), i = 0; i < t.length; i += 1)
        for (var n = 0; n < this.length; n += 1)
            void 0 !== this[n] && void 0 !== this[n].classList && this[n].classList.remove(t[i]); return this;
    }, hasClass: function (e) { return !!this[0] && this[0].classList.contains(e); }, toggleClass: function (e) {
    for (var t = e.split(" "), i = 0; i < t.length; i += 1)
        for (var n = 0; n < this.length; n += 1)
            void 0 !== this[n] && void 0 !== this[n].classList && this[n].classList.toggle(t[i]); return this;
    }, attr: function (e, t) {
    var i = arguments; if (1 === arguments.length && "string" == typeof e)
        return this[0] ? this[0].getAttribute(e) : void 0; for (var n = 0; n < this.length; n += 1)
            if (2 === i.length)
                this[n].setAttribute(e, t);
            else
                for (var r in e)
                    this[n][r] = e[r], this[n].setAttribute(r, e[r]); return this;
    }, removeAttr: function (e) {
    for (var t = 0; t < this.length; t += 1)
        this[t].removeAttribute(e); return this;
    }, data: function (e, t) {
    var i; if (void 0 !== t) {
        for (var n = 0; n < this.length; n += 1)
            (i = this[n]).dom7ElementDataStorage || (i.dom7ElementDataStorage = {}), i.dom7ElementDataStorage[e] = t;
        return this;
    } if (i = this[0]) {
        if (i.dom7ElementDataStorage && e in i.dom7ElementDataStorage)
            return i.dom7ElementDataStorage[e];
        var r = i.getAttribute("data-" + e);
        return r || void 0;
    }
    }, transform: function (e) {
    for (var t = 0; t < this.length; t += 1) {
        var i = this[t].style;
        i.webkitTransform = e, i.transform = e;
    } return this;
    }, transition: function (e) {
    "string" != typeof e && (e += "ms"); for (var t = 0; t < this.length; t += 1) {
        var i = this[t].style;
        i.webkitTransitionDuration = e, i.transitionDuration = e;
    } return this;
    }, on: function () {
    for (var e, t = [], i = arguments.length; i--;)
        t[i] = arguments[i]; var r = t[0], a = t[1], o = t[2], s = t[3]; function l(e) {
        var t = e.target; if (t) {
            var i = e.target.dom7EventData || [];
            if (i.indexOf(e) < 0 && i.unshift(e), n(t).is(a))
                o.apply(t, i);
            else
                for (var r = n(t).parents(), s = 0; s < r.length; s += 1)
                    n(r[s]).is(a) && o.apply(r[s], i);
        }
        } function c(e) { var t = e && e.target && e.target.dom7EventData || []; t.indexOf(e) < 0 && t.unshift(e), o.apply(this, t); } "function" == typeof t[1] && (r = (e = t)[0], o = e[1], s = e[2], a = void 0), s || (s = !1); for (var u, h = r.split(" "), d = 0; d < this.length; d += 1) {
            var p = this[d];
            if (a)
                for (u = 0; u < h.length; u += 1) {
                    var f = h[u];
                    p.dom7LiveListeners || (p.dom7LiveListeners = {}), p.dom7LiveListeners[f] || (p.dom7LiveListeners[f] = []), p.dom7LiveListeners[f].push({ listener: o, proxyListener: l }), p.addEventListener(f, l, s);
                }
            else
                for (u = 0; u < h.length; u += 1) {
                    var m = h[u];
                    p.dom7Listeners || (p.dom7Listeners = {}), p.dom7Listeners[m] || (p.dom7Listeners[m] = []), p.dom7Listeners[m].push({ listener: o, proxyListener: c }), p.addEventListener(m, c, s);
                }
        } return this;
    }, off: function () {
    for (var e, t = [], i = arguments.length; i--;)
        t[i] = arguments[i]; var n = t[0], r = t[1], a = t[2], o = t[3]; "function" == typeof t[1] && (n = (e = t)[0], a = e[1], o = e[2], r = void 0), o || (o = !1); for (var s = n.split(" "), l = 0; l < s.length; l += 1)
            for (var c = s[l], u = 0; u < this.length; u += 1) {
                var h = this[u], d = void 0;
                if (!r && h.dom7Listeners ? d = h.dom7Listeners[c] : r && h.dom7LiveListeners && (d = h.dom7LiveListeners[c]), d && d.length)
                    for (var p = d.length - 1; p >= 0; p -= 1) {
                        var f = d[p];
                        a && f.listener === a ? (h.removeEventListener(c, f.proxyListener, o), d.splice(p, 1)) : a && f.listener && f.listener.dom7proxy && f.listener.dom7proxy === a ? (h.removeEventListener(c, f.proxyListener, o), d.splice(p, 1)) : a || (h.removeEventListener(c, f.proxyListener, o), d.splice(p, 1));
                    }
            } return this;
    }, trigger: function () {
    for (var i = [], n = arguments.length; n--;)
        i[n] = arguments[n]; for (var r = i[0].split(" "), a = i[1], o = 0; o < r.length; o += 1)
            for (var s = r[o], l = 0; l < this.length; l += 1) {
                var c = this[l], u = void 0;
                try {
                    u = new t.CustomEvent(s, { detail: a, bubbles: !0, cancelable: !0 });
                }
                catch (t) {
                    (u = e.createEvent("Event")).initEvent(s, !0, !0), u.detail = a;
                }
                c.dom7EventData = i.filter((function (e, t) { return t > 0; })), c.dispatchEvent(u), c.dom7EventData = [], delete c.dom7EventData;
            } return this;
    }, transitionEnd: function (e) {
    var t, i = ["webkitTransitionEnd", "transitionend"], n = this; function r(a) {
    if (a.target === this)
        for (e.call(this, a), t = 0; t < i.length; t += 1)
            n.off(i[t], r);
    } if (e)
            for (t = 0; t < i.length; t += 1)
                n.on(i[t], r); return this;
    }, outerWidth: function (e) {
    if (this.length > 0) {
        if (e) {
            var t = this.styles();
            return this[0].offsetWidth + parseFloat(t.getPropertyValue("margin-right")) + parseFloat(t.getPropertyValue("margin-left"));
        }
        return this[0].offsetWidth;
    } return null;
    }, outerHeight: function (e) {
    if (this.length > 0) {
        if (e) {
            var t = this.styles();
            return this[0].offsetHeight + parseFloat(t.getPropertyValue("margin-top")) + parseFloat(t.getPropertyValue("margin-bottom"));
        }
        return this[0].offsetHeight;
    } return null;
    }, offset: function () {
    if (this.length > 0) {
        var i = this[0], n = i.getBoundingClientRect(), r = e.body, a = i.clientTop || r.clientTop || 0, o = i.clientLeft || r.clientLeft || 0, s = i === t ? t.scrollY : i.scrollTop, l = i === t ? t.scrollX : i.scrollLeft;
        return { top: n.top + s - a, left: n.left + l - o };
    } return null;
    }, css: function (e, i) {
    var n; if (1 === arguments.length) {
        if ("string" != typeof e) {
            for (n = 0; n < this.length; n += 1)
                for (var r in e)
                    this[n].style[r] = e[r];
            return this;
        }
        if (this[0])
            return t.getComputedStyle(this[0], null).getPropertyValue(e);
    } if (2 === arguments.length && "string" == typeof e) {
        for (n = 0; n < this.length; n += 1)
            this[n].style[e] = i;
        return this;
    } return this;
    }, each: function (e) {
    if (!e)
        return this; for (var t = 0; t < this.length; t += 1)
            if (!1 === e.call(this[t], t, this[t]))
                return this; return this;
    }, html: function (e) {
    if (void 0 === e)
        return this[0] ? this[0].innerHTML : void 0; for (var t = 0; t < this.length; t += 1)
            this[t].innerHTML = e; return this;
    }, text: function (e) {
    if (void 0 === e)
        return this[0] ? this[0].textContent.trim() : null; for (var t = 0; t < this.length; t += 1)
            this[t].textContent = e; return this;
    }, is: function (r) {
    var a, o, s = this[0]; if (!s || void 0 === r)
        return !1; if ("string" == typeof r) {
            if (s.matches)
                return s.matches(r);
            if (s.webkitMatchesSelector)
                return s.webkitMatchesSelector(r);
            if (s.msMatchesSelector)
                return s.msMatchesSelector(r);
            for (a = n(r), o = 0; o < a.length; o += 1)
                if (a[o] === s)
                    return !0;
            return !1;
        } if (r === e)
            return s === e; if (r === t)
            return s === t; if (r.nodeType || r instanceof i) {
                for (a = r.nodeType ? [r] : r, o = 0; o < a.length; o += 1)
                    if (a[o] === s)
                        return !0;
                return !1;
            } return !1;
    }, index: function () {
    var e, t = this[0]; if (t) {
        for (e = 0; null !== (t = t.previousSibling);)
            1 === t.nodeType && (e += 1);
        return e;
    }
    }, eq: function (e) {
    if (void 0 === e)
        return this; var t, n = this.length; return new i(e > n - 1 ? [] : e < 0 ? (t = n + e) < 0 ? [] : [this[t]] : [this[e]]);
    }, append: function () {
    for (var t, n = [], r = arguments.length; r--;)
        n[r] = arguments[r]; for (var a = 0; a < n.length; a += 1) {
            t = n[a];
            for (var o = 0; o < this.length; o += 1)
                if ("string" == typeof t) {
                    var s = e.createElement("div");
                    for (s.innerHTML = t; s.firstChild;)
                        this[o].appendChild(s.firstChild);
                }
                else if (t instanceof i)
                    for (var l = 0; l < t.length; l += 1)
                        this[o].appendChild(t[l]);
                else
                    this[o].appendChild(t);
        } return this;
    }, prepend: function (t) {
    var n, r; for (n = 0; n < this.length; n += 1)
        if ("string" == typeof t) {
            var a = e.createElement("div");
            for (a.innerHTML = t, r = a.childNodes.length - 1; r >= 0; r -= 1)
                this[n].insertBefore(a.childNodes[r], this[n].childNodes[0]);
        }
        else if (t instanceof i)
            for (r = 0; r < t.length; r += 1)
                this[n].insertBefore(t[r], this[n].childNodes[0]);
        else
            this[n].insertBefore(t, this[n].childNodes[0]); return this;
    }, next: function (e) { return this.length > 0 ? e ? this[0].nextElementSibling && n(this[0].nextElementSibling).is(e) ? new i([this[0].nextElementSibling]) : new i([]) : this[0].nextElementSibling ? new i([this[0].nextElementSibling]) : new i([]) : new i([]); }, nextAll: function (e) {
    var t = [], r = this[0]; if (!r)
        return new i([]); for (; r.nextElementSibling;) {
            var a = r.nextElementSibling;
            e ? n(a).is(e) && t.push(a) : t.push(a), r = a;
        } return new i(t);
    }, prev: function (e) {
    if (this.length > 0) {
        var t = this[0];
        return e ? t.previousElementSibling && n(t.previousElementSibling).is(e) ? new i([t.previousElementSibling]) : new i([]) : t.previousElementSibling ? new i([t.previousElementSibling]) : new i([]);
    } return new i([]);
    }, prevAll: function (e) {
    var t = [], r = this[0]; if (!r)
        return new i([]); for (; r.previousElementSibling;) {
            var a = r.previousElementSibling;
            e ? n(a).is(e) && t.push(a) : t.push(a), r = a;
        } return new i(t);
    }, parent: function (e) {
    for (var t = [], i = 0; i < this.length; i += 1)
        null !== this[i].parentNode && (e ? n(this[i].parentNode).is(e) && t.push(this[i].parentNode) : t.push(this[i].parentNode)); return n(r(t));
    }, parents: function (e) {
    for (var t = [], i = 0; i < this.length; i += 1)
        for (var a = this[i].parentNode; a;)
            e ? n(a).is(e) && t.push(a) : t.push(a), a = a.parentNode; return n(r(t));
    }, closest: function (e) { var t = this; return void 0 === e ? new i([]) : (t.is(e) || (t = t.parents(e).eq(0)), t); }, find: function (e) {
    for (var t = [], n = 0; n < this.length; n += 1)
        for (var r = this[n].querySelectorAll(e), a = 0; a < r.length; a += 1)
            t.push(r[a]); return new i(t);
    }, children: function (e) {
    for (var t = [], a = 0; a < this.length; a += 1)
        for (var o = this[a].childNodes, s = 0; s < o.length; s += 1)
            e ? 1 === o[s].nodeType && n(o[s]).is(e) && t.push(o[s]) : 1 === o[s].nodeType && t.push(o[s]); return new i(r(t));
    }, remove: function () {
    for (var e = 0; e < this.length; e += 1)
        this[e].parentNode && this[e].parentNode.removeChild(this[e]); return this;
    }, add: function () {
    for (var e = [], t = arguments.length; t--;)
        e[t] = arguments[t]; var i, r; for (i = 0; i < e.length; i += 1) {
            var a = n(e[i]);
            for (r = 0; r < a.length; r += 1)
                this[this.length] = a[r], this.length += 1;
        } return this;
    }, styles: function () { return this[0] ? t.getComputedStyle(this[0], null) : {}; }
    };
    Object.keys(a).forEach((function (e) { n.fn[e] = n.fn[e] || a[e]; }));
    var o, s, l, c = {
    deleteProps: function (e) {
    var t = e; Object.keys(t).forEach((function (e) {
    try {
        t[e] = null;
    }
        catch (e) { } try {
            delete t[e];
        }
        catch (e) { }
    }));
    }, nextTick: function (e, t) { return void 0 === t && (t = 0), setTimeout(e, t); }, now: function () { return Date.now(); }, getTranslate: function (e, i) { var n, r, a; void 0 === i && (i = "x"); var o = t.getComputedStyle(e, null); return t.WebKitCSSMatrix ? ((r = o.transform || o.webkitTransform).split(",").length > 6 && (r = r.split(", ").map((function (e) { return e.replace(",", "."); })).join(", ")), a = new t.WebKitCSSMatrix("none" === r ? "" : r)) : n = (a = o.MozTransform || o.OTransform || o.MsTransform || o.msTransform || o.transform || o.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,")).toString().split(","), "x" === i && (r = t.WebKitCSSMatrix ? a.m41 : 16 === n.length ? parseFloat(n[12]) : parseFloat(n[4])), "y" === i && (r = t.WebKitCSSMatrix ? a.m42 : 16 === n.length ? parseFloat(n[13]) : parseFloat(n[5])), r || 0; }, parseUrlQuery: function (e) {
    var i, n, r, a, o = {}, s = e || t.location.href; if ("string" == typeof s && s.length)
        for (a = (n = (s = s.indexOf("?") > -1 ? s.replace(/\S*\?/, "") : "").split("&").filter((function (e) { return "" !== e; }))).length, i = 0; i < a; i += 1)
            r = n[i].replace(/#\S+/g, "").split("="), o[decodeURIComponent(r[0])] = void 0 === r[1] ? void 0 : decodeURIComponent(r[1]) || ""; return o;
    }, isObject: function (e) { return "object" == typeof e && null !== e && e.constructor && e.constructor === Object; }, extend: function () {
    for (var e = [], t = arguments.length; t--;)
        e[t] = arguments[t]; for (var i = Object(e[0]), n = 1; n < e.length; n += 1) {
            var r = e[n];
            if (null != r)
                for (var a = Object.keys(Object(r)), o = 0, s = a.length; o < s; o += 1) {
                    var l = a[o], u = Object.getOwnPropertyDescriptor(r, l);
                    void 0 !== u && u.enumerable && (c.isObject(i[l]) && c.isObject(r[l]) ? c.extend(i[l], r[l]) : !c.isObject(i[l]) && c.isObject(r[l]) ? (i[l] = {}, c.extend(i[l], r[l])) : i[l] = r[l]);
                }
        } return i;
    }
    }, u = (l = e.createElement("div"), {
    touch: t.Modernizr && !0 === t.Modernizr.touch || !!(t.navigator.maxTouchPoints > 0 || "ontouchstart" in t || t.DocumentTouch && e instanceof t.DocumentTouch), pointerEvents: !!(t.navigator.pointerEnabled || t.PointerEvent || "maxTouchPoints" in t.navigator && t.navigator.maxTouchPoints > 0), prefixedPointerEvents: !!t.navigator.msPointerEnabled, transition: (s = l.style, "transition" in s || "webkitTransition" in s || "MozTransition" in s), transforms3d: t.Modernizr && !0 === t.Modernizr.csstransforms3d || function () { var e = l.style; return "webkitPerspective" in e || "MozPerspective" in e || "OPerspective" in e || "MsPerspective" in e || "perspective" in e; } (), flexbox: function () {
    for (var e = l.style, t = "alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "), i = 0; i < t.length; i += 1)
        if (t[i] in e)
            return !0; return !1;
    } (), observer: "MutationObserver" in t || "WebkitMutationObserver" in t, passiveListener: function () {
    var e = !1; try {
        var i = Object.defineProperty({}, "passive", { get: function () { e = !0; } });
        t.addEventListener("testPassiveListener", null, i);
    }
        catch (e) { } return e;
    } (), gestures: "ongesturestart" in t
    }), h = { isIE: !!t.navigator.userAgent.match(/Trident/g) || !!t.navigator.userAgent.match(/MSIE/g), isEdge: !!t.navigator.userAgent.match(/Edge/g), isSafari: (o = t.navigator.userAgent.toLowerCase(), o.indexOf("safari") >= 0 && o.indexOf("chrome") < 0 && o.indexOf("android") < 0), isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent) }, d = function (e) { void 0 === e && (e = {}); var t = this; t.params = e, t.eventsListeners = {}, t.params && t.params.on && Object.keys(t.params.on).forEach((function (e) { t.on(e, t.params.on[e]); })); }, p = { components: { configurable: !0 } };
    d.prototype.on = function (e, t, i) {
    var n = this; if ("function" != typeof t)
        return n; var r = i ? "unshift" : "push"; return e.split(" ").forEach((function (e) { n.eventsListeners[e] || (n.eventsListeners[e] = []), n.eventsListeners[e][r](t); })), n;
    }, d.prototype.once = function (e, t, i) {
    var n = this; if ("function" != typeof t)
        return n; function r() {
        for (var i = [], a = arguments.length; a--;)
            i[a] = arguments[a]; t.apply(n, i), n.off(e, r), r.f7proxy && delete r.f7proxy;
        } return r.f7proxy = t, n.on(e, r, i);
    }, d.prototype.off = function (e, t) { var i = this; return i.eventsListeners ? (e.split(" ").forEach((function (e) { void 0 === t ? i.eventsListeners[e] = [] : i.eventsListeners[e] && i.eventsListeners[e].length && i.eventsListeners[e].forEach((function (n, r) { (n === t || n.f7proxy && n.f7proxy === t) && i.eventsListeners[e].splice(r, 1); })); })), i) : i; }, d.prototype.emit = function () {
    for (var e = [], t = arguments.length; t--;)
        e[t] = arguments[t]; var i, n, r, a = this; if (!a.eventsListeners)
            return a; "string" == typeof e[0] || Array.isArray(e[0]) ? (i = e[0], n = e.slice(1, e.length), r = a) : (i = e[0].events, n = e[0].data, r = e[0].context || a); var o = Array.isArray(i) ? i : i.split(" "); return o.forEach((function (e) {
            if (a.eventsListeners && a.eventsListeners[e]) {
                var t = [];
                a.eventsListeners[e].forEach((function (e) { t.push(e); })), t.forEach((function (e) { e.apply(r, n); }));
            }
            })), a;
    }, d.prototype.useModulesParams = function (e) { var t = this; t.modules && Object.keys(t.modules).forEach((function (i) { var n = t.modules[i]; n.params && c.extend(e, n.params); })); }, d.prototype.useModules = function (e) { void 0 === e && (e = {}); var t = this; t.modules && Object.keys(t.modules).forEach((function (i) { var n = t.modules[i], r = e[i] || {}; n.instance && Object.keys(n.instance).forEach((function (e) { var i = n.instance[e]; t[e] = "function" == typeof i ? i.bind(t) : i; })), n.on && t.on && Object.keys(n.on).forEach((function (e) { t.on(e, n.on[e]); })), n.create && n.create.bind(t)(r); })); }, p.components.set = function (e) { this.use && this.use(e); }, d.installModule = function (e) {
    for (var t = [], i = arguments.length - 1; i-- > 0;)
        t[i] = arguments[i + 1]; var n = this; n.prototype.modules || (n.prototype.modules = {}); var r = e.name || Object.keys(n.prototype.modules).length + "_" + c.now(); return n.prototype.modules[r] = e, e.proto && Object.keys(e.proto).forEach((function (t) { n.prototype[t] = e.proto[t]; })), e.static && Object.keys(e.static).forEach((function (t) { n[t] = e.static[t]; })), e.install && e.install.apply(n, t), n;
    }, d.use = function (e) {
    for (var t = [], i = arguments.length - 1; i-- > 0;)
        t[i] = arguments[i + 1]; var n = this; return Array.isArray(e) ? (e.forEach((function (e) { return n.installModule(e); })), n) : n.installModule.apply(n, [e].concat(t));
    }, Object.defineProperties(d, p);
    var f = {
    updateSize: function () { var e, t, i = this.$el; e = void 0 !== this.params.width ? this.params.width : i[0].clientWidth, t = void 0 !== this.params.height ? this.params.height : i[0].clientHeight, 0 === e && this.isHorizontal() || 0 === t && this.isVertical() || (e = e - parseInt(i.css("padding-left"), 10) - parseInt(i.css("padding-right"), 10), t = t - parseInt(i.css("padding-top"), 10) - parseInt(i.css("padding-bottom"), 10), c.extend(this, { width: e, height: t, size: this.isHorizontal() ? e : t })); }, updateSlides: function () {
    var e = this.params, i = this.$wrapperEl, n = this.size, r = this.rtlTranslate, a = this.wrongRTL, o = this.virtual && e.virtual.enabled, s = o ? this.virtual.slides.length : this.slides.length, l = i.children("." + this.params.slideClass), d = o ? this.virtual.slides.length : l.length, p = [], f = [], m = [], v = e.slidesOffsetBefore; "function" == typeof v && (v = e.slidesOffsetBefore.call(this)); var g = e.slidesOffsetAfter; "function" == typeof g && (g = e.slidesOffsetAfter.call(this)); var y = this.snapGrid.length, b = this.snapGrid.length, x = e.spaceBetween, _ = -v, w = 0, T = 0; if (void 0 !== n) {
        var M, A;
        "string" == typeof x && x.indexOf("%") >= 0 && (x = parseFloat(x.replace("%", "")) / 100 * n), this.virtualSize = -x, r ? l.css({ marginLeft: "", marginTop: "" }) : l.css({ marginRight: "", marginBottom: "" }), e.slidesPerColumn > 1 && (M = Math.floor(d / e.slidesPerColumn) === d / this.params.slidesPerColumn ? d : Math.ceil(d / e.slidesPerColumn) * e.slidesPerColumn, "auto" !== e.slidesPerView && "row" === e.slidesPerColumnFill && (M = Math.max(M, e.slidesPerView * e.slidesPerColumn)));
        for (var S, E = e.slidesPerColumn, P = M / E, C = Math.floor(d / e.slidesPerColumn), L = 0; L < d; L += 1) {
            A = 0;
            var R = l.eq(L);
            if (e.slidesPerColumn > 1) {
                var I = void 0, O = void 0, D = void 0;
                if ("column" === e.slidesPerColumnFill || "row" === e.slidesPerColumnFill && e.slidesPerGroup > 1) {
                    if ("column" === e.slidesPerColumnFill)
                        D = L - (O = Math.floor(L / E)) * E, (O > C || O === C && D === E - 1) && (D += 1) >= E && (D = 0, O += 1);
                    else {
                        var F = Math.floor(L / e.slidesPerGroup);
                        O = L - (D = Math.floor(L / e.slidesPerView) - F * e.slidesPerColumn) * e.slidesPerView - F * e.slidesPerView;
                    }
                    I = O + D * M / E, R.css({ "-webkit-box-ordinal-group": I, "-moz-box-ordinal-group": I, "-ms-flex-order": I, "-webkit-order": I, order: I });
                }
                else
                    O = L - (D = Math.floor(L / P)) * P;
                R.css("margin-" + (this.isHorizontal() ? "top" : "left"), 0 !== D && e.spaceBetween && e.spaceBetween + "px").attr("data-swiper-column", O).attr("data-swiper-row", D);
            }
            if ("none" !== R.css("display")) {
                if ("auto" === e.slidesPerView) {
                    var k = t.getComputedStyle(R[0], null), N = R[0].style.transform, B = R[0].style.webkitTransform;
                    if (N && (R[0].style.transform = "none"), B && (R[0].style.webkitTransform = "none"), e.roundLengths)
                        A = this.isHorizontal() ? R.outerWidth(!0) : R.outerHeight(!0);
                    else if (this.isHorizontal()) {
                        var G = parseFloat(k.getPropertyValue("width")), H = parseFloat(k.getPropertyValue("padding-left")), U = parseFloat(k.getPropertyValue("padding-right")), z = parseFloat(k.getPropertyValue("margin-left")), V = parseFloat(k.getPropertyValue("margin-right")), j = k.getPropertyValue("box-sizing");
                        A = j && "border-box" === j && !h.isIE ? G + z + V : G + H + U + z + V;
                    }
                    else {
                        var W = parseFloat(k.getPropertyValue("height")), X = parseFloat(k.getPropertyValue("padding-top")), Y = parseFloat(k.getPropertyValue("padding-bottom")), Q = parseFloat(k.getPropertyValue("margin-top")), q = parseFloat(k.getPropertyValue("margin-bottom")), $ = k.getPropertyValue("box-sizing");
                        A = $ && "border-box" === $ && !h.isIE ? W + Q + q : W + X + Y + Q + q;
                    }
                    N && (R[0].style.transform = N), B && (R[0].style.webkitTransform = B), e.roundLengths && (A = Math.floor(A));
                }
                else
                    A = (n - (e.slidesPerView - 1) * x) / e.slidesPerView, e.roundLengths && (A = Math.floor(A)), l[L] && (this.isHorizontal() ? l[L].style.width = A + "px" : l[L].style.height = A + "px");
                l[L] && (l[L].swiperSlideSize = A), m.push(A), e.centeredSlides ? (_ = _ + A / 2 + w / 2 + x, 0 === w && 0 !== L && (_ = _ - n / 2 - x), 0 === L && (_ = _ - n / 2 - x), Math.abs(_) < .001 && (_ = 0), e.roundLengths && (_ = Math.floor(_)), T % e.slidesPerGroup == 0 && p.push(_), f.push(_)) : (e.roundLengths && (_ = Math.floor(_)), T % e.slidesPerGroup == 0 && p.push(_), f.push(_), _ = _ + A + x), this.virtualSize += A + x, w = A, T += 1;
            }
        }
        if (this.virtualSize = Math.max(this.virtualSize, n) + g, r && a && ("slide" === e.effect || "coverflow" === e.effect) && i.css({ width: this.virtualSize + e.spaceBetween + "px" }), u.flexbox && !e.setWrapperSize || (this.isHorizontal() ? i.css({ width: this.virtualSize + e.spaceBetween + "px" }) : i.css({ height: this.virtualSize + e.spaceBetween + "px" })), e.slidesPerColumn > 1 && (this.virtualSize = (A + e.spaceBetween) * M, this.virtualSize = Math.ceil(this.virtualSize / e.slidesPerColumn) - e.spaceBetween, this.isHorizontal() ? i.css({ width: this.virtualSize + e.spaceBetween + "px" }) : i.css({ height: this.virtualSize + e.spaceBetween + "px" }), e.centeredSlides)) {
            S = [];
            for (var Z = 0; Z < p.length; Z += 1) {
                var K = p[Z];
                e.roundLengths && (K = Math.floor(K)), p[Z] < this.virtualSize + p[0] && S.push(K);
            }
            p = S;
        }
        if (!e.centeredSlides) {
            S = [];
            for (var J = 0; J < p.length; J += 1) {
                var ee = p[J];
                e.roundLengths && (ee = Math.floor(ee)), p[J] <= this.virtualSize - n && S.push(ee);
            }
            p = S, Math.floor(this.virtualSize - n) - Math.floor(p[p.length - 1]) > 1 && p.push(this.virtualSize - n);
        }
        if (0 === p.length && (p = [0]), 0 !== e.spaceBetween && (this.isHorizontal() ? r ? l.css({ marginLeft: x + "px" }) : l.css({ marginRight: x + "px" }) : l.css({ marginBottom: x + "px" })), e.centerInsufficientSlides) {
            var te = 0;
            if (m.forEach((function (t) { te += t + (e.spaceBetween ? e.spaceBetween : 0); })), (te -= e.spaceBetween) < n) {
                var ie = (n - te) / 2;
                p.forEach((function (e, t) { p[t] = e - ie; })), f.forEach((function (e, t) { f[t] = e + ie; }));
            }
        }
        c.extend(this, { slides: l, snapGrid: p, slidesGrid: f, slidesSizesGrid: m }), d !== s && this.emit("slidesLengthChange"), p.length !== y && (this.params.watchOverflow && this.checkOverflow(), this.emit("snapGridLengthChange")), f.length !== b && this.emit("slidesGridLengthChange"), (e.watchSlidesProgress || e.watchSlidesVisibility) && this.updateSlidesOffset();
    }
    }, updateAutoHeight: function (e) {
    var t, i = [], n = 0; if ("number" == typeof e ? this.setTransition(e) : !0 === e && this.setTransition(this.params.speed), "auto" !== this.params.slidesPerView && this.params.slidesPerView > 1)
        for (t = 0; t < Math.ceil(this.params.slidesPerView); t += 1) {
            var r = this.activeIndex + t;
            if (r > this.slides.length)
                break;
            i.push(this.slides.eq(r)[0]);
        }
    else
        i.push(this.slides.eq(this.activeIndex)[0]); for (t = 0; t < i.length; t += 1)
            if (void 0 !== i[t]) {
                var a = i[t].offsetHeight;
                n = a > n ? a : n;
            } n && this.$wrapperEl.css("height", n + "px");
    }, updateSlidesOffset: function () {
    for (var e = this.slides, t = 0; t < e.length; t += 1)
        e[t].swiperSlideOffset = this.isHorizontal() ? e[t].offsetLeft : e[t].offsetTop;
    }, updateSlidesProgress: function (e) {
    void 0 === e && (e = this && this.translate || 0); var t = this.params, i = this.slides, r = this.rtlTranslate; if (0 !== i.length) {
        void 0 === i[0].swiperSlideOffset && this.updateSlidesOffset();
        var a = -e;
        r && (a = e), i.removeClass(t.slideVisibleClass), this.visibleSlidesIndexes = [], this.visibleSlides = [];
        for (var o = 0; o < i.length; o += 1) {
            var s = i[o], l = (a + (t.centeredSlides ? this.minTranslate() : 0) - s.swiperSlideOffset) / (s.swiperSlideSize + t.spaceBetween);
            if (t.watchSlidesVisibility) {
                var c = -(a - s.swiperSlideOffset), u = c + this.slidesSizesGrid[o];
                (c >= 0 && c < this.size - 1 || u > 1 && u <= this.size || c <= 0 && u >= this.size) && (this.visibleSlides.push(s), this.visibleSlidesIndexes.push(o), i.eq(o).addClass(t.slideVisibleClass));
            }
            s.progress = r ? -l : l;
        }
        this.visibleSlides = n(this.visibleSlides);
    }
    }, updateProgress: function (e) { void 0 === e && (e = this && this.translate || 0); var t = this.params, i = this.maxTranslate() - this.minTranslate(), n = this.progress, r = this.isBeginning, a = this.isEnd, o = r, s = a; 0 === i ? (n = 0, r = !0, a = !0) : (r = (n = (e - this.minTranslate()) / i) <= 0, a = n >= 1), c.extend(this, { progress: n, isBeginning: r, isEnd: a }), (t.watchSlidesProgress || t.watchSlidesVisibility) && this.updateSlidesProgress(e), r && !o && this.emit("reachBeginning toEdge"), a && !s && this.emit("reachEnd toEdge"), (o && !r || s && !a) && this.emit("fromEdge"), this.emit("progress", n); }, updateSlidesClasses: function () { var e, t = this.slides, i = this.params, n = this.$wrapperEl, r = this.activeIndex, a = this.realIndex, o = this.virtual && i.virtual.enabled; t.removeClass(i.slideActiveClass + " " + i.slideNextClass + " " + i.slidePrevClass + " " + i.slideDuplicateActiveClass + " " + i.slideDuplicateNextClass + " " + i.slideDuplicatePrevClass), (e = o ? this.$wrapperEl.find("." + i.slideClass + '[data-swiper-slide-index="' + r + '"]') : t.eq(r)).addClass(i.slideActiveClass), i.loop && (e.hasClass(i.slideDuplicateClass) ? n.children("." + i.slideClass + ":not(." + i.slideDuplicateClass + ')[data-swiper-slide-index="' + a + '"]').addClass(i.slideDuplicateActiveClass) : n.children("." + i.slideClass + "." + i.slideDuplicateClass + '[data-swiper-slide-index="' + a + '"]').addClass(i.slideDuplicateActiveClass)); var s = e.nextAll("." + i.slideClass).eq(0).addClass(i.slideNextClass); i.loop && 0 === s.length && (s = t.eq(0)).addClass(i.slideNextClass); var l = e.prevAll("." + i.slideClass).eq(0).addClass(i.slidePrevClass); i.loop && 0 === l.length && (l = t.eq(-1)).addClass(i.slidePrevClass), i.loop && (s.hasClass(i.slideDuplicateClass) ? n.children("." + i.slideClass + ":not(." + i.slideDuplicateClass + ')[data-swiper-slide-index="' + s.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicateNextClass) : n.children("." + i.slideClass + "." + i.slideDuplicateClass + '[data-swiper-slide-index="' + s.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicateNextClass), l.hasClass(i.slideDuplicateClass) ? n.children("." + i.slideClass + ":not(." + i.slideDuplicateClass + ')[data-swiper-slide-index="' + l.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicatePrevClass) : n.children("." + i.slideClass + "." + i.slideDuplicateClass + '[data-swiper-slide-index="' + l.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicatePrevClass)); }, updateActiveIndex: function (e) {
    var t, i = this.rtlTranslate ? this.translate : -this.translate, n = this.slidesGrid, r = this.snapGrid, a = this.params, o = this.activeIndex, s = this.realIndex, l = this.snapIndex, u = e; if (void 0 === u) {
        for (var h = 0; h < n.length; h += 1)
            void 0 !== n[h + 1] ? i >= n[h] && i < n[h + 1] - (n[h + 1] - n[h]) / 2 ? u = h : i >= n[h] && i < n[h + 1] && (u = h + 1) : i >= n[h] && (u = h);
        a.normalizeSlideIndex && (u < 0 || void 0 === u) && (u = 0);
    } if ((t = r.indexOf(i) >= 0 ? r.indexOf(i) : Math.floor(u / a.slidesPerGroup)) >= r.length && (t = r.length - 1), u !== o) {
        var d = parseInt(this.slides.eq(u).attr("data-swiper-slide-index") || u, 10);
        c.extend(this, { snapIndex: t, realIndex: d, previousIndex: o, activeIndex: u }), this.emit("activeIndexChange"), this.emit("snapIndexChange"), s !== d && this.emit("realIndexChange"), (this.initialized || this.runCallbacksOnInit) && this.emit("slideChange");
    }
        else
            t !== l && (this.snapIndex = t, this.emit("snapIndexChange"));
    }, updateClickedSlide: function (e) {
    var t = this.params, i = n(e.target).closest("." + t.slideClass)[0], r = !1; if (i)
        for (var a = 0; a < this.slides.length; a += 1)
            this.slides[a] === i && (r = !0); if (!i || !r)
            return this.clickedSlide = void 0, void (this.clickedIndex = void 0); this.clickedSlide = i, this.virtual && this.params.virtual.enabled ? this.clickedIndex = parseInt(n(i).attr("data-swiper-slide-index"), 10) : this.clickedIndex = n(i).index(), t.slideToClickedSlide && void 0 !== this.clickedIndex && this.clickedIndex !== this.activeIndex && this.slideToClickedSlide();
    }
    }, m = {
    getTranslate: function (e) {
    void 0 === e && (e = this.isHorizontal() ? "x" : "y"); var t = this.params, i = this.rtlTranslate, n = this.translate, r = this.$wrapperEl; if (t.virtualTranslate)
        return i ? -n : n; var a = c.getTranslate(r[0], e); return i && (a = -a), a || 0;
    }, setTranslate: function (e, t) { var i = this.rtlTranslate, n = this.params, r = this.$wrapperEl, a = this.progress, o = 0, s = 0; this.isHorizontal() ? o = i ? -e : e : s = e, n.roundLengths && (o = Math.floor(o), s = Math.floor(s)), n.virtualTranslate || (u.transforms3d ? r.transform("translate3d(" + o + "px, " + s + "px, 0px)") : r.transform("translate(" + o + "px, " + s + "px)")), this.previousTranslate = this.translate, this.translate = this.isHorizontal() ? o : s; var l = this.maxTranslate() - this.minTranslate(); (0 === l ? 0 : (e - this.minTranslate()) / l) !== a && this.updateProgress(e), this.emit("setTranslate", this.translate, t); }, minTranslate: function () { return -this.snapGrid[0]; }, maxTranslate: function () { return -this.snapGrid[this.snapGrid.length - 1]; }
    }, v = {
    setTransition: function (e, t) { this.$wrapperEl.transition(e), this.emit("setTransition", e, t); }, transitionStart: function (e, t) {
    void 0 === e && (e = !0); var i = this.activeIndex, n = this.params, r = this.previousIndex; n.autoHeight && this.updateAutoHeight(); var a = t; if (a || (a = i > r ? "next" : i < r ? "prev" : "reset"), this.emit("transitionStart"), e && i !== r) {
        if ("reset" === a)
            return void this.emit("slideResetTransitionStart");
        this.emit("slideChangeTransitionStart"), "next" === a ? this.emit("slideNextTransitionStart") : this.emit("slidePrevTransitionStart");
    }
    }, transitionEnd: function (e, t) {
    void 0 === e && (e = !0); var i = this.activeIndex, n = this.previousIndex; this.animating = !1, this.setTransition(0); var r = t; if (r || (r = i > n ? "next" : i < n ? "prev" : "reset"), this.emit("transitionEnd"), e && i !== n) {
        if ("reset" === r)
            return void this.emit("slideResetTransitionEnd");
        this.emit("slideChangeTransitionEnd"), "next" === r ? this.emit("slideNextTransitionEnd") : this.emit("slidePrevTransitionEnd");
    }
    }
    }, g = {
    slideTo: function (e, t, i, n) {
    void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === i && (i = !0); var r = this, a = e; a < 0 && (a = 0); var o = r.params, s = r.snapGrid, l = r.slidesGrid, c = r.previousIndex, h = r.activeIndex, d = r.rtlTranslate; if (r.animating && o.preventInteractionOnTransition)
        return !1; var p = Math.floor(a / o.slidesPerGroup); p >= s.length && (p = s.length - 1), (h || o.initialSlide || 0) === (c || 0) && i && r.emit("beforeSlideChangeStart"); var f, m = -s[p]; if (r.updateProgress(m), o.normalizeSlideIndex)
            for (var v = 0; v < l.length; v += 1)
                -Math.floor(100 * m) >= Math.floor(100 * l[v]) && (a = v); if (r.initialized && a !== h) {
                    if (!r.allowSlideNext && m < r.translate && m < r.minTranslate())
                        return !1;
                    if (!r.allowSlidePrev && m > r.translate && m > r.maxTranslate() && (h || 0) !== a)
                        return !1;
                } return f = a > h ? "next" : a < h ? "prev" : "reset", d && -m === r.translate || !d && m === r.translate ? (r.updateActiveIndex(a), o.autoHeight && r.updateAutoHeight(), r.updateSlidesClasses(), "slide" !== o.effect && r.setTranslate(m), "reset" !== f && (r.transitionStart(i, f), r.transitionEnd(i, f)), !1) : (0 !== t && u.transition ? (r.setTransition(t), r.setTranslate(m), r.updateActiveIndex(a), r.updateSlidesClasses(), r.emit("beforeTransitionStart", t, n), r.transitionStart(i, f), r.animating || (r.animating = !0, r.onSlideToWrapperTransitionEnd || (r.onSlideToWrapperTransitionEnd = function (e) { r && !r.destroyed && e.target === this && (r.$wrapperEl[0].removeEventListener("transitionend", r.onSlideToWrapperTransitionEnd), r.$wrapperEl[0].removeEventListener("webkitTransitionEnd", r.onSlideToWrapperTransitionEnd), r.onSlideToWrapperTransitionEnd = null, delete r.onSlideToWrapperTransitionEnd, r.transitionEnd(i, f)); }), r.$wrapperEl[0].addEventListener("transitionend", r.onSlideToWrapperTransitionEnd), r.$wrapperEl[0].addEventListener("webkitTransitionEnd", r.onSlideToWrapperTransitionEnd))) : (r.setTransition(0), r.setTranslate(m), r.updateActiveIndex(a), r.updateSlidesClasses(), r.emit("beforeTransitionStart", t, n), r.transitionStart(i, f), r.transitionEnd(i, f)), !0);
    }, slideToLoop: function (e, t, i, n) { void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === i && (i = !0); var r = e; return this.params.loop && (r += this.loopedSlides), this.slideTo(r, t, i, n); }, slideNext: function (e, t, i) { void 0 === e && (e = this.params.speed), void 0 === t && (t = !0); var n = this.params, r = this.animating; return n.loop ? !r && (this.loopFix(), this._clientLeft = this.$wrapperEl[0].clientLeft, this.slideTo(this.activeIndex + n.slidesPerGroup, e, t, i)) : this.slideTo(this.activeIndex + n.slidesPerGroup, e, t, i); }, slidePrev: function (e, t, i) {
    void 0 === e && (e = this.params.speed), void 0 === t && (t = !0); var n = this.params, r = this.animating, a = this.snapGrid, o = this.slidesGrid, s = this.rtlTranslate; if (n.loop) {
        if (r)
            return !1;
        this.loopFix(), this._clientLeft = this.$wrapperEl[0].clientLeft;
    } function l(e) { return e < 0 ? -Math.floor(Math.abs(e)) : Math.floor(e); } var c, u = l(s ? this.translate : -this.translate), h = a.map((function (e) { return l(e); })), d = (o.map((function (e) { return l(e); })), a[h.indexOf(u)], a[h.indexOf(u) - 1]); return void 0 !== d && (c = o.indexOf(d)) < 0 && (c = this.activeIndex - 1), this.slideTo(c, e, t, i);
    }, slideReset: function (e, t, i) { return void 0 === e && (e = this.params.speed), void 0 === t && (t = !0), this.slideTo(this.activeIndex, e, t, i); }, slideToClosest: function (e, t, i) {
    void 0 === e && (e = this.params.speed), void 0 === t && (t = !0); var n = this.activeIndex, r = Math.floor(n / this.params.slidesPerGroup); if (r < this.snapGrid.length - 1) {
        var a = this.rtlTranslate ? this.translate : -this.translate, o = this.snapGrid[r];
        a - o > (this.snapGrid[r + 1] - o) / 2 && (n = this.params.slidesPerGroup);
    } return this.slideTo(n, e, t, i);
    }, slideToClickedSlide: function () {
    var e, t = this, i = t.params, r = t.$wrapperEl, a = "auto" === i.slidesPerView ? t.slidesPerViewDynamic() : i.slidesPerView, o = t.clickedIndex; if (i.loop) {
        if (t.animating)
            return;
        e = parseInt(n(t.clickedSlide).attr("data-swiper-slide-index"), 10), i.centeredSlides ? o < t.loopedSlides - a / 2 || o > t.slides.length - t.loopedSlides + a / 2 ? (t.loopFix(), o = r.children("." + i.slideClass + '[data-swiper-slide-index="' + e + '"]:not(.' + i.slideDuplicateClass + ")").eq(0).index(), c.nextTick((function () { t.slideTo(o); }))) : t.slideTo(o) : o > t.slides.length - a ? (t.loopFix(), o = r.children("." + i.slideClass + '[data-swiper-slide-index="' + e + '"]:not(.' + i.slideDuplicateClass + ")").eq(0).index(), c.nextTick((function () { t.slideTo(o); }))) : t.slideTo(o);
    }
    else
        t.slideTo(o);
    }
    }, y = {
    loopCreate: function () {
    var t = this, i = t.params, r = t.$wrapperEl; r.children("." + i.slideClass + "." + i.slideDuplicateClass).remove(); var a = r.children("." + i.slideClass); if (i.loopFillGroupWithBlank) {
        var o = i.slidesPerGroup - a.length % i.slidesPerGroup;
        if (o !== i.slidesPerGroup) {
            for (var s = 0; s < o; s += 1) {
                var l = n(e.createElement("div")).addClass(i.slideClass + " " + i.slideBlankClass);
                r.append(l);
            }
            a = r.children("." + i.slideClass);
        }
    } "auto" !== i.slidesPerView || i.loopedSlides || (i.loopedSlides = a.length), t.loopedSlides = parseInt(i.loopedSlides || i.slidesPerView, 10), t.loopedSlides += i.loopAdditionalSlides, t.loopedSlides > a.length && (t.loopedSlides = a.length); var c = [], u = []; a.each((function (e, i) { var r = n(i); e < t.loopedSlides && u.push(i), e < a.length && e >= a.length - t.loopedSlides && c.push(i), r.attr("data-swiper-slide-index", e); })); for (var h = 0; h < u.length; h += 1)
            r.append(n(u[h].cloneNode(!0)).addClass(i.slideDuplicateClass)); for (var d = c.length - 1; d >= 0; d -= 1)
            r.prepend(n(c[d].cloneNode(!0)).addClass(i.slideDuplicateClass));
    }, loopFix: function () { var e, t = this.params, i = this.activeIndex, n = this.slides, r = this.loopedSlides, a = this.allowSlidePrev, o = this.allowSlideNext, s = this.snapGrid, l = this.rtlTranslate; this.allowSlidePrev = !0, this.allowSlideNext = !0; var c = -s[i] - this.getTranslate(); i < r ? (e = n.length - 3 * r + i, e += r, this.slideTo(e, 0, !1, !0) && 0 !== c && this.setTranslate((l ? -this.translate : this.translate) - c)) : ("auto" === t.slidesPerView && i >= 2 * r || i >= n.length - r) && (e = -n.length + i + r, e += r, this.slideTo(e, 0, !1, !0) && 0 !== c && this.setTranslate((l ? -this.translate : this.translate) - c)), this.allowSlidePrev = a, this.allowSlideNext = o; }, loopDestroy: function () { var e = this.$wrapperEl, t = this.params, i = this.slides; e.children("." + t.slideClass + "." + t.slideDuplicateClass + ",." + t.slideClass + "." + t.slideBlankClass).remove(), i.removeAttr("data-swiper-slide-index"); }
    }, b = {
    setGrabCursor: function (e) {
    if (!(u.touch || !this.params.simulateTouch || this.params.watchOverflow && this.isLocked)) {
        var t = this.el;
        t.style.cursor = "move", t.style.cursor = e ? "-webkit-grabbing" : "-webkit-grab", t.style.cursor = e ? "-moz-grabbin" : "-moz-grab", t.style.cursor = e ? "grabbing" : "grab";
    }
    }, unsetGrabCursor: function () { u.touch || this.params.watchOverflow && this.isLocked || (this.el.style.cursor = ""); }
    }, x = {
    appendSlide: function (e) {
    var t = this.$wrapperEl, i = this.params; if (i.loop && this.loopDestroy(), "object" == typeof e && "length" in e)
        for (var n = 0; n < e.length; n += 1)
            e[n] && t.append(e[n]);
    else
        t.append(e); i.loop && this.loopCreate(), i.observer && u.observer || this.update();
    }, prependSlide: function (e) {
    var t = this.params, i = this.$wrapperEl, n = this.activeIndex; t.loop && this.loopDestroy(); var r = n + 1; if ("object" == typeof e && "length" in e) {
        for (var a = 0; a < e.length; a += 1)
            e[a] && i.prepend(e[a]);
        r = n + e.length;
    }
    else
        i.prepend(e); t.loop && this.loopCreate(), t.observer && u.observer || this.update(), this.slideTo(r, 0, !1);
    }, addSlide: function (e, t) {
    var i = this.$wrapperEl, n = this.params, r = this.activeIndex; n.loop && (r -= this.loopedSlides, this.loopDestroy(), this.slides = i.children("." + n.slideClass)); var a = this.slides.length; if (e <= 0)
        this.prependSlide(t);
    else if (e >= a)
        this.appendSlide(t);
    else {
        for (var o = r > e ? r + 1 : r, s = [], l = a - 1; l >= e; l -= 1) {
            var c = this.slides.eq(l);
            c.remove(), s.unshift(c);
        }
        if ("object" == typeof t && "length" in t) {
            for (var h = 0; h < t.length; h += 1)
                t[h] && i.append(t[h]);
            o = r > e ? r + t.length : r;
        }
        else
            i.append(t);
        for (var d = 0; d < s.length; d += 1)
            i.append(s[d]);
        n.loop && this.loopCreate(), n.observer && u.observer || this.update(), n.loop ? this.slideTo(o + this.loopedSlides, 0, !1) : this.slideTo(o, 0, !1);
    }
    }, removeSlide: function (e) {
    var t = this.params, i = this.$wrapperEl, n = this.activeIndex; t.loop && (n -= this.loopedSlides, this.loopDestroy(), this.slides = i.children("." + t.slideClass)); var r, a = n; if ("object" == typeof e && "length" in e) {
        for (var o = 0; o < e.length; o += 1)
            r = e[o], this.slides[r] && this.slides.eq(r).remove(), r < a && (a -= 1);
        a = Math.max(a, 0);
    }
    else
        r = e, this.slides[r] && this.slides.eq(r).remove(), r < a && (a -= 1), a = Math.max(a, 0); t.loop && this.loopCreate(), t.observer && u.observer || this.update(), t.loop ? this.slideTo(a + this.loopedSlides, 0, !1) : this.slideTo(a, 0, !1);
    }, removeAllSlides: function () {
    for (var e = [], t = 0; t < this.slides.length; t += 1)
        e.push(t); this.removeSlide(e);
    }
    }, _ = function () {
    var i = t.navigator.userAgent, n = { ios: !1, android: !1, androidChrome: !1, desktop: !1, windows: !1, iphone: !1, ipod: !1, ipad: !1, cordova: t.cordova || t.phonegap, phonegap: t.cordova || t.phonegap }, r = i.match(/(Windows Phone);?[\s\/]+([\d.]+)?/), a = i.match(/(Android);?[\s\/]+([\d.]+)?/), o = i.match(/(iPad).*OS\s([\d_]+)/), s = i.match(/(iPod)(.*OS\s([\d_]+))?/), l = !o && i.match(/(iPhone\sOS|iOS)\s([\d_]+)/); if (r && (n.os = "windows", n.osVersion = r[2], n.windows = !0), a && !r && (n.os = "android", n.osVersion = a[2], n.android = !0, n.androidChrome = i.toLowerCase().indexOf("chrome") >= 0), (o || l || s) && (n.os = "ios", n.ios = !0), l && !s && (n.osVersion = l[2].replace(/_/g, "."), n.iphone = !0), o && (n.osVersion = o[2].replace(/_/g, "."), n.ipad = !0), s && (n.osVersion = s[3] ? s[3].replace(/_/g, ".") : null, n.iphone = !0), n.ios && n.osVersion && i.indexOf("Version/") >= 0 && "10" === n.osVersion.split(".")[0] && (n.osVersion = i.toLowerCase().split("version/")[1].split(" ")[0]), n.desktop = !(n.os || n.android || n.webView), n.webView = (l || o || s) && i.match(/.*AppleWebKit(?!.*Safari)/i), n.os && "ios" === n.os) {
        var c = n.osVersion.split("."), u = e.querySelector('meta[name="viewport"]');
        n.minimalUi = !n.webView && (s || l) && (1 * c[0] == 7 ? 1 * c[1] >= 1 : 1 * c[0] > 7) && u && u.getAttribute("content").indexOf("minimal-ui") >= 0;
    } return n.pixelRatio = t.devicePixelRatio || 1, n;
    } ();
    function w(i) {
    var r = this.touchEventsData, a = this.params, o = this.touches; if (!this.animating || !a.preventInteractionOnTransition) {
        var s = i;
        if (s.originalEvent && (s = s.originalEvent), r.isTouchEvent = "touchstart" === s.type, (r.isTouchEvent || !("which" in s) || 3 !== s.which) && !(!r.isTouchEvent && "button" in s && s.button > 0 || r.isTouched && r.isMoved))
            if (a.noSwiping && n(s.target).closest(a.noSwipingSelector ? a.noSwipingSelector : "." + a.noSwipingClass)[0])
                this.allowClick = !0;
            else if (!a.swipeHandler || n(s).closest(a.swipeHandler)[0]) {
                o.currentX = "touchstart" === s.type ? s.targetTouches[0].pageX : s.pageX, o.currentY = "touchstart" === s.type ? s.targetTouches[0].pageY : s.pageY;
                var l = o.currentX, u = o.currentY, h = a.edgeSwipeDetection || a.iOSEdgeSwipeDetection, d = a.edgeSwipeThreshold || a.iOSEdgeSwipeThreshold;
                if (!h || !(l <= d || l >= t.screen.width - d)) {
                    if (c.extend(r, { isTouched: !0, isMoved: !1, allowTouchCallbacks: !0, isScrolling: void 0, startMoving: void 0 }), o.startX = l, o.startY = u, r.touchStartTime = c.now(), this.allowClick = !0, this.updateSize(), this.swipeDirection = void 0, a.threshold > 0 && (r.allowThresholdMove = !1), "touchstart" !== s.type) {
                        var p = !0;
                        n(s.target).is(r.formElements) && (p = !1), e.activeElement && n(e.activeElement).is(r.formElements) && e.activeElement !== s.target && e.activeElement.blur();
                        var f = p && this.allowTouchMove && a.touchStartPreventDefault;
                        (a.touchStartForcePreventDefault || f) && s.preventDefault();
                    }
                    this.emit("touchStart", s);
                }
            }
    }
    }
    function T(t) {
    var i = this.touchEventsData, r = this.params, a = this.touches, o = this.rtlTranslate, s = t; if (s.originalEvent && (s = s.originalEvent), i.isTouched) {
        if (!i.isTouchEvent || "mousemove" !== s.type) {
            var l = "touchmove" === s.type ? s.targetTouches[0].pageX : s.pageX, u = "touchmove" === s.type ? s.targetTouches[0].pageY : s.pageY;
            if (s.preventedByNestedSwiper)
                return a.startX = l, void (a.startY = u);
            if (!this.allowTouchMove)
                return this.allowClick = !1, void (i.isTouched && (c.extend(a, { startX: l, startY: u, currentX: l, currentY: u }), i.touchStartTime = c.now()));
            if (i.isTouchEvent && r.touchReleaseOnEdges && !r.loop)
                if (this.isVertical()) {
                    if (u < a.startY && this.translate <= this.maxTranslate() || u > a.startY && this.translate >= this.minTranslate())
                        return i.isTouched = !1, void (i.isMoved = !1);
                }
                else if (l < a.startX && this.translate <= this.maxTranslate() || l > a.startX && this.translate >= this.minTranslate())
                    return;
            if (i.isTouchEvent && e.activeElement && s.target === e.activeElement && n(s.target).is(i.formElements))
                return i.isMoved = !0, void (this.allowClick = !1);
            if (i.allowTouchCallbacks && this.emit("touchMove", s), !(s.targetTouches && s.targetTouches.length > 1)) {
                a.currentX = l, a.currentY = u;
                var h, d = a.currentX - a.startX, p = a.currentY - a.startY;
                if (!(this.params.threshold && Math.sqrt(Math.pow(d, 2) + Math.pow(p, 2)) < this.params.threshold))
                    if (void 0 === i.isScrolling && (this.isHorizontal() && a.currentY === a.startY || this.isVertical() && a.currentX === a.startX ? i.isScrolling = !1 : d * d + p * p >= 25 && (h = 180 * Math.atan2(Math.abs(p), Math.abs(d)) / Math.PI, i.isScrolling = this.isHorizontal() ? h > r.touchAngle : 90 - h > r.touchAngle)), i.isScrolling && this.emit("touchMoveOpposite", s), void 0 === i.startMoving && (a.currentX === a.startX && a.currentY === a.startY || (i.startMoving = !0)), i.isScrolling)
                        i.isTouched = !1;
                    else if (i.startMoving) {
                        this.allowClick = !1, s.preventDefault(), r.touchMoveStopPropagation && !r.nested && s.stopPropagation(), i.isMoved || (r.loop && this.loopFix(), i.startTranslate = this.getTranslate(), this.setTransition(0), this.animating && this.$wrapperEl.trigger("webkitTransitionEnd transitionend"), i.allowMomentumBounce = !1, !r.grabCursor || !0 !== this.allowSlideNext && !0 !== this.allowSlidePrev || this.setGrabCursor(!0), this.emit("sliderFirstMove", s)), this.emit("sliderMove", s), i.isMoved = !0;
                        var f = this.isHorizontal() ? d : p;
                        a.diff = f, f *= r.touchRatio, o && (f = -f), this.swipeDirection = f > 0 ? "prev" : "next", i.currentTranslate = f + i.startTranslate;
                        var m = !0, v = r.resistanceRatio;
                        if (r.touchReleaseOnEdges && (v = 0), f > 0 && i.currentTranslate > this.minTranslate() ? (m = !1, r.resistance && (i.currentTranslate = this.minTranslate() - 1 + Math.pow(-this.minTranslate() + i.startTranslate + f, v))) : f < 0 && i.currentTranslate < this.maxTranslate() && (m = !1, r.resistance && (i.currentTranslate = this.maxTranslate() + 1 - Math.pow(this.maxTranslate() - i.startTranslate - f, v))), m && (s.preventedByNestedSwiper = !0), !this.allowSlideNext && "next" === this.swipeDirection && i.currentTranslate < i.startTranslate && (i.currentTranslate = i.startTranslate), !this.allowSlidePrev && "prev" === this.swipeDirection && i.currentTranslate > i.startTranslate && (i.currentTranslate = i.startTranslate), r.threshold > 0) {
                            if (!(Math.abs(f) > r.threshold || i.allowThresholdMove))
                                return void (i.currentTranslate = i.startTranslate);
                            if (!i.allowThresholdMove)
                                return i.allowThresholdMove = !0, a.startX = a.currentX, a.startY = a.currentY, i.currentTranslate = i.startTranslate, void (a.diff = this.isHorizontal() ? a.currentX - a.startX : a.currentY - a.startY);
                        }
                        r.followFinger && ((r.freeMode || r.watchSlidesProgress || r.watchSlidesVisibility) && (this.updateActiveIndex(), this.updateSlidesClasses()), r.freeMode && (0 === i.velocities.length && i.velocities.push({ position: a[this.isHorizontal() ? "startX" : "startY"], time: i.touchStartTime }), i.velocities.push({ position: a[this.isHorizontal() ? "currentX" : "currentY"], time: c.now() })), this.updateProgress(i.currentTranslate), this.setTranslate(i.currentTranslate));
                    }
            }
        }
    }
    else
        i.startMoving && i.isScrolling && this.emit("touchMoveOpposite", s);
    }
    function M(e) {
    var t = this, i = t.touchEventsData, n = t.params, r = t.touches, a = t.rtlTranslate, o = t.$wrapperEl, s = t.slidesGrid, l = t.snapGrid, u = e; if (u.originalEvent && (u = u.originalEvent), i.allowTouchCallbacks && t.emit("touchEnd", u), i.allowTouchCallbacks = !1, !i.isTouched)
        return i.isMoved && n.grabCursor && t.setGrabCursor(!1), i.isMoved = !1, void (i.startMoving = !1); n.grabCursor && i.isMoved && i.isTouched && (!0 === t.allowSlideNext || !0 === t.allowSlidePrev) && t.setGrabCursor(!1); var h, d = c.now(), p = d - i.touchStartTime; if (t.allowClick && (t.updateClickedSlide(u), t.emit("tap", u), p < 300 && d - i.lastClickTime > 300 && (i.clickTimeout && clearTimeout(i.clickTimeout), i.clickTimeout = c.nextTick((function () { t && !t.destroyed && t.emit("click", u); }), 300)), p < 300 && d - i.lastClickTime < 300 && (i.clickTimeout && clearTimeout(i.clickTimeout), t.emit("doubleTap", u))), i.lastClickTime = c.now(), c.nextTick((function () { t.destroyed || (t.allowClick = !0); })), !i.isTouched || !i.isMoved || !t.swipeDirection || 0 === r.diff || i.currentTranslate === i.startTranslate)
            return i.isTouched = !1, i.isMoved = !1, void (i.startMoving = !1); if (i.isTouched = !1, i.isMoved = !1, i.startMoving = !1, h = n.followFinger ? a ? t.translate : -t.translate : -i.currentTranslate, n.freeMode) {
                if (h < -t.minTranslate())
                    return void t.slideTo(t.activeIndex);
                if (h > -t.maxTranslate())
                    return void (t.slides.length < l.length ? t.slideTo(l.length - 1) : t.slideTo(t.slides.length - 1));
                if (n.freeModeMomentum) {
                    if (i.velocities.length > 1) {
                        var f = i.velocities.pop(), m = i.velocities.pop(), v = f.position - m.position, g = f.time - m.time;
                        t.velocity = v / g, t.velocity /= 2, Math.abs(t.velocity) < n.freeModeMinimumVelocity && (t.velocity = 0), (g > 150 || c.now() - f.time > 300) && (t.velocity = 0);
                    }
                    else
                        t.velocity = 0;
                    t.velocity *= n.freeModeMomentumVelocityRatio, i.velocities.length = 0;
                    var y = 1e3 * n.freeModeMomentumRatio, b = t.velocity * y, x = t.translate + b;
                    a && (x = -x);
                    var _, w, T = !1, M = 20 * Math.abs(t.velocity) * n.freeModeMomentumBounceRatio;
                    if (x < t.maxTranslate())
                        n.freeModeMomentumBounce ? (x + t.maxTranslate() < -M && (x = t.maxTranslate() - M), _ = t.maxTranslate(), T = !0, i.allowMomentumBounce = !0) : x = t.maxTranslate(), n.loop && n.centeredSlides && (w = !0);
                    else if (x > t.minTranslate())
                        n.freeModeMomentumBounce ? (x - t.minTranslate() > M && (x = t.minTranslate() + M), _ = t.minTranslate(), T = !0, i.allowMomentumBounce = !0) : x = t.minTranslate(), n.loop && n.centeredSlides && (w = !0);
                    else if (n.freeModeSticky) {
                        for (var A, S = 0; S < l.length; S += 1)
                            if (l[S] > -x) {
                                A = S;
                                break;
                            }
                        x = -(x = Math.abs(l[A] - x) < Math.abs(l[A - 1] - x) || "next" === t.swipeDirection ? l[A] : l[A - 1]);
                    }
                    if (w && t.once("transitionEnd", (function () { t.loopFix(); })), 0 !== t.velocity)
                        y = a ? Math.abs((-x - t.translate) / t.velocity) : Math.abs((x - t.translate) / t.velocity);
                    else if (n.freeModeSticky)
                        return void t.slideToClosest();
                    n.freeModeMomentumBounce && T ? (t.updateProgress(_), t.setTransition(y), t.setTranslate(x), t.transitionStart(!0, t.swipeDirection), t.animating = !0, o.transitionEnd((function () { t && !t.destroyed && i.allowMomentumBounce && (t.emit("momentumBounce"), t.setTransition(n.speed), t.setTranslate(_), o.transitionEnd((function () { t && !t.destroyed && t.transitionEnd(); }))); }))) : t.velocity ? (t.updateProgress(x), t.setTransition(y), t.setTranslate(x), t.transitionStart(!0, t.swipeDirection), t.animating || (t.animating = !0, o.transitionEnd((function () { t && !t.destroyed && t.transitionEnd(); })))) : t.updateProgress(x), t.updateActiveIndex(), t.updateSlidesClasses();
                }
                else if (n.freeModeSticky)
                    return void t.slideToClosest();
                (!n.freeModeMomentum || p >= n.longSwipesMs) && (t.updateProgress(), t.updateActiveIndex(), t.updateSlidesClasses());
            }
        else {
            for (var E = 0, P = t.slidesSizesGrid[0], C = 0; C < s.length; C += n.slidesPerGroup)
                void 0 !== s[C + n.slidesPerGroup] ? h >= s[C] && h < s[C + n.slidesPerGroup] && (E = C, P = s[C + n.slidesPerGroup] - s[C]) : h >= s[C] && (E = C, P = s[s.length - 1] - s[s.length - 2]);
            var L = (h - s[E]) / P;
            if (p > n.longSwipesMs) {
                if (!n.longSwipes)
                    return void t.slideTo(t.activeIndex);
                "next" === t.swipeDirection && (L >= n.longSwipesRatio ? t.slideTo(E + n.slidesPerGroup) : t.slideTo(E)), "prev" === t.swipeDirection && (L > 1 - n.longSwipesRatio ? t.slideTo(E + n.slidesPerGroup) : t.slideTo(E));
            }
            else {
                if (!n.shortSwipes)
                    return void t.slideTo(t.activeIndex);
                "next" === t.swipeDirection && t.slideTo(E + n.slidesPerGroup), "prev" === t.swipeDirection && t.slideTo(E);
            }
        }
    }
    function A() {
    var e = this.params, t = this.el; if (!t || 0 !== t.offsetWidth) {
        e.breakpoints && this.setBreakpoint();
        var i = this.allowSlideNext, n = this.allowSlidePrev, r = this.snapGrid;
        if (this.allowSlideNext = !0, this.allowSlidePrev = !0, this.updateSize(), this.updateSlides(), e.freeMode) {
            var a = Math.min(Math.max(this.translate, this.maxTranslate()), this.minTranslate());
            this.setTranslate(a), this.updateActiveIndex(), this.updateSlidesClasses(), e.autoHeight && this.updateAutoHeight();
        }
        else
            this.updateSlidesClasses(), ("auto" === e.slidesPerView || e.slidesPerView > 1) && this.isEnd && !this.params.centeredSlides ? this.slideTo(this.slides.length - 1, 0, !1, !0) : this.slideTo(this.activeIndex, 0, !1, !0);
        this.autoplay && this.autoplay.running && this.autoplay.paused && this.autoplay.run(), this.allowSlidePrev = n, this.allowSlideNext = i, this.params.watchOverflow && r !== this.snapGrid && this.checkOverflow();
    }
    }
    function S(e) { this.allowClick || (this.params.preventClicks && e.preventDefault(), this.params.preventClicksPropagation && this.animating && (e.stopPropagation(), e.stopImmediatePropagation())); }
    var E = { init: !0, direction: "horizontal", touchEventsTarget: "container", initialSlide: 0, speed: 300, preventInteractionOnTransition: !1, edgeSwipeDetection: !1, edgeSwipeThreshold: 20, freeMode: !1, freeModeMomentum: !0, freeModeMomentumRatio: 1, freeModeMomentumBounce: !0, freeModeMomentumBounceRatio: 1, freeModeMomentumVelocityRatio: 1, freeModeSticky: !1, freeModeMinimumVelocity: .02, autoHeight: !1, setWrapperSize: !1, virtualTranslate: !1, effect: "slide", breakpoints: void 0, breakpointsInverse: !1, spaceBetween: 0, slidesPerView: 1, slidesPerColumn: 1, slidesPerColumnFill: "column", slidesPerGroup: 1, centeredSlides: !1, slidesOffsetBefore: 0, slidesOffsetAfter: 0, normalizeSlideIndex: !0, centerInsufficientSlides: !1, watchOverflow: !1, roundLengths: !1, touchRatio: 1, touchAngle: 45, simulateTouch: !0, shortSwipes: !0, longSwipes: !0, longSwipesRatio: .5, longSwipesMs: 300, followFinger: !0, allowTouchMove: !0, threshold: 0, touchMoveStopPropagation: !0, touchStartPreventDefault: !0, touchStartForcePreventDefault: !1, touchReleaseOnEdges: !1, uniqueNavElements: !0, resistance: !0, resistanceRatio: .85, watchSlidesProgress: !1, watchSlidesVisibility: !1, grabCursor: !1, preventClicks: !0, preventClicksPropagation: !0, slideToClickedSlide: !1, preloadImages: !0, updateOnImagesReady: !0, loop: !1, loopAdditionalSlides: 0, loopedSlides: null, loopFillGroupWithBlank: !1, allowSlidePrev: !0, allowSlideNext: !0, swipeHandler: null, noSwiping: !0, noSwipingClass: "swiper-no-swiping", noSwipingSelector: null, passiveListeners: !0, containerModifierClass: "swiper-container-", slideClass: "swiper-slide", slideBlankClass: "swiper-slide-invisible-blank", slideActiveClass: "swiper-slide-active", slideDuplicateActiveClass: "swiper-slide-duplicate-active", slideVisibleClass: "swiper-slide-visible", slideDuplicateClass: "swiper-slide-duplicate", slideNextClass: "swiper-slide-next", slideDuplicateNextClass: "swiper-slide-duplicate-next", slidePrevClass: "swiper-slide-prev", slideDuplicatePrevClass: "swiper-slide-duplicate-prev", wrapperClass: "swiper-wrapper", runCallbacksOnInit: !0 }, P = {
    update: f, translate: m, transition: v, slide: g, loop: y, grabCursor: b, manipulation: x, events: {
    attachEvents: function () {
    var t = this.params, i = this.touchEvents, n = this.el, r = this.wrapperEl; this.onTouchStart = w.bind(this), this.onTouchMove = T.bind(this), this.onTouchEnd = M.bind(this), this.onClick = S.bind(this); var a = "container" === t.touchEventsTarget ? n : r, o = !!t.nested; if (u.touch || !u.pointerEvents && !u.prefixedPointerEvents) {
        if (u.touch) {
            var s = !("touchstart" !== i.start || !u.passiveListener || !t.passiveListeners) && { passive: !0, capture: !1 };
            a.addEventListener(i.start, this.onTouchStart, s), a.addEventListener(i.move, this.onTouchMove, u.passiveListener ? { passive: !1, capture: o } : o), a.addEventListener(i.end, this.onTouchEnd, s);
        }
        (t.simulateTouch && !_.ios && !_.android || t.simulateTouch && !u.touch && _.ios) && (a.addEventListener("mousedown", this.onTouchStart, !1), e.addEventListener("mousemove", this.onTouchMove, o), e.addEventListener("mouseup", this.onTouchEnd, !1));
    }
    else
        a.addEventListener(i.start, this.onTouchStart, !1), e.addEventListener(i.move, this.onTouchMove, o), e.addEventListener(i.end, this.onTouchEnd, !1); (t.preventClicks || t.preventClicksPropagation) && a.addEventListener("click", this.onClick, !0), this.on(_.ios || _.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", A, !0);
    }, detachEvents: function () {
    var t = this.params, i = this.touchEvents, n = this.el, r = this.wrapperEl, a = "container" === t.touchEventsTarget ? n : r, o = !!t.nested; if (u.touch || !u.pointerEvents && !u.prefixedPointerEvents) {
        if (u.touch) {
            var s = !("onTouchStart" !== i.start || !u.passiveListener || !t.passiveListeners) && { passive: !0, capture: !1 };
            a.removeEventListener(i.start, this.onTouchStart, s), a.removeEventListener(i.move, this.onTouchMove, o), a.removeEventListener(i.end, this.onTouchEnd, s);
        }
        (t.simulateTouch && !_.ios && !_.android || t.simulateTouch && !u.touch && _.ios) && (a.removeEventListener("mousedown", this.onTouchStart, !1), e.removeEventListener("mousemove", this.onTouchMove, o), e.removeEventListener("mouseup", this.onTouchEnd, !1));
    }
    else
        a.removeEventListener(i.start, this.onTouchStart, !1), e.removeEventListener(i.move, this.onTouchMove, o), e.removeEventListener(i.end, this.onTouchEnd, !1); (t.preventClicks || t.preventClicksPropagation) && a.removeEventListener("click", this.onClick, !0), this.off(_.ios || _.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", A);
    }
    }, breakpoints: {
    setBreakpoint: function () {
    var e = this.activeIndex, t = this.initialized, i = this.loopedSlides; void 0 === i && (i = 0); var n = this.params, r = n.breakpoints; if (r && (!r || 0 !== Object.keys(r).length)) {
        var a = this.getBreakpoint(r);
        if (a && this.currentBreakpoint !== a) {
            var o = a in r ? r[a] : void 0;
            o && ["slidesPerView", "spaceBetween", "slidesPerGroup"].forEach((function (e) { var t = o[e]; void 0 !== t && (o[e] = "slidesPerView" !== e || "AUTO" !== t && "auto" !== t ? "slidesPerView" === e ? parseFloat(t) : parseInt(t, 10) : "auto"); }));
            var s = o || this.originalParams, l = s.direction && s.direction !== n.direction, u = n.loop && (s.slidesPerView !== n.slidesPerView || l);
            l && t && this.changeDirection(), c.extend(this.params, s), c.extend(this, { allowTouchMove: this.params.allowTouchMove, allowSlideNext: this.params.allowSlideNext, allowSlidePrev: this.params.allowSlidePrev }), this.currentBreakpoint = a, u && t && (this.loopDestroy(), this.loopCreate(), this.updateSlides(), this.slideTo(e - i + this.loopedSlides, 0, !1)), this.emit("breakpoint", s);
        }
    }
    }, getBreakpoint: function (e) {
    if (e) {
        var i = !1, n = [];
        Object.keys(e).forEach((function (e) { n.push(e); })), n.sort((function (e, t) { return parseInt(e, 10) - parseInt(t, 10); }));
        for (var r = 0; r < n.length; r += 1) {
            var a = n[r];
            this.params.breakpointsInverse ? a <= t.innerWidth && (i = a) : a >= t.innerWidth && !i && (i = a);
        }
        return i || "max";
    }
    }
    }, checkOverflow: { checkOverflow: function () { var e = this.isLocked; this.isLocked = 1 === this.snapGrid.length, this.allowSlideNext = !this.isLocked, this.allowSlidePrev = !this.isLocked, e !== this.isLocked && this.emit(this.isLocked ? "lock" : "unlock"), e && e !== this.isLocked && (this.isEnd = !1, this.navigation.update()); } }, classes: { addClasses: function () { var e = this.classNames, t = this.params, i = this.rtl, n = this.$el, r = []; r.push("initialized"), r.push(t.direction), t.freeMode && r.push("free-mode"), u.flexbox || r.push("no-flexbox"), t.autoHeight && r.push("autoheight"), i && r.push("rtl"), t.slidesPerColumn > 1 && r.push("multirow"), _.android && r.push("android"), _.ios && r.push("ios"), (h.isIE || h.isEdge) && (u.pointerEvents || u.prefixedPointerEvents) && r.push("wp8-" + t.direction), r.forEach((function (i) { e.push(t.containerModifierClass + i); })), n.addClass(e.join(" ")); }, removeClasses: function () { var e = this.$el, t = this.classNames; e.removeClass(t.join(" ")); } }, images: {
    loadImage: function (e, i, n, r, a, o) { var s; function l() { o && o(); } e.complete && a ? l() : i ? ((s = new t.Image).onload = l, s.onerror = l, r && (s.sizes = r), n && (s.srcset = n), i && (s.src = i)) : l(); }, preloadImages: function () {
    var e = this; function t() { null != e && e && !e.destroyed && (void 0 !== e.imagesLoaded && (e.imagesLoaded += 1), e.imagesLoaded === e.imagesToLoad.length && (e.params.updateOnImagesReady && e.update(), e.emit("imagesReady"))); } e.imagesToLoad = e.$el.find("img"); for (var i = 0; i < e.imagesToLoad.length; i += 1) {
        var n = e.imagesToLoad[i];
        e.loadImage(n, n.currentSrc || n.getAttribute("src"), n.srcset || n.getAttribute("srcset"), n.sizes || n.getAttribute("sizes"), !0, t);
    }
    }
    }
    }, C = {}, L = function (e) {
    function t() {
    for (var i, r, a, o = [], s = arguments.length; s--;)
        o[s] = arguments[s]; 1 === o.length && o[0].constructor && o[0].constructor === Object ? a = o[0] : (r = (i = o)[0], a = i[1]), a || (a = {}), a = c.extend({}, a), r && !a.el && (a.el = r), e.call(this, a), Object.keys(P).forEach((function (e) { Object.keys(P[e]).forEach((function (i) { t.prototype[i] || (t.prototype[i] = P[e][i]); })); })); var l = this; void 0 === l.modules && (l.modules = {}), Object.keys(l.modules).forEach((function (e) {
        var t = l.modules[e]; if (t.params) {
            var i = Object.keys(t.params)[0], n = t.params[i];
            if ("object" != typeof n || null === n)
                return;
            if (!(i in a && "enabled" in n))
                return;
            !0 === a[i] && (a[i] = { enabled: !0 }), "object" != typeof a[i] || "enabled" in a[i] || (a[i].enabled = !0), a[i] || (a[i] = { enabled: !1 });
        }
        })); var h = c.extend({}, E); l.useModulesParams(h), l.params = c.extend({}, h, C, a), l.originalParams = c.extend({}, l.params), l.passedParams = c.extend({}, a), l.$ = n; var d = n(l.params.el); if (r = d[0]) {
            if (d.length > 1) {
                var p = [];
                return d.each((function (e, i) { var n = c.extend({}, a, { el: i }); p.push(new t(n)); })), p;
            }
            r.swiper = l, d.data("swiper", l);
            var f, m, v = d.children("." + l.params.wrapperClass);
            return c.extend(l, { $el: d, el: r, $wrapperEl: v, wrapperEl: v[0], classNames: [], slides: n(), slidesGrid: [], snapGrid: [], slidesSizesGrid: [], isHorizontal: function () { return "horizontal" === l.params.direction; }, isVertical: function () { return "vertical" === l.params.direction; }, rtl: "rtl" === r.dir.toLowerCase() || "rtl" === d.css("direction"), rtlTranslate: "horizontal" === l.params.direction && ("rtl" === r.dir.toLowerCase() || "rtl" === d.css("direction")), wrongRTL: "-webkit-box" === v.css("display"), activeIndex: 0, realIndex: 0, isBeginning: !0, isEnd: !1, translate: 0, previousTranslate: 0, progress: 0, velocity: 0, animating: !1, allowSlideNext: l.params.allowSlideNext, allowSlidePrev: l.params.allowSlidePrev, touchEvents: (f = ["touchstart", "touchmove", "touchend"], m = ["mousedown", "mousemove", "mouseup"], u.pointerEvents ? m = ["pointerdown", "pointermove", "pointerup"] : u.prefixedPointerEvents && (m = ["MSPointerDown", "MSPointerMove", "MSPointerUp"]), l.touchEventsTouch = { start: f[0], move: f[1], end: f[2] }, l.touchEventsDesktop = { start: m[0], move: m[1], end: m[2] }, u.touch || !l.params.simulateTouch ? l.touchEventsTouch : l.touchEventsDesktop), touchEventsData: { isTouched: void 0, isMoved: void 0, allowTouchCallbacks: void 0, touchStartTime: void 0, isScrolling: void 0, currentTranslate: void 0, startTranslate: void 0, allowThresholdMove: void 0, formElements: "input, select, option, textarea, button, video", lastClickTime: c.now(), clickTimeout: void 0, velocities: [], allowMomentumBounce: void 0, isTouchEvent: void 0, startMoving: void 0 }, allowClick: !0, allowTouchMove: l.params.allowTouchMove, touches: { startX: 0, startY: 0, currentX: 0, currentY: 0, diff: 0 }, imagesToLoad: [], imagesLoaded: 0 }), l.useModules(), l.params.init && l.init(), l;
        }
    } e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t; var i = { extendedDefaults: { configurable: !0 }, defaults: { configurable: !0 }, Class: { configurable: !0 }, $: { configurable: !0 } }; return t.prototype.slidesPerViewDynamic = function () {
    var e = this.params, t = this.slides, i = this.slidesGrid, n = this.size, r = this.activeIndex, a = 1; if (e.centeredSlides) {
        for (var o, s = t[r].swiperSlideSize, l = r + 1; l < t.length; l += 1)
            t[l] && !o && (a += 1, (s += t[l].swiperSlideSize) > n && (o = !0));
        for (var c = r - 1; c >= 0; c -= 1)
            t[c] && !o && (a += 1, (s += t[c].swiperSlideSize) > n && (o = !0));
    }
    else
        for (var u = r + 1; u < t.length; u += 1)
            i[u] - i[r] < n && (a += 1); return a;
    }, t.prototype.update = function () {
    var e = this; if (e && !e.destroyed) {
        var t = e.snapGrid, i = e.params;
        i.breakpoints && e.setBreakpoint(), e.updateSize(), e.updateSlides(), e.updateProgress(), e.updateSlidesClasses(), e.params.freeMode ? (n(), e.params.autoHeight && e.updateAutoHeight()) : (("auto" === e.params.slidesPerView || e.params.slidesPerView > 1) && e.isEnd && !e.params.centeredSlides ? e.slideTo(e.slides.length - 1, 0, !1, !0) : e.slideTo(e.activeIndex, 0, !1, !0)) || n(), i.watchOverflow && t !== e.snapGrid && e.checkOverflow(), e.emit("update");
    } function n() { var t = e.rtlTranslate ? -1 * e.translate : e.translate, i = Math.min(Math.max(t, e.maxTranslate()), e.minTranslate()); e.setTranslate(i), e.updateActiveIndex(), e.updateSlidesClasses(); }
    }, t.prototype.changeDirection = function (e, t) { void 0 === t && (t = !0); var i = this.params.direction; return e || (e = "horizontal" === i ? "vertical" : "horizontal"), e === i || "horizontal" !== e && "vertical" !== e ? this : (this.$el.removeClass("" + this.params.containerModifierClass + i + " wp8-" + i).addClass("" + this.params.containerModifierClass + e), (h.isIE || h.isEdge) && (u.pointerEvents || u.prefixedPointerEvents) && this.$el.addClass(this.params.containerModifierClass + "wp8-" + e), this.params.direction = e, this.slides.each((function (t, i) { "vertical" === e ? i.style.width = "" : i.style.height = ""; })), this.emit("changeDirection"), t && this.update(), this); }, t.prototype.init = function () { this.initialized || (this.emit("beforeInit"), this.params.breakpoints && this.setBreakpoint(), this.addClasses(), this.params.loop && this.loopCreate(), this.updateSize(), this.updateSlides(), this.params.watchOverflow && this.checkOverflow(), this.params.grabCursor && this.setGrabCursor(), this.params.preloadImages && this.preloadImages(), this.params.loop ? this.slideTo(this.params.initialSlide + this.loopedSlides, 0, this.params.runCallbacksOnInit) : this.slideTo(this.params.initialSlide, 0, this.params.runCallbacksOnInit), this.attachEvents(), this.initialized = !0, this.emit("init")); }, t.prototype.destroy = function (e, t) { void 0 === e && (e = !0), void 0 === t && (t = !0); var i = this, n = i.params, r = i.$el, a = i.$wrapperEl, o = i.slides; return void 0 === i.params || i.destroyed ? null : (i.emit("beforeDestroy"), i.initialized = !1, i.detachEvents(), n.loop && i.loopDestroy(), t && (i.removeClasses(), r.removeAttr("style"), a.removeAttr("style"), o && o.length && o.removeClass([n.slideVisibleClass, n.slideActiveClass, n.slideNextClass, n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")), i.emit("destroy"), Object.keys(i.eventsListeners).forEach((function (e) { i.off(e); })), !1 !== e && (i.$el[0].swiper = null, i.$el.data("swiper", null), c.deleteProps(i)), i.destroyed = !0, null); }, t.extendDefaults = function (e) { c.extend(C, e); }, i.extendedDefaults.get = function () { return C; }, i.defaults.get = function () { return E; }, i.Class.get = function () { return e; }, i.$.get = function () { return n; }, Object.defineProperties(t, i), t;
    } (d), R = { name: "device", proto: { device: _ }, static: { device: _ } }, I = { name: "support", proto: { support: u }, static: { support: u } }, O = { name: "browser", proto: { browser: h }, static: { browser: h } }, D = { name: "resize", create: function () { var e = this; c.extend(e, { resize: { resizeHandler: function () { e && !e.destroyed && e.initialized && (e.emit("beforeResize"), e.emit("resize")); }, orientationChangeHandler: function () { e && !e.destroyed && e.initialized && e.emit("orientationchange"); } } }); }, on: { init: function () { t.addEventListener("resize", this.resize.resizeHandler), t.addEventListener("orientationchange", this.resize.orientationChangeHandler); }, destroy: function () { t.removeEventListener("resize", this.resize.resizeHandler), t.removeEventListener("orientationchange", this.resize.orientationChangeHandler); } } }, F = {
    func: t.MutationObserver || t.WebkitMutationObserver, attach: function (e, i) {
    void 0 === i && (i = {}); var n = this, r = new (0, F.func)((function (e) {
    if (1 !== e.length) {
        var i = function () { n.emit("observerUpdate", e[0]); };
        t.requestAnimationFrame ? t.requestAnimationFrame(i) : t.setTimeout(i, 0);
    }
    else
        n.emit("observerUpdate", e[0]);
    })); r.observe(e, { attributes: void 0 === i.attributes || i.attributes, childList: void 0 === i.childList || i.childList, characterData: void 0 === i.characterData || i.characterData }), n.observer.observers.push(r);
    }, init: function () {
    if (u.observer && this.params.observer) {
        if (this.params.observeParents)
            for (var e = this.$el.parents(), t = 0; t < e.length; t += 1)
                this.observer.attach(e[t]);
        this.observer.attach(this.$el[0], { childList: this.params.observeSlideChildren }), this.observer.attach(this.$wrapperEl[0], { attributes: !1 });
    }
    }, destroy: function () { this.observer.observers.forEach((function (e) { e.disconnect(); })), this.observer.observers = []; }
    }, k = { name: "observer", params: { observer: !1, observeParents: !1, observeSlideChildren: !1 }, create: function () { c.extend(this, { observer: { init: F.init.bind(this), attach: F.attach.bind(this), destroy: F.destroy.bind(this), observers: [] } }); }, on: { init: function () { this.observer.init(); }, destroy: function () { this.observer.destroy(); } } }, N = {
    update: function (e) {
    var t = this, i = t.params, n = i.slidesPerView, r = i.slidesPerGroup, a = i.centeredSlides, o = t.params.virtual, s = o.addSlidesBefore, l = o.addSlidesAfter, u = t.virtual, h = u.from, d = u.to, p = u.slides, f = u.slidesGrid, m = u.renderSlide, v = u.offset; t.updateActiveIndex(); var g, y, b, x = t.activeIndex || 0; g = t.rtlTranslate ? "right" : t.isHorizontal() ? "left" : "top", a ? (y = Math.floor(n / 2) + r + s, b = Math.floor(n / 2) + r + l) : (y = n + (r - 1) + s, b = r + l); var _ = Math.max((x || 0) - b, 0), w = Math.min((x || 0) + y, p.length - 1), T = (t.slidesGrid[_] || 0) - (t.slidesGrid[0] || 0); function M() { t.updateSlides(), t.updateProgress(), t.updateSlidesClasses(), t.lazy && t.params.lazy.enabled && t.lazy.load(); } if (c.extend(t.virtual, { from: _, to: w, offset: T, slidesGrid: t.slidesGrid }), h === _ && d === w && !e)
        return t.slidesGrid !== f && T !== v && t.slides.css(g, T + "px"), void t.updateProgress(); if (t.params.virtual.renderExternal)
            return t.params.virtual.renderExternal.call(t, {
            offset: T, from: _, to: w, slides: function () {
            for (var e = [], t = _; t <= w; t += 1)
                e.push(p[t]); return e;
            } ()
            }), void M(); var A = [], S = []; if (e)
            t.$wrapperEl.find("." + t.params.slideClass).remove();
        else
            for (var E = h; E <= d; E += 1)
                (E < _ || E > w) && t.$wrapperEl.find("." + t.params.slideClass + '[data-swiper-slide-index="' + E + '"]').remove(); for (var P = 0; P < p.length; P += 1)
            P >= _ && P <= w && (void 0 === d || e ? S.push(P) : (P > d && S.push(P), P < h && A.push(P))); S.forEach((function (e) { t.$wrapperEl.append(m(p[e], e)); })), A.sort((function (e, t) { return t - e; })).forEach((function (e) { t.$wrapperEl.prepend(m(p[e], e)); })), t.$wrapperEl.children(".swiper-slide").css(g, T + "px"), M();
    }, renderSlide: function (e, t) {
    var i = this.params.virtual; if (i.cache && this.virtual.cache[t])
        return this.virtual.cache[t]; var r = i.renderSlide ? n(i.renderSlide.call(this, e, t)) : n('<div class="' + this.params.slideClass + '" data-swiper-slide-index="' + t + '">' + e + "</div>"); return r.attr("data-swiper-slide-index") || r.attr("data-swiper-slide-index", t), i.cache && (this.virtual.cache[t] = r), r;
    }, appendSlide: function (e) {
    if ("object" == typeof e && "length" in e)
        for (var t = 0; t < e.length; t += 1)
            e[t] && this.virtual.slides.push(e[t]);
    else
        this.virtual.slides.push(e); this.virtual.update(!0);
    }, prependSlide: function (e) {
    var t = this.activeIndex, i = t + 1, n = 1; if (Array.isArray(e)) {
        for (var r = 0; r < e.length; r += 1)
            e[r] && this.virtual.slides.unshift(e[r]);
        i = t + e.length, n = e.length;
    }
    else
        this.virtual.slides.unshift(e); if (this.params.virtual.cache) {
            var a = this.virtual.cache, o = {};
            Object.keys(a).forEach((function (e) { o[parseInt(e, 10) + n] = a[e]; })), this.virtual.cache = o;
        } this.virtual.update(!0), this.slideTo(i, 0);
    }, removeSlide: function (e) {
    if (null != e) {
        var t = this.activeIndex;
        if (Array.isArray(e))
            for (var i = e.length - 1; i >= 0; i -= 1)
                this.virtual.slides.splice(e[i], 1), this.params.virtual.cache && delete this.virtual.cache[e[i]], e[i] < t && (t -= 1), t = Math.max(t, 0);
        else
            this.virtual.slides.splice(e, 1), this.params.virtual.cache && delete this.virtual.cache[e], e < t && (t -= 1), t = Math.max(t, 0);
        this.virtual.update(!0), this.slideTo(t, 0);
    }
    }, removeAllSlides: function () { this.virtual.slides = [], this.params.virtual.cache && (this.virtual.cache = {}), this.virtual.update(!0), this.slideTo(0, 0); }
    }, B = {
    name: "virtual", params: { virtual: { enabled: !1, slides: [], cache: !0, renderSlide: null, renderExternal: null, addSlidesBefore: 0, addSlidesAfter: 0 } }, create: function () { c.extend(this, { virtual: { update: N.update.bind(this), appendSlide: N.appendSlide.bind(this), prependSlide: N.prependSlide.bind(this), removeSlide: N.removeSlide.bind(this), removeAllSlides: N.removeAllSlides.bind(this), renderSlide: N.renderSlide.bind(this), slides: this.params.virtual.slides, cache: {} } }); }, on: {
    beforeInit: function () {
    if (this.params.virtual.enabled) {
        this.classNames.push(this.params.containerModifierClass + "virtual");
        var e = { watchSlidesProgress: !0 };
        c.extend(this.params, e), c.extend(this.originalParams, e), this.params.initialSlide || this.virtual.update();
    }
    }, setTranslate: function () { this.params.virtual.enabled && this.virtual.update(); }
    }
    }, G = {
    handle: function (i) {
    var n = this.rtlTranslate, r = i; r.originalEvent && (r = r.originalEvent); var a = r.keyCode || r.charCode; if (!this.allowSlideNext && (this.isHorizontal() && 39 === a || this.isVertical() && 40 === a || 34 === a))
        return !1; if (!this.allowSlidePrev && (this.isHorizontal() && 37 === a || this.isVertical() && 38 === a || 33 === a))
            return !1; if (!(r.shiftKey || r.altKey || r.ctrlKey || r.metaKey || e.activeElement && e.activeElement.nodeName && ("input" === e.activeElement.nodeName.toLowerCase() || "textarea" === e.activeElement.nodeName.toLowerCase()))) {
                if (this.params.keyboard.onlyInViewport && (33 === a || 34 === a || 37 === a || 39 === a || 38 === a || 40 === a)) {
                    var o = !1;
                    if (this.$el.parents("." + this.params.slideClass).length > 0 && 0 === this.$el.parents("." + this.params.slideActiveClass).length)
                        return;
                    var s = t.innerWidth, l = t.innerHeight, c = this.$el.offset();
                    n && (c.left -= this.$el[0].scrollLeft);
                    for (var u = [[c.left, c.top], [c.left + this.width, c.top], [c.left, c.top + this.height], [c.left + this.width, c.top + this.height]], h = 0; h < u.length; h += 1) {
                        var d = u[h];
                        d[0] >= 0 && d[0] <= s && d[1] >= 0 && d[1] <= l && (o = !0);
                    }
                    if (!o)
                        return;
                }
                this.isHorizontal() ? (33 !== a && 34 !== a && 37 !== a && 39 !== a || (r.preventDefault ? r.preventDefault() : r.returnValue = !1), (34 !== a && 39 !== a || n) && (33 !== a && 37 !== a || !n) || this.slideNext(), (33 !== a && 37 !== a || n) && (34 !== a && 39 !== a || !n) || this.slidePrev()) : (33 !== a && 34 !== a && 38 !== a && 40 !== a || (r.preventDefault ? r.preventDefault() : r.returnValue = !1), 34 !== a && 40 !== a || this.slideNext(), 33 !== a && 38 !== a || this.slidePrev()), this.emit("keyPress", a);
            }
    }, enable: function () { this.keyboard.enabled || (n(e).on("keydown", this.keyboard.handle), this.keyboard.enabled = !0); }, disable: function () { this.keyboard.enabled && (n(e).off("keydown", this.keyboard.handle), this.keyboard.enabled = !1); }
    }, H = { name: "keyboard", params: { keyboard: { enabled: !1, onlyInViewport: !0 } }, create: function () { c.extend(this, { keyboard: { enabled: !1, enable: G.enable.bind(this), disable: G.disable.bind(this), handle: G.handle.bind(this) } }); }, on: { init: function () { this.params.keyboard.enabled && this.keyboard.enable(); }, destroy: function () { this.keyboard.enabled && this.keyboard.disable(); } } }, U = {
    lastScrollTime: c.now(), event: t.navigator.userAgent.indexOf("firefox") > -1 ? "DOMMouseScroll" : function () {
    var t = "onwheel" in e; if (!t) {
        var i = e.createElement("div");
        i.setAttribute("onwheel", "return;"), t = "function" == typeof i.onwheel;
    } return !t && e.implementation && e.implementation.hasFeature && !0 !== e.implementation.hasFeature("", "") && (t = e.implementation.hasFeature("Events.wheel", "3.0")), t;
    } () ? "wheel" : "mousewheel", normalize: function (e) { var t = 0, i = 0, n = 0, r = 0; return "detail" in e && (i = e.detail), "wheelDelta" in e && (i = -e.wheelDelta / 120), "wheelDeltaY" in e && (i = -e.wheelDeltaY / 120), "wheelDeltaX" in e && (t = -e.wheelDeltaX / 120), "axis" in e && e.axis === e.HORIZONTAL_AXIS && (t = i, i = 0), n = 10 * t, r = 10 * i, "deltaY" in e && (r = e.deltaY), "deltaX" in e && (n = e.deltaX), (n || r) && e.deltaMode && (1 === e.deltaMode ? (n *= 40, r *= 40) : (n *= 800, r *= 800)), n && !t && (t = n < 1 ? -1 : 1), r && !i && (i = r < 1 ? -1 : 1), { spinX: t, spinY: i, pixelX: n, pixelY: r }; }, handleMouseEnter: function () { this.mouseEntered = !0; }, handleMouseLeave: function () { this.mouseEntered = !1; }, handle: function (e) {
    var i = e, n = this, r = n.params.mousewheel; if (!n.mouseEntered && !r.releaseOnEdges)
        return !0; i.originalEvent && (i = i.originalEvent); var a = 0, o = n.rtlTranslate ? -1 : 1, s = U.normalize(i); if (r.forceToAxis)
            if (n.isHorizontal()) {
                if (!(Math.abs(s.pixelX) > Math.abs(s.pixelY)))
                    return !0;
                a = s.pixelX * o;
            }
            else {
                if (!(Math.abs(s.pixelY) > Math.abs(s.pixelX)))
                    return !0;
                a = s.pixelY;
            }
        else
            a = Math.abs(s.pixelX) > Math.abs(s.pixelY) ? -s.pixelX * o : -s.pixelY; if (0 === a)
            return !0; if (r.invert && (a = -a), n.params.freeMode) {
                n.params.loop && n.loopFix();
                var l = n.getTranslate() + a * r.sensitivity, u = n.isBeginning, h = n.isEnd;
                if (l >= n.minTranslate() && (l = n.minTranslate()), l <= n.maxTranslate() && (l = n.maxTranslate()), n.setTransition(0), n.setTranslate(l), n.updateProgress(), n.updateActiveIndex(), n.updateSlidesClasses(), (!u && n.isBeginning || !h && n.isEnd) && n.updateSlidesClasses(), n.params.freeModeSticky && (clearTimeout(n.mousewheel.timeout), n.mousewheel.timeout = c.nextTick((function () { n.slideToClosest(); }), 300)), n.emit("scroll", i), n.params.autoplay && n.params.autoplayDisableOnInteraction && n.autoplay.stop(), l === n.minTranslate() || l === n.maxTranslate())
                    return !0;
            }
        else {
            if (c.now() - n.mousewheel.lastScrollTime > 60)
                if (a < 0)
                    if (n.isEnd && !n.params.loop || n.animating) {
                        if (r.releaseOnEdges)
                            return !0;
                    }
                    else
                        n.slideNext(), n.emit("scroll", i);
                else if (n.isBeginning && !n.params.loop || n.animating) {
                    if (r.releaseOnEdges)
                        return !0;
                }
                else
                    n.slidePrev(), n.emit("scroll", i);
            n.mousewheel.lastScrollTime = (new t.Date).getTime();
        } return i.preventDefault ? i.preventDefault() : i.returnValue = !1, !1;
    }, enable: function () {
    if (!U.event)
        return !1; if (this.mousewheel.enabled)
            return !1; var e = this.$el; return "container" !== this.params.mousewheel.eventsTarged && (e = n(this.params.mousewheel.eventsTarged)), e.on("mouseenter", this.mousewheel.handleMouseEnter), e.on("mouseleave", this.mousewheel.handleMouseLeave), e.on(U.event, this.mousewheel.handle), this.mousewheel.enabled = !0, !0;
    }, disable: function () {
    if (!U.event)
        return !1; if (!this.mousewheel.enabled)
            return !1; var e = this.$el; return "container" !== this.params.mousewheel.eventsTarged && (e = n(this.params.mousewheel.eventsTarged)), e.off(U.event, this.mousewheel.handle), this.mousewheel.enabled = !1, !0;
    }
    }, z = {
    update: function () {
    var e = this.params.navigation; if (!this.params.loop) {
        var t = this.navigation, i = t.$nextEl, n = t.$prevEl;
        n && n.length > 0 && (this.isBeginning ? n.addClass(e.disabledClass) : n.removeClass(e.disabledClass), n[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](e.lockClass)), i && i.length > 0 && (this.isEnd ? i.addClass(e.disabledClass) : i.removeClass(e.disabledClass), i[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](e.lockClass));
    }
    }, onPrevClick: function (e) { e.preventDefault(), this.isBeginning && !this.params.loop || this.slidePrev(); }, onNextClick: function (e) { e.preventDefault(), this.isEnd && !this.params.loop || this.slideNext(); }, init: function () { var e, t, i = this.params.navigation; (i.nextEl || i.prevEl) && (i.nextEl && (e = n(i.nextEl), this.params.uniqueNavElements && "string" == typeof i.nextEl && e.length > 1 && 1 === this.$el.find(i.nextEl).length && (e = this.$el.find(i.nextEl))), i.prevEl && (t = n(i.prevEl), this.params.uniqueNavElements && "string" == typeof i.prevEl && t.length > 1 && 1 === this.$el.find(i.prevEl).length && (t = this.$el.find(i.prevEl))), e && e.length > 0 && e.on("click", this.navigation.onNextClick), t && t.length > 0 && t.on("click", this.navigation.onPrevClick), c.extend(this.navigation, { $nextEl: e, nextEl: e && e[0], $prevEl: t, prevEl: t && t[0] })); }, destroy: function () { var e = this.navigation, t = e.$nextEl, i = e.$prevEl; t && t.length && (t.off("click", this.navigation.onNextClick), t.removeClass(this.params.navigation.disabledClass)), i && i.length && (i.off("click", this.navigation.onPrevClick), i.removeClass(this.params.navigation.disabledClass)); }
    }, V = {
    update: function () {
    var e = this.rtl, t = this.params.pagination; if (t.el && this.pagination.el && this.pagination.$el && 0 !== this.pagination.$el.length) {
        var i, r = this.virtual && this.params.virtual.enabled ? this.virtual.slides.length : this.slides.length, a = this.pagination.$el, o = this.params.loop ? Math.ceil((r - 2 * this.loopedSlides) / this.params.slidesPerGroup) : this.snapGrid.length;
        if (this.params.loop ? ((i = Math.ceil((this.activeIndex - this.loopedSlides) / this.params.slidesPerGroup)) > r - 1 - 2 * this.loopedSlides && (i -= r - 2 * this.loopedSlides), i > o - 1 && (i -= o), i < 0 && "bullets" !== this.params.paginationType && (i = o + i)) : i = void 0 !== this.snapIndex ? this.snapIndex : this.activeIndex || 0, "bullets" === t.type && this.pagination.bullets && this.pagination.bullets.length > 0) {
            var s, l, c, u = this.pagination.bullets;
            if (t.dynamicBullets && (this.pagination.bulletSize = u.eq(0)[this.isHorizontal() ? "outerWidth" : "outerHeight"](!0), a.css(this.isHorizontal() ? "width" : "height", this.pagination.bulletSize * (t.dynamicMainBullets + 4) + "px"), t.dynamicMainBullets > 1 && void 0 !== this.previousIndex && (this.pagination.dynamicBulletIndex += i - this.previousIndex, this.pagination.dynamicBulletIndex > t.dynamicMainBullets - 1 ? this.pagination.dynamicBulletIndex = t.dynamicMainBullets - 1 : this.pagination.dynamicBulletIndex < 0 && (this.pagination.dynamicBulletIndex = 0)), s = i - this.pagination.dynamicBulletIndex, c = ((l = s + (Math.min(u.length, t.dynamicMainBullets) - 1)) + s) / 2), u.removeClass(t.bulletActiveClass + " " + t.bulletActiveClass + "-next " + t.bulletActiveClass + "-next-next " + t.bulletActiveClass + "-prev " + t.bulletActiveClass + "-prev-prev " + t.bulletActiveClass + "-main"), a.length > 1)
                u.each((function (e, r) { var a = n(r), o = a.index(); o === i && a.addClass(t.bulletActiveClass), t.dynamicBullets && (o >= s && o <= l && a.addClass(t.bulletActiveClass + "-main"), o === s && a.prev().addClass(t.bulletActiveClass + "-prev").prev().addClass(t.bulletActiveClass + "-prev-prev"), o === l && a.next().addClass(t.bulletActiveClass + "-next").next().addClass(t.bulletActiveClass + "-next-next")); }));
            else if (u.eq(i).addClass(t.bulletActiveClass), t.dynamicBullets) {
                for (var h = u.eq(s), d = u.eq(l), p = s; p <= l; p += 1)
                    u.eq(p).addClass(t.bulletActiveClass + "-main");
                h.prev().addClass(t.bulletActiveClass + "-prev").prev().addClass(t.bulletActiveClass + "-prev-prev"), d.next().addClass(t.bulletActiveClass + "-next").next().addClass(t.bulletActiveClass + "-next-next");
            }
            if (t.dynamicBullets) {
                var f = Math.min(u.length, t.dynamicMainBullets + 4), m = (this.pagination.bulletSize * f - this.pagination.bulletSize) / 2 - c * this.pagination.bulletSize, v = e ? "right" : "left";
                u.css(this.isHorizontal() ? v : "top", m + "px");
            }
        }
        if ("fraction" === t.type && (a.find("." + t.currentClass).text(t.formatFractionCurrent(i + 1)), a.find("." + t.totalClass).text(t.formatFractionTotal(o))), "progressbar" === t.type) {
            var g;
            g = t.progressbarOpposite ? this.isHorizontal() ? "vertical" : "horizontal" : this.isHorizontal() ? "horizontal" : "vertical";
            var y = (i + 1) / o, b = 1, x = 1;
            "horizontal" === g ? b = y : x = y, a.find("." + t.progressbarFillClass).transform("translate3d(0,0,0) scaleX(" + b + ") scaleY(" + x + ")").transition(this.params.speed);
        }
        "custom" === t.type && t.renderCustom ? (a.html(t.renderCustom(this, i + 1, o)), this.emit("paginationRender", this, a[0])) : this.emit("paginationUpdate", this, a[0]), a[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](t.lockClass);
    }
    }, render: function () {
    var e = this.params.pagination; if (e.el && this.pagination.el && this.pagination.$el && 0 !== this.pagination.$el.length) {
        var t = this.virtual && this.params.virtual.enabled ? this.virtual.slides.length : this.slides.length, i = this.pagination.$el, n = "";
        if ("bullets" === e.type) {
            for (var r = this.params.loop ? Math.ceil((t - 2 * this.loopedSlides) / this.params.slidesPerGroup) : this.snapGrid.length, a = 0; a < r; a += 1)
                e.renderBullet ? n += e.renderBullet.call(this, a, e.bulletClass) : n += "<" + e.bulletElement + ' class="' + e.bulletClass + '"></' + e.bulletElement + ">";
            i.html(n), this.pagination.bullets = i.find("." + e.bulletClass);
        }
        "fraction" === e.type && (n = e.renderFraction ? e.renderFraction.call(this, e.currentClass, e.totalClass) : '<span class="' + e.currentClass + '"></span> / <span class="' + e.totalClass + '"></span>', i.html(n)), "progressbar" === e.type && (n = e.renderProgressbar ? e.renderProgressbar.call(this, e.progressbarFillClass) : '<span class="' + e.progressbarFillClass + '"></span>', i.html(n)), "custom" !== e.type && this.emit("paginationRender", this.pagination.$el[0]);
    }
    }, init: function () {
    var e = this, t = e.params.pagination; if (t.el) {
        var i = n(t.el);
        0 !== i.length && (e.params.uniqueNavElements && "string" == typeof t.el && i.length > 1 && 1 === e.$el.find(t.el).length && (i = e.$el.find(t.el)), "bullets" === t.type && t.clickable && i.addClass(t.clickableClass), i.addClass(t.modifierClass + t.type), "bullets" === t.type && t.dynamicBullets && (i.addClass("" + t.modifierClass + t.type + "-dynamic"), e.pagination.dynamicBulletIndex = 0, t.dynamicMainBullets < 1 && (t.dynamicMainBullets = 1)), "progressbar" === t.type && t.progressbarOpposite && i.addClass(t.progressbarOppositeClass), t.clickable && i.on("click", "." + t.bulletClass, (function (t) { t.preventDefault(); var i = n(this).index() * e.params.slidesPerGroup; e.params.loop && (i += e.loopedSlides), e.slideTo(i); })), c.extend(e.pagination, { $el: i, el: i[0] }));
    }
    }, destroy: function () {
    var e = this.params.pagination; if (e.el && this.pagination.el && this.pagination.$el && 0 !== this.pagination.$el.length) {
        var t = this.pagination.$el;
        t.removeClass(e.hiddenClass), t.removeClass(e.modifierClass + e.type), this.pagination.bullets && this.pagination.bullets.removeClass(e.bulletActiveClass), e.clickable && t.off("click", "." + e.bulletClass);
    }
    }
    }, j = {
    setTranslate: function () {
    if (this.params.scrollbar.el && this.scrollbar.el) {
        var e = this.scrollbar, t = this.rtlTranslate, i = this.progress, n = e.dragSize, r = e.trackSize, a = e.$dragEl, o = e.$el, s = this.params.scrollbar, l = n, c = (r - n) * i;
        t ? (c = -c) > 0 ? (l = n - c, c = 0) : -c + n > r && (l = r + c) : c < 0 ? (l = n + c, c = 0) : c + n > r && (l = r - c), this.isHorizontal() ? (u.transforms3d ? a.transform("translate3d(" + c + "px, 0, 0)") : a.transform("translateX(" + c + "px)"), a[0].style.width = l + "px") : (u.transforms3d ? a.transform("translate3d(0px, " + c + "px, 0)") : a.transform("translateY(" + c + "px)"), a[0].style.height = l + "px"), s.hide && (clearTimeout(this.scrollbar.timeout), o[0].style.opacity = 1, this.scrollbar.timeout = setTimeout((function () { o[0].style.opacity = 0, o.transition(400); }), 1e3));
    }
    }, setTransition: function (e) { this.params.scrollbar.el && this.scrollbar.el && this.scrollbar.$dragEl.transition(e); }, updateSize: function () {
    if (this.params.scrollbar.el && this.scrollbar.el) {
        var e = this.scrollbar, t = e.$dragEl, i = e.$el;
        t[0].style.width = "", t[0].style.height = "";
        var n, r = this.isHorizontal() ? i[0].offsetWidth : i[0].offsetHeight, a = this.size / this.virtualSize, o = a * (r / this.size);
        n = "auto" === this.params.scrollbar.dragSize ? r * a : parseInt(this.params.scrollbar.dragSize, 10), this.isHorizontal() ? t[0].style.width = n + "px" : t[0].style.height = n + "px", i[0].style.display = a >= 1 ? "none" : "", this.params.scrollbar.hide && (i[0].style.opacity = 0), c.extend(e, { trackSize: r, divider: a, moveDivider: o, dragSize: n }), e.$el[this.params.watchOverflow && this.isLocked ? "addClass" : "removeClass"](this.params.scrollbar.lockClass);
    }
    }, getPointerPosition: function (e) { return this.isHorizontal() ? "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX || e.clientX : "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY || e.clientY; }, setDragPosition: function (e) { var t, i = this.scrollbar, n = this.rtlTranslate, r = i.$el, a = i.dragSize, o = i.trackSize, s = i.dragStartPos; t = (i.getPointerPosition(e) - r.offset()[this.isHorizontal() ? "left" : "top"] - (null !== s ? s : a / 2)) / (o - a), t = Math.max(Math.min(t, 1), 0), n && (t = 1 - t); var l = this.minTranslate() + (this.maxTranslate() - this.minTranslate()) * t; this.updateProgress(l), this.setTranslate(l), this.updateActiveIndex(), this.updateSlidesClasses(); }, onDragStart: function (e) { var t = this.params.scrollbar, i = this.scrollbar, n = this.$wrapperEl, r = i.$el, a = i.$dragEl; this.scrollbar.isTouched = !0, this.scrollbar.dragStartPos = e.target === a[0] || e.target === a ? i.getPointerPosition(e) - e.target.getBoundingClientRect()[this.isHorizontal() ? "left" : "top"] : null, e.preventDefault(), e.stopPropagation(), n.transition(100), a.transition(100), i.setDragPosition(e), clearTimeout(this.scrollbar.dragTimeout), r.transition(0), t.hide && r.css("opacity", 1), this.emit("scrollbarDragStart", e); }, onDragMove: function (e) { var t = this.scrollbar, i = this.$wrapperEl, n = t.$el, r = t.$dragEl; this.scrollbar.isTouched && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, t.setDragPosition(e), i.transition(0), n.transition(0), r.transition(0), this.emit("scrollbarDragMove", e)); }, onDragEnd: function (e) { var t = this.params.scrollbar, i = this.scrollbar.$el; this.scrollbar.isTouched && (this.scrollbar.isTouched = !1, t.hide && (clearTimeout(this.scrollbar.dragTimeout), this.scrollbar.dragTimeout = c.nextTick((function () { i.css("opacity", 0), i.transition(400); }), 1e3)), this.emit("scrollbarDragEnd", e), t.snapOnRelease && this.slideToClosest()); }, enableDraggable: function () {
    if (this.params.scrollbar.el) {
        var t = this.scrollbar, i = this.touchEventsTouch, n = this.touchEventsDesktop, r = this.params, a = t.$el[0], o = !(!u.passiveListener || !r.passiveListeners) && { passive: !1, capture: !1 }, s = !(!u.passiveListener || !r.passiveListeners) && { passive: !0, capture: !1 };
        u.touch ? (a.addEventListener(i.start, this.scrollbar.onDragStart, o), a.addEventListener(i.move, this.scrollbar.onDragMove, o), a.addEventListener(i.end, this.scrollbar.onDragEnd, s)) : (a.addEventListener(n.start, this.scrollbar.onDragStart, o), e.addEventListener(n.move, this.scrollbar.onDragMove, o), e.addEventListener(n.end, this.scrollbar.onDragEnd, s));
    }
    }, disableDraggable: function () {
    if (this.params.scrollbar.el) {
        var t = this.scrollbar, i = this.touchEventsTouch, n = this.touchEventsDesktop, r = this.params, a = t.$el[0], o = !(!u.passiveListener || !r.passiveListeners) && { passive: !1, capture: !1 }, s = !(!u.passiveListener || !r.passiveListeners) && { passive: !0, capture: !1 };
        u.touch ? (a.removeEventListener(i.start, this.scrollbar.onDragStart, o), a.removeEventListener(i.move, this.scrollbar.onDragMove, o), a.removeEventListener(i.end, this.scrollbar.onDragEnd, s)) : (a.removeEventListener(n.start, this.scrollbar.onDragStart, o), e.removeEventListener(n.move, this.scrollbar.onDragMove, o), e.removeEventListener(n.end, this.scrollbar.onDragEnd, s));
    }
    }, init: function () {
    if (this.params.scrollbar.el) {
        var e = this.scrollbar, t = this.$el, i = this.params.scrollbar, r = n(i.el);
        this.params.uniqueNavElements && "string" == typeof i.el && r.length > 1 && 1 === t.find(i.el).length && (r = t.find(i.el));
        var a = r.find("." + this.params.scrollbar.dragClass);
        0 === a.length && (a = n('<div class="' + this.params.scrollbar.dragClass + '"></div>'), r.append(a)), c.extend(e, { $el: r, el: r[0], $dragEl: a, dragEl: a[0] }), i.draggable && e.enableDraggable();
    }
    }, destroy: function () { this.scrollbar.disableDraggable(); }
    }, W = {
    setTransform: function (e, t) {
    var i = this.rtl, r = n(e), a = i ? -1 : 1, o = r.attr("data-swiper-parallax") || "0", s = r.attr("data-swiper-parallax-x"), l = r.attr("data-swiper-parallax-y"), c = r.attr("data-swiper-parallax-scale"), u = r.attr("data-swiper-parallax-opacity"); if (s || l ? (s = s || "0", l = l || "0") : this.isHorizontal() ? (s = o, l = "0") : (l = o, s = "0"), s = s.indexOf("%") >= 0 ? parseInt(s, 10) * t * a + "%" : s * t * a + "px", l = l.indexOf("%") >= 0 ? parseInt(l, 10) * t + "%" : l * t + "px", null != u) {
        var h = u - (u - 1) * (1 - Math.abs(t));
        r[0].style.opacity = h;
    } if (null == c)
            r.transform("translate3d(" + s + ", " + l + ", 0px)");
        else {
            var d = c - (c - 1) * (1 - Math.abs(t));
            r.transform("translate3d(" + s + ", " + l + ", 0px) scale(" + d + ")");
        }
    }, setTranslate: function () { var e = this, t = e.$el, i = e.slides, r = e.progress, a = e.snapGrid; t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function (t, i) { e.parallax.setTransform(i, r); })), i.each((function (t, i) { var o = i.progress; e.params.slidesPerGroup > 1 && "auto" !== e.params.slidesPerView && (o += Math.ceil(t / 2) - r * (a.length - 1)), o = Math.min(Math.max(o, -1), 1), n(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function (t, i) { e.parallax.setTransform(i, o); })); })); }, setTransition: function (e) { void 0 === e && (e = this.params.speed), this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function (t, i) { var r = n(i), a = parseInt(r.attr("data-swiper-parallax-duration"), 10) || e; 0 === e && (a = 0), r.transition(a); })); }
    }, X = {
    getDistanceBetweenTouches: function (e) {
    if (e.targetTouches.length < 2)
        return 1; var t = e.targetTouches[0].pageX, i = e.targetTouches[0].pageY, n = e.targetTouches[1].pageX, r = e.targetTouches[1].pageY; return Math.sqrt(Math.pow(n - t, 2) + Math.pow(r - i, 2));
    }, onGestureStart: function (e) {
    var t = this.params.zoom, i = this.zoom, r = i.gesture; if (i.fakeGestureTouched = !1, i.fakeGestureMoved = !1, !u.gestures) {
        if ("touchstart" !== e.type || "touchstart" === e.type && e.targetTouches.length < 2)
            return;
        i.fakeGestureTouched = !0, r.scaleStart = X.getDistanceBetweenTouches(e);
    } r.$slideEl && r.$slideEl.length || (r.$slideEl = n(e.target).closest(".swiper-slide"), 0 === r.$slideEl.length && (r.$slideEl = this.slides.eq(this.activeIndex)), r.$imageEl = r.$slideEl.find("img, svg, canvas"), r.$imageWrapEl = r.$imageEl.parent("." + t.containerClass), r.maxRatio = r.$imageWrapEl.attr("data-swiper-zoom") || t.maxRatio, 0 !== r.$imageWrapEl.length) ? (r.$imageEl.transition(0), this.zoom.isScaling = !0) : r.$imageEl = void 0;
    }, onGestureChange: function (e) {
    var t = this.params.zoom, i = this.zoom, n = i.gesture; if (!u.gestures) {
        if ("touchmove" !== e.type || "touchmove" === e.type && e.targetTouches.length < 2)
            return;
        i.fakeGestureMoved = !0, n.scaleMove = X.getDistanceBetweenTouches(e);
    } n.$imageEl && 0 !== n.$imageEl.length && (u.gestures ? i.scale = e.scale * i.currentScale : i.scale = n.scaleMove / n.scaleStart * i.currentScale, i.scale > n.maxRatio && (i.scale = n.maxRatio - 1 + Math.pow(i.scale - n.maxRatio + 1, .5)), i.scale < t.minRatio && (i.scale = t.minRatio + 1 - Math.pow(t.minRatio - i.scale + 1, .5)), n.$imageEl.transform("translate3d(0,0,0) scale(" + i.scale + ")"));
    }, onGestureEnd: function (e) {
    var t = this.params.zoom, i = this.zoom, n = i.gesture; if (!u.gestures) {
        if (!i.fakeGestureTouched || !i.fakeGestureMoved)
            return;
        if ("touchend" !== e.type || "touchend" === e.type && e.changedTouches.length < 2 && !_.android)
            return;
        i.fakeGestureTouched = !1, i.fakeGestureMoved = !1;
    } n.$imageEl && 0 !== n.$imageEl.length && (i.scale = Math.max(Math.min(i.scale, n.maxRatio), t.minRatio), n.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale(" + i.scale + ")"), i.currentScale = i.scale, i.isScaling = !1, 1 === i.scale && (n.$slideEl = void 0));
    }, onTouchStart: function (e) { var t = this.zoom, i = t.gesture, n = t.image; i.$imageEl && 0 !== i.$imageEl.length && (n.isTouched || (_.android && e.preventDefault(), n.isTouched = !0, n.touchesStart.x = "touchstart" === e.type ? e.targetTouches[0].pageX : e.pageX, n.touchesStart.y = "touchstart" === e.type ? e.targetTouches[0].pageY : e.pageY)); }, onTouchMove: function (e) {
    var t = this.zoom, i = t.gesture, n = t.image, r = t.velocity; if (i.$imageEl && 0 !== i.$imageEl.length && (this.allowClick = !1, n.isTouched && i.$slideEl)) {
        n.isMoved || (n.width = i.$imageEl[0].offsetWidth, n.height = i.$imageEl[0].offsetHeight, n.startX = c.getTranslate(i.$imageWrapEl[0], "x") || 0, n.startY = c.getTranslate(i.$imageWrapEl[0], "y") || 0, i.slideWidth = i.$slideEl[0].offsetWidth, i.slideHeight = i.$slideEl[0].offsetHeight, i.$imageWrapEl.transition(0), this.rtl && (n.startX = -n.startX, n.startY = -n.startY));
        var a = n.width * t.scale, o = n.height * t.scale;
        if (!(a < i.slideWidth && o < i.slideHeight)) {
            if (n.minX = Math.min(i.slideWidth / 2 - a / 2, 0), n.maxX = -n.minX, n.minY = Math.min(i.slideHeight / 2 - o / 2, 0), n.maxY = -n.minY, n.touchesCurrent.x = "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX, n.touchesCurrent.y = "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY, !n.isMoved && !t.isScaling) {
                if (this.isHorizontal() && (Math.floor(n.minX) === Math.floor(n.startX) && n.touchesCurrent.x < n.touchesStart.x || Math.floor(n.maxX) === Math.floor(n.startX) && n.touchesCurrent.x > n.touchesStart.x))
                    return void (n.isTouched = !1);
                if (!this.isHorizontal() && (Math.floor(n.minY) === Math.floor(n.startY) && n.touchesCurrent.y < n.touchesStart.y || Math.floor(n.maxY) === Math.floor(n.startY) && n.touchesCurrent.y > n.touchesStart.y))
                    return void (n.isTouched = !1);
            }
            e.preventDefault(), e.stopPropagation(), n.isMoved = !0, n.currentX = n.touchesCurrent.x - n.touchesStart.x + n.startX, n.currentY = n.touchesCurrent.y - n.touchesStart.y + n.startY, n.currentX < n.minX && (n.currentX = n.minX + 1 - Math.pow(n.minX - n.currentX + 1, .8)), n.currentX > n.maxX && (n.currentX = n.maxX - 1 + Math.pow(n.currentX - n.maxX + 1, .8)), n.currentY < n.minY && (n.currentY = n.minY + 1 - Math.pow(n.minY - n.currentY + 1, .8)), n.currentY > n.maxY && (n.currentY = n.maxY - 1 + Math.pow(n.currentY - n.maxY + 1, .8)), r.prevPositionX || (r.prevPositionX = n.touchesCurrent.x), r.prevPositionY || (r.prevPositionY = n.touchesCurrent.y), r.prevTime || (r.prevTime = Date.now()), r.x = (n.touchesCurrent.x - r.prevPositionX) / (Date.now() - r.prevTime) / 2, r.y = (n.touchesCurrent.y - r.prevPositionY) / (Date.now() - r.prevTime) / 2, Math.abs(n.touchesCurrent.x - r.prevPositionX) < 2 && (r.x = 0), Math.abs(n.touchesCurrent.y - r.prevPositionY) < 2 && (r.y = 0), r.prevPositionX = n.touchesCurrent.x, r.prevPositionY = n.touchesCurrent.y, r.prevTime = Date.now(), i.$imageWrapEl.transform("translate3d(" + n.currentX + "px, " + n.currentY + "px,0)");
        }
    }
    }, onTouchEnd: function () {
    var e = this.zoom, t = e.gesture, i = e.image, n = e.velocity; if (t.$imageEl && 0 !== t.$imageEl.length) {
        if (!i.isTouched || !i.isMoved)
            return i.isTouched = !1, void (i.isMoved = !1);
        i.isTouched = !1, i.isMoved = !1;
        var r = 300, a = 300, o = n.x * r, s = i.currentX + o, l = n.y * a, c = i.currentY + l;
        0 !== n.x && (r = Math.abs((s - i.currentX) / n.x)), 0 !== n.y && (a = Math.abs((c - i.currentY) / n.y));
        var u = Math.max(r, a);
        i.currentX = s, i.currentY = c;
        var h = i.width * e.scale, d = i.height * e.scale;
        i.minX = Math.min(t.slideWidth / 2 - h / 2, 0), i.maxX = -i.minX, i.minY = Math.min(t.slideHeight / 2 - d / 2, 0), i.maxY = -i.minY, i.currentX = Math.max(Math.min(i.currentX, i.maxX), i.minX), i.currentY = Math.max(Math.min(i.currentY, i.maxY), i.minY), t.$imageWrapEl.transition(u).transform("translate3d(" + i.currentX + "px, " + i.currentY + "px,0)");
    }
    }, onTransitionEnd: function () { var e = this.zoom, t = e.gesture; t.$slideEl && this.previousIndex !== this.activeIndex && (t.$imageEl.transform("translate3d(0,0,0) scale(1)"), t.$imageWrapEl.transform("translate3d(0,0,0)"), e.scale = 1, e.currentScale = 1, t.$slideEl = void 0, t.$imageEl = void 0, t.$imageWrapEl = void 0); }, toggle: function (e) { var t = this.zoom; t.scale && 1 !== t.scale ? t.out() : t.in(e); }, in: function (e) { var t, i, r, a, o, s, l, c, u, h, d, p, f, m, v, g, y = this.zoom, b = this.params.zoom, x = y.gesture, _ = y.image; x.$slideEl || (x.$slideEl = this.clickedSlide ? n(this.clickedSlide) : this.slides.eq(this.activeIndex), x.$imageEl = x.$slideEl.find("img, svg, canvas"), x.$imageWrapEl = x.$imageEl.parent("." + b.containerClass)), x.$imageEl && 0 !== x.$imageEl.length && (x.$slideEl.addClass("" + b.zoomedSlideClass), void 0 === _.touchesStart.x && e ? (t = "touchend" === e.type ? e.changedTouches[0].pageX : e.pageX, i = "touchend" === e.type ? e.changedTouches[0].pageY : e.pageY) : (t = _.touchesStart.x, i = _.touchesStart.y), y.scale = x.$imageWrapEl.attr("data-swiper-zoom") || b.maxRatio, y.currentScale = x.$imageWrapEl.attr("data-swiper-zoom") || b.maxRatio, e ? (v = x.$slideEl[0].offsetWidth, g = x.$slideEl[0].offsetHeight, r = x.$slideEl.offset().left + v / 2 - t, a = x.$slideEl.offset().top + g / 2 - i, l = x.$imageEl[0].offsetWidth, c = x.$imageEl[0].offsetHeight, u = l * y.scale, h = c * y.scale, f = -(d = Math.min(v / 2 - u / 2, 0)), m = -(p = Math.min(g / 2 - h / 2, 0)), (o = r * y.scale) < d && (o = d), o > f && (o = f), (s = a * y.scale) < p && (s = p), s > m && (s = m)) : (o = 0, s = 0), x.$imageWrapEl.transition(300).transform("translate3d(" + o + "px, " + s + "px,0)"), x.$imageEl.transition(300).transform("translate3d(0,0,0) scale(" + y.scale + ")")); }, out: function () { var e = this.zoom, t = this.params.zoom, i = e.gesture; i.$slideEl || (i.$slideEl = this.clickedSlide ? n(this.clickedSlide) : this.slides.eq(this.activeIndex), i.$imageEl = i.$slideEl.find("img, svg, canvas"), i.$imageWrapEl = i.$imageEl.parent("." + t.containerClass)), i.$imageEl && 0 !== i.$imageEl.length && (e.scale = 1, e.currentScale = 1, i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"), i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"), i.$slideEl.removeClass("" + t.zoomedSlideClass), i.$slideEl = void 0); }, enable: function () {
    var e = this.zoom; if (!e.enabled) {
        e.enabled = !0;
        var t = !("touchstart" !== this.touchEvents.start || !u.passiveListener || !this.params.passiveListeners) && { passive: !0, capture: !1 };
        u.gestures ? (this.$wrapperEl.on("gesturestart", ".swiper-slide", e.onGestureStart, t), this.$wrapperEl.on("gesturechange", ".swiper-slide", e.onGestureChange, t), this.$wrapperEl.on("gestureend", ".swiper-slide", e.onGestureEnd, t)) : "touchstart" === this.touchEvents.start && (this.$wrapperEl.on(this.touchEvents.start, ".swiper-slide", e.onGestureStart, t), this.$wrapperEl.on(this.touchEvents.move, ".swiper-slide", e.onGestureChange, t), this.$wrapperEl.on(this.touchEvents.end, ".swiper-slide", e.onGestureEnd, t)), this.$wrapperEl.on(this.touchEvents.move, "." + this.params.zoom.containerClass, e.onTouchMove);
    }
    }, disable: function () {
    var e = this.zoom; if (e.enabled) {
        this.zoom.enabled = !1;
        var t = !("touchstart" !== this.touchEvents.start || !u.passiveListener || !this.params.passiveListeners) && { passive: !0, capture: !1 };
        u.gestures ? (this.$wrapperEl.off("gesturestart", ".swiper-slide", e.onGestureStart, t), this.$wrapperEl.off("gesturechange", ".swiper-slide", e.onGestureChange, t), this.$wrapperEl.off("gestureend", ".swiper-slide", e.onGestureEnd, t)) : "touchstart" === this.touchEvents.start && (this.$wrapperEl.off(this.touchEvents.start, ".swiper-slide", e.onGestureStart, t), this.$wrapperEl.off(this.touchEvents.move, ".swiper-slide", e.onGestureChange, t), this.$wrapperEl.off(this.touchEvents.end, ".swiper-slide", e.onGestureEnd, t)), this.$wrapperEl.off(this.touchEvents.move, "." + this.params.zoom.containerClass, e.onTouchMove);
    }
    }
    }, Y = {
    loadInSlide: function (e, t) {
    void 0 === t && (t = !0); var i = this, r = i.params.lazy; if (void 0 !== e && 0 !== i.slides.length) {
        var a = i.virtual && i.params.virtual.enabled ? i.$wrapperEl.children("." + i.params.slideClass + '[data-swiper-slide-index="' + e + '"]') : i.slides.eq(e), o = a.find("." + r.elementClass + ":not(." + r.loadedClass + "):not(." + r.loadingClass + ")");
        !a.hasClass(r.elementClass) || a.hasClass(r.loadedClass) || a.hasClass(r.loadingClass) || (o = o.add(a[0])), 0 !== o.length && o.each((function (e, o) {
        var s = n(o); s.addClass(r.loadingClass); var l = s.attr("data-background"), c = s.attr("data-src"), u = s.attr("data-srcset"), h = s.attr("data-sizes"); i.loadImage(s[0], c || l, u, h, !1, (function () {
        if (null != i && i && (!i || i.params) && !i.destroyed) {
            if (l ? (s.css("background-image", 'url("' + l + '")'), s.removeAttr("data-background")) : (u && (s.attr("srcset", u), s.removeAttr("data-srcset")), h && (s.attr("sizes", h), s.removeAttr("data-sizes")), c && (s.attr("src", c), s.removeAttr("data-src"))), s.addClass(r.loadedClass).removeClass(r.loadingClass), a.find("." + r.preloaderClass).remove(), i.params.loop && t) {
                var e = a.attr("data-swiper-slide-index");
                if (a.hasClass(i.params.slideDuplicateClass)) {
                    var n = i.$wrapperEl.children('[data-swiper-slide-index="' + e + '"]:not(.' + i.params.slideDuplicateClass + ")");
                    i.lazy.loadInSlide(n.index(), !1);
                }
                else {
                    var o = i.$wrapperEl.children("." + i.params.slideDuplicateClass + '[data-swiper-slide-index="' + e + '"]');
                    i.lazy.loadInSlide(o.index(), !1);
                }
            }
            i.emit("lazyImageReady", a[0], s[0]);
        }
        })), i.emit("lazyImageLoad", a[0], s[0]);
        }));
    }
    }, load: function () {
    var e = this, t = e.$wrapperEl, i = e.params, r = e.slides, a = e.activeIndex, o = e.virtual && i.virtual.enabled, s = i.lazy, l = i.slidesPerView; function c(e) {
    if (o) {
        if (t.children("." + i.slideClass + '[data-swiper-slide-index="' + e + '"]').length)
            return !0;
    }
    else if (r[e])
        return !0; return !1;
    } function u(e) { return o ? n(e).attr("data-swiper-slide-index") : n(e).index(); } if ("auto" === l && (l = 0), e.lazy.initialImageLoaded || (e.lazy.initialImageLoaded = !0), e.params.watchSlidesVisibility)
            t.children("." + i.slideVisibleClass).each((function (t, i) { var r = o ? n(i).attr("data-swiper-slide-index") : n(i).index(); e.lazy.loadInSlide(r); }));
        else if (l > 1)
            for (var h = a; h < a + l; h += 1)
                c(h) && e.lazy.loadInSlide(h);
        else
            e.lazy.loadInSlide(a); if (s.loadPrevNext)
            if (l > 1 || s.loadPrevNextAmount && s.loadPrevNextAmount > 1) {
                for (var d = s.loadPrevNextAmount, p = l, f = Math.min(a + p + Math.max(d, p), r.length), m = Math.max(a - Math.max(p, d), 0), v = a + l; v < f; v += 1)
                    c(v) && e.lazy.loadInSlide(v);
                for (var g = m; g < a; g += 1)
                    c(g) && e.lazy.loadInSlide(g);
            }
            else {
                var y = t.children("." + i.slideNextClass);
                y.length > 0 && e.lazy.loadInSlide(u(y));
                var b = t.children("." + i.slidePrevClass);
                b.length > 0 && e.lazy.loadInSlide(u(b));
            }
    }
    }, Q = {
    LinearSpline: function (e, t) {
    var i, n, r, a, o, s = function (e, t) {
    for (n = -1, i = e.length; i - n > 1;)
        e[r = i + n >> 1] <= t ? n = r : i = r; return i;
    }; return this.x = e, this.y = t, this.lastIndex = e.length - 1, this.interpolate = function (e) { return e ? (o = s(this.x, e), a = o - 1, (e - this.x[a]) * (this.y[o] - this.y[a]) / (this.x[o] - this.x[a]) + this.y[a]) : 0; }, this;
    }, getInterpolateFunction: function (e) { this.controller.spline || (this.controller.spline = this.params.loop ? new Q.LinearSpline(this.slidesGrid, e.slidesGrid) : new Q.LinearSpline(this.snapGrid, e.snapGrid)); }, setTranslate: function (e, t) {
    var i, n, r = this, a = r.controller.control; function o(e) { var t = r.rtlTranslate ? -r.translate : r.translate; "slide" === r.params.controller.by && (r.controller.getInterpolateFunction(e), n = -r.controller.spline.interpolate(-t)), n && "container" !== r.params.controller.by || (i = (e.maxTranslate() - e.minTranslate()) / (r.maxTranslate() - r.minTranslate()), n = (t - r.minTranslate()) * i + e.minTranslate()), r.params.controller.inverse && (n = e.maxTranslate() - n), e.updateProgress(n), e.setTranslate(n, r), e.updateActiveIndex(), e.updateSlidesClasses(); } if (Array.isArray(a))
        for (var s = 0; s < a.length; s += 1)
            a[s] !== t && a[s] instanceof L && o(a[s]);
    else
        a instanceof L && t !== a && o(a);
    }, setTransition: function (e, t) {
    var i, n = this, r = n.controller.control; function a(t) { t.setTransition(e, n), 0 !== e && (t.transitionStart(), t.params.autoHeight && c.nextTick((function () { t.updateAutoHeight(); })), t.$wrapperEl.transitionEnd((function () { r && (t.params.loop && "slide" === n.params.controller.by && t.loopFix(), t.transitionEnd()); }))); } if (Array.isArray(r))
        for (i = 0; i < r.length; i += 1)
            r[i] !== t && r[i] instanceof L && a(r[i]);
    else
        r instanceof L && t !== r && a(r);
    }
    }, q = { name: "controller", params: { controller: { control: void 0, inverse: !1, by: "slide" } }, create: function () { c.extend(this, { controller: { control: this.params.controller.control, getInterpolateFunction: Q.getInterpolateFunction.bind(this), setTranslate: Q.setTranslate.bind(this), setTransition: Q.setTransition.bind(this) } }); }, on: { update: function () { this.controller.control && this.controller.spline && (this.controller.spline = void 0, delete this.controller.spline); }, resize: function () { this.controller.control && this.controller.spline && (this.controller.spline = void 0, delete this.controller.spline); }, observerUpdate: function () { this.controller.control && this.controller.spline && (this.controller.spline = void 0, delete this.controller.spline); }, setTranslate: function (e, t) { this.controller.control && this.controller.setTranslate(e, t); }, setTransition: function (e, t) { this.controller.control && this.controller.setTransition(e, t); } } }, $ = {
    makeElFocusable: function (e) { return e.attr("tabIndex", "0"), e; }, addElRole: function (e, t) { return e.attr("role", t), e; }, addElLabel: function (e, t) { return e.attr("aria-label", t), e; }, disableEl: function (e) { return e.attr("aria-disabled", !0), e; }, enableEl: function (e) { return e.attr("aria-disabled", !1), e; }, onEnterKey: function (e) {
    var t = this.params.a11y; if (13 === e.keyCode) {
        var i = n(e.target);
        this.navigation && this.navigation.$nextEl && i.is(this.navigation.$nextEl) && (this.isEnd && !this.params.loop || this.slideNext(), this.isEnd ? this.a11y.notify(t.lastSlideMessage) : this.a11y.notify(t.nextSlideMessage)), this.navigation && this.navigation.$prevEl && i.is(this.navigation.$prevEl) && (this.isBeginning && !this.params.loop || this.slidePrev(), this.isBeginning ? this.a11y.notify(t.firstSlideMessage) : this.a11y.notify(t.prevSlideMessage)), this.pagination && i.is("." + this.params.pagination.bulletClass) && i[0].click();
    }
    }, notify: function (e) { var t = this.a11y.liveRegion; 0 !== t.length && (t.html(""), t.html(e)); }, updateNavigation: function () {
    if (!this.params.loop) {
        var e = this.navigation, t = e.$nextEl, i = e.$prevEl;
        i && i.length > 0 && (this.isBeginning ? this.a11y.disableEl(i) : this.a11y.enableEl(i)), t && t.length > 0 && (this.isEnd ? this.a11y.disableEl(t) : this.a11y.enableEl(t));
    }
    }, updatePagination: function () { var e = this, t = e.params.a11y; e.pagination && e.params.pagination.clickable && e.pagination.bullets && e.pagination.bullets.length && e.pagination.bullets.each((function (i, r) { var a = n(r); e.a11y.makeElFocusable(a), e.a11y.addElRole(a, "button"), e.a11y.addElLabel(a, t.paginationBulletMessage.replace(/{{index}}/, a.index() + 1)); })); }, init: function () { this.$el.append(this.a11y.liveRegion); var e, t, i = this.params.a11y; this.navigation && this.navigation.$nextEl && (e = this.navigation.$nextEl), this.navigation && this.navigation.$prevEl && (t = this.navigation.$prevEl), e && (this.a11y.makeElFocusable(e), this.a11y.addElRole(e, "button"), this.a11y.addElLabel(e, i.nextSlideMessage), e.on("keydown", this.a11y.onEnterKey)), t && (this.a11y.makeElFocusable(t), this.a11y.addElRole(t, "button"), this.a11y.addElLabel(t, i.prevSlideMessage), t.on("keydown", this.a11y.onEnterKey)), this.pagination && this.params.pagination.clickable && this.pagination.bullets && this.pagination.bullets.length && this.pagination.$el.on("keydown", "." + this.params.pagination.bulletClass, this.a11y.onEnterKey); }, destroy: function () { var e, t; this.a11y.liveRegion && this.a11y.liveRegion.length > 0 && this.a11y.liveRegion.remove(), this.navigation && this.navigation.$nextEl && (e = this.navigation.$nextEl), this.navigation && this.navigation.$prevEl && (t = this.navigation.$prevEl), e && e.off("keydown", this.a11y.onEnterKey), t && t.off("keydown", this.a11y.onEnterKey), this.pagination && this.params.pagination.clickable && this.pagination.bullets && this.pagination.bullets.length && this.pagination.$el.off("keydown", "." + this.params.pagination.bulletClass, this.a11y.onEnterKey); }
    }, Z = {
    init: function () {
    if (this.params.history) {
        if (!t.history || !t.history.pushState)
            return this.params.history.enabled = !1, void (this.params.hashNavigation.enabled = !0);
        var e = this.history;
        e.initialized = !0, e.paths = Z.getPathValues(), (e.paths.key || e.paths.value) && (e.scrollToSlide(0, e.paths.value, this.params.runCallbacksOnInit), this.params.history.replaceState || t.addEventListener("popstate", this.history.setHistoryPopState));
    }
    }, destroy: function () { this.params.history.replaceState || t.removeEventListener("popstate", this.history.setHistoryPopState); }, setHistoryPopState: function () { this.history.paths = Z.getPathValues(), this.history.scrollToSlide(this.params.speed, this.history.paths.value, !1); }, getPathValues: function () { var e = t.location.pathname.slice(1).split("/").filter((function (e) { return "" !== e; })), i = e.length; return { key: e[i - 2], value: e[i - 1] }; }, setHistory: function (e, i) {
    if (this.history.initialized && this.params.history.enabled) {
        var n = this.slides.eq(i), r = Z.slugify(n.attr("data-history"));
        t.location.pathname.includes(e) || (r = e + "/" + r);
        var a = t.history.state;
        a && a.value === r || (this.params.history.replaceState ? t.history.replaceState({ value: r }, null, r) : t.history.pushState({ value: r }, null, r));
    }
    }, slugify: function (e) { return e.toString().replace(/\s+/g, "-").replace(/[^\w-]+/g, "").replace(/--+/g, "-").replace(/^-+/, "").replace(/-+$/, ""); }, scrollToSlide: function (e, t, i) {
    if (t)
        for (var n = 0, r = this.slides.length; n < r; n += 1) {
            var a = this.slides.eq(n);
            if (Z.slugify(a.attr("data-history")) === t && !a.hasClass(this.params.slideDuplicateClass)) {
                var o = a.index();
                this.slideTo(o, e, i);
            }
        }
    else
        this.slideTo(0, e, i);
    }
    }, K = {
    onHashCange: function () {
    var t = e.location.hash.replace("#", ""); if (t !== this.slides.eq(this.activeIndex).attr("data-hash")) {
        var i = this.$wrapperEl.children("." + this.params.slideClass + '[data-hash="' + t + '"]').index();
        if (void 0 === i)
            return;
        this.slideTo(i);
    }
    }, setHash: function () {
    if (this.hashNavigation.initialized && this.params.hashNavigation.enabled)
        if (this.params.hashNavigation.replaceState && t.history && t.history.replaceState)
            t.history.replaceState(null, null, "#" + this.slides.eq(this.activeIndex).attr("data-hash") || !1);
        else {
            var i = this.slides.eq(this.activeIndex), n = i.attr("data-hash") || i.attr("data-history");
            e.location.hash = n || "";
        }
    }, init: function () {
    if (!(!this.params.hashNavigation.enabled || this.params.history && this.params.history.enabled)) {
        this.hashNavigation.initialized = !0;
        var i = e.location.hash.replace("#", "");
        if (i)
            for (var r = 0, a = this.slides.length; r < a; r += 1) {
                var o = this.slides.eq(r);
                if ((o.attr("data-hash") || o.attr("data-history")) === i && !o.hasClass(this.params.slideDuplicateClass)) {
                    var s = o.index();
                    this.slideTo(s, 0, this.params.runCallbacksOnInit, !0);
                }
            }
        this.params.hashNavigation.watchState && n(t).on("hashchange", this.hashNavigation.onHashCange);
    }
    }, destroy: function () { this.params.hashNavigation.watchState && n(t).off("hashchange", this.hashNavigation.onHashCange); }
    }, J = { run: function () { var e = this, t = e.slides.eq(e.activeIndex), i = e.params.autoplay.delay; t.attr("data-swiper-autoplay") && (i = t.attr("data-swiper-autoplay") || e.params.autoplay.delay), clearTimeout(e.autoplay.timeout), e.autoplay.timeout = c.nextTick((function () { e.params.autoplay.reverseDirection ? e.params.loop ? (e.loopFix(), e.slidePrev(e.params.speed, !0, !0), e.emit("autoplay")) : e.isBeginning ? e.params.autoplay.stopOnLastSlide ? e.autoplay.stop() : (e.slideTo(e.slides.length - 1, e.params.speed, !0, !0), e.emit("autoplay")) : (e.slidePrev(e.params.speed, !0, !0), e.emit("autoplay")) : e.params.loop ? (e.loopFix(), e.slideNext(e.params.speed, !0, !0), e.emit("autoplay")) : e.isEnd ? e.params.autoplay.stopOnLastSlide ? e.autoplay.stop() : (e.slideTo(0, e.params.speed, !0, !0), e.emit("autoplay")) : (e.slideNext(e.params.speed, !0, !0), e.emit("autoplay")); }), i); }, start: function () { return void 0 === this.autoplay.timeout && !this.autoplay.running && (this.autoplay.running = !0, this.emit("autoplayStart"), this.autoplay.run(), !0); }, stop: function () { return !!this.autoplay.running && void 0 !== this.autoplay.timeout && (this.autoplay.timeout && (clearTimeout(this.autoplay.timeout), this.autoplay.timeout = void 0), this.autoplay.running = !1, this.emit("autoplayStop"), !0); }, pause: function (e) { this.autoplay.running && (this.autoplay.paused || (this.autoplay.timeout && clearTimeout(this.autoplay.timeout), this.autoplay.paused = !0, 0 !== e && this.params.autoplay.waitForTransition ? (this.$wrapperEl[0].addEventListener("transitionend", this.autoplay.onTransitionEnd), this.$wrapperEl[0].addEventListener("webkitTransitionEnd", this.autoplay.onTransitionEnd)) : (this.autoplay.paused = !1, this.autoplay.run()))); } }, ee = {
    setTranslate: function () {
    for (var e = this.slides, t = 0; t < e.length; t += 1) {
        var i = this.slides.eq(t), n = -i[0].swiperSlideOffset;
        this.params.virtualTranslate || (n -= this.translate);
        var r = 0;
        this.isHorizontal() || (r = n, n = 0);
        var a = this.params.fadeEffect.crossFade ? Math.max(1 - Math.abs(i[0].progress), 0) : 1 + Math.min(Math.max(i[0].progress, -1), 0);
        i.css({ opacity: a }).transform("translate3d(" + n + "px, " + r + "px, 0px)");
    }
    }, setTransition: function (e) {
    var t = this, i = t.slides, n = t.$wrapperEl; if (i.transition(e), t.params.virtualTranslate && 0 !== e) {
        var r = !1;
        i.transitionEnd((function () {
        if (!r && t && !t.destroyed) {
            r = !0, t.animating = !1;
            for (var e = ["webkitTransitionEnd", "transitionend"], i = 0; i < e.length; i += 1)
                n.trigger(e[i]);
        }
        }));
    }
    }
    }, te = {
    setTranslate: function () {
    var e, t = this.$el, i = this.$wrapperEl, r = this.slides, a = this.width, o = this.height, s = this.rtlTranslate, l = this.size, c = this.params.cubeEffect, u = this.isHorizontal(), d = this.virtual && this.params.virtual.enabled, p = 0; c.shadow && (u ? (0 === (e = i.find(".swiper-cube-shadow")).length && (e = n('<div class="swiper-cube-shadow"></div>'), i.append(e)), e.css({ height: a + "px" })) : 0 === (e = t.find(".swiper-cube-shadow")).length && (e = n('<div class="swiper-cube-shadow"></div>'), t.append(e))); for (var f = 0; f < r.length; f += 1) {
        var m = r.eq(f), v = f;
        d && (v = parseInt(m.attr("data-swiper-slide-index"), 10));
        var g = 90 * v, y = Math.floor(g / 360);
        s && (g = -g, y = Math.floor(-g / 360));
        var b = Math.max(Math.min(m[0].progress, 1), -1), x = 0, _ = 0, w = 0;
        v % 4 == 0 ? (x = 4 * -y * l, w = 0) : (v - 1) % 4 == 0 ? (x = 0, w = 4 * -y * l) : (v - 2) % 4 == 0 ? (x = l + 4 * y * l, w = l) : (v - 3) % 4 == 0 && (x = -l, w = 3 * l + 4 * l * y), s && (x = -x), u || (_ = x, x = 0);
        var T = "rotateX(" + (u ? 0 : -g) + "deg) rotateY(" + (u ? g : 0) + "deg) translate3d(" + x + "px, " + _ + "px, " + w + "px)";
        if (b <= 1 && b > -1 && (p = 90 * v + 90 * b, s && (p = 90 * -v - 90 * b)), m.transform(T), c.slideShadows) {
            var M = u ? m.find(".swiper-slide-shadow-left") : m.find(".swiper-slide-shadow-top"), A = u ? m.find(".swiper-slide-shadow-right") : m.find(".swiper-slide-shadow-bottom");
            0 === M.length && (M = n('<div class="swiper-slide-shadow-' + (u ? "left" : "top") + '"></div>'), m.append(M)), 0 === A.length && (A = n('<div class="swiper-slide-shadow-' + (u ? "right" : "bottom") + '"></div>'), m.append(A)), M.length && (M[0].style.opacity = Math.max(-b, 0)), A.length && (A[0].style.opacity = Math.max(b, 0));
        }
    } if (i.css({ "-webkit-transform-origin": "50% 50% -" + l / 2 + "px", "-moz-transform-origin": "50% 50% -" + l / 2 + "px", "-ms-transform-origin": "50% 50% -" + l / 2 + "px", "transform-origin": "50% 50% -" + l / 2 + "px" }), c.shadow)
            if (u)
                e.transform("translate3d(0px, " + (a / 2 + c.shadowOffset) + "px, " + -a / 2 + "px) rotateX(90deg) rotateZ(0deg) scale(" + c.shadowScale + ")");
            else {
                var S = Math.abs(p) - 90 * Math.floor(Math.abs(p) / 90), E = 1.5 - (Math.sin(2 * S * Math.PI / 360) / 2 + Math.cos(2 * S * Math.PI / 360) / 2), P = c.shadowScale, C = c.shadowScale / E, L = c.shadowOffset;
                e.transform("scale3d(" + P + ", 1, " + C + ") translate3d(0px, " + (o / 2 + L) + "px, " + -o / 2 / C + "px) rotateX(-90deg)");
            } var R = h.isSafari || h.isUiWebView ? -l / 2 : 0; i.transform("translate3d(0px,0," + R + "px) rotateX(" + (this.isHorizontal() ? 0 : p) + "deg) rotateY(" + (this.isHorizontal() ? -p : 0) + "deg)");
    }, setTransition: function (e) { var t = this.$el; this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e), this.params.cubeEffect.shadow && !this.isHorizontal() && t.find(".swiper-cube-shadow").transition(e); }
    }, ie = {
    setTranslate: function () {
    for (var e = this.slides, t = this.rtlTranslate, i = 0; i < e.length; i += 1) {
        var r = e.eq(i), a = r[0].progress;
        this.params.flipEffect.limitRotation && (a = Math.max(Math.min(r[0].progress, 1), -1));
        var o = -180 * a, s = 0, l = -r[0].swiperSlideOffset, c = 0;
        if (this.isHorizontal() ? t && (o = -o) : (c = l, l = 0, s = -o, o = 0), r[0].style.zIndex = -Math.abs(Math.round(a)) + e.length, this.params.flipEffect.slideShadows) {
            var u = this.isHorizontal() ? r.find(".swiper-slide-shadow-left") : r.find(".swiper-slide-shadow-top"), h = this.isHorizontal() ? r.find(".swiper-slide-shadow-right") : r.find(".swiper-slide-shadow-bottom");
            0 === u.length && (u = n('<div class="swiper-slide-shadow-' + (this.isHorizontal() ? "left" : "top") + '"></div>'), r.append(u)), 0 === h.length && (h = n('<div class="swiper-slide-shadow-' + (this.isHorizontal() ? "right" : "bottom") + '"></div>'), r.append(h)), u.length && (u[0].style.opacity = Math.max(-a, 0)), h.length && (h[0].style.opacity = Math.max(a, 0));
        }
        r.transform("translate3d(" + l + "px, " + c + "px, 0px) rotateX(" + s + "deg) rotateY(" + o + "deg)");
    }
    }, setTransition: function (e) {
    var t = this, i = t.slides, n = t.activeIndex, r = t.$wrapperEl; if (i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e), t.params.virtualTranslate && 0 !== e) {
        var a = !1;
        i.eq(n).transitionEnd((function () {
        if (!a && t && !t.destroyed) {
            a = !0, t.animating = !1;
            for (var e = ["webkitTransitionEnd", "transitionend"], i = 0; i < e.length; i += 1)
                r.trigger(e[i]);
        }
        }));
    }
    }
    }, ne = {
    setTranslate: function () {
    for (var e = this.width, t = this.height, i = this.slides, r = this.$wrapperEl, a = this.slidesSizesGrid, o = this.params.coverflowEffect, s = this.isHorizontal(), l = this.translate, c = s ? e / 2 - l : t / 2 - l, h = s ? o.rotate : -o.rotate, d = o.depth, p = 0, f = i.length; p < f; p += 1) {
        var m = i.eq(p), v = a[p], g = (c - m[0].swiperSlideOffset - v / 2) / v * o.modifier, y = s ? h * g : 0, b = s ? 0 : h * g, x = -d * Math.abs(g), _ = s ? 0 : o.stretch * g, w = s ? o.stretch * g : 0;
        Math.abs(w) < .001 && (w = 0), Math.abs(_) < .001 && (_ = 0), Math.abs(x) < .001 && (x = 0), Math.abs(y) < .001 && (y = 0), Math.abs(b) < .001 && (b = 0);
        var T = "translate3d(" + w + "px," + _ + "px," + x + "px)  rotateX(" + b + "deg) rotateY(" + y + "deg)";
        if (m.transform(T), m[0].style.zIndex = 1 - Math.abs(Math.round(g)), o.slideShadows) {
            var M = s ? m.find(".swiper-slide-shadow-left") : m.find(".swiper-slide-shadow-top"), A = s ? m.find(".swiper-slide-shadow-right") : m.find(".swiper-slide-shadow-bottom");
            0 === M.length && (M = n('<div class="swiper-slide-shadow-' + (s ? "left" : "top") + '"></div>'), m.append(M)), 0 === A.length && (A = n('<div class="swiper-slide-shadow-' + (s ? "right" : "bottom") + '"></div>'), m.append(A)), M.length && (M[0].style.opacity = g > 0 ? g : 0), A.length && (A[0].style.opacity = -g > 0 ? -g : 0);
        }
    } (u.pointerEvents || u.prefixedPointerEvents) && (r[0].style.perspectiveOrigin = c + "px 50%");
    }, setTransition: function (e) { this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e); }
    }, re = {
    init: function () { var e = this.params.thumbs, t = this.constructor; e.swiper instanceof t ? (this.thumbs.swiper = e.swiper, c.extend(this.thumbs.swiper.originalParams, { watchSlidesProgress: !0, slideToClickedSlide: !1 }), c.extend(this.thumbs.swiper.params, { watchSlidesProgress: !0, slideToClickedSlide: !1 })) : c.isObject(e.swiper) && (this.thumbs.swiper = new t(c.extend({}, e.swiper, { watchSlidesVisibility: !0, watchSlidesProgress: !0, slideToClickedSlide: !1 })), this.thumbs.swiperCreated = !0), this.thumbs.swiper.$el.addClass(this.params.thumbs.thumbsContainerClass), this.thumbs.swiper.on("tap", this.thumbs.onThumbClick); }, onThumbClick: function () {
    var e = this.thumbs.swiper; if (e) {
        var t = e.clickedIndex, i = e.clickedSlide;
        if (!(i && n(i).hasClass(this.params.thumbs.slideThumbActiveClass) || null == t)) {
            var r;
            if (r = e.params.loop ? parseInt(n(e.clickedSlide).attr("data-swiper-slide-index"), 10) : t, this.params.loop) {
                var a = this.activeIndex;
                this.slides.eq(a).hasClass(this.params.slideDuplicateClass) && (this.loopFix(), this._clientLeft = this.$wrapperEl[0].clientLeft, a = this.activeIndex);
                var o = this.slides.eq(a).prevAll('[data-swiper-slide-index="' + r + '"]').eq(0).index(), s = this.slides.eq(a).nextAll('[data-swiper-slide-index="' + r + '"]').eq(0).index();
                r = void 0 === o ? s : void 0 === s ? o : s - a < a - o ? s : o;
            }
            this.slideTo(r);
        }
    }
    }, update: function (e) {
    var t = this.thumbs.swiper; if (t) {
        var i = "auto" === t.params.slidesPerView ? t.slidesPerViewDynamic() : t.params.slidesPerView;
        if (this.realIndex !== t.realIndex) {
            var n, r = t.activeIndex;
            if (t.params.loop) {
                t.slides.eq(r).hasClass(t.params.slideDuplicateClass) && (t.loopFix(), t._clientLeft = t.$wrapperEl[0].clientLeft, r = t.activeIndex);
                var a = t.slides.eq(r).prevAll('[data-swiper-slide-index="' + this.realIndex + '"]').eq(0).index(), o = t.slides.eq(r).nextAll('[data-swiper-slide-index="' + this.realIndex + '"]').eq(0).index();
                n = void 0 === a ? o : void 0 === o ? a : o - r == r - a ? r : o - r < r - a ? o : a;
            }
            else
                n = this.realIndex;
            t.visibleSlidesIndexes && t.visibleSlidesIndexes.indexOf(n) < 0 && (t.params.centeredSlides ? n = n > r ? n - Math.floor(i / 2) + 1 : n + Math.floor(i / 2) - 1 : n > r && (n = n - i + 1), t.slideTo(n, e ? 0 : void 0));
        }
        var s = 1, l = this.params.thumbs.slideThumbActiveClass;
        if (this.params.slidesPerView > 1 && !this.params.centeredSlides && (s = this.params.slidesPerView), t.slides.removeClass(l), t.params.loop || t.params.virtual)
            for (var c = 0; c < s; c += 1)
                t.$wrapperEl.children('[data-swiper-slide-index="' + (this.realIndex + c) + '"]').addClass(l);
        else
            for (var u = 0; u < s; u += 1)
                t.slides.eq(this.realIndex + u).addClass(l);
    }
    }
    }, ae = [R, I, O, D, k, B, H, { name: "mousewheel", params: { mousewheel: { enabled: !1, releaseOnEdges: !1, invert: !1, forceToAxis: !1, sensitivity: 1, eventsTarged: "container" } }, create: function () { c.extend(this, { mousewheel: { enabled: !1, enable: U.enable.bind(this), disable: U.disable.bind(this), handle: U.handle.bind(this), handleMouseEnter: U.handleMouseEnter.bind(this), handleMouseLeave: U.handleMouseLeave.bind(this), lastScrollTime: c.now() } }); }, on: { init: function () { this.params.mousewheel.enabled && this.mousewheel.enable(); }, destroy: function () { this.mousewheel.enabled && this.mousewheel.disable(); } } }, { name: "navigation", params: { navigation: { nextEl: null, prevEl: null, hideOnClick: !1, disabledClass: "swiper-button-disabled", hiddenClass: "swiper-button-hidden", lockClass: "swiper-button-lock" } }, create: function () { c.extend(this, { navigation: { init: z.init.bind(this), update: z.update.bind(this), destroy: z.destroy.bind(this), onNextClick: z.onNextClick.bind(this), onPrevClick: z.onPrevClick.bind(this) } }); }, on: { init: function () { this.navigation.init(), this.navigation.update(); }, toEdge: function () { this.navigation.update(); }, fromEdge: function () { this.navigation.update(); }, destroy: function () { this.navigation.destroy(); }, click: function (e) { var t, i = this.navigation, r = i.$nextEl, a = i.$prevEl; !this.params.navigation.hideOnClick || n(e.target).is(a) || n(e.target).is(r) || (r ? t = r.hasClass(this.params.navigation.hiddenClass) : a && (t = a.hasClass(this.params.navigation.hiddenClass)), !0 === t ? this.emit("navigationShow", this) : this.emit("navigationHide", this), r && r.toggleClass(this.params.navigation.hiddenClass), a && a.toggleClass(this.params.navigation.hiddenClass)); } } }, { name: "pagination", params: { pagination: { el: null, bulletElement: "span", clickable: !1, hideOnClick: !1, renderBullet: null, renderProgressbar: null, renderFraction: null, renderCustom: null, progressbarOpposite: !1, type: "bullets", dynamicBullets: !1, dynamicMainBullets: 1, formatFractionCurrent: function (e) { return e; }, formatFractionTotal: function (e) { return e; }, bulletClass: "swiper-pagination-bullet", bulletActiveClass: "swiper-pagination-bullet-active", modifierClass: "swiper-pagination-", currentClass: "swiper-pagination-current", totalClass: "swiper-pagination-total", hiddenClass: "swiper-pagination-hidden", progressbarFillClass: "swiper-pagination-progressbar-fill", progressbarOppositeClass: "swiper-pagination-progressbar-opposite", clickableClass: "swiper-pagination-clickable", lockClass: "swiper-pagination-lock" } }, create: function () { c.extend(this, { pagination: { init: V.init.bind(this), render: V.render.bind(this), update: V.update.bind(this), destroy: V.destroy.bind(this), dynamicBulletIndex: 0 } }); }, on: { init: function () { this.pagination.init(), this.pagination.render(), this.pagination.update(); }, activeIndexChange: function () { this.params.loop ? this.pagination.update() : void 0 === this.snapIndex && this.pagination.update(); }, snapIndexChange: function () { this.params.loop || this.pagination.update(); }, slidesLengthChange: function () { this.params.loop && (this.pagination.render(), this.pagination.update()); }, snapGridLengthChange: function () { this.params.loop || (this.pagination.render(), this.pagination.update()); }, destroy: function () { this.pagination.destroy(); }, click: function (e) { this.params.pagination.el && this.params.pagination.hideOnClick && this.pagination.$el.length > 0 && !n(e.target).hasClass(this.params.pagination.bulletClass) && (!0 === this.pagination.$el.hasClass(this.params.pagination.hiddenClass) ? this.emit("paginationShow", this) : this.emit("paginationHide", this), this.pagination.$el.toggleClass(this.params.pagination.hiddenClass)); } } }, { name: "scrollbar", params: { scrollbar: { el: null, dragSize: "auto", hide: !1, draggable: !1, snapOnRelease: !0, lockClass: "swiper-scrollbar-lock", dragClass: "swiper-scrollbar-drag" } }, create: function () { c.extend(this, { scrollbar: { init: j.init.bind(this), destroy: j.destroy.bind(this), updateSize: j.updateSize.bind(this), setTranslate: j.setTranslate.bind(this), setTransition: j.setTransition.bind(this), enableDraggable: j.enableDraggable.bind(this), disableDraggable: j.disableDraggable.bind(this), setDragPosition: j.setDragPosition.bind(this), getPointerPosition: j.getPointerPosition.bind(this), onDragStart: j.onDragStart.bind(this), onDragMove: j.onDragMove.bind(this), onDragEnd: j.onDragEnd.bind(this), isTouched: !1, timeout: null, dragTimeout: null } }); }, on: { init: function () { this.scrollbar.init(), this.scrollbar.updateSize(), this.scrollbar.setTranslate(); }, update: function () { this.scrollbar.updateSize(); }, resize: function () { this.scrollbar.updateSize(); }, observerUpdate: function () { this.scrollbar.updateSize(); }, setTranslate: function () { this.scrollbar.setTranslate(); }, setTransition: function (e) { this.scrollbar.setTransition(e); }, destroy: function () { this.scrollbar.destroy(); } } }, { name: "parallax", params: { parallax: { enabled: !1 } }, create: function () { c.extend(this, { parallax: { setTransform: W.setTransform.bind(this), setTranslate: W.setTranslate.bind(this), setTransition: W.setTransition.bind(this) } }); }, on: { beforeInit: function () { this.params.parallax.enabled && (this.params.watchSlidesProgress = !0, this.originalParams.watchSlidesProgress = !0); }, init: function () { this.params.parallax.enabled && this.parallax.setTranslate(); }, setTranslate: function () { this.params.parallax.enabled && this.parallax.setTranslate(); }, setTransition: function (e) { this.params.parallax.enabled && this.parallax.setTransition(e); } } }, {
    name: "zoom", params: { zoom: { enabled: !1, maxRatio: 3, minRatio: 1, toggle: !0, containerClass: "swiper-zoom-container", zoomedSlideClass: "swiper-slide-zoomed" } }, create: function () {
    var e = this, t = { enabled: !1, scale: 1, currentScale: 1, isScaling: !1, gesture: { $slideEl: void 0, slideWidth: void 0, slideHeight: void 0, $imageEl: void 0, $imageWrapEl: void 0, maxRatio: 3 }, image: { isTouched: void 0, isMoved: void 0, currentX: void 0, currentY: void 0, minX: void 0, minY: void 0, maxX: void 0, maxY: void 0, width: void 0, height: void 0, startX: void 0, startY: void 0, touchesStart: {}, touchesCurrent: {} }, velocity: { x: void 0, y: void 0, prevPositionX: void 0, prevPositionY: void 0, prevTime: void 0 } }; "onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function (i) { t[i] = X[i].bind(e); })), c.extend(e, { zoom: t }); var i = 1; Object.defineProperty(e.zoom, "scale", {
    get: function () { return i; }, set: function (t) {
    if (i !== t) {
        var n = e.zoom.gesture.$imageEl ? e.zoom.gesture.$imageEl[0] : void 0, r = e.zoom.gesture.$slideEl ? e.zoom.gesture.$slideEl[0] : void 0;
        e.emit("zoomChange", t, n, r);
    } i = t;
    }
    });
    }, on: { init: function () { this.params.zoom.enabled && this.zoom.enable(); }, destroy: function () { this.zoom.disable(); }, touchStart: function (e) { this.zoom.enabled && this.zoom.onTouchStart(e); }, touchEnd: function (e) { this.zoom.enabled && this.zoom.onTouchEnd(e); }, doubleTap: function (e) { this.params.zoom.enabled && this.zoom.enabled && this.params.zoom.toggle && this.zoom.toggle(e); }, transitionEnd: function () { this.zoom.enabled && this.params.zoom.enabled && this.zoom.onTransitionEnd(); } }
    }, { name: "lazy", params: { lazy: { enabled: !1, loadPrevNext: !1, loadPrevNextAmount: 1, loadOnTransitionStart: !1, elementClass: "swiper-lazy", loadingClass: "swiper-lazy-loading", loadedClass: "swiper-lazy-loaded", preloaderClass: "swiper-lazy-preloader" } }, create: function () { c.extend(this, { lazy: { initialImageLoaded: !1, load: Y.load.bind(this), loadInSlide: Y.loadInSlide.bind(this) } }); }, on: { beforeInit: function () { this.params.lazy.enabled && this.params.preloadImages && (this.params.preloadImages = !1); }, init: function () { this.params.lazy.enabled && !this.params.loop && 0 === this.params.initialSlide && this.lazy.load(); }, scroll: function () { this.params.freeMode && !this.params.freeModeSticky && this.lazy.load(); }, resize: function () { this.params.lazy.enabled && this.lazy.load(); }, scrollbarDragMove: function () { this.params.lazy.enabled && this.lazy.load(); }, transitionStart: function () { this.params.lazy.enabled && (this.params.lazy.loadOnTransitionStart || !this.params.lazy.loadOnTransitionStart && !this.lazy.initialImageLoaded) && this.lazy.load(); }, transitionEnd: function () { this.params.lazy.enabled && !this.params.lazy.loadOnTransitionStart && this.lazy.load(); } } }, q, { name: "a11y", params: { a11y: { enabled: !0, notificationClass: "swiper-notification", prevSlideMessage: "Previous slide", nextSlideMessage: "Next slide", firstSlideMessage: "This is the first slide", lastSlideMessage: "This is the last slide", paginationBulletMessage: "Go to slide {{index}}" } }, create: function () { var e = this; c.extend(e, { a11y: { liveRegion: n('<span class="' + e.params.a11y.notificationClass + '" aria-live="assertive" aria-atomic="true"></span>') } }), Object.keys($).forEach((function (t) { e.a11y[t] = $[t].bind(e); })); }, on: { init: function () { this.params.a11y.enabled && (this.a11y.init(), this.a11y.updateNavigation()); }, toEdge: function () { this.params.a11y.enabled && this.a11y.updateNavigation(); }, fromEdge: function () { this.params.a11y.enabled && this.a11y.updateNavigation(); }, paginationUpdate: function () { this.params.a11y.enabled && this.a11y.updatePagination(); }, destroy: function () { this.params.a11y.enabled && this.a11y.destroy(); } } }, { name: "history", params: { history: { enabled: !1, replaceState: !1, key: "slides" } }, create: function () { c.extend(this, { history: { init: Z.init.bind(this), setHistory: Z.setHistory.bind(this), setHistoryPopState: Z.setHistoryPopState.bind(this), scrollToSlide: Z.scrollToSlide.bind(this), destroy: Z.destroy.bind(this) } }); }, on: { init: function () { this.params.history.enabled && this.history.init(); }, destroy: function () { this.params.history.enabled && this.history.destroy(); }, transitionEnd: function () { this.history.initialized && this.history.setHistory(this.params.history.key, this.activeIndex); } } }, { name: "hash-navigation", params: { hashNavigation: { enabled: !1, replaceState: !1, watchState: !1 } }, create: function () { c.extend(this, { hashNavigation: { initialized: !1, init: K.init.bind(this), destroy: K.destroy.bind(this), setHash: K.setHash.bind(this), onHashCange: K.onHashCange.bind(this) } }); }, on: { init: function () { this.params.hashNavigation.enabled && this.hashNavigation.init(); }, destroy: function () { this.params.hashNavigation.enabled && this.hashNavigation.destroy(); }, transitionEnd: function () { this.hashNavigation.initialized && this.hashNavigation.setHash(); } } }, { name: "autoplay", params: { autoplay: { enabled: !1, delay: 3e3, waitForTransition: !0, disableOnInteraction: !0, stopOnLastSlide: !1, reverseDirection: !1 } }, create: function () { var e = this; c.extend(e, { autoplay: { running: !1, paused: !1, run: J.run.bind(e), start: J.start.bind(e), stop: J.stop.bind(e), pause: J.pause.bind(e), onTransitionEnd: function (t) { e && !e.destroyed && e.$wrapperEl && t.target === this && (e.$wrapperEl[0].removeEventListener("transitionend", e.autoplay.onTransitionEnd), e.$wrapperEl[0].removeEventListener("webkitTransitionEnd", e.autoplay.onTransitionEnd), e.autoplay.paused = !1, e.autoplay.running ? e.autoplay.run() : e.autoplay.stop()); } } }); }, on: { init: function () { this.params.autoplay.enabled && this.autoplay.start(); }, beforeTransitionStart: function (e, t) { this.autoplay.running && (t || !this.params.autoplay.disableOnInteraction ? this.autoplay.pause(e) : this.autoplay.stop()); }, sliderFirstMove: function () { this.autoplay.running && (this.params.autoplay.disableOnInteraction ? this.autoplay.stop() : this.autoplay.pause()); }, destroy: function () { this.autoplay.running && this.autoplay.stop(); } } }, {
    name: "effect-fade", params: { fadeEffect: { crossFade: !1 } }, create: function () { c.extend(this, { fadeEffect: { setTranslate: ee.setTranslate.bind(this), setTransition: ee.setTransition.bind(this) } }); }, on: {
    beforeInit: function () {
    if ("fade" === this.params.effect) {
        this.classNames.push(this.params.containerModifierClass + "fade");
        var e = { slidesPerView: 1, slidesPerColumn: 1, slidesPerGroup: 1, watchSlidesProgress: !0, spaceBetween: 0, virtualTranslate: !0 };
        c.extend(this.params, e), c.extend(this.originalParams, e);
    }
    }, setTranslate: function () { "fade" === this.params.effect && this.fadeEffect.setTranslate(); }, setTransition: function (e) { "fade" === this.params.effect && this.fadeEffect.setTransition(e); }
    }
        }, {
        name: "effect-cube", params: { cubeEffect: { slideShadows: !0, shadow: !0, shadowOffset: 20, shadowScale: .94 } }, create: function () { c.extend(this, { cubeEffect: { setTranslate: te.setTranslate.bind(this), setTransition: te.setTransition.bind(this) } }); }, on: {
        beforeInit: function () {
        if ("cube" === this.params.effect) {
            this.classNames.push(this.params.containerModifierClass + "cube"), this.classNames.push(this.params.containerModifierClass + "3d");
            var e = { slidesPerView: 1, slidesPerColumn: 1, slidesPerGroup: 1, watchSlidesProgress: !0, resistanceRatio: 0, spaceBetween: 0, centeredSlides: !1, virtualTranslate: !0 };
            c.extend(this.params, e), c.extend(this.originalParams, e);
        }
        }, setTranslate: function () { "cube" === this.params.effect && this.cubeEffect.setTranslate(); }, setTransition: function (e) { "cube" === this.params.effect && this.cubeEffect.setTransition(e); }
        }
        }, {
        name: "effect-flip", params: { flipEffect: { slideShadows: !0, limitRotation: !0 } }, create: function () { c.extend(this, { flipEffect: { setTranslate: ie.setTranslate.bind(this), setTransition: ie.setTransition.bind(this) } }); }, on: {
        beforeInit: function () {
        if ("flip" === this.params.effect) {
            this.classNames.push(this.params.containerModifierClass + "flip"), this.classNames.push(this.params.containerModifierClass + "3d");
            var e = { slidesPerView: 1, slidesPerColumn: 1, slidesPerGroup: 1, watchSlidesProgress: !0, spaceBetween: 0, virtualTranslate: !0 };
            c.extend(this.params, e), c.extend(this.originalParams, e);
        }
        }, setTranslate: function () { "flip" === this.params.effect && this.flipEffect.setTranslate(); }, setTransition: function (e) { "flip" === this.params.effect && this.flipEffect.setTransition(e); }
        }
        }, { name: "effect-coverflow", params: { coverflowEffect: { rotate: 50, stretch: 0, depth: 100, modifier: 1, slideShadows: !0 } }, create: function () { c.extend(this, { coverflowEffect: { setTranslate: ne.setTranslate.bind(this), setTransition: ne.setTransition.bind(this) } }); }, on: { beforeInit: function () { "coverflow" === this.params.effect && (this.classNames.push(this.params.containerModifierClass + "coverflow"), this.classNames.push(this.params.containerModifierClass + "3d"), this.params.watchSlidesProgress = !0, this.originalParams.watchSlidesProgress = !0); }, setTranslate: function () { "coverflow" === this.params.effect && this.coverflowEffect.setTranslate(); }, setTransition: function (e) { "coverflow" === this.params.effect && this.coverflowEffect.setTransition(e); } } }, { name: "thumbs", params: { thumbs: { swiper: null, slideThumbActiveClass: "swiper-slide-thumb-active", thumbsContainerClass: "swiper-container-thumbs" } }, create: function () { c.extend(this, { thumbs: { swiper: null, init: re.init.bind(this), update: re.update.bind(this), onThumbClick: re.onThumbClick.bind(this) } }); }, on: { beforeInit: function () { var e = this.params.thumbs; e && e.swiper && (this.thumbs.init(), this.thumbs.update(!0)); }, slideChange: function () { this.thumbs.swiper && this.thumbs.update(); }, update: function () { this.thumbs.swiper && this.thumbs.update(); }, resize: function () { this.thumbs.swiper && this.thumbs.update(); }, observerUpdate: function () { this.thumbs.swiper && this.thumbs.update(); }, setTransition: function (e) { var t = this.thumbs.swiper; t && t.setTransition(e); }, beforeDestroy: function () { var e = this.thumbs.swiper; e && this.thumbs.swiperCreated && e && e.destroy(); } } }];
    return void 0 === L.use && (L.use = L.Class.use, L.installModule = L.Class.installModule), L.use(ae), L;
} ();
}, function (e, t, i) {
    "use strict";
    var n = i(18);
    i.n(n).a;
}, function (e, t, i) { }, function (e, t, i) {
    "use strict";
    var n = i(19);
    i.n(n).a;
}, function (e, t, i) {
    "use strict";
    var n = i(20);
    i.n(n).a;
}, function (e, t, i) { (function (e) { var n = void 0 !== e && e || "undefined" != typeof self && self || window, r = Function.prototype.apply; function a(e, t) { this._id = e, this._clearFn = t; } t.setTimeout = function () { return new a(r.call(setTimeout, n, arguments), clearTimeout); }, t.setInterval = function () { return new a(r.call(setInterval, n, arguments), clearInterval); }, t.clearTimeout = t.clearInterval = function (e) { e && e.close(); }, a.prototype.unref = a.prototype.ref = function () { }, a.prototype.close = function () { this._clearFn.call(n, this._id); }, t.enroll = function (e, t) { clearTimeout(e._idleTimeoutId), e._idleTimeout = t; }, t.unenroll = function (e) { clearTimeout(e._idleTimeoutId), e._idleTimeout = -1; }, t._unrefActive = t.active = function (e) { clearTimeout(e._idleTimeoutId); var t = e._idleTimeout; t >= 0 && (e._idleTimeoutId = setTimeout((function () { e._onTimeout && e._onTimeout(); }), t)); }, i(97), t.setImmediate = "undefined" != typeof self && self.setImmediate || void 0 !== e && e.setImmediate || this && this.setImmediate, t.clearImmediate = "undefined" != typeof self && self.clearImmediate || void 0 !== e && e.clearImmediate || this && this.clearImmediate; }).call(this, i(11)); }, function (e, t, i) {
(function (e, t) {
!function (e, i) {
    "use strict";
    if (!e.setImmediate) {
        var n, r, a, o, s, l = 1, c = {}, u = !1, h = e.document, d = Object.getPrototypeOf && Object.getPrototypeOf(e);
        d = d && d.setTimeout ? d : e, "[object process]" === {}.toString.call(e.process) ? n = function (e) { t.nextTick((function () { f(e); })); } : !function () {
        if (e.postMessage && !e.importScripts) {
            var t = !0, i = e.onmessage;
            return e.onmessage = function () { t = !1; }, e.postMessage("", "*"), e.onmessage = i, t;
        }
        } () ? e.MessageChannel ? ((a = new MessageChannel).port1.onmessage = function (e) { f(e.data); }, n = function (e) { a.port2.postMessage(e); }) : h && "onreadystatechange" in h.createElement("script") ? (r = h.documentElement, n = function (e) { var t = h.createElement("script"); t.onreadystatechange = function () { f(e), t.onreadystatechange = null, r.removeChild(t), t = null; }, r.appendChild(t); }) : n = function (e) { setTimeout(f, 0, e); } : (o = "setImmediate$" + Math.random() + "$", s = function (t) { t.source === e && "string" == typeof t.data && 0 === t.data.indexOf(o) && f(+t.data.slice(o.length)); }, e.addEventListener ? e.addEventListener("message", s, !1) : e.attachEvent("onmessage", s), n = function (t) { e.postMessage(o + t, "*"); }), d.setImmediate = function (e) {
        "function" != typeof e && (e = new Function("" + e)); for (var t = new Array(arguments.length - 1), i = 0; i < t.length; i++)
            t[i] = arguments[i + 1]; var r = { callback: e, args: t }; return c[l] = r, n(l), l++;
        }, d.clearImmediate = p;
    }
    function p(e) { delete c[e]; }
    function f(e) {
    if (u)
        setTimeout(f, 0, e);
    else {
        var t = c[e];
        if (t) {
            u = !0;
            try {
                !function (e) {
                var t = e.callback, n = e.args; switch (n.length) {
                    case 0:
                        t();
                        break;
                    case 1:
                        t(n[0]);
                        break;
                    case 2:
                        t(n[0], n[1]);
                        break;
                    case 3:
                        t(n[0], n[1], n[2]);
                        break;
                    default: t.apply(i, n);
                }
                } (t);
            }
            finally {
                p(e), u = !1;
            }
        }
    }
    }
} ("undefined" == typeof self ? void 0 === e ? this : e : self);
}).call(this, i(11), i(27));
}, function (e, t) { function i(t) { return "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? e.exports = i = function (e) { return typeof e; } : e.exports = i = function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e; }, i(t); } e.exports = i; }, function (e, t, i) {
var n = i(4); e.exports = function (e, t) {
for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = n(e));)
    ; return e;
};
}, function (e, t) { function i(t, n) { return e.exports = i = Object.setPrototypeOf || function (e, t) { return e.__proto__ = t, e; }, i(t, n); } e.exports = i; }, function (e, t) {
e.exports = function (e) {
if (Array.isArray(e)) {
    for (var t = 0, i = new Array(e.length); t < e.length; t++)
        i[t] = e[t];
    return i;
}
};
}, function (e, t) {
e.exports = function (e) {
if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e))
    return Array.from(e);
};
}, function (e, t) { e.exports = function () { throw new TypeError("Invalid attempt to spread non-iterable instance"); }; }, function (e, t) { e.exports = function () { throw new Error("define cannot be used indirect"); }; }, function (e, t) {
e.exports = function (e) {
if (Array.isArray(e))
    return e;
};
}, function (e, t) {
e.exports = function (e, t) {
if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) {
    var i = [], n = !0, r = !1, a = void 0;
    try {
        for (var o, s = e[Symbol.iterator](); !(n = (o = s.next()).done) && (i.push(o.value), !t || i.length !== t); n = !0)
            ;
    }
    catch (e) {
        r = !0, a = e;
    }
    finally {
        try {
            n || null == s.return || s.return();
        }
        finally {
            if (r)
                throw a;
        }
    }
    return i;
}
};
}, function (e, t) { e.exports = function () { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }; }, function (e, t, i) { }, function (e, t, i) { }, function (e, t, i) {
    "use strict";
    i.r(t);
    var n = i(2), r = i.n(n), a = { isDev: !1, activeStyle: "", showStyleChooseWindow: !0, styles: [], resourcesDomain: "", assetsDomain: "", modelPath: "", lowModelPath: "", collisionModelPath: "", preloaderImagePath: "", backgroundPath: "assets/background.jpg", basePath: "assets/base.png", cursorPath: "assets/cursor.png", showDeepLinkButton: !1, defaultLoadAssetsCount: 17, materialConfig: { OutWallsColor1: "#d1d9df", OutWallsColor2: "#c5cdd4", WallconnectorColor: "#dcdbda", BackgroundPath: "assets/background.jpg", BackgroundColor: "#F2F2F2", BackgroundMode: "light", BackgroundDarkPath: "assets/background.jpg" }, modelConfig: { decoderPath: "js/draco/", texturesPath: { high: "", medium: "", low: "" }, texturesCount: { high: 0, medium: 0, low: 1 }, texturesLoadPriority: void 0 !== window.orientation ? ["low", "medium"] : ["low", "high"], materialWithTexturePrefix: "mat_", slicedConfig: { low: { width: 512, height: 512, count: 0 }, medium: { width: 1024, height: 1024, count: 4 }, high: { width: 2048, height: 2048, count: 16 } } }, panoramasConfig: { texturesPath: { high: "", medium: "", low: "" }, texturesCount: { high: 0, medium: 0, low: 1 }, texturesLoadPriority: void 0 !== window.orientation ? ["low", "medium"] : ["low", "high"], slicedConfig: { low: { width: 512, height: 512, count: 1 }, medium: { width: 1024, height: 1024, count: 4 }, high: { width: 2048, height: 2048, count: 16 } } }, mirrorsConfig: { texturesPath: { high: "" }, texturesCount: { high: 0, medium: 0, low: 1 }, texturesLoadPriority: ["low"], mirrors: [] }, isShowingStats: !1, gui: { enabled: !1 }, walls: { enabled: !1, hideValue: .3 }, plan: { modelPath: "", texturePath: "", texturesCount: 1, opacity: .45, camera: { near: 1, far: 500, pos: [0, 10, 0], frustumSize: 25, fov: 10 } }, blurredConfig: { enable: !0, enableBlurEffect: !1, opacity: .7, modelPath: void 0, texturePath: "assets/noise.png", labelMinWidth: 0, texturesCount: 5, labels: [] }, dpr: 1, mouse: { x: 0, y: 0 }, isMouseMoving: !1, pointShape: { color: 16777215, radius: .1, eps: .04, baseOpacity: .5 }, tween: { PanoPano: { camera: { time: 500, easing: r.a.Easing.Linear.None }, texture: { time: 500, easing: r.a.Easing.Cubic.InOut, delay: 0 } }, PreviewPano: { texture: { time: 750, easing: r.a.Easing.Linear.None, delay: 400, firstDelay: 700 }, camera: { time: 750, easing: r.a.Easing.Circular.Out, delay: 100, firstDelay: 300 } }, PlanPano: { camera: { time: 1e3, easing: r.a.Easing.Quadratic.In } }, PlanPreview: { camera: { time: 500, easing: r.a.Easing.Quadratic.Out } }, PanoPreview: { camera: { time: 750, easing: r.a.Easing.Linear.None } }, PanoPlan: { camera: { time: 750, easing: r.a.Easing.Linear.None } }, PreviewPlan: { camera: { time: 500, easing: r.a.Easing.Linear.None } }, Preview: { texture: { time: 400, easing: r.a.Easing.Linear.None }, preset: { time: 500, easing: r.a.Easing.Linear.None } }, Plan: { texture: { time: 500, easing: r.a.Easing.Linear.None } }, Pano: { shapeShow: { time: 300, easing: r.a.Easing.Linear.None } }, Mouse: { shapeShow: { time: 1e3, easing: r.a.Easing.Linear.None } } }, mesh: { enableHelper: !1 }, fog: { enable: !1, color: 16777215, near: 8e-4 }, camera: { fov: 40, panoFov: 60, near: .1, far: 60, aspect: 1, posX: 0, posY: 18.48, posZ: 7.66 }, map: { maxFraction: .4, width: 300, height: 200, x: 20, y: 80, radarSize: 3, camera: { fov: 40, near: .1, far: 50, lookDist: 3, posDist: -5, posX: 0, posY: 15, posZ: 0 } }, controls: { preview: { autoRotate: !1, autoRotateSpeed: -.5, rotateSpeed: .05, zoomSpeed: .8, minDistance: 12, maxDistance: 40, minPolarAngle: 0, maxPolarAngle: Math.PI / 8, minAzimuthAngle: -1 / 0, maxAzimuthAngle: 1 / 0, panSpeed: .05, enableDamping: !0, dampingFactor: .09, enableZoom: !0, panXLimit: [-10, 10], panZLimit: [-5, 5] }, plan: { maxDistance: 500, minPolarAngle: 0, maxPolarAngle: 0, maxAzimuthAngle: 0, minAzimuthAngle: 0, enableZoom: !1 }, pano: { autoForward: !1, dragToLook: !0, rotateSpeed: -1.5, rotateSpeedTouch: -1, enableZoom: !1, enableFovZoom: !0, fovZoomSpeed: 1.5, fovZoomTouchSpeed: .02, fovZoomMax: 60, fovZoomMin: 40, rotateInertia: .3, rotateInertiaTouch: .2, maxPolarAngle: Math.PI, minPolarAngle: 0, enablePan: !1 } }, ambientLight: { enabled: !0, color: 16777215 }, directionalLight: { enabled: !1, color: 15790320, intensity: .8, x: -75, y: 280, z: 150 }, shadow: { enabled: !1, helperEnabled: !1, bias: 0, mapWidth: 2048, mapHeight: 2048, near: 250, far: 400, top: 100, right: 100, bottom: -100, left: -100 }, pointLight: { enabled: !1, color: 16777215, intensity: .34, distance: 115, x: 0, y: 0, z: 0 }, hemiLight: { enabled: !1, color: 13158600, groundColor: 16777215, intensity: .55, x: 0, y: 0, z: 0 }, panoramas: [], postEffects: {} }, o = i(5), s = i.n(o), l = i(1), c = i.n(l), u = i(0), h = i.n(u), d = i(32), p = i.n(d);
    void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)), void 0 === Number.isInteger && (Number.isInteger = function (e) { return "number" == typeof e && isFinite(e) && Math.floor(e) === e; }), void 0 === Math.sign && (Math.sign = function (e) { return e < 0 ? -1 : e > 0 ? 1 : +e; }), "name" in Function.prototype == !1 && Object.defineProperty(Function.prototype, "name", { get: function () { return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]; } }), void 0 === Object.assign && (Object.assign = function (e) {
    if (null == e)
        throw new TypeError("Cannot convert undefined or null to object"); for (var t = Object(e), i = 1; i < arguments.length; i++) {
            var n = arguments[i];
            if (null != n)
                for (var r in n)
                    Object.prototype.hasOwnProperty.call(n, r) && (t[r] = n[r]);
        } return t;
    });
    var f = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 }, m = 0, v = 1, g = 2, y = 1, b = 2, x = 3, _ = 0, w = 1, T = 2, M = 0, A = 1, S = 2, E = 0, P = 1, C = 2, L = 3, R = 4, I = 5, O = 100, D = 101, F = 102, k = 103, N = 104, B = 200, G = 201, H = 202, U = 203, z = 204, V = 205, j = 206, W = 207, X = 208, Y = 209, Q = 210, q = 0, $ = 1, Z = 2, K = 3, J = 4, ee = 5, te = 6, ie = 7, ne = 0, re = 1, ae = 2, oe = 0, se = 1, le = 2, ce = 3, ue = 4, he = 5, de = 301, pe = 302, fe = 303, me = 304, ve = 305, ge = 306, ye = 307, be = 1e3, xe = 1001, _e = 1002, we = 1003, Te = 1004, Me = 1005, Ae = 1006, Se = 1007, Ee = 1008, Pe = 1009, Ce = 1010, Le = 1011, Re = 1012, Ie = 1013, Oe = 1014, De = 1015, Fe = 1016, ke = 1017, Ne = 1018, Be = 1019, Ge = 1020, He = 1021, Ue = 1022, ze = 1023, Ve = 1024, je = 1025, We = 1026, Xe = 1027, Ye = 1028, Qe = 33776, qe = 33777, $e = 33778, Ze = 33779, Ke = 35840, Je = 35841, et = 35842, tt = 35843, it = 36196, nt = 37808, rt = 37809, at = 37810, ot = 37811, st = 37812, lt = 37813, ct = 37814, ut = 37815, ht = 37816, dt = 37817, pt = 37818, ft = 37819, mt = 37820, vt = 37821, gt = 2201, yt = 2400, bt = 0, xt = 1, _t = 2, wt = 3e3, Tt = 3001, Mt = 3007, At = 3002, St = 3003, Et = 3004, Pt = 3005, Ct = 3006, Lt = 3200, Rt = 3201, It = 0, Ot = 1, Dt = 7680, Ft = 519, kt = 35044;
    function Nt() { }
    Object.assign(Nt.prototype, {
    addEventListener: function (e, t) { void 0 === this._listeners && (this._listeners = {}); var i = this._listeners; void 0 === i[e] && (i[e] = []), -1 === i[e].indexOf(t) && i[e].push(t); }, hasEventListener: function (e, t) {
    if (void 0 === this._listeners)
        return !1; var i = this._listeners; return void 0 !== i[e] && -1 !== i[e].indexOf(t);
    }, removeEventListener: function (e, t) {
    if (void 0 !== this._listeners) {
        var i = this._listeners[e];
        if (void 0 !== i) {
            var n = i.indexOf(t);
            -1 !== n && i.splice(n, 1);
        }
    }
    }, dispatchEvent: function (e) {
    if (void 0 !== this._listeners) {
        var t = this._listeners[e.type];
        if (void 0 !== t) {
            e.target = this;
            for (var i = t.slice(0), n = 0, r = i.length; n < r; n++)
                i[n].call(this, e);
        }
    }
    }
    });
    for (var Bt = [], Gt = 0; Gt < 256; Gt++)
        Bt[Gt] = (Gt < 16 ? "0" : "") + Gt.toString(16);
    var Ht = { DEG2RAD: Math.PI / 180, RAD2DEG: 180 / Math.PI, generateUUID: function () { var e = 4294967295 * Math.random() | 0, t = 4294967295 * Math.random() | 0, i = 4294967295 * Math.random() | 0, n = 4294967295 * Math.random() | 0; return (Bt[255 & e] + Bt[e >> 8 & 255] + Bt[e >> 16 & 255] + Bt[e >> 24 & 255] + "-" + Bt[255 & t] + Bt[t >> 8 & 255] + "-" + Bt[t >> 16 & 15 | 64] + Bt[t >> 24 & 255] + "-" + Bt[63 & i | 128] + Bt[i >> 8 & 255] + "-" + Bt[i >> 16 & 255] + Bt[i >> 24 & 255] + Bt[255 & n] + Bt[n >> 8 & 255] + Bt[n >> 16 & 255] + Bt[n >> 24 & 255]).toUpperCase(); }, clamp: function (e, t, i) { return Math.max(t, Math.min(i, e)); }, euclideanModulo: function (e, t) { return (e % t + t) % t; }, mapLinear: function (e, t, i, n, r) { return n + (e - t) * (r - n) / (i - t); }, lerp: function (e, t, i) { return (1 - i) * e + i * t; }, smoothstep: function (e, t, i) { return e <= t ? 0 : e >= i ? 1 : (e = (e - t) / (i - t)) * e * (3 - 2 * e); }, smootherstep: function (e, t, i) { return e <= t ? 0 : e >= i ? 1 : (e = (e - t) / (i - t)) * e * e * (e * (6 * e - 15) + 10); }, randInt: function (e, t) { return e + Math.floor(Math.random() * (t - e + 1)); }, randFloat: function (e, t) { return e + Math.random() * (t - e); }, randFloatSpread: function (e) { return e * (.5 - Math.random()); }, degToRad: function (e) { return e * Ht.DEG2RAD; }, radToDeg: function (e) { return e * Ht.RAD2DEG; }, isPowerOfTwo: function (e) { return 0 == (e & e - 1) && 0 !== e; }, ceilPowerOfTwo: function (e) { return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2)); }, floorPowerOfTwo: function (e) { return Math.pow(2, Math.floor(Math.log(e) / Math.LN2)); } };
    function Ut(e, t) { this.x = e || 0, this.y = t || 0; }
    function zt(e, t, i, n) { this._x = e || 0, this._y = t || 0, this._z = i || 0, this._w = void 0 !== n ? n : 1; }
    Object.defineProperties(Ut.prototype, { width: { get: function () { return this.x; }, set: function (e) { this.x = e; } }, height: { get: function () { return this.y; }, set: function (e) { this.y = e; } } }), Object.assign(Ut.prototype, {
    isVector2: !0, set: function (e, t) { return this.x = e, this.y = t, this; }, setScalar: function (e) { return this.x = e, this.y = e, this; }, setX: function (e) { return this.x = e, this; }, setY: function (e) { return this.y = e, this; }, setComponent: function (e, t) {
    switch (e) {
        case 0:
            this.x = t;
            break;
        case 1:
            this.y = t;
            break;
        default: throw new Error("index is out of range: " + e);
    } return this;
    }, getComponent: function (e) {
    switch (e) {
        case 0: return this.x;
        case 1: return this.y;
        default: throw new Error("index is out of range: " + e);
    }
    }, clone: function () { return new this.constructor(this.x, this.y); }, copy: function (e) { return this.x = e.x, this.y = e.y, this; }, add: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this); }, addScalar: function (e) { return this.x += e, this.y += e, this; }, addVectors: function (e, t) { return this.x = e.x + t.x, this.y = e.y + t.y, this; }, addScaledVector: function (e, t) { return this.x += e.x * t, this.y += e.y * t, this; }, sub: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this); }, subScalar: function (e) { return this.x -= e, this.y -= e, this; }, subVectors: function (e, t) { return this.x = e.x - t.x, this.y = e.y - t.y, this; }, multiply: function (e) { return this.x *= e.x, this.y *= e.y, this; }, multiplyScalar: function (e) { return this.x *= e, this.y *= e, this; }, divide: function (e) { return this.x /= e.x, this.y /= e.y, this; }, divideScalar: function (e) { return this.multiplyScalar(1 / e); }, applyMatrix3: function (e) { var t = this.x, i = this.y, n = e.elements; return this.x = n[0] * t + n[3] * i + n[6], this.y = n[1] * t + n[4] * i + n[7], this; }, min: function (e) { return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this; }, max: function (e) { return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this; }, clamp: function (e, t) { return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this; }, clampScalar: function (e, t) { return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this; }, clampLength: function (e, t) { var i = this.length(); return this.divideScalar(i || 1).multiplyScalar(Math.max(e, Math.min(t, i))); }, floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this; }, ceil: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this; }, round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this; }, roundToZero: function () { return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this; }, negate: function () { return this.x = -this.x, this.y = -this.y, this; }, dot: function (e) { return this.x * e.x + this.y * e.y; }, cross: function (e) { return this.x * e.y - this.y * e.x; }, lengthSq: function () { return this.x * this.x + this.y * this.y; }, length: function () { return Math.sqrt(this.x * this.x + this.y * this.y); }, manhattanLength: function () { return Math.abs(this.x) + Math.abs(this.y); }, normalize: function () { return this.divideScalar(this.length() || 1); }, angle: function () { var e = Math.atan2(this.y, this.x); return e < 0 && (e += 2 * Math.PI), e; }, distanceTo: function (e) { return Math.sqrt(this.distanceToSquared(e)); }, distanceToSquared: function (e) { var t = this.x - e.x, i = this.y - e.y; return t * t + i * i; }, manhattanDistanceTo: function (e) { return Math.abs(this.x - e.x) + Math.abs(this.y - e.y); }, setLength: function (e) { return this.normalize().multiplyScalar(e); }, lerp: function (e, t) { return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this; }, lerpVectors: function (e, t, i) { return this.subVectors(t, e).multiplyScalar(i).add(e); }, equals: function (e) { return e.x === this.x && e.y === this.y; }, fromArray: function (e, t) { return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this; }, toArray: function (e, t) { return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e; }, fromBufferAttribute: function (e, t, i) { return void 0 !== i && console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this; }, rotateAround: function (e, t) { var i = Math.cos(t), n = Math.sin(t), r = this.x - e.x, a = this.y - e.y; return this.x = r * i - a * n + e.x, this.y = r * n + a * i + e.y, this; }
    }), Object.assign(zt, {
    slerp: function (e, t, i, n) { return i.copy(e).slerp(t, n); }, slerpFlat: function (e, t, i, n, r, a, o) {
    var s = i[n + 0], l = i[n + 1], c = i[n + 2], u = i[n + 3], h = r[a + 0], d = r[a + 1], p = r[a + 2], f = r[a + 3]; if (u !== f || s !== h || l !== d || c !== p) {
        var m = 1 - o, v = s * h + l * d + c * p + u * f, g = v >= 0 ? 1 : -1, y = 1 - v * v;
        if (y > Number.EPSILON) {
            var b = Math.sqrt(y), x = Math.atan2(b, v * g);
            m = Math.sin(m * x) / b, o = Math.sin(o * x) / b;
        }
        var _ = o * g;
        if (s = s * m + h * _, l = l * m + d * _, c = c * m + p * _, u = u * m + f * _, m === 1 - o) {
            var w = 1 / Math.sqrt(s * s + l * l + c * c + u * u);
            s *= w, l *= w, c *= w, u *= w;
        }
    } e[t] = s, e[t + 1] = l, e[t + 2] = c, e[t + 3] = u;
    }
    }), Object.defineProperties(zt.prototype, { x: { get: function () { return this._x; }, set: function (e) { this._x = e, this._onChangeCallback(); } }, y: { get: function () { return this._y; }, set: function (e) { this._y = e, this._onChangeCallback(); } }, z: { get: function () { return this._z; }, set: function (e) { this._z = e, this._onChangeCallback(); } }, w: { get: function () { return this._w; }, set: function (e) { this._w = e, this._onChangeCallback(); } } }), Object.assign(zt.prototype, {
    isQuaternion: !0, set: function (e, t, i, n) { return this._x = e, this._y = t, this._z = i, this._w = n, this._onChangeCallback(), this; }, clone: function () { return new this.constructor(this._x, this._y, this._z, this._w); }, copy: function (e) { return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this._onChangeCallback(), this; }, setFromEuler: function (e, t) {
    if (!e || !e.isEuler)
        throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order."); var i = e._x, n = e._y, r = e._z, a = e.order, o = Math.cos, s = Math.sin, l = o(i / 2), c = o(n / 2), u = o(r / 2), h = s(i / 2), d = s(n / 2), p = s(r / 2); return "XYZ" === a ? (this._x = h * c * u + l * d * p, this._y = l * d * u - h * c * p, this._z = l * c * p + h * d * u, this._w = l * c * u - h * d * p) : "YXZ" === a ? (this._x = h * c * u + l * d * p, this._y = l * d * u - h * c * p, this._z = l * c * p - h * d * u, this._w = l * c * u + h * d * p) : "ZXY" === a ? (this._x = h * c * u - l * d * p, this._y = l * d * u + h * c * p, this._z = l * c * p + h * d * u, this._w = l * c * u - h * d * p) : "ZYX" === a ? (this._x = h * c * u - l * d * p, this._y = l * d * u + h * c * p, this._z = l * c * p - h * d * u, this._w = l * c * u + h * d * p) : "YZX" === a ? (this._x = h * c * u + l * d * p, this._y = l * d * u + h * c * p, this._z = l * c * p - h * d * u, this._w = l * c * u - h * d * p) : "XZY" === a && (this._x = h * c * u - l * d * p, this._y = l * d * u - h * c * p, this._z = l * c * p + h * d * u, this._w = l * c * u + h * d * p), !1 !== t && this._onChangeCallback(), this;
    }, setFromAxisAngle: function (e, t) { var i = t / 2, n = Math.sin(i); return this._x = e.x * n, this._y = e.y * n, this._z = e.z * n, this._w = Math.cos(i), this._onChangeCallback(), this; }, setFromRotationMatrix: function (e) { var t, i = e.elements, n = i[0], r = i[4], a = i[8], o = i[1], s = i[5], l = i[9], c = i[2], u = i[6], h = i[10], d = n + s + h; return d > 0 ? (t = .5 / Math.sqrt(d + 1), this._w = .25 / t, this._x = (u - l) * t, this._y = (a - c) * t, this._z = (o - r) * t) : n > s && n > h ? (t = 2 * Math.sqrt(1 + n - s - h), this._w = (u - l) / t, this._x = .25 * t, this._y = (r + o) / t, this._z = (a + c) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - n - h), this._w = (a - c) / t, this._x = (r + o) / t, this._y = .25 * t, this._z = (l + u) / t) : (t = 2 * Math.sqrt(1 + h - n - s), this._w = (o - r) / t, this._x = (a + c) / t, this._y = (l + u) / t, this._z = .25 * t), this._onChangeCallback(), this; }, setFromUnitVectors: function (e, t) { var i = e.dot(t) + 1; return i < 1e-6 ? (i = 0, Math.abs(e.x) > Math.abs(e.z) ? (this._x = -e.y, this._y = e.x, this._z = 0, this._w = i) : (this._x = 0, this._y = -e.z, this._z = e.y, this._w = i)) : (this._x = e.y * t.z - e.z * t.y, this._y = e.z * t.x - e.x * t.z, this._z = e.x * t.y - e.y * t.x, this._w = i), this.normalize(); }, angleTo: function (e) { return 2 * Math.acos(Math.abs(Ht.clamp(this.dot(e), -1, 1))); }, rotateTowards: function (e, t) {
    var i = this.angleTo(e); if (0 === i)
        return this; var n = Math.min(1, t / i); return this.slerp(e, n), this;
    }, inverse: function () { return this.conjugate(); }, conjugate: function () { return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this; }, dot: function (e) { return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w; }, lengthSq: function () { return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w; }, length: function () { return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w); }, normalize: function () { var e = this.length(); return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this._onChangeCallback(), this; }, multiply: function (e, t) { return void 0 !== t ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e); }, premultiply: function (e) { return this.multiplyQuaternions(e, this); }, multiplyQuaternions: function (e, t) { var i = e._x, n = e._y, r = e._z, a = e._w, o = t._x, s = t._y, l = t._z, c = t._w; return this._x = i * c + a * o + n * l - r * s, this._y = n * c + a * s + r * o - i * l, this._z = r * c + a * l + i * s - n * o, this._w = a * c - i * o - n * s - r * l, this._onChangeCallback(), this; }, slerp: function (e, t) {
    if (0 === t)
        return this; if (1 === t)
            return this.copy(e); var i = this._x, n = this._y, r = this._z, a = this._w, o = a * e._w + i * e._x + n * e._y + r * e._z; if (o < 0 ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, o = -o) : this.copy(e), o >= 1)
            return this._w = a, this._x = i, this._y = n, this._z = r, this; var s = 1 - o * o; if (s <= Number.EPSILON) {
                var l = 1 - t;
                return this._w = l * a + t * this._w, this._x = l * i + t * this._x, this._y = l * n + t * this._y, this._z = l * r + t * this._z, this.normalize(), this._onChangeCallback(), this;
            } var c = Math.sqrt(s), u = Math.atan2(c, o), h = Math.sin((1 - t) * u) / c, d = Math.sin(t * u) / c; return this._w = a * h + this._w * d, this._x = i * h + this._x * d, this._y = n * h + this._y * d, this._z = r * h + this._z * d, this._onChangeCallback(), this;
    }, equals: function (e) { return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w; }, fromArray: function (e, t) { return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this._onChangeCallback(), this; }, toArray: function (e, t) { return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e; }, _onChange: function (e) { return this._onChangeCallback = e, this; }, _onChangeCallback: function () { }
    });
    var Vt = new Wt, jt = new zt;
    function Wt(e, t, i) { this.x = e || 0, this.y = t || 0, this.z = i || 0; }
    Object.assign(Wt.prototype, {
    isVector3: !0, set: function (e, t, i) { return this.x = e, this.y = t, this.z = i, this; }, setScalar: function (e) { return this.x = e, this.y = e, this.z = e, this; }, setX: function (e) { return this.x = e, this; }, setY: function (e) { return this.y = e, this; }, setZ: function (e) { return this.z = e, this; }, setComponent: function (e, t) {
    switch (e) {
        case 0:
            this.x = t;
            break;
        case 1:
            this.y = t;
            break;
        case 2:
            this.z = t;
            break;
        default: throw new Error("index is out of range: " + e);
    } return this;
    }, getComponent: function (e) {
    switch (e) {
        case 0: return this.x;
        case 1: return this.y;
        case 2: return this.z;
        default: throw new Error("index is out of range: " + e);
    }
    }, clone: function () { return new this.constructor(this.x, this.y, this.z); }, copy: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this; }, add: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this); }, addScalar: function (e) { return this.x += e, this.y += e, this.z += e, this; }, addVectors: function (e, t) { return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this; }, addScaledVector: function (e, t) { return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this; }, sub: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this); }, subScalar: function (e) { return this.x -= e, this.y -= e, this.z -= e, this; }, subVectors: function (e, t) { return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this; }, multiply: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this); }, multiplyScalar: function (e) { return this.x *= e, this.y *= e, this.z *= e, this; }, multiplyVectors: function (e, t) { return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this; }, applyEuler: function (e) { return e && e.isEuler || console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), this.applyQuaternion(jt.setFromEuler(e)); }, applyAxisAngle: function (e, t) { return this.applyQuaternion(jt.setFromAxisAngle(e, t)); }, applyMatrix3: function (e) { var t = this.x, i = this.y, n = this.z, r = e.elements; return this.x = r[0] * t + r[3] * i + r[6] * n, this.y = r[1] * t + r[4] * i + r[7] * n, this.z = r[2] * t + r[5] * i + r[8] * n, this; }, applyNormalMatrix: function (e) { return this.applyMatrix3(e).normalize(); }, applyMatrix4: function (e) { var t = this.x, i = this.y, n = this.z, r = e.elements, a = 1 / (r[3] * t + r[7] * i + r[11] * n + r[15]); return this.x = (r[0] * t + r[4] * i + r[8] * n + r[12]) * a, this.y = (r[1] * t + r[5] * i + r[9] * n + r[13]) * a, this.z = (r[2] * t + r[6] * i + r[10] * n + r[14]) * a, this; }, applyQuaternion: function (e) { var t = this.x, i = this.y, n = this.z, r = e.x, a = e.y, o = e.z, s = e.w, l = s * t + a * n - o * i, c = s * i + o * t - r * n, u = s * n + r * i - a * t, h = -r * t - a * i - o * n; return this.x = l * s + h * -r + c * -o - u * -a, this.y = c * s + h * -a + u * -r - l * -o, this.z = u * s + h * -o + l * -a - c * -r, this; }, project: function (e) { return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix); }, unproject: function (e) { return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld); }, transformDirection: function (e) { var t = this.x, i = this.y, n = this.z, r = e.elements; return this.x = r[0] * t + r[4] * i + r[8] * n, this.y = r[1] * t + r[5] * i + r[9] * n, this.z = r[2] * t + r[6] * i + r[10] * n, this.normalize(); }, divide: function (e) { return this.x /= e.x, this.y /= e.y, this.z /= e.z, this; }, divideScalar: function (e) { return this.multiplyScalar(1 / e); }, min: function (e) { return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this; }, max: function (e) { return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this; }, clamp: function (e, t) { return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this; }, clampScalar: function (e, t) { return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this.z = Math.max(e, Math.min(t, this.z)), this; }, clampLength: function (e, t) { var i = this.length(); return this.divideScalar(i || 1).multiplyScalar(Math.max(e, Math.min(t, i))); }, floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this; }, ceil: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this; }, round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this; }, roundToZero: function () { return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this; }, negate: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this; }, dot: function (e) { return this.x * e.x + this.y * e.y + this.z * e.z; }, lengthSq: function () { return this.x * this.x + this.y * this.y + this.z * this.z; }, length: function () { return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z); }, manhattanLength: function () { return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z); }, normalize: function () { return this.divideScalar(this.length() || 1); }, setLength: function (e) { return this.normalize().multiplyScalar(e); }, lerp: function (e, t) { return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this; }, lerpVectors: function (e, t, i) { return this.subVectors(t, e).multiplyScalar(i).add(e); }, cross: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t)) : this.crossVectors(this, e); }, crossVectors: function (e, t) { var i = e.x, n = e.y, r = e.z, a = t.x, o = t.y, s = t.z; return this.x = n * s - r * o, this.y = r * a - i * s, this.z = i * o - n * a, this; }, projectOnVector: function (e) { var t = e.dot(this) / e.lengthSq(); return this.copy(e).multiplyScalar(t); }, projectOnPlane: function (e) { return Vt.copy(this).projectOnVector(e), this.sub(Vt); }, reflect: function (e) { return this.sub(Vt.copy(e).multiplyScalar(2 * this.dot(e))); }, angleTo: function (e) { var t = Math.sqrt(this.lengthSq() * e.lengthSq()); 0 === t && console.error("THREE.Vector3: angleTo() can't handle zero length vectors."); var i = this.dot(e) / t; return Math.acos(Ht.clamp(i, -1, 1)); }, distanceTo: function (e) { return Math.sqrt(this.distanceToSquared(e)); }, distanceToSquared: function (e) { var t = this.x - e.x, i = this.y - e.y, n = this.z - e.z; return t * t + i * i + n * n; }, manhattanDistanceTo: function (e) { return Math.abs(this.x - e.x) + Math.abs(this.y - e.y) + Math.abs(this.z - e.z); }, setFromSpherical: function (e) { return this.setFromSphericalCoords(e.radius, e.phi, e.theta); }, setFromSphericalCoords: function (e, t, i) { var n = Math.sin(t) * e; return this.x = n * Math.sin(i), this.y = Math.cos(t) * e, this.z = n * Math.cos(i), this; }, setFromCylindrical: function (e) { return this.setFromCylindricalCoords(e.radius, e.theta, e.y); }, setFromCylindricalCoords: function (e, t, i) { return this.x = e * Math.sin(t), this.y = i, this.z = e * Math.cos(t), this; }, setFromMatrixPosition: function (e) { var t = e.elements; return this.x = t[12], this.y = t[13], this.z = t[14], this; }, setFromMatrixScale: function (e) { var t = this.setFromMatrixColumn(e, 0).length(), i = this.setFromMatrixColumn(e, 1).length(), n = this.setFromMatrixColumn(e, 2).length(); return this.x = t, this.y = i, this.z = n, this; }, setFromMatrixColumn: function (e, t) { return this.fromArray(e.elements, 4 * t); }, equals: function (e) { return e.x === this.x && e.y === this.y && e.z === this.z; }, fromArray: function (e, t) { return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this; }, toArray: function (e, t) { return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e; }, fromBufferAttribute: function (e, t, i) { return void 0 !== i && console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this; }
    });
    var Xt, Yt = new Wt;
    function Qt() { this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1], arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead."); }
    Object.assign(Qt.prototype, {
    isMatrix3: !0, set: function (e, t, i, n, r, a, o, s, l) { var c = this.elements; return c[0] = e, c[1] = n, c[2] = o, c[3] = t, c[4] = r, c[5] = s, c[6] = i, c[7] = a, c[8] = l, this; }, identity: function () { return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this; }, clone: function () { return (new this.constructor).fromArray(this.elements); }, copy: function (e) { var t = this.elements, i = e.elements; return t[0] = i[0], t[1] = i[1], t[2] = i[2], t[3] = i[3], t[4] = i[4], t[5] = i[5], t[6] = i[6], t[7] = i[7], t[8] = i[8], this; }, setFromMatrix4: function (e) { var t = e.elements; return this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]), this; }, applyToBufferAttribute: function (e) {
    for (var t = 0, i = e.count; t < i; t++)
        Yt.x = e.getX(t), Yt.y = e.getY(t), Yt.z = e.getZ(t), Yt.applyMatrix3(this), e.setXYZ(t, Yt.x, Yt.y, Yt.z); return e;
    }, multiply: function (e) { return this.multiplyMatrices(this, e); }, premultiply: function (e) { return this.multiplyMatrices(e, this); }, multiplyMatrices: function (e, t) { var i = e.elements, n = t.elements, r = this.elements, a = i[0], o = i[3], s = i[6], l = i[1], c = i[4], u = i[7], h = i[2], d = i[5], p = i[8], f = n[0], m = n[3], v = n[6], g = n[1], y = n[4], b = n[7], x = n[2], _ = n[5], w = n[8]; return r[0] = a * f + o * g + s * x, r[3] = a * m + o * y + s * _, r[6] = a * v + o * b + s * w, r[1] = l * f + c * g + u * x, r[4] = l * m + c * y + u * _, r[7] = l * v + c * b + u * w, r[2] = h * f + d * g + p * x, r[5] = h * m + d * y + p * _, r[8] = h * v + d * b + p * w, this; }, multiplyScalar: function (e) { var t = this.elements; return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this; }, determinant: function () { var e = this.elements, t = e[0], i = e[1], n = e[2], r = e[3], a = e[4], o = e[5], s = e[6], l = e[7], c = e[8]; return t * a * c - t * o * l - i * r * c + i * o * s + n * r * l - n * a * s; }, getInverse: function (e, t) {
    e && e.isMatrix4 && console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument."); var i = e.elements, n = this.elements, r = i[0], a = i[1], o = i[2], s = i[3], l = i[4], c = i[5], u = i[6], h = i[7], d = i[8], p = d * l - c * h, f = c * u - d * s, m = h * s - l * u, v = r * p + a * f + o * m; if (0 === v) {
        var g = "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";
        if (!0 === t)
            throw new Error(g);
        return console.warn(g), this.identity();
    } var y = 1 / v; return n[0] = p * y, n[1] = (o * h - d * a) * y, n[2] = (c * a - o * l) * y, n[3] = f * y, n[4] = (d * r - o * u) * y, n[5] = (o * s - c * r) * y, n[6] = m * y, n[7] = (a * u - h * r) * y, n[8] = (l * r - a * s) * y, this;
    }, transpose: function () { var e, t = this.elements; return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this; }, getNormalMatrix: function (e) { return this.setFromMatrix4(e).getInverse(this).transpose(); }, transposeIntoArray: function (e) { var t = this.elements; return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this; }, setUvTransform: function (e, t, i, n, r, a, o) { var s = Math.cos(r), l = Math.sin(r); this.set(i * s, i * l, -i * (s * a + l * o) + a + e, -n * l, n * s, -n * (-l * a + s * o) + o + t, 0, 0, 1); }, scale: function (e, t) { var i = this.elements; return i[0] *= e, i[3] *= e, i[6] *= e, i[1] *= t, i[4] *= t, i[7] *= t, this; }, rotate: function (e) { var t = Math.cos(e), i = Math.sin(e), n = this.elements, r = n[0], a = n[3], o = n[6], s = n[1], l = n[4], c = n[7]; return n[0] = t * r + i * s, n[3] = t * a + i * l, n[6] = t * o + i * c, n[1] = -i * r + t * s, n[4] = -i * a + t * l, n[7] = -i * o + t * c, this; }, translate: function (e, t) { var i = this.elements; return i[0] += e * i[2], i[3] += e * i[5], i[6] += e * i[8], i[1] += t * i[2], i[4] += t * i[5], i[7] += t * i[8], this; }, equals: function (e) {
    for (var t = this.elements, i = e.elements, n = 0; n < 9; n++)
        if (t[n] !== i[n])
            return !1; return !0;
    }, fromArray: function (e, t) {
    void 0 === t && (t = 0); for (var i = 0; i < 9; i++)
        this.elements[i] = e[i + t]; return this;
    }, toArray: function (e, t) { void 0 === e && (e = []), void 0 === t && (t = 0); var i = this.elements; return e[t] = i[0], e[t + 1] = i[1], e[t + 2] = i[2], e[t + 3] = i[3], e[t + 4] = i[4], e[t + 5] = i[5], e[t + 6] = i[6], e[t + 7] = i[7], e[t + 8] = i[8], e; }
    });
    var qt = {
    getDataURL: function (e) {
    var t; if ("undefined" == typeof HTMLCanvasElement)
        return e.src; if (e instanceof HTMLCanvasElement)
            t = e;
        else {
            void 0 === Xt && (Xt = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")), Xt.width = e.width, Xt.height = e.height;
            var i = Xt.getContext("2d");
            e instanceof ImageData ? i.putImageData(e, 0, 0) : i.drawImage(e, 0, 0, e.width, e.height), t = Xt;
        } return t.width > 2048 || t.height > 2048 ? t.toDataURL("image/jpeg", .6) : t.toDataURL("image/png");
    }
    }, $t = 0;
    function Zt(e, t, i, n, r, a, o, s, l, c) { Object.defineProperty(this, "id", { value: $t++ }), this.uuid = Ht.generateUUID(), this.name = "", this.image = void 0 !== e ? e : Zt.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== t ? t : Zt.DEFAULT_MAPPING, this.wrapS = void 0 !== i ? i : xe, this.wrapT = void 0 !== n ? n : xe, this.magFilter = void 0 !== r ? r : Ae, this.minFilter = void 0 !== a ? a : Ee, this.anisotropy = void 0 !== l ? l : 1, this.format = void 0 !== o ? o : ze, this.type = void 0 !== s ? s : Pe, this.offset = new Ut(0, 0), this.repeat = new Ut(1, 1), this.center = new Ut(0, 0), this.rotation = 0, this.matrixAutoUpdate = !0, this.matrix = new Qt, this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.encoding = void 0 !== c ? c : wt, this.version = 0, this.onUpdate = null; }
    function Kt(e, t, i, n) { this.x = e || 0, this.y = t || 0, this.z = i || 0, this.w = void 0 !== n ? n : 1; }
    function Jt(e, t, i) { this.width = e, this.height = t, this.scissor = new Kt(0, 0, e, t), this.scissorTest = !1, this.viewport = new Kt(0, 0, e, t), i = i || {}, this.texture = new Zt(void 0, void 0, i.wrapS, i.wrapT, i.magFilter, i.minFilter, i.format, i.type, i.anisotropy, i.encoding), this.texture.image = {}, this.texture.image.width = e, this.texture.image.height = t, this.texture.generateMipmaps = void 0 !== i.generateMipmaps && i.generateMipmaps, this.texture.minFilter = void 0 !== i.minFilter ? i.minFilter : Ae, this.depthBuffer = void 0 === i.depthBuffer || i.depthBuffer, this.stencilBuffer = void 0 === i.stencilBuffer || i.stencilBuffer, this.depthTexture = void 0 !== i.depthTexture ? i.depthTexture : null; }
    function ei(e, t, i) { Jt.call(this, e, t, i), this.samples = 4; }
    Zt.DEFAULT_IMAGE = void 0, Zt.DEFAULT_MAPPING = 300, Zt.prototype = Object.assign(Object.create(Nt.prototype), {
    constructor: Zt, isTexture: !0, updateMatrix: function () { this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y); }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.name = e.name, this.image = e.image, this.mipmaps = e.mipmaps.slice(0), this.mapping = e.mapping, this.wrapS = e.wrapS, this.wrapT = e.wrapT, this.magFilter = e.magFilter, this.minFilter = e.minFilter, this.anisotropy = e.anisotropy, this.format = e.format, this.type = e.type, this.offset.copy(e.offset), this.repeat.copy(e.repeat), this.center.copy(e.center), this.rotation = e.rotation, this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrix.copy(e.matrix), this.generateMipmaps = e.generateMipmaps, this.premultiplyAlpha = e.premultiplyAlpha, this.flipY = e.flipY, this.unpackAlignment = e.unpackAlignment, this.encoding = e.encoding, this; }, toJSON: function (e) {
    var t = void 0 === e || "string" == typeof e; if (!t && void 0 !== e.textures[this.uuid])
        return e.textures[this.uuid]; var i = { metadata: { version: 4.5, type: "Texture", generator: "Texture.toJSON" }, uuid: this.uuid, name: this.name, mapping: this.mapping, repeat: [this.repeat.x, this.repeat.y], offset: [this.offset.x, this.offset.y], center: [this.center.x, this.center.y], rotation: this.rotation, wrap: [this.wrapS, this.wrapT], format: this.format, type: this.type, encoding: this.encoding, minFilter: this.minFilter, magFilter: this.magFilter, anisotropy: this.anisotropy, flipY: this.flipY, premultiplyAlpha: this.premultiplyAlpha, unpackAlignment: this.unpackAlignment }; if (void 0 !== this.image) {
            var n = this.image;
            if (void 0 === n.uuid && (n.uuid = Ht.generateUUID()), !t && void 0 === e.images[n.uuid]) {
                var r;
                if (Array.isArray(n)) {
                    r = [];
                    for (var a = 0, o = n.length; a < o; a++)
                        r.push(qt.getDataURL(n[a]));
                }
                else
                    r = qt.getDataURL(n);
                e.images[n.uuid] = { uuid: n.uuid, url: r };
            }
            i.image = n.uuid;
        } return t || (e.textures[this.uuid] = i), i;
    }, dispose: function () { this.dispatchEvent({ type: "dispose" }); }, transformUv: function (e) {
    if (300 !== this.mapping)
        return e; if (e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1)
            switch (this.wrapS) {
                case be:
                    e.x = e.x - Math.floor(e.x);
                    break;
                case xe:
                    e.x = e.x < 0 ? 0 : 1;
                    break;
                case _e: 1 === Math.abs(Math.floor(e.x) % 2) ? e.x = Math.ceil(e.x) - e.x : e.x = e.x - Math.floor(e.x);
            } if (e.y < 0 || e.y > 1)
            switch (this.wrapT) {
                case be:
                    e.y = e.y - Math.floor(e.y);
                    break;
                case xe:
                    e.y = e.y < 0 ? 0 : 1;
                    break;
                case _e: 1 === Math.abs(Math.floor(e.y) % 2) ? e.y = Math.ceil(e.y) - e.y : e.y = e.y - Math.floor(e.y);
            } return this.flipY && (e.y = 1 - e.y), e;
    }
    }), Object.defineProperty(Zt.prototype, "needsUpdate", { set: function (e) { !0 === e && this.version++; } }), Object.defineProperties(Kt.prototype, { width: { get: function () { return this.z; }, set: function (e) { this.z = e; } }, height: { get: function () { return this.w; }, set: function (e) { this.w = e; } } }), Object.assign(Kt.prototype, {
    isVector4: !0, set: function (e, t, i, n) { return this.x = e, this.y = t, this.z = i, this.w = n, this; }, setScalar: function (e) { return this.x = e, this.y = e, this.z = e, this.w = e, this; }, setX: function (e) { return this.x = e, this; }, setY: function (e) { return this.y = e, this; }, setZ: function (e) { return this.z = e, this; }, setW: function (e) { return this.w = e, this; }, setComponent: function (e, t) {
    switch (e) {
        case 0:
            this.x = t;
            break;
        case 1:
            this.y = t;
            break;
        case 2:
            this.z = t;
            break;
        case 3:
            this.w = t;
            break;
        default: throw new Error("index is out of range: " + e);
    } return this;
    }, getComponent: function (e) {
    switch (e) {
        case 0: return this.x;
        case 1: return this.y;
        case 2: return this.z;
        case 3: return this.w;
        default: throw new Error("index is out of range: " + e);
    }
    }, clone: function () { return new this.constructor(this.x, this.y, this.z, this.w); }, copy: function (e) { return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this; }, add: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this); }, addScalar: function (e) { return this.x += e, this.y += e, this.z += e, this.w += e, this; }, addVectors: function (e, t) { return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this; }, addScaledVector: function (e, t) { return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this.w += e.w * t, this; }, sub: function (e, t) { return void 0 !== t ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this); }, subScalar: function (e) { return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this; }, subVectors: function (e, t) { return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this; }, multiplyScalar: function (e) { return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this; }, applyMatrix4: function (e) { var t = this.x, i = this.y, n = this.z, r = this.w, a = e.elements; return this.x = a[0] * t + a[4] * i + a[8] * n + a[12] * r, this.y = a[1] * t + a[5] * i + a[9] * n + a[13] * r, this.z = a[2] * t + a[6] * i + a[10] * n + a[14] * r, this.w = a[3] * t + a[7] * i + a[11] * n + a[15] * r, this; }, divideScalar: function (e) { return this.multiplyScalar(1 / e); }, setAxisAngleFromQuaternion: function (e) { this.w = 2 * Math.acos(e.w); var t = Math.sqrt(1 - e.w * e.w); return t < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this; }, setAxisAngleFromRotationMatrix: function (e) {
    var t, i, n, r, a = e.elements, o = a[0], s = a[4], l = a[8], c = a[1], u = a[5], h = a[9], d = a[2], p = a[6], f = a[10]; if (Math.abs(s - c) < .01 && Math.abs(l - d) < .01 && Math.abs(h - p) < .01) {
        if (Math.abs(s + c) < .1 && Math.abs(l + d) < .1 && Math.abs(h + p) < .1 && Math.abs(o + u + f - 3) < .1)
            return this.set(1, 0, 0, 0), this;
        t = Math.PI;
        var m = (o + 1) / 2, v = (u + 1) / 2, g = (f + 1) / 2, y = (s + c) / 4, b = (l + d) / 4, x = (h + p) / 4;
        return m > v && m > g ? m < .01 ? (i = 0, n = .707106781, r = .707106781) : (n = y / (i = Math.sqrt(m)), r = b / i) : v > g ? v < .01 ? (i = .707106781, n = 0, r = .707106781) : (i = y / (n = Math.sqrt(v)), r = x / n) : g < .01 ? (i = .707106781, n = .707106781, r = 0) : (i = b / (r = Math.sqrt(g)), n = x / r), this.set(i, n, r, t), this;
    } var _ = Math.sqrt((p - h) * (p - h) + (l - d) * (l - d) + (c - s) * (c - s)); return Math.abs(_) < .001 && (_ = 1), this.x = (p - h) / _, this.y = (l - d) / _, this.z = (c - s) / _, this.w = Math.acos((o + u + f - 1) / 2), this;
    }, min: function (e) { return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this.w = Math.min(this.w, e.w), this; }, max: function (e) { return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this.w = Math.max(this.w, e.w), this; }, clamp: function (e, t) { return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this.w = Math.max(e.w, Math.min(t.w, this.w)), this; }, clampScalar: function (e, t) { return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this.z = Math.max(e, Math.min(t, this.z)), this.w = Math.max(e, Math.min(t, this.w)), this; }, clampLength: function (e, t) { var i = this.length(); return this.divideScalar(i || 1).multiplyScalar(Math.max(e, Math.min(t, i))); }, floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this; }, ceil: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this; }, round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this; }, roundToZero: function () { return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this; }, negate: function () { return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this; }, dot: function (e) { return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w; }, lengthSq: function () { return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w; }, length: function () { return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w); }, manhattanLength: function () { return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w); }, normalize: function () { return this.divideScalar(this.length() || 1); }, setLength: function (e) { return this.normalize().multiplyScalar(e); }, lerp: function (e, t) { return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this; }, lerpVectors: function (e, t, i) { return this.subVectors(t, e).multiplyScalar(i).add(e); }, equals: function (e) { return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w; }, fromArray: function (e, t) { return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this; }, toArray: function (e, t) { return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e; }, fromBufferAttribute: function (e, t, i) { return void 0 !== i && console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this.w = e.getW(t), this; }
    }), Jt.prototype = Object.assign(Object.create(Nt.prototype), { constructor: Jt, isWebGLRenderTarget: !0, setSize: function (e, t) { this.width === e && this.height === t || (this.width = e, this.height = t, this.texture.image.width = e, this.texture.image.height = t, this.dispose()), this.viewport.set(0, 0, e, t), this.scissor.set(0, 0, e, t); }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.width = e.width, this.height = e.height, this.viewport.copy(e.viewport), this.texture = e.texture.clone(), this.depthBuffer = e.depthBuffer, this.stencilBuffer = e.stencilBuffer, this.depthTexture = e.depthTexture, this; }, dispose: function () { this.dispatchEvent({ type: "dispose" }); } }), ei.prototype = Object.assign(Object.create(Jt.prototype), { constructor: ei, isWebGLMultisampleRenderTarget: !0, copy: function (e) { return Jt.prototype.copy.call(this, e), this.samples = e.samples, this; } });
    var ti = new Wt, ii = new li, ni = new Wt(0, 0, 0), ri = new Wt(1, 1, 1), ai = new Wt, oi = new Wt, si = new Wt;
    function li() { this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead."); }
    Object.assign(li.prototype, {
    isMatrix4: !0, set: function (e, t, i, n, r, a, o, s, l, c, u, h, d, p, f, m) { var v = this.elements; return v[0] = e, v[4] = t, v[8] = i, v[12] = n, v[1] = r, v[5] = a, v[9] = o, v[13] = s, v[2] = l, v[6] = c, v[10] = u, v[14] = h, v[3] = d, v[7] = p, v[11] = f, v[15] = m, this; }, identity: function () { return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this; }, clone: function () { return (new li).fromArray(this.elements); }, copy: function (e) { var t = this.elements, i = e.elements; return t[0] = i[0], t[1] = i[1], t[2] = i[2], t[3] = i[3], t[4] = i[4], t[5] = i[5], t[6] = i[6], t[7] = i[7], t[8] = i[8], t[9] = i[9], t[10] = i[10], t[11] = i[11], t[12] = i[12], t[13] = i[13], t[14] = i[14], t[15] = i[15], this; }, copyPosition: function (e) { var t = this.elements, i = e.elements; return t[12] = i[12], t[13] = i[13], t[14] = i[14], this; }, extractBasis: function (e, t, i) { return e.setFromMatrixColumn(this, 0), t.setFromMatrixColumn(this, 1), i.setFromMatrixColumn(this, 2), this; }, makeBasis: function (e, t, i) { return this.set(e.x, t.x, i.x, 0, e.y, t.y, i.y, 0, e.z, t.z, i.z, 0, 0, 0, 0, 1), this; }, extractRotation: function (e) { var t = this.elements, i = e.elements, n = 1 / ti.setFromMatrixColumn(e, 0).length(), r = 1 / ti.setFromMatrixColumn(e, 1).length(), a = 1 / ti.setFromMatrixColumn(e, 2).length(); return t[0] = i[0] * n, t[1] = i[1] * n, t[2] = i[2] * n, t[3] = 0, t[4] = i[4] * r, t[5] = i[5] * r, t[6] = i[6] * r, t[7] = 0, t[8] = i[8] * a, t[9] = i[9] * a, t[10] = i[10] * a, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this; }, makeRotationFromEuler: function (e) {
    e && e.isEuler || console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order."); var t = this.elements, i = e.x, n = e.y, r = e.z, a = Math.cos(i), o = Math.sin(i), s = Math.cos(n), l = Math.sin(n), c = Math.cos(r), u = Math.sin(r); if ("XYZ" === e.order) {
        var h = a * c, d = a * u, p = o * c, f = o * u;
        t[0] = s * c, t[4] = -s * u, t[8] = l, t[1] = d + p * l, t[5] = h - f * l, t[9] = -o * s, t[2] = f - h * l, t[6] = p + d * l, t[10] = a * s;
    }
    else if ("YXZ" === e.order) {
        var m = s * c, v = s * u, g = l * c, y = l * u;
        t[0] = m + y * o, t[4] = g * o - v, t[8] = a * l, t[1] = a * u, t[5] = a * c, t[9] = -o, t[2] = v * o - g, t[6] = y + m * o, t[10] = a * s;
    }
    else if ("ZXY" === e.order) {
        m = s * c, v = s * u, g = l * c, y = l * u;
        t[0] = m - y * o, t[4] = -a * u, t[8] = g + v * o, t[1] = v + g * o, t[5] = a * c, t[9] = y - m * o, t[2] = -a * l, t[6] = o, t[10] = a * s;
    }
    else if ("ZYX" === e.order) {
        h = a * c, d = a * u, p = o * c, f = o * u;
        t[0] = s * c, t[4] = p * l - d, t[8] = h * l + f, t[1] = s * u, t[5] = f * l + h, t[9] = d * l - p, t[2] = -l, t[6] = o * s, t[10] = a * s;
    }
    else if ("YZX" === e.order) {
        var b = a * s, x = a * l, _ = o * s, w = o * l;
        t[0] = s * c, t[4] = w - b * u, t[8] = _ * u + x, t[1] = u, t[5] = a * c, t[9] = -o * c, t[2] = -l * c, t[6] = x * u + _, t[10] = b - w * u;
    }
    else if ("XZY" === e.order) {
        b = a * s, x = a * l, _ = o * s, w = o * l;
        t[0] = s * c, t[4] = -u, t[8] = l * c, t[1] = b * u + w, t[5] = a * c, t[9] = x * u - _, t[2] = _ * u - x, t[6] = o * c, t[10] = w * u + b;
    } return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this;
    }, makeRotationFromQuaternion: function (e) { return this.compose(ni, e, ri); }, lookAt: function (e, t, i) { var n = this.elements; return si.subVectors(e, t), 0 === si.lengthSq() && (si.z = 1), si.normalize(), ai.crossVectors(i, si), 0 === ai.lengthSq() && (1 === Math.abs(i.z) ? si.x += 1e-4 : si.z += 1e-4, si.normalize(), ai.crossVectors(i, si)), ai.normalize(), oi.crossVectors(si, ai), n[0] = ai.x, n[4] = oi.x, n[8] = si.x, n[1] = ai.y, n[5] = oi.y, n[9] = si.y, n[2] = ai.z, n[6] = oi.z, n[10] = si.z, this; }, multiply: function (e, t) { return void 0 !== t ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e); }, premultiply: function (e) { return this.multiplyMatrices(e, this); }, multiplyMatrices: function (e, t) { var i = e.elements, n = t.elements, r = this.elements, a = i[0], o = i[4], s = i[8], l = i[12], c = i[1], u = i[5], h = i[9], d = i[13], p = i[2], f = i[6], m = i[10], v = i[14], g = i[3], y = i[7], b = i[11], x = i[15], _ = n[0], w = n[4], T = n[8], M = n[12], A = n[1], S = n[5], E = n[9], P = n[13], C = n[2], L = n[6], R = n[10], I = n[14], O = n[3], D = n[7], F = n[11], k = n[15]; return r[0] = a * _ + o * A + s * C + l * O, r[4] = a * w + o * S + s * L + l * D, r[8] = a * T + o * E + s * R + l * F, r[12] = a * M + o * P + s * I + l * k, r[1] = c * _ + u * A + h * C + d * O, r[5] = c * w + u * S + h * L + d * D, r[9] = c * T + u * E + h * R + d * F, r[13] = c * M + u * P + h * I + d * k, r[2] = p * _ + f * A + m * C + v * O, r[6] = p * w + f * S + m * L + v * D, r[10] = p * T + f * E + m * R + v * F, r[14] = p * M + f * P + m * I + v * k, r[3] = g * _ + y * A + b * C + x * O, r[7] = g * w + y * S + b * L + x * D, r[11] = g * T + y * E + b * R + x * F, r[15] = g * M + y * P + b * I + x * k, this; }, multiplyScalar: function (e) { var t = this.elements; return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this; }, applyToBufferAttribute: function (e) {
    for (var t = 0, i = e.count; t < i; t++)
        ti.x = e.getX(t), ti.y = e.getY(t), ti.z = e.getZ(t), ti.applyMatrix4(this), e.setXYZ(t, ti.x, ti.y, ti.z); return e;
    }, determinant: function () { var e = this.elements, t = e[0], i = e[4], n = e[8], r = e[12], a = e[1], o = e[5], s = e[9], l = e[13], c = e[2], u = e[6], h = e[10], d = e[14]; return e[3] * (+r * s * u - n * l * u - r * o * h + i * l * h + n * o * d - i * s * d) + e[7] * (+t * s * d - t * l * h + r * a * h - n * a * d + n * l * c - r * s * c) + e[11] * (+t * l * u - t * o * d - r * a * u + i * a * d + r * o * c - i * l * c) + e[15] * (-n * o * c - t * s * u + t * o * h + n * a * u - i * a * h + i * s * c); }, transpose: function () { var e, t = this.elements; return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this; }, setPosition: function (e, t, i) { var n = this.elements; return e.isVector3 ? (n[12] = e.x, n[13] = e.y, n[14] = e.z) : (n[12] = e, n[13] = t, n[14] = i), this; }, getInverse: function (e, t) {
    var i = this.elements, n = e.elements, r = n[0], a = n[1], o = n[2], s = n[3], l = n[4], c = n[5], u = n[6], h = n[7], d = n[8], p = n[9], f = n[10], m = n[11], v = n[12], g = n[13], y = n[14], b = n[15], x = p * y * h - g * f * h + g * u * m - c * y * m - p * u * b + c * f * b, _ = v * f * h - d * y * h - v * u * m + l * y * m + d * u * b - l * f * b, w = d * g * h - v * p * h + v * c * m - l * g * m - d * c * b + l * p * b, T = v * p * u - d * g * u - v * c * f + l * g * f + d * c * y - l * p * y, M = r * x + a * _ + o * w + s * T; if (0 === M) {
        var A = "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";
        if (!0 === t)
            throw new Error(A);
        return console.warn(A), this.identity();
    } var S = 1 / M; return i[0] = x * S, i[1] = (g * f * s - p * y * s - g * o * m + a * y * m + p * o * b - a * f * b) * S, i[2] = (c * y * s - g * u * s + g * o * h - a * y * h - c * o * b + a * u * b) * S, i[3] = (p * u * s - c * f * s - p * o * h + a * f * h + c * o * m - a * u * m) * S, i[4] = _ * S, i[5] = (d * y * s - v * f * s + v * o * m - r * y * m - d * o * b + r * f * b) * S, i[6] = (v * u * s - l * y * s - v * o * h + r * y * h + l * o * b - r * u * b) * S, i[7] = (l * f * s - d * u * s + d * o * h - r * f * h - l * o * m + r * u * m) * S, i[8] = w * S, i[9] = (v * p * s - d * g * s - v * a * m + r * g * m + d * a * b - r * p * b) * S, i[10] = (l * g * s - v * c * s + v * a * h - r * g * h - l * a * b + r * c * b) * S, i[11] = (d * c * s - l * p * s - d * a * h + r * p * h + l * a * m - r * c * m) * S, i[12] = T * S, i[13] = (d * g * o - v * p * o + v * a * f - r * g * f - d * a * y + r * p * y) * S, i[14] = (v * c * o - l * g * o - v * a * u + r * g * u + l * a * y - r * c * y) * S, i[15] = (l * p * o - d * c * o + d * a * u - r * p * u - l * a * f + r * c * f) * S, this;
    }, scale: function (e) { var t = this.elements, i = e.x, n = e.y, r = e.z; return t[0] *= i, t[4] *= n, t[8] *= r, t[1] *= i, t[5] *= n, t[9] *= r, t[2] *= i, t[6] *= n, t[10] *= r, t[3] *= i, t[7] *= n, t[11] *= r, this; }, getMaxScaleOnAxis: function () { var e = this.elements, t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2], i = e[4] * e[4] + e[5] * e[5] + e[6] * e[6], n = e[8] * e[8] + e[9] * e[9] + e[10] * e[10]; return Math.sqrt(Math.max(t, i, n)); }, makeTranslation: function (e, t, i) { return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, i, 0, 0, 0, 1), this; }, makeRotationX: function (e) { var t = Math.cos(e), i = Math.sin(e); return this.set(1, 0, 0, 0, 0, t, -i, 0, 0, i, t, 0, 0, 0, 0, 1), this; }, makeRotationY: function (e) { var t = Math.cos(e), i = Math.sin(e); return this.set(t, 0, i, 0, 0, 1, 0, 0, -i, 0, t, 0, 0, 0, 0, 1), this; }, makeRotationZ: function (e) { var t = Math.cos(e), i = Math.sin(e); return this.set(t, -i, 0, 0, i, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this; }, makeRotationAxis: function (e, t) { var i = Math.cos(t), n = Math.sin(t), r = 1 - i, a = e.x, o = e.y, s = e.z, l = r * a, c = r * o; return this.set(l * a + i, l * o - n * s, l * s + n * o, 0, l * o + n * s, c * o + i, c * s - n * a, 0, l * s - n * o, c * s + n * a, r * s * s + i, 0, 0, 0, 0, 1), this; }, makeScale: function (e, t, i) { return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, i, 0, 0, 0, 0, 1), this; }, makeShear: function (e, t, i) { return this.set(1, t, i, 0, e, 1, i, 0, e, t, 1, 0, 0, 0, 0, 1), this; }, compose: function (e, t, i) { var n = this.elements, r = t._x, a = t._y, o = t._z, s = t._w, l = r + r, c = a + a, u = o + o, h = r * l, d = r * c, p = r * u, f = a * c, m = a * u, v = o * u, g = s * l, y = s * c, b = s * u, x = i.x, _ = i.y, w = i.z; return n[0] = (1 - (f + v)) * x, n[1] = (d + b) * x, n[2] = (p - y) * x, n[3] = 0, n[4] = (d - b) * _, n[5] = (1 - (h + v)) * _, n[6] = (m + g) * _, n[7] = 0, n[8] = (p + y) * w, n[9] = (m - g) * w, n[10] = (1 - (h + f)) * w, n[11] = 0, n[12] = e.x, n[13] = e.y, n[14] = e.z, n[15] = 1, this; }, decompose: function (e, t, i) { var n = this.elements, r = ti.set(n[0], n[1], n[2]).length(), a = ti.set(n[4], n[5], n[6]).length(), o = ti.set(n[8], n[9], n[10]).length(); this.determinant() < 0 && (r = -r), e.x = n[12], e.y = n[13], e.z = n[14], ii.copy(this); var s = 1 / r, l = 1 / a, c = 1 / o; return ii.elements[0] *= s, ii.elements[1] *= s, ii.elements[2] *= s, ii.elements[4] *= l, ii.elements[5] *= l, ii.elements[6] *= l, ii.elements[8] *= c, ii.elements[9] *= c, ii.elements[10] *= c, t.setFromRotationMatrix(ii), i.x = r, i.y = a, i.z = o, this; }, makePerspective: function (e, t, i, n, r, a) { void 0 === a && console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs."); var o = this.elements, s = 2 * r / (t - e), l = 2 * r / (i - n), c = (t + e) / (t - e), u = (i + n) / (i - n), h = -(a + r) / (a - r), d = -2 * a * r / (a - r); return o[0] = s, o[4] = 0, o[8] = c, o[12] = 0, o[1] = 0, o[5] = l, o[9] = u, o[13] = 0, o[2] = 0, o[6] = 0, o[10] = h, o[14] = d, o[3] = 0, o[7] = 0, o[11] = -1, o[15] = 0, this; }, makeOrthographic: function (e, t, i, n, r, a) { var o = this.elements, s = 1 / (t - e), l = 1 / (i - n), c = 1 / (a - r), u = (t + e) * s, h = (i + n) * l, d = (a + r) * c; return o[0] = 2 * s, o[4] = 0, o[8] = 0, o[12] = -u, o[1] = 0, o[5] = 2 * l, o[9] = 0, o[13] = -h, o[2] = 0, o[6] = 0, o[10] = -2 * c, o[14] = -d, o[3] = 0, o[7] = 0, o[11] = 0, o[15] = 1, this; }, equals: function (e) {
    for (var t = this.elements, i = e.elements, n = 0; n < 16; n++)
        if (t[n] !== i[n])
            return !1; return !0;
    }, fromArray: function (e, t) {
    void 0 === t && (t = 0); for (var i = 0; i < 16; i++)
        this.elements[i] = e[i + t]; return this;
    }, toArray: function (e, t) { void 0 === e && (e = []), void 0 === t && (t = 0); var i = this.elements; return e[t] = i[0], e[t + 1] = i[1], e[t + 2] = i[2], e[t + 3] = i[3], e[t + 4] = i[4], e[t + 5] = i[5], e[t + 6] = i[6], e[t + 7] = i[7], e[t + 8] = i[8], e[t + 9] = i[9], e[t + 10] = i[10], e[t + 11] = i[11], e[t + 12] = i[12], e[t + 13] = i[13], e[t + 14] = i[14], e[t + 15] = i[15], e; }
    });
    var ci = new li, ui = new zt;
    function hi(e, t, i, n) { this._x = e || 0, this._y = t || 0, this._z = i || 0, this._order = n || hi.DefaultOrder; }
    function di() { this.mask = 1; }
    hi.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], hi.DefaultOrder = "XYZ", Object.defineProperties(hi.prototype, { x: { get: function () { return this._x; }, set: function (e) { this._x = e, this._onChangeCallback(); } }, y: { get: function () { return this._y; }, set: function (e) { this._y = e, this._onChangeCallback(); } }, z: { get: function () { return this._z; }, set: function (e) { this._z = e, this._onChangeCallback(); } }, order: { get: function () { return this._order; }, set: function (e) { this._order = e, this._onChangeCallback(); } } }), Object.assign(hi.prototype, { isEuler: !0, set: function (e, t, i, n) { return this._x = e, this._y = t, this._z = i, this._order = n || this._order, this._onChangeCallback(), this; }, clone: function () { return new this.constructor(this._x, this._y, this._z, this._order); }, copy: function (e) { return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this._onChangeCallback(), this; }, setFromRotationMatrix: function (e, t, i) { var n = Ht.clamp, r = e.elements, a = r[0], o = r[4], s = r[8], l = r[1], c = r[5], u = r[9], h = r[2], d = r[6], p = r[10]; return "XYZ" === (t = t || this._order) ? (this._y = Math.asin(n(s, -1, 1)), Math.abs(s) < .9999999 ? (this._x = Math.atan2(-u, p), this._z = Math.atan2(-o, a)) : (this._x = Math.atan2(d, c), this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-n(u, -1, 1)), Math.abs(u) < .9999999 ? (this._y = Math.atan2(s, p), this._z = Math.atan2(l, c)) : (this._y = Math.atan2(-h, a), this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(n(d, -1, 1)), Math.abs(d) < .9999999 ? (this._y = Math.atan2(-h, p), this._z = Math.atan2(-o, c)) : (this._y = 0, this._z = Math.atan2(l, a))) : "ZYX" === t ? (this._y = Math.asin(-n(h, -1, 1)), Math.abs(h) < .9999999 ? (this._x = Math.atan2(d, p), this._z = Math.atan2(l, a)) : (this._x = 0, this._z = Math.atan2(-o, c))) : "YZX" === t ? (this._z = Math.asin(n(l, -1, 1)), Math.abs(l) < .9999999 ? (this._x = Math.atan2(-u, c), this._y = Math.atan2(-h, a)) : (this._x = 0, this._y = Math.atan2(s, p))) : "XZY" === t ? (this._z = Math.asin(-n(o, -1, 1)), Math.abs(o) < .9999999 ? (this._x = Math.atan2(d, c), this._y = Math.atan2(s, a)) : (this._x = Math.atan2(-u, p), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + t), this._order = t, !1 !== i && this._onChangeCallback(), this; }, setFromQuaternion: function (e, t, i) { return ci.makeRotationFromQuaternion(e), this.setFromRotationMatrix(ci, t, i); }, setFromVector3: function (e, t) { return this.set(e.x, e.y, e.z, t || this._order); }, reorder: function (e) { return ui.setFromEuler(this), this.setFromQuaternion(ui, e); }, equals: function (e) { return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order; }, fromArray: function (e) { return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this._onChangeCallback(), this; }, toArray: function (e, t) { return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e; }, toVector3: function (e) { return e ? e.set(this._x, this._y, this._z) : new Wt(this._x, this._y, this._z); }, _onChange: function (e) { return this._onChangeCallback = e, this; }, _onChangeCallback: function () { } }), Object.assign(di.prototype, { set: function (e) { this.mask = 1 << e | 0; }, enable: function (e) { this.mask |= 1 << e | 0; }, enableAll: function () { this.mask = -1; }, toggle: function (e) { this.mask ^= 1 << e | 0; }, disable: function (e) { this.mask &= ~(1 << e | 0); }, disableAll: function () { this.mask = 0; }, test: function (e) { return 0 != (this.mask & e.mask); } });
    var pi = 0, fi = new Wt, mi = new zt, vi = new li, gi = new Wt, yi = new Wt, bi = new Wt, xi = new zt, _i = new Wt(1, 0, 0), wi = new Wt(0, 1, 0), Ti = new Wt(0, 0, 1), Mi = { type: "added" }, Ai = { type: "removed" };
    function Si() { Object.defineProperty(this, "id", { value: pi++ }), this.uuid = Ht.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = Si.DefaultUp.clone(); var e = new Wt, t = new hi, i = new zt, n = new Wt(1, 1, 1); t._onChange((function () { i.setFromEuler(t, !1); })), i._onChange((function () { t.setFromQuaternion(i, void 0, !1); })), Object.defineProperties(this, { position: { configurable: !0, enumerable: !0, value: e }, rotation: { configurable: !0, enumerable: !0, value: t }, quaternion: { configurable: !0, enumerable: !0, value: i }, scale: { configurable: !0, enumerable: !0, value: n }, modelViewMatrix: { value: new li }, normalMatrix: { value: new Qt } }), this.matrix = new li, this.matrixWorld = new li, this.matrixAutoUpdate = Si.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, this.layers = new di, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}; }
    function Ei() { Si.call(this), this.type = "Scene", this.background = null, this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this })); }
    Si.DefaultUp = new Wt(0, 1, 0), Si.DefaultMatrixAutoUpdate = !0, Si.prototype = Object.assign(Object.create(Nt.prototype), {
    constructor: Si, isObject3D: !0, onBeforeRender: function () { }, onAfterRender: function () { }, applyMatrix: function (e) { this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e), this.matrix.decompose(this.position, this.quaternion, this.scale); }, applyQuaternion: function (e) { return this.quaternion.premultiply(e), this; }, setRotationFromAxisAngle: function (e, t) { this.quaternion.setFromAxisAngle(e, t); }, setRotationFromEuler: function (e) { this.quaternion.setFromEuler(e, !0); }, setRotationFromMatrix: function (e) { this.quaternion.setFromRotationMatrix(e); }, setRotationFromQuaternion: function (e) { this.quaternion.copy(e); }, rotateOnAxis: function (e, t) { return mi.setFromAxisAngle(e, t), this.quaternion.multiply(mi), this; }, rotateOnWorldAxis: function (e, t) { return mi.setFromAxisAngle(e, t), this.quaternion.premultiply(mi), this; }, rotateX: function (e) { return this.rotateOnAxis(_i, e); }, rotateY: function (e) { return this.rotateOnAxis(wi, e); }, rotateZ: function (e) { return this.rotateOnAxis(Ti, e); }, translateOnAxis: function (e, t) { return fi.copy(e).applyQuaternion(this.quaternion), this.position.add(fi.multiplyScalar(t)), this; }, translateX: function (e) { return this.translateOnAxis(_i, e); }, translateY: function (e) { return this.translateOnAxis(wi, e); }, translateZ: function (e) { return this.translateOnAxis(Ti, e); }, localToWorld: function (e) { return e.applyMatrix4(this.matrixWorld); }, worldToLocal: function (e) { return e.applyMatrix4(vi.getInverse(this.matrixWorld)); }, lookAt: function (e, t, i) { e.isVector3 ? gi.copy(e) : gi.set(e, t, i); var n = this.parent; this.updateWorldMatrix(!0, !1), yi.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? vi.lookAt(yi, gi, this.up) : vi.lookAt(gi, yi, this.up), this.quaternion.setFromRotationMatrix(vi), n && (vi.extractRotation(n.matrixWorld), mi.setFromRotationMatrix(vi), this.quaternion.premultiply(mi.inverse())); }, add: function (e) {
    if (arguments.length > 1) {
        for (var t = 0; t < arguments.length; t++)
            this.add(arguments[t]);
        return this;
    } return e === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e), this) : (e && e.isObject3D ? (null !== e.parent && e.parent.remove(e), e.parent = this, this.children.push(e), e.dispatchEvent(Mi)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e), this);
    }, remove: function (e) {
    if (arguments.length > 1) {
        for (var t = 0; t < arguments.length; t++)
            this.remove(arguments[t]);
        return this;
    } var i = this.children.indexOf(e); return -1 !== i && (e.parent = null, this.children.splice(i, 1), e.dispatchEvent(Ai)), this;
    }, attach: function (e) { return this.updateWorldMatrix(!0, !1), vi.getInverse(this.matrixWorld), null !== e.parent && (e.parent.updateWorldMatrix(!0, !1), vi.multiply(e.parent.matrixWorld)), e.applyMatrix(vi), e.updateWorldMatrix(!1, !1), this.add(e), this; }, getObjectById: function (e) { return this.getObjectByProperty("id", e); }, getObjectByName: function (e) { return this.getObjectByProperty("name", e); }, getObjectByProperty: function (e, t) {
    if (this[e] === t)
        return this; for (var i = 0, n = this.children.length; i < n; i++) {
            var r = this.children[i].getObjectByProperty(e, t);
            if (void 0 !== r)
                return r;
        }
    }, getWorldPosition: function (e) { return void 0 === e && (console.warn("THREE.Object3D: .getWorldPosition() target is now required"), e = new Wt), this.updateMatrixWorld(!0), e.setFromMatrixPosition(this.matrixWorld); }, getWorldQuaternion: function (e) { return void 0 === e && (console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"), e = new zt), this.updateMatrixWorld(!0), this.matrixWorld.decompose(yi, e, bi), e; }, getWorldScale: function (e) { return void 0 === e && (console.warn("THREE.Object3D: .getWorldScale() target is now required"), e = new Wt), this.updateMatrixWorld(!0), this.matrixWorld.decompose(yi, xi, e), e; }, getWorldDirection: function (e) { void 0 === e && (console.warn("THREE.Object3D: .getWorldDirection() target is now required"), e = new Wt), this.updateMatrixWorld(!0); var t = this.matrixWorld.elements; return e.set(t[8], t[9], t[10]).normalize(); }, raycast: function () { }, traverse: function (e) {
    e(this); for (var t = this.children, i = 0, n = t.length; i < n; i++)
        t[i].traverse(e);
    }, traverseVisible: function (e) {
    if (!1 !== this.visible) {
        e(this);
        for (var t = this.children, i = 0, n = t.length; i < n; i++)
            t[i].traverseVisible(e);
    }
    }, traverseAncestors: function (e) { var t = this.parent; null !== t && (e(t), t.traverseAncestors(e)); }, updateMatrix: function () { this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0; }, updateMatrixWorld: function (e) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0); for (var t = this.children, i = 0, n = t.length; i < n; i++)
        t[i].updateMatrixWorld(e);
    }, updateWorldMatrix: function (e, t) {
    var i = this.parent; if (!0 === e && null !== i && i.updateWorldMatrix(!0, !1), this.matrixAutoUpdate && this.updateMatrix(), null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), !0 === t)
        for (var n = this.children, r = 0, a = n.length; r < a; r++)
            n[r].updateWorldMatrix(!1, !0);
    }, toJSON: function (e) {
    var t = void 0 === e || "string" == typeof e, i = {}; t && (e = { geometries: {}, materials: {}, textures: {}, images: {}, shapes: {} }, i.metadata = { version: 4.5, type: "Object", generator: "Object3D.toJSON" }); var n = {}; function r(t, i) { return void 0 === t[i.uuid] && (t[i.uuid] = i.toJSON(e)), i.uuid; } if (n.uuid = this.uuid, n.type = this.type, "" !== this.name && (n.name = this.name), !0 === this.castShadow && (n.castShadow = !0), !0 === this.receiveShadow && (n.receiveShadow = !0), !1 === this.visible && (n.visible = !1), !1 === this.frustumCulled && (n.frustumCulled = !1), 0 !== this.renderOrder && (n.renderOrder = this.renderOrder), "{}" !== JSON.stringify(this.userData) && (n.userData = this.userData), n.layers = this.layers.mask, n.matrix = this.matrix.toArray(), !1 === this.matrixAutoUpdate && (n.matrixAutoUpdate = !1), this.isMesh && this.drawMode !== bt && (n.drawMode = this.drawMode), this.isInstancedMesh && (n.type = "InstancedMesh", n.count = this.count, n.instanceMatrix = this.instanceMatrix.toJSON()), this.isMesh || this.isLine || this.isPoints) {
        n.geometry = r(e.geometries, this.geometry);
        var a = this.geometry.parameters;
        if (void 0 !== a && void 0 !== a.shapes) {
            var o = a.shapes;
            if (Array.isArray(o))
                for (var s = 0, l = o.length; s < l; s++) {
                    var c = o[s];
                    r(e.shapes, c);
                }
            else
                r(e.shapes, o);
        }
    } if (void 0 !== this.material)
            if (Array.isArray(this.material)) {
                var u = [];
                for (s = 0, l = this.material.length; s < l; s++)
                    u.push(r(e.materials, this.material[s]));
                n.material = u;
            }
            else
                n.material = r(e.materials, this.material); if (this.children.length > 0) {
                    n.children = [];
                    for (s = 0; s < this.children.length; s++)
                        n.children.push(this.children[s].toJSON(e).object);
                } if (t) {
                    var h = m(e.geometries), d = m(e.materials), p = m(e.textures), f = m(e.images);
                    o = m(e.shapes);
                    h.length > 0 && (i.geometries = h), d.length > 0 && (i.materials = d), p.length > 0 && (i.textures = p), f.length > 0 && (i.images = f), o.length > 0 && (i.shapes = o);
                } return i.object = n, i; function m(e) {
                var t = []; for (var i in e) {
                    var n = e[i];
                    delete n.metadata, t.push(n);
                } return t;
                }
    }, clone: function (e) { return (new this.constructor).copy(this, e); }, copy: function (e, t) {
    if (void 0 === t && (t = !0), this.name = e.name, this.up.copy(e.up), this.position.copy(e.position), this.quaternion.copy(e.quaternion), this.scale.copy(e.scale), this.matrix.copy(e.matrix), this.matrixWorld.copy(e.matrixWorld), this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate, this.layers.mask = e.layers.mask, this.visible = e.visible, this.castShadow = e.castShadow, this.receiveShadow = e.receiveShadow, this.frustumCulled = e.frustumCulled, this.renderOrder = e.renderOrder, this.userData = JSON.parse(JSON.stringify(e.userData)), !0 === t)
        for (var i = 0; i < e.children.length; i++) {
            var n = e.children[i];
            this.add(n.clone());
        } return this;
    }
    }), Ei.prototype = Object.assign(Object.create(Si.prototype), { constructor: Ei, isScene: !0, copy: function (e, t) { return Si.prototype.copy.call(this, e, t), null !== e.background && (this.background = e.background.clone()), null !== e.fog && (this.fog = e.fog.clone()), null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()), this.autoUpdate = e.autoUpdate, this.matrixAutoUpdate = e.matrixAutoUpdate, this; }, toJSON: function (e) { var t = Si.prototype.toJSON.call(this, e); return null !== this.background && (t.object.background = this.background.toJSON(e)), null !== this.fog && (t.object.fog = this.fog.toJSON()), t; }, dispose: function () { this.dispatchEvent({ type: "dispose" }); } });
    var Pi = [new Wt, new Wt, new Wt, new Wt, new Wt, new Wt, new Wt, new Wt], Ci = new Wt, Li = new Ui, Ri = new Wt, Ii = new Wt, Oi = new Wt, Di = new Wt, Fi = new Wt, ki = new Wt, Ni = new Wt, Bi = new Wt, Gi = new Wt, Hi = new Wt;
    function Ui(e, t) { this.min = void 0 !== e ? e : new Wt(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== t ? t : new Wt(-1 / 0, -1 / 0, -1 / 0); }
    function zi(e, t, i, n, r) {
    var a, o; for (a = 0, o = e.length - 3; a <= o; a += 3) {
        Hi.fromArray(e, a);
        var s = r.x * Math.abs(Hi.x) + r.y * Math.abs(Hi.y) + r.z * Math.abs(Hi.z), l = t.dot(Hi), c = i.dot(Hi), u = n.dot(Hi);
        if (Math.max(-Math.max(l, c, u), Math.min(l, c, u)) > s)
            return !1;
    } return !0;
    }
    Object.assign(Ui.prototype, {
    isBox3: !0, set: function (e, t) { return this.min.copy(e), this.max.copy(t), this; }, setFromArray: function (e) {
    for (var t = 1 / 0, i = 1 / 0, n = 1 / 0, r = -1 / 0, a = -1 / 0, o = -1 / 0, s = 0, l = e.length; s < l; s += 3) {
        var c = e[s], u = e[s + 1], h = e[s + 2];
        c < t && (t = c), u < i && (i = u), h < n && (n = h), c > r && (r = c), u > a && (a = u), h > o && (o = h);
    } return this.min.set(t, i, n), this.max.set(r, a, o), this;
    }, setFromBufferAttribute: function (e) {
    for (var t = 1 / 0, i = 1 / 0, n = 1 / 0, r = -1 / 0, a = -1 / 0, o = -1 / 0, s = 0, l = e.count; s < l; s++) {
        var c = e.getX(s), u = e.getY(s), h = e.getZ(s);
        c < t && (t = c), u < i && (i = u), h < n && (n = h), c > r && (r = c), u > a && (a = u), h > o && (o = h);
    } return this.min.set(t, i, n), this.max.set(r, a, o), this;
    }, setFromPoints: function (e) {
    this.makeEmpty(); for (var t = 0, i = e.length; t < i; t++)
        this.expandByPoint(e[t]); return this;
    }, setFromCenterAndSize: function (e, t) { var i = Ci.copy(t).multiplyScalar(.5); return this.min.copy(e).sub(i), this.max.copy(e).add(i), this; }, setFromObject: function (e) { return this.makeEmpty(), this.expandByObject(e); }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.min.copy(e.min), this.max.copy(e.max), this; }, makeEmpty: function () { return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this; }, isEmpty: function () { return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z; }, getCenter: function (e) { return void 0 === e && (console.warn("THREE.Box3: .getCenter() target is now required"), e = new Wt), this.isEmpty() ? e.set(0, 0, 0) : e.addVectors(this.min, this.max).multiplyScalar(.5); }, getSize: function (e) { return void 0 === e && (console.warn("THREE.Box3: .getSize() target is now required"), e = new Wt), this.isEmpty() ? e.set(0, 0, 0) : e.subVectors(this.max, this.min); }, expandByPoint: function (e) { return this.min.min(e), this.max.max(e), this; }, expandByVector: function (e) { return this.min.sub(e), this.max.add(e), this; }, expandByScalar: function (e) { return this.min.addScalar(-e), this.max.addScalar(e), this; }, expandByObject: function (e) {
    e.updateWorldMatrix(!1, !1); var t = e.geometry; void 0 !== t && (null === t.boundingBox && t.computeBoundingBox(), Li.copy(t.boundingBox), Li.applyMatrix4(e.matrixWorld), this.expandByPoint(Li.min), this.expandByPoint(Li.max)); for (var i = e.children, n = 0, r = i.length; n < r; n++)
        this.expandByObject(i[n]); return this;
    }, containsPoint: function (e) { return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z); }, containsBox: function (e) { return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z; }, getParameter: function (e, t) { return void 0 === t && (console.warn("THREE.Box3: .getParameter() target is now required"), t = new Wt), t.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z)); }, intersectsBox: function (e) { return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z); }, intersectsSphere: function (e) { return this.clampPoint(e.center, Ci), Ci.distanceToSquared(e.center) <= e.radius * e.radius; }, intersectsPlane: function (e) { var t, i; return e.normal.x > 0 ? (t = e.normal.x * this.min.x, i = e.normal.x * this.max.x) : (t = e.normal.x * this.max.x, i = e.normal.x * this.min.x), e.normal.y > 0 ? (t += e.normal.y * this.min.y, i += e.normal.y * this.max.y) : (t += e.normal.y * this.max.y, i += e.normal.y * this.min.y), e.normal.z > 0 ? (t += e.normal.z * this.min.z, i += e.normal.z * this.max.z) : (t += e.normal.z * this.max.z, i += e.normal.z * this.min.z), t <= -e.constant && i >= -e.constant; }, intersectsTriangle: function (e) {
    if (this.isEmpty())
        return !1; this.getCenter(Ni), Bi.subVectors(this.max, Ni), Ri.subVectors(e.a, Ni), Ii.subVectors(e.b, Ni), Oi.subVectors(e.c, Ni), Di.subVectors(Ii, Ri), Fi.subVectors(Oi, Ii), ki.subVectors(Ri, Oi); var t = [0, -Di.z, Di.y, 0, -Fi.z, Fi.y, 0, -ki.z, ki.y, Di.z, 0, -Di.x, Fi.z, 0, -Fi.x, ki.z, 0, -ki.x, -Di.y, Di.x, 0, -Fi.y, Fi.x, 0, -ki.y, ki.x, 0]; return !!zi(t, Ri, Ii, Oi, Bi) && (!!zi(t = [1, 0, 0, 0, 1, 0, 0, 0, 1], Ri, Ii, Oi, Bi) && (Gi.crossVectors(Di, Fi), zi(t = [Gi.x, Gi.y, Gi.z], Ri, Ii, Oi, Bi)));
    }, clampPoint: function (e, t) { return void 0 === t && (console.warn("THREE.Box3: .clampPoint() target is now required"), t = new Wt), t.copy(e).clamp(this.min, this.max); }, distanceToPoint: function (e) { return Ci.copy(e).clamp(this.min, this.max).sub(e).length(); }, getBoundingSphere: function (e) { return void 0 === e && console.error("THREE.Box3: .getBoundingSphere() target is now required"), this.getCenter(e.center), e.radius = .5 * this.getSize(Ci).length(), e; }, intersect: function (e) { return this.min.max(e.min), this.max.min(e.max), this.isEmpty() && this.makeEmpty(), this; }, union: function (e) { return this.min.min(e.min), this.max.max(e.max), this; }, applyMatrix4: function (e) { return this.isEmpty() ? this : (Pi[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), Pi[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), Pi[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), Pi[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), Pi[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), Pi[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), Pi[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), Pi[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.setFromPoints(Pi), this); }, translate: function (e) { return this.min.add(e), this.max.add(e), this; }, equals: function (e) { return e.min.equals(this.min) && e.max.equals(this.max); }
    });
    var Vi = new Ui;
    function ji(e, t) { this.center = void 0 !== e ? e : new Wt, this.radius = void 0 !== t ? t : 0; }
    Object.assign(ji.prototype, {
    set: function (e, t) { return this.center.copy(e), this.radius = t, this; }, setFromPoints: function (e, t) {
    var i = this.center; void 0 !== t ? i.copy(t) : Vi.setFromPoints(e).getCenter(i); for (var n = 0, r = 0, a = e.length; r < a; r++)
        n = Math.max(n, i.distanceToSquared(e[r])); return this.radius = Math.sqrt(n), this;
    }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.center.copy(e.center), this.radius = e.radius, this; }, empty: function () { return this.radius <= 0; }, containsPoint: function (e) { return e.distanceToSquared(this.center) <= this.radius * this.radius; }, distanceToPoint: function (e) { return e.distanceTo(this.center) - this.radius; }, intersectsSphere: function (e) { var t = this.radius + e.radius; return e.center.distanceToSquared(this.center) <= t * t; }, intersectsBox: function (e) { return e.intersectsSphere(this); }, intersectsPlane: function (e) { return Math.abs(e.distanceToPoint(this.center)) <= this.radius; }, clampPoint: function (e, t) { var i = this.center.distanceToSquared(e); return void 0 === t && (console.warn("THREE.Sphere: .clampPoint() target is now required"), t = new Wt), t.copy(e), i > this.radius * this.radius && (t.sub(this.center).normalize(), t.multiplyScalar(this.radius).add(this.center)), t; }, getBoundingBox: function (e) { return void 0 === e && (console.warn("THREE.Sphere: .getBoundingBox() target is now required"), e = new Ui), e.set(this.center, this.center), e.expandByScalar(this.radius), e; }, applyMatrix4: function (e) { return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this; }, translate: function (e) { return this.center.add(e), this; }, equals: function (e) { return e.center.equals(this.center) && e.radius === this.radius; }
    });
    var Wi = new Wt, Xi = new Wt, Yi = new Wt, Qi = new Wt, qi = new Wt, $i = new Wt, Zi = new Wt;
    function Ki(e, t) { this.origin = void 0 !== e ? e : new Wt, this.direction = void 0 !== t ? t : new Wt(0, 0, -1); }
    Object.assign(Ki.prototype, {
    set: function (e, t) { return this.origin.copy(e), this.direction.copy(t), this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.origin.copy(e.origin), this.direction.copy(e.direction), this; }, at: function (e, t) { return void 0 === t && (console.warn("THREE.Ray: .at() target is now required"), t = new Wt), t.copy(this.direction).multiplyScalar(e).add(this.origin); }, lookAt: function (e) { return this.direction.copy(e).sub(this.origin).normalize(), this; }, recast: function (e) { return this.origin.copy(this.at(e, Wi)), this; }, closestPointToPoint: function (e, t) { void 0 === t && (console.warn("THREE.Ray: .closestPointToPoint() target is now required"), t = new Wt), t.subVectors(e, this.origin); var i = t.dot(this.direction); return i < 0 ? t.copy(this.origin) : t.copy(this.direction).multiplyScalar(i).add(this.origin); }, distanceToPoint: function (e) { return Math.sqrt(this.distanceSqToPoint(e)); }, distanceSqToPoint: function (e) { var t = Wi.subVectors(e, this.origin).dot(this.direction); return t < 0 ? this.origin.distanceToSquared(e) : (Wi.copy(this.direction).multiplyScalar(t).add(this.origin), Wi.distanceToSquared(e)); }, distanceSqToSegment: function (e, t, i, n) {
    Xi.copy(e).add(t).multiplyScalar(.5), Yi.copy(t).sub(e).normalize(), Qi.copy(this.origin).sub(Xi); var r, a, o, s, l = .5 * e.distanceTo(t), c = -this.direction.dot(Yi), u = Qi.dot(this.direction), h = -Qi.dot(Yi), d = Qi.lengthSq(), p = Math.abs(1 - c * c); if (p > 0)
        if (a = c * u - h, s = l * p, (r = c * h - u) >= 0)
            if (a >= -s)
                if (a <= s) {
                    var f = 1 / p;
                    o = (r *= f) * (r + c * (a *= f) + 2 * u) + a * (c * r + a + 2 * h) + d;
                }
                else
                    a = l, o = -(r = Math.max(0, -(c * a + u))) * r + a * (a + 2 * h) + d;
            else
                a = -l, o = -(r = Math.max(0, -(c * a + u))) * r + a * (a + 2 * h) + d;
        else
            a <= -s ? o = -(r = Math.max(0, -(-c * l + u))) * r + (a = r > 0 ? -l : Math.min(Math.max(-l, -h), l)) * (a + 2 * h) + d : a <= s ? (r = 0, o = (a = Math.min(Math.max(-l, -h), l)) * (a + 2 * h) + d) : o = -(r = Math.max(0, -(c * l + u))) * r + (a = r > 0 ? l : Math.min(Math.max(-l, -h), l)) * (a + 2 * h) + d;
    else
        a = c > 0 ? -l : l, o = -(r = Math.max(0, -(c * a + u))) * r + a * (a + 2 * h) + d; return i && i.copy(this.direction).multiplyScalar(r).add(this.origin), n && n.copy(Yi).multiplyScalar(a).add(Xi), o;
    }, intersectSphere: function (e, t) {
    Wi.subVectors(e.center, this.origin); var i = Wi.dot(this.direction), n = Wi.dot(Wi) - i * i, r = e.radius * e.radius; if (n > r)
        return null; var a = Math.sqrt(r - n), o = i - a, s = i + a; return o < 0 && s < 0 ? null : o < 0 ? this.at(s, t) : this.at(o, t);
    }, intersectsSphere: function (e) { return this.distanceSqToPoint(e.center) <= e.radius * e.radius; }, distanceToPlane: function (e) {
    var t = e.normal.dot(this.direction); if (0 === t)
        return 0 === e.distanceToPoint(this.origin) ? 0 : null; var i = -(this.origin.dot(e.normal) + e.constant) / t; return i >= 0 ? i : null;
    }, intersectPlane: function (e, t) { var i = this.distanceToPlane(e); return null === i ? null : this.at(i, t); }, intersectsPlane: function (e) { var t = e.distanceToPoint(this.origin); return 0 === t || e.normal.dot(this.direction) * t < 0; }, intersectBox: function (e, t) { var i, n, r, a, o, s, l = 1 / this.direction.x, c = 1 / this.direction.y, u = 1 / this.direction.z, h = this.origin; return l >= 0 ? (i = (e.min.x - h.x) * l, n = (e.max.x - h.x) * l) : (i = (e.max.x - h.x) * l, n = (e.min.x - h.x) * l), c >= 0 ? (r = (e.min.y - h.y) * c, a = (e.max.y - h.y) * c) : (r = (e.max.y - h.y) * c, a = (e.min.y - h.y) * c), i > a || r > n ? null : ((r > i || i != i) && (i = r), (a < n || n != n) && (n = a), u >= 0 ? (o = (e.min.z - h.z) * u, s = (e.max.z - h.z) * u) : (o = (e.max.z - h.z) * u, s = (e.min.z - h.z) * u), i > s || o > n ? null : ((o > i || i != i) && (i = o), (s < n || n != n) && (n = s), n < 0 ? null : this.at(i >= 0 ? i : n, t))); }, intersectsBox: function (e) { return null !== this.intersectBox(e, Wi); }, intersectTriangle: function (e, t, i, n, r) {
    qi.subVectors(t, e), $i.subVectors(i, e), Zi.crossVectors(qi, $i); var a, o = this.direction.dot(Zi); if (o > 0) {
        if (n)
            return null;
        a = 1;
    }
    else {
        if (!(o < 0))
            return null;
        a = -1, o = -o;
    } Qi.subVectors(this.origin, e); var s = a * this.direction.dot($i.crossVectors(Qi, $i)); if (s < 0)
            return null; var l = a * this.direction.dot(qi.cross(Qi)); if (l < 0)
            return null; if (s + l > o)
            return null; var c = -a * Qi.dot(Zi); return c < 0 ? null : this.at(c / o, r);
    }, applyMatrix4: function (e) { return this.origin.applyMatrix4(e), this.direction.transformDirection(e), this; }, equals: function (e) { return e.origin.equals(this.origin) && e.direction.equals(this.direction); }
    });
    var Ji = new Wt, en = new Wt, tn = new Qt;
    function nn(e, t) { this.normal = void 0 !== e ? e : new Wt(1, 0, 0), this.constant = void 0 !== t ? t : 0; }
    Object.assign(nn.prototype, {
    isPlane: !0, set: function (e, t) { return this.normal.copy(e), this.constant = t, this; }, setComponents: function (e, t, i, n) { return this.normal.set(e, t, i), this.constant = n, this; }, setFromNormalAndCoplanarPoint: function (e, t) { return this.normal.copy(e), this.constant = -t.dot(this.normal), this; }, setFromCoplanarPoints: function (e, t, i) { var n = Ji.subVectors(i, t).cross(en.subVectors(e, t)).normalize(); return this.setFromNormalAndCoplanarPoint(n, e), this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.normal.copy(e.normal), this.constant = e.constant, this; }, normalize: function () { var e = 1 / this.normal.length(); return this.normal.multiplyScalar(e), this.constant *= e, this; }, negate: function () { return this.constant *= -1, this.normal.negate(), this; }, distanceToPoint: function (e) { return this.normal.dot(e) + this.constant; }, distanceToSphere: function (e) { return this.distanceToPoint(e.center) - e.radius; }, projectPoint: function (e, t) { return void 0 === t && (console.warn("THREE.Plane: .projectPoint() target is now required"), t = new Wt), t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e); }, intersectLine: function (e, t) {
    void 0 === t && (console.warn("THREE.Plane: .intersectLine() target is now required"), t = new Wt); var i = e.delta(Ji), n = this.normal.dot(i); if (0 === n)
        return 0 === this.distanceToPoint(e.start) ? t.copy(e.start) : void 0; var r = -(e.start.dot(this.normal) + this.constant) / n; return r < 0 || r > 1 ? void 0 : t.copy(i).multiplyScalar(r).add(e.start);
    }, intersectsLine: function (e) { var t = this.distanceToPoint(e.start), i = this.distanceToPoint(e.end); return t < 0 && i > 0 || i < 0 && t > 0; }, intersectsBox: function (e) { return e.intersectsPlane(this); }, intersectsSphere: function (e) { return e.intersectsPlane(this); }, coplanarPoint: function (e) { return void 0 === e && (console.warn("THREE.Plane: .coplanarPoint() target is now required"), e = new Wt), e.copy(this.normal).multiplyScalar(-this.constant); }, applyMatrix4: function (e, t) { var i = t || tn.getNormalMatrix(e), n = this.coplanarPoint(Ji).applyMatrix4(e), r = this.normal.applyMatrix3(i).normalize(); return this.constant = -n.dot(r), this; }, translate: function (e) { return this.constant -= e.dot(this.normal), this; }, equals: function (e) { return e.normal.equals(this.normal) && e.constant === this.constant; }
    });
    var rn = new Wt, an = new Wt, on = new Wt, sn = new Wt, ln = new Wt, cn = new Wt, un = new Wt, hn = new Wt, dn = new Wt, pn = new Wt;
    function fn(e, t, i) { this.a = void 0 !== e ? e : new Wt, this.b = void 0 !== t ? t : new Wt, this.c = void 0 !== i ? i : new Wt; }
    Object.assign(fn, {
    getNormal: function (e, t, i, n) { void 0 === n && (console.warn("THREE.Triangle: .getNormal() target is now required"), n = new Wt), n.subVectors(i, t), rn.subVectors(e, t), n.cross(rn); var r = n.lengthSq(); return r > 0 ? n.multiplyScalar(1 / Math.sqrt(r)) : n.set(0, 0, 0); }, getBarycoord: function (e, t, i, n, r) {
    rn.subVectors(n, t), an.subVectors(i, t), on.subVectors(e, t); var a = rn.dot(rn), o = rn.dot(an), s = rn.dot(on), l = an.dot(an), c = an.dot(on), u = a * l - o * o; if (void 0 === r && (console.warn("THREE.Triangle: .getBarycoord() target is now required"), r = new Wt), 0 === u)
        return r.set(-2, -1, -1); var h = 1 / u, d = (l * s - o * c) * h, p = (a * c - o * s) * h; return r.set(1 - d - p, p, d);
    }, containsPoint: function (e, t, i, n) { return fn.getBarycoord(e, t, i, n, sn), sn.x >= 0 && sn.y >= 0 && sn.x + sn.y <= 1; }, getUV: function (e, t, i, n, r, a, o, s) { return this.getBarycoord(e, t, i, n, sn), s.set(0, 0), s.addScaledVector(r, sn.x), s.addScaledVector(a, sn.y), s.addScaledVector(o, sn.z), s; }, isFrontFacing: function (e, t, i, n) { return rn.subVectors(i, t), an.subVectors(e, t), rn.cross(an).dot(n) < 0; }
    }), Object.assign(fn.prototype, {
    set: function (e, t, i) { return this.a.copy(e), this.b.copy(t), this.c.copy(i), this; }, setFromPointsAndIndices: function (e, t, i, n) { return this.a.copy(e[t]), this.b.copy(e[i]), this.c.copy(e[n]), this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this; }, getArea: function () { return rn.subVectors(this.c, this.b), an.subVectors(this.a, this.b), .5 * rn.cross(an).length(); }, getMidpoint: function (e) { return void 0 === e && (console.warn("THREE.Triangle: .getMidpoint() target is now required"), e = new Wt), e.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3); }, getNormal: function (e) { return fn.getNormal(this.a, this.b, this.c, e); }, getPlane: function (e) { return void 0 === e && (console.warn("THREE.Triangle: .getPlane() target is now required"), e = new nn), e.setFromCoplanarPoints(this.a, this.b, this.c); }, getBarycoord: function (e, t) { return fn.getBarycoord(e, this.a, this.b, this.c, t); }, getUV: function (e, t, i, n, r) { return fn.getUV(e, this.a, this.b, this.c, t, i, n, r); }, containsPoint: function (e) { return fn.containsPoint(e, this.a, this.b, this.c); }, isFrontFacing: function (e) { return fn.isFrontFacing(this.a, this.b, this.c, e); }, intersectsBox: function (e) { return e.intersectsTriangle(this); }, closestPointToPoint: function (e, t) {
    void 0 === t && (console.warn("THREE.Triangle: .closestPointToPoint() target is now required"), t = new Wt); var i, n, r = this.a, a = this.b, o = this.c; ln.subVectors(a, r), cn.subVectors(o, r), hn.subVectors(e, r); var s = ln.dot(hn), l = cn.dot(hn); if (s <= 0 && l <= 0)
        return t.copy(r); dn.subVectors(e, a); var c = ln.dot(dn), u = cn.dot(dn); if (c >= 0 && u <= c)
            return t.copy(a); var h = s * u - c * l; if (h <= 0 && s >= 0 && c <= 0)
            return i = s / (s - c), t.copy(r).addScaledVector(ln, i); pn.subVectors(e, o); var d = ln.dot(pn), p = cn.dot(pn); if (p >= 0 && d <= p)
            return t.copy(o); var f = d * l - s * p; if (f <= 0 && l >= 0 && p <= 0)
            return n = l / (l - p), t.copy(r).addScaledVector(cn, n); var m = c * p - d * u; if (m <= 0 && u - c >= 0 && d - p >= 0)
            return un.subVectors(o, a), n = (u - c) / (u - c + (d - p)), t.copy(a).addScaledVector(un, n); var v = 1 / (m + f + h); return i = f * v, n = h * v, t.copy(r).addScaledVector(ln, i).addScaledVector(cn, n);
    }, equals: function (e) { return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c); }
    });
    var mn = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }, vn = { h: 0, s: 0, l: 0 }, gn = { h: 0, s: 0, l: 0 };
    function yn(e, t, i) { return void 0 === t && void 0 === i ? this.set(e) : this.setRGB(e, t, i); }
    function bn(e, t, i) { return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? e + 6 * (t - e) * i : i < .5 ? t : i < 2 / 3 ? e + 6 * (t - e) * (2 / 3 - i) : e; }
    function xn(e) { return e < .04045 ? .0773993808 * e : Math.pow(.9478672986 * e + .0521327014, 2.4); }
    function _n(e) { return e < .0031308 ? 12.92 * e : 1.055 * Math.pow(e, .41666) - .055; }
    function wn(e, t, i, n, r, a) { this.a = e, this.b = t, this.c = i, this.normal = n && n.isVector3 ? n : new Wt, this.vertexNormals = Array.isArray(n) ? n : [], this.color = r && r.isColor ? r : new yn, this.vertexColors = Array.isArray(r) ? r : [], this.materialIndex = void 0 !== a ? a : 0; }
    Object.assign(yn.prototype, {
    isColor: !0, r: 1, g: 1, b: 1, set: function (e) { return e && e.isColor ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e), this; }, setScalar: function (e) { return this.r = e, this.g = e, this.b = e, this; }, setHex: function (e) { return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, this; }, setRGB: function (e, t, i) { return this.r = e, this.g = t, this.b = i, this; }, setHSL: function (e, t, i) {
    if (e = Ht.euclideanModulo(e, 1), t = Ht.clamp(t, 0, 1), i = Ht.clamp(i, 0, 1), 0 === t)
        this.r = this.g = this.b = i;
    else {
        var n = i <= .5 ? i * (1 + t) : i + t - i * t, r = 2 * i - n;
        this.r = bn(r, n, e + 1 / 3), this.g = bn(r, n, e), this.b = bn(r, n, e - 1 / 3);
    } return this;
    }, setStyle: function (e) {
    function t(t) { void 0 !== t && parseFloat(t) < 1 && console.warn("THREE.Color: Alpha component of " + e + " will be ignored."); } var i; if (i = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)) {
        var n, r = i[1], a = i[2];
        switch (r) {
            case "rgb":
            case "rgba":
                if (n = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))
                    return this.r = Math.min(255, parseInt(n[1], 10)) / 255, this.g = Math.min(255, parseInt(n[2], 10)) / 255, this.b = Math.min(255, parseInt(n[3], 10)) / 255, t(n[5]), this;
                if (n = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))
                    return this.r = Math.min(100, parseInt(n[1], 10)) / 100, this.g = Math.min(100, parseInt(n[2], 10)) / 100, this.b = Math.min(100, parseInt(n[3], 10)) / 100, t(n[5]), this;
                break;
            case "hsl":
            case "hsla": if (n = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)) {
                var o = parseFloat(n[1]) / 360, s = parseInt(n[2], 10) / 100, l = parseInt(n[3], 10) / 100;
                return t(n[5]), this.setHSL(o, s, l);
            }
        }
    }
    else if (i = /^\#([A-Fa-f0-9]+)$/.exec(e)) {
        var c = i[1], u = c.length;
        if (3 === u)
            return this.r = parseInt(c.charAt(0) + c.charAt(0), 16) / 255, this.g = parseInt(c.charAt(1) + c.charAt(1), 16) / 255, this.b = parseInt(c.charAt(2) + c.charAt(2), 16) / 255, this;
        if (6 === u)
            return this.r = parseInt(c.charAt(0) + c.charAt(1), 16) / 255, this.g = parseInt(c.charAt(2) + c.charAt(3), 16) / 255, this.b = parseInt(c.charAt(4) + c.charAt(5), 16) / 255, this;
    } return e && e.length > 0 ? this.setColorName(e) : this;
    }, setColorName: function (e) { var t = mn[e]; return void 0 !== t ? this.setHex(t) : console.warn("THREE.Color: Unknown color " + e), this; }, clone: function () { return new this.constructor(this.r, this.g, this.b); }, copy: function (e) { return this.r = e.r, this.g = e.g, this.b = e.b, this; }, copyGammaToLinear: function (e, t) { return void 0 === t && (t = 2), this.r = Math.pow(e.r, t), this.g = Math.pow(e.g, t), this.b = Math.pow(e.b, t), this; }, copyLinearToGamma: function (e, t) { void 0 === t && (t = 2); var i = t > 0 ? 1 / t : 1; return this.r = Math.pow(e.r, i), this.g = Math.pow(e.g, i), this.b = Math.pow(e.b, i), this; }, convertGammaToLinear: function (e) { return this.copyGammaToLinear(this, e), this; }, convertLinearToGamma: function (e) { return this.copyLinearToGamma(this, e), this; }, copySRGBToLinear: function (e) { return this.r = xn(e.r), this.g = xn(e.g), this.b = xn(e.b), this; }, copyLinearToSRGB: function (e) { return this.r = _n(e.r), this.g = _n(e.g), this.b = _n(e.b), this; }, convertSRGBToLinear: function () { return this.copySRGBToLinear(this), this; }, convertLinearToSRGB: function () { return this.copyLinearToSRGB(this), this; }, getHex: function () { return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0; }, getHexString: function () { return ("000000" + this.getHex().toString(16)).slice(-6); }, getHSL: function (e) {
    void 0 === e && (console.warn("THREE.Color: .getHSL() target is now required"), e = { h: 0, s: 0, l: 0 }); var t, i, n = this.r, r = this.g, a = this.b, o = Math.max(n, r, a), s = Math.min(n, r, a), l = (s + o) / 2; if (s === o)
        t = 0, i = 0;
    else {
        var c = o - s;
        switch (i = l <= .5 ? c / (o + s) : c / (2 - o - s), o) {
            case n:
                t = (r - a) / c + (r < a ? 6 : 0);
                break;
            case r:
                t = (a - n) / c + 2;
                break;
            case a: t = (n - r) / c + 4;
        }
        t /= 6;
    } return e.h = t, e.s = i, e.l = l, e;
    }, getStyle: function () { return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"; }, offsetHSL: function (e, t, i) { return this.getHSL(vn), vn.h += e, vn.s += t, vn.l += i, this.setHSL(vn.h, vn.s, vn.l), this; }, add: function (e) { return this.r += e.r, this.g += e.g, this.b += e.b, this; }, addColors: function (e, t) { return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this; }, addScalar: function (e) { return this.r += e, this.g += e, this.b += e, this; }, sub: function (e) { return this.r = Math.max(0, this.r - e.r), this.g = Math.max(0, this.g - e.g), this.b = Math.max(0, this.b - e.b), this; }, multiply: function (e) { return this.r *= e.r, this.g *= e.g, this.b *= e.b, this; }, multiplyScalar: function (e) { return this.r *= e, this.g *= e, this.b *= e, this; }, lerp: function (e, t) { return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this; }, lerpHSL: function (e, t) { this.getHSL(vn), e.getHSL(gn); var i = Ht.lerp(vn.h, gn.h, t), n = Ht.lerp(vn.s, gn.s, t), r = Ht.lerp(vn.l, gn.l, t); return this.setHSL(i, n, r), this; }, equals: function (e) { return e.r === this.r && e.g === this.g && e.b === this.b; }, fromArray: function (e, t) { return void 0 === t && (t = 0), this.r = e[t], this.g = e[t + 1], this.b = e[t + 2], this; }, toArray: function (e, t) { return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e; }, toJSON: function () { return this.getHex(); }
    }), yn.NAMES = mn, Object.assign(wn.prototype, {
    clone: function () { return (new this.constructor).copy(this); }, copy: function (e) {
    this.a = e.a, this.b = e.b, this.c = e.c, this.normal.copy(e.normal), this.color.copy(e.color), this.materialIndex = e.materialIndex; for (var t = 0, i = e.vertexNormals.length; t < i; t++)
        this.vertexNormals[t] = e.vertexNormals[t].clone(); for (t = 0, i = e.vertexColors.length; t < i; t++)
            this.vertexColors[t] = e.vertexColors[t].clone(); return this;
    }
    });
    var Tn = 0;
    function Mn() { Object.defineProperty(this, "id", { value: Tn++ }), this.uuid = Ht.generateUUID(), this.name = "", this.type = "Material", this.fog = !0, this.blending = P, this.side = _, this.flatShading = !1, this.vertexTangents = !1, this.vertexColors = M, this.opacity = 1, this.transparent = !1, this.blendSrc = z, this.blendDst = V, this.blendEquation = O, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = K, this.depthTest = !0, this.depthWrite = !0, this.stencilWriteMask = 255, this.stencilFunc = Ft, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = Dt, this.stencilZFail = Dt, this.stencilZPass = Dt, this.stencilWrite = !1, this.clippingPlanes = null, this.clipIntersection = !1, this.clipShadows = !1, this.shadowSide = null, this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = !1, this.alphaTest = 0, this.premultipliedAlpha = !1, this.visible = !0, this.toneMapped = !0, this.userData = {}, this.version = 0; }
    function An(e) { Mn.call(this), this.type = "MeshBasicMaterial", this.color = new yn(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ne, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.setValues(e); }
    function Sn(e, t, i) {
    if (Array.isArray(e))
        throw new TypeError("THREE.BufferAttribute: array should be a Typed Array."); this.name = "", this.array = e, this.itemSize = t, this.count = void 0 !== e ? e.length / t : 0, this.normalized = !0 === i, this.usage = kt, this.updateRange = { offset: 0, count: -1 }, this.version = 0;
    }
    function En(e, t, i) { Sn.call(this, new Int8Array(e), t, i); }
    function Pn(e, t, i) { Sn.call(this, new Uint8Array(e), t, i); }
    function Cn(e, t, i) { Sn.call(this, new Uint8ClampedArray(e), t, i); }
    function Ln(e, t, i) { Sn.call(this, new Int16Array(e), t, i); }
    function Rn(e, t, i) { Sn.call(this, new Uint16Array(e), t, i); }
    function In(e, t, i) { Sn.call(this, new Int32Array(e), t, i); }
    function On(e, t, i) { Sn.call(this, new Uint32Array(e), t, i); }
    function Dn(e, t, i) { Sn.call(this, new Float32Array(e), t, i); }
    function Fn(e, t, i) { Sn.call(this, new Float64Array(e), t, i); }
    function kn() { this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.groupsNeedUpdate = !1; }
    function Nn(e) {
    if (0 === e.length)
        return -1 / 0; for (var t = e[0], i = 1, n = e.length; i < n; ++i)
            e[i] > t && (t = e[i]); return t;
    }
    Mn.prototype = Object.assign(Object.create(Nt.prototype), {
    constructor: Mn, isMaterial: !0, onBeforeCompile: function () { }, setValues: function (e) {
    if (void 0 !== e)
        for (var t in e) {
            var i = e[t];
            if (void 0 !== i)
                if ("shading" !== t) {
                    var n = this[t];
                    void 0 !== n ? n && n.isColor ? n.set(i) : n && n.isVector3 && i && i.isVector3 ? n.copy(i) : this[t] = i : console.warn("THREE." + this.type + ": '" + t + "' is not a property of this material.");
                }
                else
                    console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = 1 === i;
            else
                console.warn("THREE.Material: '" + t + "' parameter is undefined.");
        }
    }, toJSON: function (e) {
    var t = void 0 === e || "string" == typeof e; t && (e = { textures: {}, images: {} }); var i = { metadata: { version: 4.5, type: "Material", generator: "Material.toJSON" } }; function n(e) {
    var t = []; for (var i in e) {
        var n = e[i];
        delete n.metadata, t.push(n);
    } return t;
    } if (i.uuid = this.uuid, i.type = this.type, "" !== this.name && (i.name = this.name), this.color && this.color.isColor && (i.color = this.color.getHex()), void 0 !== this.roughness && (i.roughness = this.roughness), void 0 !== this.metalness && (i.metalness = this.metalness), this.sheen && this.sheen.isColor && (i.sheen = this.sheen.getHex()), this.emissive && this.emissive.isColor && (i.emissive = this.emissive.getHex()), this.emissiveIntensity && 1 !== this.emissiveIntensity && (i.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (i.specular = this.specular.getHex()), void 0 !== this.shininess && (i.shininess = this.shininess), void 0 !== this.clearcoat && (i.clearcoat = this.clearcoat), void 0 !== this.clearcoatRoughness && (i.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (i.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e).uuid, i.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.map && this.map.isTexture && (i.map = this.map.toJSON(e).uuid), this.matcap && this.matcap.isTexture && (i.matcap = this.matcap.toJSON(e).uuid), this.alphaMap && this.alphaMap.isTexture && (i.alphaMap = this.alphaMap.toJSON(e).uuid), this.lightMap && this.lightMap.isTexture && (i.lightMap = this.lightMap.toJSON(e).uuid), this.aoMap && this.aoMap.isTexture && (i.aoMap = this.aoMap.toJSON(e).uuid, i.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (i.bumpMap = this.bumpMap.toJSON(e).uuid, i.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (i.normalMap = this.normalMap.toJSON(e).uuid, i.normalMapType = this.normalMapType, i.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (i.displacementMap = this.displacementMap.toJSON(e).uuid, i.displacementScale = this.displacementScale, i.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (i.roughnessMap = this.roughnessMap.toJSON(e).uuid), this.metalnessMap && this.metalnessMap.isTexture && (i.metalnessMap = this.metalnessMap.toJSON(e).uuid), this.emissiveMap && this.emissiveMap.isTexture && (i.emissiveMap = this.emissiveMap.toJSON(e).uuid), this.specularMap && this.specularMap.isTexture && (i.specularMap = this.specularMap.toJSON(e).uuid), this.envMap && this.envMap.isTexture && (i.envMap = this.envMap.toJSON(e).uuid, i.reflectivity = this.reflectivity, i.refractionRatio = this.refractionRatio, void 0 !== this.combine && (i.combine = this.combine), void 0 !== this.envMapIntensity && (i.envMapIntensity = this.envMapIntensity)), this.gradientMap && this.gradientMap.isTexture && (i.gradientMap = this.gradientMap.toJSON(e).uuid), void 0 !== this.size && (i.size = this.size), void 0 !== this.sizeAttenuation && (i.sizeAttenuation = this.sizeAttenuation), this.blending !== P && (i.blending = this.blending), !0 === this.flatShading && (i.flatShading = this.flatShading), this.side !== _ && (i.side = this.side), this.vertexColors !== M && (i.vertexColors = this.vertexColors), this.opacity < 1 && (i.opacity = this.opacity), !0 === this.transparent && (i.transparent = this.transparent), i.depthFunc = this.depthFunc, i.depthTest = this.depthTest, i.depthWrite = this.depthWrite, i.stencilWrite = this.stencilWrite, i.stencilWriteMask = this.stencilWriteMask, i.stencilFunc = this.stencilFunc, i.stencilRef = this.stencilRef, i.stencilFuncMask = this.stencilFuncMask, i.stencilFail = this.stencilFail, i.stencilZFail = this.stencilZFail, i.stencilZPass = this.stencilZPass, this.rotation && 0 !== this.rotation && (i.rotation = this.rotation), !0 === this.polygonOffset && (i.polygonOffset = !0), 0 !== this.polygonOffsetFactor && (i.polygonOffsetFactor = this.polygonOffsetFactor), 0 !== this.polygonOffsetUnits && (i.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth && 1 !== this.linewidth && (i.linewidth = this.linewidth), void 0 !== this.dashSize && (i.dashSize = this.dashSize), void 0 !== this.gapSize && (i.gapSize = this.gapSize), void 0 !== this.scale && (i.scale = this.scale), !0 === this.dithering && (i.dithering = !0), this.alphaTest > 0 && (i.alphaTest = this.alphaTest), !0 === this.premultipliedAlpha && (i.premultipliedAlpha = this.premultipliedAlpha), !0 === this.wireframe && (i.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (i.wireframeLinewidth = this.wireframeLinewidth), "round" !== this.wireframeLinecap && (i.wireframeLinecap = this.wireframeLinecap), "round" !== this.wireframeLinejoin && (i.wireframeLinejoin = this.wireframeLinejoin), !0 === this.morphTargets && (i.morphTargets = !0), !0 === this.morphNormals && (i.morphNormals = !0), !0 === this.skinning && (i.skinning = !0), !1 === this.visible && (i.visible = !1), !1 === this.toneMapped && (i.toneMapped = !1), "{}" !== JSON.stringify(this.userData) && (i.userData = this.userData), t) {
        var r = n(e.textures), a = n(e.images);
        r.length > 0 && (i.textures = r), a.length > 0 && (i.images = a);
    } return i;
    }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) {
    this.name = e.name, this.fog = e.fog, this.blending = e.blending, this.side = e.side, this.flatShading = e.flatShading, this.vertexTangents = e.vertexTangents, this.vertexColors = e.vertexColors, this.opacity = e.opacity, this.transparent = e.transparent, this.blendSrc = e.blendSrc, this.blendDst = e.blendDst, this.blendEquation = e.blendEquation, this.blendSrcAlpha = e.blendSrcAlpha, this.blendDstAlpha = e.blendDstAlpha, this.blendEquationAlpha = e.blendEquationAlpha, this.depthFunc = e.depthFunc, this.depthTest = e.depthTest, this.depthWrite = e.depthWrite, this.stencilWriteMask = e.stencilWriteMask, this.stencilFunc = e.stencilFunc, this.stencilRef = e.stencilRef, this.stencilFuncMask = e.stencilFuncMask, this.stencilFail = e.stencilFail, this.stencilZFail = e.stencilZFail, this.stencilZPass = e.stencilZPass, this.stencilWrite = e.stencilWrite; var t = e.clippingPlanes, i = null; if (null !== t) {
        var n = t.length;
        i = new Array(n);
        for (var r = 0; r !== n; ++r)
            i[r] = t[r].clone();
    } return this.clippingPlanes = i, this.clipIntersection = e.clipIntersection, this.clipShadows = e.clipShadows, this.shadowSide = e.shadowSide, this.colorWrite = e.colorWrite, this.precision = e.precision, this.polygonOffset = e.polygonOffset, this.polygonOffsetFactor = e.polygonOffsetFactor, this.polygonOffsetUnits = e.polygonOffsetUnits, this.dithering = e.dithering, this.alphaTest = e.alphaTest, this.premultipliedAlpha = e.premultipliedAlpha, this.visible = e.visible, this.toneMapped = e.toneMapped, this.userData = JSON.parse(JSON.stringify(e.userData)), this;
    }, dispose: function () { this.dispatchEvent({ type: "dispose" }); }
    }), Object.defineProperty(Mn.prototype, "needsUpdate", { set: function (e) { !0 === e && this.version++; } }), An.prototype = Object.create(Mn.prototype), An.prototype.constructor = An, An.prototype.isMeshBasicMaterial = !0, An.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this; }, Object.defineProperty(Sn.prototype, "needsUpdate", { set: function (e) { !0 === e && this.version++; } }), Object.assign(Sn.prototype, {
    isBufferAttribute: !0, onUploadCallback: function () { }, setUsage: function (e) { return this.usage = e, this; }, copy: function (e) { return this.name = e.name, this.array = new e.array.constructor(e.array), this.itemSize = e.itemSize, this.count = e.count, this.normalized = e.normalized, this.usage = e.usage, this; }, copyAt: function (e, t, i) {
    e *= this.itemSize, i *= t.itemSize; for (var n = 0, r = this.itemSize; n < r; n++)
        this.array[e + n] = t.array[i + n]; return this;
    }, copyArray: function (e) { return this.array.set(e), this; }, copyColorsArray: function (e) {
    for (var t = this.array, i = 0, n = 0, r = e.length; n < r; n++) {
        var a = e[n];
        void 0 === a && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", n), a = new yn), t[i++] = a.r, t[i++] = a.g, t[i++] = a.b;
    } return this;
    }, copyVector2sArray: function (e) {
    for (var t = this.array, i = 0, n = 0, r = e.length; n < r; n++) {
        var a = e[n];
        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", n), a = new Ut), t[i++] = a.x, t[i++] = a.y;
    } return this;
    }, copyVector3sArray: function (e) {
    for (var t = this.array, i = 0, n = 0, r = e.length; n < r; n++) {
        var a = e[n];
        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", n), a = new Wt), t[i++] = a.x, t[i++] = a.y, t[i++] = a.z;
    } return this;
    }, copyVector4sArray: function (e) {
    for (var t = this.array, i = 0, n = 0, r = e.length; n < r; n++) {
        var a = e[n];
        void 0 === a && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", n), a = new Kt), t[i++] = a.x, t[i++] = a.y, t[i++] = a.z, t[i++] = a.w;
    } return this;
    }, set: function (e, t) { return void 0 === t && (t = 0), this.array.set(e, t), this; }, getX: function (e) { return this.array[e * this.itemSize]; }, setX: function (e, t) { return this.array[e * this.itemSize] = t, this; }, getY: function (e) { return this.array[e * this.itemSize + 1]; }, setY: function (e, t) { return this.array[e * this.itemSize + 1] = t, this; }, getZ: function (e) { return this.array[e * this.itemSize + 2]; }, setZ: function (e, t) { return this.array[e * this.itemSize + 2] = t, this; }, getW: function (e) { return this.array[e * this.itemSize + 3]; }, setW: function (e, t) { return this.array[e * this.itemSize + 3] = t, this; }, setXY: function (e, t, i) { return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = i, this; }, setXYZ: function (e, t, i, n) { return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = i, this.array[e + 2] = n, this; }, setXYZW: function (e, t, i, n, r) { return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = i, this.array[e + 2] = n, this.array[e + 3] = r, this; }, onUpload: function (e) { return this.onUploadCallback = e, this; }, clone: function () { return new this.constructor(this.array, this.itemSize).copy(this); }, toJSON: function () { return { itemSize: this.itemSize, type: this.array.constructor.name, array: Array.prototype.slice.call(this.array), normalized: this.normalized }; }
    }), En.prototype = Object.create(Sn.prototype), En.prototype.constructor = En, Pn.prototype = Object.create(Sn.prototype), Pn.prototype.constructor = Pn, Cn.prototype = Object.create(Sn.prototype), Cn.prototype.constructor = Cn, Ln.prototype = Object.create(Sn.prototype), Ln.prototype.constructor = Ln, Rn.prototype = Object.create(Sn.prototype), Rn.prototype.constructor = Rn, In.prototype = Object.create(Sn.prototype), In.prototype.constructor = In, On.prototype = Object.create(Sn.prototype), On.prototype.constructor = On, Dn.prototype = Object.create(Sn.prototype), Dn.prototype.constructor = Dn, Fn.prototype = Object.create(Sn.prototype), Fn.prototype.constructor = Fn, Object.assign(kn.prototype, {
    computeGroups: function (e) {
    for (var t, i = [], n = void 0, r = e.faces, a = 0; a < r.length; a++) {
        var o = r[a];
        o.materialIndex !== n && (n = o.materialIndex, void 0 !== t && (t.count = 3 * a - t.start, i.push(t)), t = { start: 3 * a, materialIndex: n });
    } void 0 !== t && (t.count = 3 * a - t.start, i.push(t)), this.groups = i;
    }, fromGeometry: function (e) {
    var t, i = e.faces, n = e.vertices, r = e.faceVertexUvs, a = r[0] && r[0].length > 0, o = r[1] && r[1].length > 0, s = e.morphTargets, l = s.length; if (l > 0) {
        t = [];
        for (var c = 0; c < l; c++)
            t[c] = { name: s[c].name, data: [] };
        this.morphTargets.position = t;
    } var u, h = e.morphNormals, d = h.length; if (d > 0) {
        u = [];
        for (c = 0; c < d; c++)
            u[c] = { name: h[c].name, data: [] };
        this.morphTargets.normal = u;
    } var p = e.skinIndices, f = e.skinWeights, m = p.length === n.length, v = f.length === n.length; n.length > 0 && 0 === i.length && console.error("THREE.DirectGeometry: Faceless geometries are not supported."); for (c = 0; c < i.length; c++) {
        var g = i[c];
        this.vertices.push(n[g.a], n[g.b], n[g.c]);
        var y = g.vertexNormals;
        if (3 === y.length)
            this.normals.push(y[0], y[1], y[2]);
        else {
            var b = g.normal;
            this.normals.push(b, b, b);
        }
        var x, _ = g.vertexColors;
        if (3 === _.length)
            this.colors.push(_[0], _[1], _[2]);
        else {
            var w = g.color;
            this.colors.push(w, w, w);
        }
        if (!0 === a)
            void 0 !== (x = r[0][c]) ? this.uvs.push(x[0], x[1], x[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", c), this.uvs.push(new Ut, new Ut, new Ut));
        if (!0 === o)
            void 0 !== (x = r[1][c]) ? this.uvs2.push(x[0], x[1], x[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", c), this.uvs2.push(new Ut, new Ut, new Ut));
        for (var T = 0; T < l; T++) {
            var M = s[T].vertices;
            t[T].data.push(M[g.a], M[g.b], M[g.c]);
        }
        for (T = 0; T < d; T++) {
            var A = h[T].vertexNormals[c];
            u[T].data.push(A.a, A.b, A.c);
        }
        m && this.skinIndices.push(p[g.a], p[g.b], p[g.c]), v && this.skinWeights.push(f[g.a], f[g.b], f[g.c]);
    } return this.computeGroups(e), this.verticesNeedUpdate = e.verticesNeedUpdate, this.normalsNeedUpdate = e.normalsNeedUpdate, this.colorsNeedUpdate = e.colorsNeedUpdate, this.uvsNeedUpdate = e.uvsNeedUpdate, this.groupsNeedUpdate = e.groupsNeedUpdate, null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), this;
    }
    });
    var Bn = 1, Gn = new li, Hn = new Si, Un = new Wt, zn = new Ui, Vn = new Ui, jn = new Wt;
    function Wn() { Object.defineProperty(this, "id", { value: Bn += 2 }), this.uuid = Ht.generateUUID(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = !1, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {}; }
    Wn.prototype = Object.assign(Object.create(Nt.prototype), {
    constructor: Wn, isBufferGeometry: !0, getIndex: function () { return this.index; }, setIndex: function (e) { Array.isArray(e) ? this.index = new (Nn(e) > 65535 ? On : Rn)(e, 1) : this.index = e; }, getAttribute: function (e) { return this.attributes[e]; }, setAttribute: function (e, t) { return this.attributes[e] = t, this; }, deleteAttribute: function (e) { return delete this.attributes[e], this; }, addGroup: function (e, t, i) { this.groups.push({ start: e, count: t, materialIndex: void 0 !== i ? i : 0 }); }, clearGroups: function () { this.groups = []; }, setDrawRange: function (e, t) { this.drawRange.start = e, this.drawRange.count = t; }, applyMatrix: function (e) { var t = this.attributes.position; void 0 !== t && (e.applyToBufferAttribute(t), t.needsUpdate = !0); var i = this.attributes.normal; void 0 !== i && ((new Qt).getNormalMatrix(e).applyToBufferAttribute(i), i.needsUpdate = !0); var n = this.attributes.tangent; void 0 !== n && ((new Qt).getNormalMatrix(e).applyToBufferAttribute(n), n.needsUpdate = !0); return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this; }, rotateX: function (e) { return Gn.makeRotationX(e), this.applyMatrix(Gn), this; }, rotateY: function (e) { return Gn.makeRotationY(e), this.applyMatrix(Gn), this; }, rotateZ: function (e) { return Gn.makeRotationZ(e), this.applyMatrix(Gn), this; }, translate: function (e, t, i) { return Gn.makeTranslation(e, t, i), this.applyMatrix(Gn), this; }, scale: function (e, t, i) { return Gn.makeScale(e, t, i), this.applyMatrix(Gn), this; }, lookAt: function (e) { return Hn.lookAt(e), Hn.updateMatrix(), this.applyMatrix(Hn.matrix), this; }, center: function () { return this.computeBoundingBox(), this.boundingBox.getCenter(Un).negate(), this.translate(Un.x, Un.y, Un.z), this; }, setFromObject: function (e) {
    var t = e.geometry; if (e.isPoints || e.isLine) {
        var i = new Dn(3 * t.vertices.length, 3), n = new Dn(3 * t.colors.length, 3);
        if (this.setAttribute("position", i.copyVector3sArray(t.vertices)), this.setAttribute("color", n.copyColorsArray(t.colors)), t.lineDistances && t.lineDistances.length === t.vertices.length) {
            var r = new Dn(t.lineDistances.length, 1);
            this.setAttribute("lineDistance", r.copyArray(t.lineDistances));
        }
        null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone());
    }
    else
        e.isMesh && t && t.isGeometry && this.fromGeometry(t); return this;
    }, setFromPoints: function (e) {
    for (var t = [], i = 0, n = e.length; i < n; i++) {
        var r = e[i];
        t.push(r.x, r.y, r.z || 0);
    } return this.setAttribute("position", new Dn(t, 3)), this;
    }, updateFromObject: function (e) {
    var t, i = e.geometry; if (e.isMesh) {
        var n = i.__directGeometry;
        if (!0 === i.elementsNeedUpdate && (n = void 0, i.elementsNeedUpdate = !1), void 0 === n)
            return this.fromGeometry(i);
        n.verticesNeedUpdate = i.verticesNeedUpdate, n.normalsNeedUpdate = i.normalsNeedUpdate, n.colorsNeedUpdate = i.colorsNeedUpdate, n.uvsNeedUpdate = i.uvsNeedUpdate, n.groupsNeedUpdate = i.groupsNeedUpdate, i.verticesNeedUpdate = !1, i.normalsNeedUpdate = !1, i.colorsNeedUpdate = !1, i.uvsNeedUpdate = !1, i.groupsNeedUpdate = !1, i = n;
    } return !0 === i.verticesNeedUpdate && (void 0 !== (t = this.attributes.position) && (t.copyVector3sArray(i.vertices), t.needsUpdate = !0), i.verticesNeedUpdate = !1), !0 === i.normalsNeedUpdate && (void 0 !== (t = this.attributes.normal) && (t.copyVector3sArray(i.normals), t.needsUpdate = !0), i.normalsNeedUpdate = !1), !0 === i.colorsNeedUpdate && (void 0 !== (t = this.attributes.color) && (t.copyColorsArray(i.colors), t.needsUpdate = !0), i.colorsNeedUpdate = !1), i.uvsNeedUpdate && (void 0 !== (t = this.attributes.uv) && (t.copyVector2sArray(i.uvs), t.needsUpdate = !0), i.uvsNeedUpdate = !1), i.lineDistancesNeedUpdate && (void 0 !== (t = this.attributes.lineDistance) && (t.copyArray(i.lineDistances), t.needsUpdate = !0), i.lineDistancesNeedUpdate = !1), i.groupsNeedUpdate && (i.computeGroups(e.geometry), this.groups = i.groups, i.groupsNeedUpdate = !1), this;
    }, fromGeometry: function (e) { return e.__directGeometry = (new kn).fromGeometry(e), this.fromDirectGeometry(e.__directGeometry); }, fromDirectGeometry: function (e) {
    var t = new Float32Array(3 * e.vertices.length); if (this.setAttribute("position", new Sn(t, 3).copyVector3sArray(e.vertices)), e.normals.length > 0) {
        var i = new Float32Array(3 * e.normals.length);
        this.setAttribute("normal", new Sn(i, 3).copyVector3sArray(e.normals));
    } if (e.colors.length > 0) {
        var n = new Float32Array(3 * e.colors.length);
        this.setAttribute("color", new Sn(n, 3).copyColorsArray(e.colors));
    } if (e.uvs.length > 0) {
        var r = new Float32Array(2 * e.uvs.length);
        this.setAttribute("uv", new Sn(r, 2).copyVector2sArray(e.uvs));
    } if (e.uvs2.length > 0) {
        var a = new Float32Array(2 * e.uvs2.length);
        this.setAttribute("uv2", new Sn(a, 2).copyVector2sArray(e.uvs2));
    } for (var o in this.groups = e.groups, e.morphTargets) {
        for (var s = [], l = e.morphTargets[o], c = 0, u = l.length; c < u; c++) {
            var h = l[c], d = new Dn(3 * h.data.length, 3);
            d.name = h.name, s.push(d.copyVector3sArray(h.data));
        }
        this.morphAttributes[o] = s;
    } if (e.skinIndices.length > 0) {
        var p = new Dn(4 * e.skinIndices.length, 4);
        this.setAttribute("skinIndex", p.copyVector4sArray(e.skinIndices));
    } if (e.skinWeights.length > 0) {
        var f = new Dn(4 * e.skinWeights.length, 4);
        this.setAttribute("skinWeight", f.copyVector4sArray(e.skinWeights));
    } return null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), this;
    }, computeBoundingBox: function () {
    null === this.boundingBox && (this.boundingBox = new Ui); var e = this.attributes.position, t = this.morphAttributes.position; if (void 0 !== e) {
        if (this.boundingBox.setFromBufferAttribute(e), t)
            for (var i = 0, n = t.length; i < n; i++) {
                var r = t[i];
                zn.setFromBufferAttribute(r), this.morphTargetsRelative ? (jn.addVectors(this.boundingBox.min, zn.min), this.boundingBox.expandByPoint(jn), jn.addVectors(this.boundingBox.max, zn.max), this.boundingBox.expandByPoint(jn)) : (this.boundingBox.expandByPoint(zn.min), this.boundingBox.expandByPoint(zn.max));
            }
    }
    else
        this.boundingBox.makeEmpty(); (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
    }, computeBoundingSphere: function () {
    null === this.boundingSphere && (this.boundingSphere = new ji); var e = this.attributes.position, t = this.morphAttributes.position; if (e) {
        var i = this.boundingSphere.center;
        if (zn.setFromBufferAttribute(e), t)
            for (var n = 0, r = t.length; n < r; n++) {
                var a = t[n];
                Vn.setFromBufferAttribute(a), this.morphTargetsRelative ? (jn.addVectors(zn.min, Vn.min), zn.expandByPoint(jn), jn.addVectors(zn.max, Vn.max), zn.expandByPoint(jn)) : (zn.expandByPoint(Vn.min), zn.expandByPoint(Vn.max));
            }
        zn.getCenter(i);
        var o = 0;
        for (n = 0, r = e.count; n < r; n++)
            jn.fromBufferAttribute(e, n), o = Math.max(o, i.distanceToSquared(jn));
        if (t)
            for (n = 0, r = t.length; n < r; n++) {
                a = t[n];
                for (var s = this.morphTargetsRelative, l = 0, c = a.count; l < c; l++)
                    jn.fromBufferAttribute(a, l), s && (Un.fromBufferAttribute(e, l), jn.add(Un)), o = Math.max(o, i.distanceToSquared(jn));
            }
        this.boundingSphere.radius = Math.sqrt(o), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
    }
    }, computeFaceNormals: function () { }, computeVertexNormals: function () {
    var e = this.index, t = this.attributes; if (t.position) {
        var i = t.position.array;
        if (void 0 === t.normal)
            this.setAttribute("normal", new Sn(new Float32Array(i.length), 3));
        else
            for (var n = t.normal.array, r = 0, a = n.length; r < a; r++)
                n[r] = 0;
        var o, s, l, c = t.normal.array, u = new Wt, h = new Wt, d = new Wt, p = new Wt, f = new Wt;
        if (e) {
            var m = e.array;
            for (r = 0, a = e.count; r < a; r += 3)
                o = 3 * m[r + 0], s = 3 * m[r + 1], l = 3 * m[r + 2], u.fromArray(i, o), h.fromArray(i, s), d.fromArray(i, l), p.subVectors(d, h), f.subVectors(u, h), p.cross(f), c[o] += p.x, c[o + 1] += p.y, c[o + 2] += p.z, c[s] += p.x, c[s + 1] += p.y, c[s + 2] += p.z, c[l] += p.x, c[l + 1] += p.y, c[l + 2] += p.z;
        }
        else
            for (r = 0, a = i.length; r < a; r += 9)
                u.fromArray(i, r), h.fromArray(i, r + 3), d.fromArray(i, r + 6), p.subVectors(d, h), f.subVectors(u, h), p.cross(f), c[r] = p.x, c[r + 1] = p.y, c[r + 2] = p.z, c[r + 3] = p.x, c[r + 4] = p.y, c[r + 5] = p.z, c[r + 6] = p.x, c[r + 7] = p.y, c[r + 8] = p.z;
        this.normalizeNormals(), t.normal.needsUpdate = !0;
    }
    }, merge: function (e, t) {
    if (e && e.isBufferGeometry) {
        void 0 === t && (t = 0, console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
        var i = this.attributes;
        for (var n in i)
            if (void 0 !== e.attributes[n])
                for (var r = i[n].array, a = e.attributes[n], o = a.array, s = a.itemSize * t, l = Math.min(o.length, r.length - s), c = 0, u = s; c < l; c++ , u++)
                    r[u] = o[c];
        return this;
    } console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e);
    }, normalizeNormals: function () {
    for (var e = this.attributes.normal, t = 0, i = e.count; t < i; t++)
        jn.x = e.getX(t), jn.y = e.getY(t), jn.z = e.getZ(t), jn.normalize(), e.setXYZ(t, jn.x, jn.y, jn.z);
    }, toNonIndexed: function () {
    function e(e, t) {
    for (var i = e.array, n = e.itemSize, r = new i.constructor(t.length * n), a = 0, o = 0, s = 0, l = t.length; s < l; s++) {
        a = t[s] * n;
        for (var c = 0; c < n; c++)
            r[o++] = i[a++];
    } return new Sn(r, n);
    } if (null === this.index)
            return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."), this; var t = new Wn, i = this.index.array, n = this.attributes; for (var r in n) {
                var a = e(n[r], i);
                t.setAttribute(r, a);
            } var o = this.morphAttributes; for (r in o) {
                for (var s = [], l = o[r], c = 0, u = l.length; c < u; c++) {
                    a = e(l[c], i);
                    s.push(a);
                }
                t.morphAttributes[r] = s;
            } t.morphTargetsRelative = this.morphTargetsRelative; for (var h = this.groups, d = (c = 0, h.length); c < d; c++) {
                var p = h[c];
                t.addGroup(p.start, p.count, p.materialIndex);
            } return t;
    }, toJSON: function () {
    var e = { metadata: { version: 4.5, type: "BufferGeometry", generator: "BufferGeometry.toJSON" } }; if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), Object.keys(this.userData).length > 0 && (e.userData = this.userData), void 0 !== this.parameters) {
        var t = this.parameters;
        for (var i in t)
            void 0 !== t[i] && (e[i] = t[i]);
        return e;
    } e.data = { attributes: {} }; var n = this.index; null !== n && (e.data.index = { type: n.array.constructor.name, array: Array.prototype.slice.call(n.array) }); var r = this.attributes; for (var i in r) {
        var a = (d = r[i]).toJSON();
        "" !== d.name && (a.name = d.name), e.data.attributes[i] = a;
    } var o = {}, s = !1; for (var i in this.morphAttributes) {
        for (var l = this.morphAttributes[i], c = [], u = 0, h = l.length; u < h; u++) {
            var d;
            a = (d = l[u]).toJSON();
            "" !== d.name && (a.name = d.name), c.push(a);
        }
        c.length > 0 && (o[i] = c, s = !0);
    } s && (e.data.morphAttributes = o, e.data.morphTargetsRelative = this.morphTargetsRelative); var p = this.groups; p.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(p))); var f = this.boundingSphere; return null !== f && (e.data.boundingSphere = { center: f.center.toArray(), radius: f.radius }), e;
    }, clone: function () { return (new Wn).copy(this); }, copy: function (e) {
    var t, i, n; this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.name = e.name; var r = e.index; null !== r && this.setIndex(r.clone()); var a = e.attributes; for (t in a) {
        var o = a[t];
        this.setAttribute(t, o.clone());
    } var s = e.morphAttributes; for (t in s) {
        var l = [], c = s[t];
        for (i = 0, n = c.length; i < n; i++)
            l.push(c[i].clone());
        this.morphAttributes[t] = l;
    } this.morphTargetsRelative = e.morphTargetsRelative; var u = e.groups; for (i = 0, n = u.length; i < n; i++) {
        var h = u[i];
        this.addGroup(h.start, h.count, h.materialIndex);
    } var d = e.boundingBox; null !== d && (this.boundingBox = d.clone()); var p = e.boundingSphere; return null !== p && (this.boundingSphere = p.clone()), this.drawRange.start = e.drawRange.start, this.drawRange.count = e.drawRange.count, this.userData = e.userData, this;
    }, dispose: function () { this.dispatchEvent({ type: "dispose" }); }
    });
    var Xn = new li, Yn = new Ki, Qn = new ji, qn = new Wt, $n = new Wt, Zn = new Wt, Kn = new Wt, Jn = new Wt, er = new Wt, tr = new Wt, ir = new Wt, nr = new Wt, rr = new Ut, ar = new Ut, or = new Ut, sr = new Wt, lr = new Wt;
    function cr(e, t) { Si.call(this), this.type = "Mesh", this.geometry = void 0 !== e ? e : new Wn, this.material = void 0 !== t ? t : new An({ color: 16777215 * Math.random() }), this.drawMode = bt, this.updateMorphTargets(); }
    function ur(e, t, i, n, r, a, o, s) {
    if (null === (t.side === w ? n.intersectTriangle(o, a, r, !0, s) : n.intersectTriangle(r, a, o, t.side !== T, s)))
        return null; lr.copy(s), lr.applyMatrix4(e.matrixWorld); var l = i.ray.origin.distanceTo(lr); return l < i.near || l > i.far ? null : { distance: l, point: lr.clone(), object: e };
    }
    function hr(e, t, i, n, r, a, o, s, l, c, u, h) {
    qn.fromBufferAttribute(r, c), $n.fromBufferAttribute(r, u), Zn.fromBufferAttribute(r, h); var d = e.morphTargetInfluences; if (t.morphTargets && a && d) {
        tr.set(0, 0, 0), ir.set(0, 0, 0), nr.set(0, 0, 0);
        for (var p = 0, f = a.length; p < f; p++) {
            var m = d[p], v = a[p];
            0 !== m && (Kn.fromBufferAttribute(v, c), Jn.fromBufferAttribute(v, u), er.fromBufferAttribute(v, h), o ? (tr.addScaledVector(Kn, m), ir.addScaledVector(Jn, m), nr.addScaledVector(er, m)) : (tr.addScaledVector(Kn.sub(qn), m), ir.addScaledVector(Jn.sub($n), m), nr.addScaledVector(er.sub(Zn), m)));
        }
        qn.add(tr), $n.add(ir), Zn.add(nr);
    } var g = ur(e, t, i, n, qn, $n, Zn, sr); if (g) {
        s && (rr.fromBufferAttribute(s, c), ar.fromBufferAttribute(s, u), or.fromBufferAttribute(s, h), g.uv = fn.getUV(sr, qn, $n, Zn, rr, ar, or, new Ut)), l && (rr.fromBufferAttribute(l, c), ar.fromBufferAttribute(l, u), or.fromBufferAttribute(l, h), g.uv2 = fn.getUV(sr, qn, $n, Zn, rr, ar, or, new Ut));
        var y = new wn(c, u, h);
        fn.getNormal(qn, $n, Zn, y.normal), g.face = y;
    } return g;
    }
    cr.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: cr, isMesh: !0, setDrawMode: function (e) { this.drawMode = e; }, copy: function (e) { return Si.prototype.copy.call(this, e), this.drawMode = e.drawMode, void 0 !== e.morphTargetInfluences && (this.morphTargetInfluences = e.morphTargetInfluences.slice()), void 0 !== e.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, e.morphTargetDictionary)), this; }, updateMorphTargets: function () {
    var e, t, i, n = this.geometry; if (n.isBufferGeometry) {
        var r = n.morphAttributes, a = Object.keys(r);
        if (a.length > 0) {
            var o = r[a[0]];
            if (void 0 !== o)
                for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, e = 0, t = o.length; e < t; e++)
                    i = o[e].name || String(e), this.morphTargetInfluences.push(0), this.morphTargetDictionary[i] = e;
        }
    }
    else {
        var s = n.morphTargets;
        void 0 !== s && s.length > 0 && console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");
    }
    }, raycast: function (e, t) {
    var i, n = this.geometry, r = this.material, a = this.matrixWorld; if (void 0 !== r && (null === n.boundingSphere && n.computeBoundingSphere(), Qn.copy(n.boundingSphere), Qn.applyMatrix4(a), !1 !== e.ray.intersectsSphere(Qn) && (Xn.getInverse(a), Yn.copy(e.ray).applyMatrix4(Xn), null === n.boundingBox || !1 !== Yn.intersectsBox(n.boundingBox))))
        if (this.drawMode === bt) {
            if (n.isBufferGeometry) {
                var o, s, l, c, u, h, d, p, f, m = n.index, v = n.attributes.position, g = n.morphAttributes.position, y = n.morphTargetsRelative, b = n.attributes.uv, x = n.attributes.uv2, _ = n.groups, w = n.drawRange;
                if (null !== m)
                    if (Array.isArray(r))
                        for (c = 0, h = _.length; c < h; c++)
                            for (f = r[(p = _[c]).materialIndex], u = Math.max(p.start, w.start), d = Math.min(p.start + p.count, w.start + w.count); u < d; u += 3)
                                o = m.getX(u), s = m.getX(u + 1), l = m.getX(u + 2), (i = hr(this, f, e, Yn, v, g, y, b, x, o, s, l)) && (i.faceIndex = Math.floor(u / 3), i.face.materialIndex = p.materialIndex, t.push(i));
                    else
                        for (c = Math.max(0, w.start), h = Math.min(m.count, w.start + w.count); c < h; c += 3)
                            o = m.getX(c), s = m.getX(c + 1), l = m.getX(c + 2), (i = hr(this, r, e, Yn, v, g, y, b, x, o, s, l)) && (i.faceIndex = Math.floor(c / 3), t.push(i));
                else if (void 0 !== v)
                    if (Array.isArray(r))
                        for (c = 0, h = _.length; c < h; c++)
                            for (f = r[(p = _[c]).materialIndex], u = Math.max(p.start, w.start), d = Math.min(p.start + p.count, w.start + w.count); u < d; u += 3)
                                (i = hr(this, f, e, Yn, v, g, y, b, x, o = u, s = u + 1, l = u + 2)) && (i.faceIndex = Math.floor(u / 3), i.face.materialIndex = p.materialIndex, t.push(i));
                    else
                        for (c = Math.max(0, w.start), h = Math.min(v.count, w.start + w.count); c < h; c += 3)
                            (i = hr(this, r, e, Yn, v, g, y, b, x, o = c, s = c + 1, l = c + 2)) && (i.faceIndex = Math.floor(c / 3), t.push(i));
            }
            else if (n.isGeometry) {
                var T, M, A, S, E = Array.isArray(r), P = n.vertices, C = n.faces, L = n.faceVertexUvs[0];
                L.length > 0 && (S = L);
                for (var R = 0, I = C.length; R < I; R++) {
                    var O = C[R], D = E ? r[O.materialIndex] : r;
                    if (void 0 !== D && (T = P[O.a], M = P[O.b], A = P[O.c], i = ur(this, D, e, Yn, T, M, A, sr))) {
                        if (S && S[R]) {
                            var F = S[R];
                            rr.copy(F[0]), ar.copy(F[1]), or.copy(F[2]), i.uv = fn.getUV(sr, T, M, A, rr, ar, or, new Ut);
                        }
                        i.face = O, i.faceIndex = R, t.push(i);
                    }
                }
            }
        }
        else
            console.warn("THREE.Mesh: TriangleStripDrawMode and TriangleFanDrawMode are not supported by .raycast().");
    }, clone: function () { return new this.constructor(this.geometry, this.material).copy(this); }
    });
    var dr = 0, pr = new li, fr = new Si, mr = new Wt;
    function vr() { Object.defineProperty(this, "id", { value: dr += 2 }), this.uuid = Ht.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [[]], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.elementsNeedUpdate = !1, this.verticesNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1; }
    vr.prototype = Object.assign(Object.create(Nt.prototype), {
    constructor: vr, isGeometry: !0, applyMatrix: function (e) {
    for (var t = (new Qt).getNormalMatrix(e), i = 0, n = this.vertices.length; i < n; i++) {
        this.vertices[i].applyMatrix4(e);
    } for (i = 0, n = this.faces.length; i < n; i++) {
        var r = this.faces[i];
        r.normal.applyMatrix3(t).normalize();
        for (var a = 0, o = r.vertexNormals.length; a < o; a++)
            r.vertexNormals[a].applyMatrix3(t).normalize();
    } return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this;
    }, rotateX: function (e) { return pr.makeRotationX(e), this.applyMatrix(pr), this; }, rotateY: function (e) { return pr.makeRotationY(e), this.applyMatrix(pr), this; }, rotateZ: function (e) { return pr.makeRotationZ(e), this.applyMatrix(pr), this; }, translate: function (e, t, i) { return pr.makeTranslation(e, t, i), this.applyMatrix(pr), this; }, scale: function (e, t, i) { return pr.makeScale(e, t, i), this.applyMatrix(pr), this; }, lookAt: function (e) { return fr.lookAt(e), fr.updateMatrix(), this.applyMatrix(fr.matrix), this; }, fromBufferGeometry: function (e) {
    var t = this, i = null !== e.index ? e.index.array : void 0, n = e.attributes; if (void 0 === n.position)
        return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."), this; var r = n.position.array, a = void 0 !== n.normal ? n.normal.array : void 0, o = void 0 !== n.color ? n.color.array : void 0, s = void 0 !== n.uv ? n.uv.array : void 0, l = void 0 !== n.uv2 ? n.uv2.array : void 0; void 0 !== l && (this.faceVertexUvs[1] = []); for (var c = 0; c < r.length; c += 3)
            t.vertices.push((new Wt).fromArray(r, c)), void 0 !== o && t.colors.push((new yn).fromArray(o, c)); function u(e, i, n, r) { var c = void 0 === o ? [] : [t.colors[e].clone(), t.colors[i].clone(), t.colors[n].clone()], u = new wn(e, i, n, void 0 === a ? [] : [(new Wt).fromArray(a, 3 * e), (new Wt).fromArray(a, 3 * i), (new Wt).fromArray(a, 3 * n)], c, r); t.faces.push(u), void 0 !== s && t.faceVertexUvs[0].push([(new Ut).fromArray(s, 2 * e), (new Ut).fromArray(s, 2 * i), (new Ut).fromArray(s, 2 * n)]), void 0 !== l && t.faceVertexUvs[1].push([(new Ut).fromArray(l, 2 * e), (new Ut).fromArray(l, 2 * i), (new Ut).fromArray(l, 2 * n)]); } var h = e.groups; if (h.length > 0)
            for (c = 0; c < h.length; c++)
                for (var d = h[c], p = d.start, f = p, m = p + d.count; f < m; f += 3)
                    void 0 !== i ? u(i[f], i[f + 1], i[f + 2], d.materialIndex) : u(f, f + 1, f + 2, d.materialIndex);
        else if (void 0 !== i)
            for (c = 0; c < i.length; c += 3)
                u(i[c], i[c + 1], i[c + 2]);
        else
            for (c = 0; c < r.length / 3; c += 3)
                u(c, c + 1, c + 2); return this.computeFaceNormals(), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this;
    }, center: function () { return this.computeBoundingBox(), this.boundingBox.getCenter(mr).negate(), this.translate(mr.x, mr.y, mr.z), this; }, normalize: function () { this.computeBoundingSphere(); var e = this.boundingSphere.center, t = this.boundingSphere.radius, i = 0 === t ? 1 : 1 / t, n = new li; return n.set(i, 0, 0, -i * e.x, 0, i, 0, -i * e.y, 0, 0, i, -i * e.z, 0, 0, 0, 1), this.applyMatrix(n), this; }, computeFaceNormals: function () {
    for (var e = new Wt, t = new Wt, i = 0, n = this.faces.length; i < n; i++) {
        var r = this.faces[i], a = this.vertices[r.a], o = this.vertices[r.b], s = this.vertices[r.c];
        e.subVectors(s, o), t.subVectors(a, o), e.cross(t), e.normalize(), r.normal.copy(e);
    }
    }, computeVertexNormals: function (e) {
    var t, i, n, r, a, o; for (void 0 === e && (e = !0), o = new Array(this.vertices.length), t = 0, i = this.vertices.length; t < i; t++)
        o[t] = new Wt; if (e) {
            var s, l, c, u = new Wt, h = new Wt;
            for (n = 0, r = this.faces.length; n < r; n++)
                a = this.faces[n], s = this.vertices[a.a], l = this.vertices[a.b], c = this.vertices[a.c], u.subVectors(c, l), h.subVectors(s, l), u.cross(h), o[a.a].add(u), o[a.b].add(u), o[a.c].add(u);
        }
        else
            for (this.computeFaceNormals(), n = 0, r = this.faces.length; n < r; n++)
                o[(a = this.faces[n]).a].add(a.normal), o[a.b].add(a.normal), o[a.c].add(a.normal); for (t = 0, i = this.vertices.length; t < i; t++)
            o[t].normalize(); for (n = 0, r = this.faces.length; n < r; n++) {
                var d = (a = this.faces[n]).vertexNormals;
                3 === d.length ? (d[0].copy(o[a.a]), d[1].copy(o[a.b]), d[2].copy(o[a.c])) : (d[0] = o[a.a].clone(), d[1] = o[a.b].clone(), d[2] = o[a.c].clone());
            } this.faces.length > 0 && (this.normalsNeedUpdate = !0);
    }, computeFlatVertexNormals: function () {
    var e, t, i; for (this.computeFaceNormals(), e = 0, t = this.faces.length; e < t; e++) {
        var n = (i = this.faces[e]).vertexNormals;
        3 === n.length ? (n[0].copy(i.normal), n[1].copy(i.normal), n[2].copy(i.normal)) : (n[0] = i.normal.clone(), n[1] = i.normal.clone(), n[2] = i.normal.clone());
    } this.faces.length > 0 && (this.normalsNeedUpdate = !0);
    }, computeMorphNormals: function () {
    var e, t, i, n, r; for (i = 0, n = this.faces.length; i < n; i++)
        for ((r = this.faces[i]).__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(), r.__originalVertexNormals || (r.__originalVertexNormals = []), e = 0, t = r.vertexNormals.length; e < t; e++)
            r.__originalVertexNormals[e] ? r.__originalVertexNormals[e].copy(r.vertexNormals[e]) : r.__originalVertexNormals[e] = r.vertexNormals[e].clone(); var a = new vr; for (a.faces = this.faces, e = 0, t = this.morphTargets.length; e < t; e++) {
                if (!this.morphNormals[e]) {
                    this.morphNormals[e] = {}, this.morphNormals[e].faceNormals = [], this.morphNormals[e].vertexNormals = [];
                    var o = this.morphNormals[e].faceNormals, s = this.morphNormals[e].vertexNormals;
                    for (i = 0, n = this.faces.length; i < n; i++)
                        l = new Wt, c = { a: new Wt, b: new Wt, c: new Wt }, o.push(l), s.push(c);
                }
                var l, c, u = this.morphNormals[e];
                for (a.vertices = this.morphTargets[e].vertices, a.computeFaceNormals(), a.computeVertexNormals(), i = 0, n = this.faces.length; i < n; i++)
                    r = this.faces[i], l = u.faceNormals[i], c = u.vertexNormals[i], l.copy(r.normal), c.a.copy(r.vertexNormals[0]), c.b.copy(r.vertexNormals[1]), c.c.copy(r.vertexNormals[2]);
            } for (i = 0, n = this.faces.length; i < n; i++)
            (r = this.faces[i]).normal = r.__originalFaceNormal, r.vertexNormals = r.__originalVertexNormals;
    }, computeBoundingBox: function () { null === this.boundingBox && (this.boundingBox = new Ui), this.boundingBox.setFromPoints(this.vertices); }, computeBoundingSphere: function () { null === this.boundingSphere && (this.boundingSphere = new ji), this.boundingSphere.setFromPoints(this.vertices); }, merge: function (e, t, i) {
    if (e && e.isGeometry) {
        var n, r = this.vertices.length, a = this.vertices, o = e.vertices, s = this.faces, l = e.faces, c = this.colors, u = e.colors;
        void 0 === i && (i = 0), void 0 !== t && (n = (new Qt).getNormalMatrix(t));
        for (var h = 0, d = o.length; h < d; h++) {
            var p = o[h].clone();
            void 0 !== t && p.applyMatrix4(t), a.push(p);
        }
        for (h = 0, d = u.length; h < d; h++)
            c.push(u[h].clone());
        for (h = 0, d = l.length; h < d; h++) {
            var f, m, v, g = l[h], y = g.vertexNormals, b = g.vertexColors;
            (f = new wn(g.a + r, g.b + r, g.c + r)).normal.copy(g.normal), void 0 !== n && f.normal.applyMatrix3(n).normalize();
            for (var x = 0, _ = y.length; x < _; x++)
                m = y[x].clone(), void 0 !== n && m.applyMatrix3(n).normalize(), f.vertexNormals.push(m);
            f.color.copy(g.color);
            for (x = 0, _ = b.length; x < _; x++)
                v = b[x], f.vertexColors.push(v.clone());
            f.materialIndex = g.materialIndex + i, s.push(f);
        }
        for (h = 0, d = e.faceVertexUvs.length; h < d; h++) {
            var w = e.faceVertexUvs[h];
            void 0 === this.faceVertexUvs[h] && (this.faceVertexUvs[h] = []);
            for (x = 0, _ = w.length; x < _; x++) {
                for (var T = w[x], M = [], A = 0, S = T.length; A < S; A++)
                    M.push(T[A].clone());
                this.faceVertexUvs[h].push(M);
            }
        }
    }
    else
        console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e);
    }, mergeMesh: function (e) { e && e.isMesh ? (e.matrixAutoUpdate && e.updateMatrix(), this.merge(e.geometry, e.matrix)) : console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e); }, mergeVertices: function () {
    var e, t, i, n, r, a, o, s, l = {}, c = [], u = [], h = Math.pow(10, 4); for (i = 0, n = this.vertices.length; i < n; i++)
        e = this.vertices[i], void 0 === l[t = Math.round(e.x * h) + "_" + Math.round(e.y * h) + "_" + Math.round(e.z * h)] ? (l[t] = i, c.push(this.vertices[i]), u[i] = c.length - 1) : u[i] = u[l[t]]; var d = []; for (i = 0, n = this.faces.length; i < n; i++) {
            (r = this.faces[i]).a = u[r.a], r.b = u[r.b], r.c = u[r.c], a = [r.a, r.b, r.c];
            for (var p = 0; p < 3; p++)
                if (a[p] === a[(p + 1) % 3]) {
                    d.push(i);
                    break;
                }
        } for (i = d.length - 1; i >= 0; i--) {
            var f = d[i];
            for (this.faces.splice(f, 1), o = 0, s = this.faceVertexUvs.length; o < s; o++)
                this.faceVertexUvs[o].splice(f, 1);
        } var m = this.vertices.length - c.length; return this.vertices = c, m;
    }, setFromPoints: function (e) {
    this.vertices = []; for (var t = 0, i = e.length; t < i; t++) {
        var n = e[t];
        this.vertices.push(new Wt(n.x, n.y, n.z || 0));
    } return this;
    }, sortFacesByMaterialIndex: function () {
    for (var e = this.faces, t = e.length, i = 0; i < t; i++)
        e[i]._id = i; e.sort((function (e, t) { return e.materialIndex - t.materialIndex; })); var n, r, a = this.faceVertexUvs[0], o = this.faceVertexUvs[1]; a && a.length === t && (n = []), o && o.length === t && (r = []); for (i = 0; i < t; i++) {
            var s = e[i]._id;
            n && n.push(a[s]), r && r.push(o[s]);
        } n && (this.faceVertexUvs[0] = n), r && (this.faceVertexUvs[1] = r);
    }, toJSON: function () {
    var e = { metadata: { version: 4.5, type: "Geometry", generator: "Geometry.toJSON" } }; if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
        var t = this.parameters;
        for (var i in t)
            void 0 !== t[i] && (e[i] = t[i]);
        return e;
    } for (var n = [], r = 0; r < this.vertices.length; r++) {
        var a = this.vertices[r];
        n.push(a.x, a.y, a.z);
    } var o = [], s = [], l = {}, c = [], u = {}, h = [], d = {}; for (r = 0; r < this.faces.length; r++) {
        var p = this.faces[r], f = void 0 !== this.faceVertexUvs[0][r], m = p.normal.length() > 0, v = p.vertexNormals.length > 0, g = 1 !== p.color.r || 1 !== p.color.g || 1 !== p.color.b, y = p.vertexColors.length > 0, b = 0;
        if (b = T(b, 0, 0), b = T(b, 1, !0), b = T(b, 2, !1), b = T(b, 3, f), b = T(b, 4, m), b = T(b, 5, v), b = T(b, 6, g), b = T(b, 7, y), o.push(b), o.push(p.a, p.b, p.c), o.push(p.materialIndex), f) {
            var x = this.faceVertexUvs[0][r];
            o.push(S(x[0]), S(x[1]), S(x[2]));
        }
        if (m && o.push(M(p.normal)), v) {
            var _ = p.vertexNormals;
            o.push(M(_[0]), M(_[1]), M(_[2]));
        }
        if (g && o.push(A(p.color)), y) {
            var w = p.vertexColors;
            o.push(A(w[0]), A(w[1]), A(w[2]));
        }
    } function T(e, t, i) { return i ? e | 1 << t : e & ~(1 << t); } function M(e) { var t = e.x.toString() + e.y.toString() + e.z.toString(); return void 0 !== l[t] ? l[t] : (l[t] = s.length / 3, s.push(e.x, e.y, e.z), l[t]); } function A(e) { var t = e.r.toString() + e.g.toString() + e.b.toString(); return void 0 !== u[t] ? u[t] : (u[t] = c.length, c.push(e.getHex()), u[t]); } function S(e) { var t = e.x.toString() + e.y.toString(); return void 0 !== d[t] ? d[t] : (d[t] = h.length / 2, h.push(e.x, e.y), d[t]); } return e.data = {}, e.data.vertices = n, e.data.normals = s, c.length > 0 && (e.data.colors = c), h.length > 0 && (e.data.uvs = [h]), e.data.faces = o, e;
    }, clone: function () { return (new vr).copy(this); }, copy: function (e) {
    var t, i, n, r, a, o; this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [[]], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.name = e.name; var s = e.vertices; for (t = 0, i = s.length; t < i; t++)
        this.vertices.push(s[t].clone()); var l = e.colors; for (t = 0, i = l.length; t < i; t++)
            this.colors.push(l[t].clone()); var c = e.faces; for (t = 0, i = c.length; t < i; t++)
            this.faces.push(c[t].clone()); for (t = 0, i = e.faceVertexUvs.length; t < i; t++) {
                var u = e.faceVertexUvs[t];
                for (void 0 === this.faceVertexUvs[t] && (this.faceVertexUvs[t] = []), n = 0, r = u.length; n < r; n++) {
                    var h = u[n], d = [];
                    for (a = 0, o = h.length; a < o; a++) {
                        var p = h[a];
                        d.push(p.clone());
                    }
                    this.faceVertexUvs[t].push(d);
                }
            } var f = e.morphTargets; for (t = 0, i = f.length; t < i; t++) {
                var m = {};
                if (m.name = f[t].name, void 0 !== f[t].vertices)
                    for (m.vertices = [], n = 0, r = f[t].vertices.length; n < r; n++)
                        m.vertices.push(f[t].vertices[n].clone());
                if (void 0 !== f[t].normals)
                    for (m.normals = [], n = 0, r = f[t].normals.length; n < r; n++)
                        m.normals.push(f[t].normals[n].clone());
                this.morphTargets.push(m);
            } var v = e.morphNormals; for (t = 0, i = v.length; t < i; t++) {
                var g = {};
                if (void 0 !== v[t].vertexNormals)
                    for (g.vertexNormals = [], n = 0, r = v[t].vertexNormals.length; n < r; n++) {
                        var y = v[t].vertexNormals[n], b = {};
                        b.a = y.a.clone(), b.b = y.b.clone(), b.c = y.c.clone(), g.vertexNormals.push(b);
                    }
                if (void 0 !== v[t].faceNormals)
                    for (g.faceNormals = [], n = 0, r = v[t].faceNormals.length; n < r; n++)
                        g.faceNormals.push(v[t].faceNormals[n].clone());
                this.morphNormals.push(g);
            } var x = e.skinWeights; for (t = 0, i = x.length; t < i; t++)
            this.skinWeights.push(x[t].clone()); var _ = e.skinIndices; for (t = 0, i = _.length; t < i; t++)
            this.skinIndices.push(_[t].clone()); var w = e.lineDistances; for (t = 0, i = w.length; t < i; t++)
            this.lineDistances.push(w[t]); var T = e.boundingBox; null !== T && (this.boundingBox = T.clone()); var M = e.boundingSphere; return null !== M && (this.boundingSphere = M.clone()), this.elementsNeedUpdate = e.elementsNeedUpdate, this.verticesNeedUpdate = e.verticesNeedUpdate, this.uvsNeedUpdate = e.uvsNeedUpdate, this.normalsNeedUpdate = e.normalsNeedUpdate, this.colorsNeedUpdate = e.colorsNeedUpdate, this.lineDistancesNeedUpdate = e.lineDistancesNeedUpdate, this.groupsNeedUpdate = e.groupsNeedUpdate, this;
    }, dispose: function () { this.dispatchEvent({ type: "dispose" }); }
    });
    class gr extends Wn {
        constructor(e, t, i, n, r, a) {
        super(), this.type = "BoxBufferGeometry", this.parameters = { width: e, height: t, depth: i, widthSegments: n, heightSegments: r, depthSegments: a }; var o = this; e = e || 1, t = t || 1, i = i || 1, n = Math.floor(n) || 1, r = Math.floor(r) || 1, a = Math.floor(a) || 1; var s = [], l = [], c = [], u = [], h = 0, d = 0; function p(e, t, i, n, r, a, p, f, m, v, g) {
        var y, b, x = a / m, _ = p / v, w = a / 2, T = p / 2, M = f / 2, A = m + 1, S = v + 1, E = 0, P = 0, C = new Wt; for (b = 0; b < S; b++) {
            var L = b * _ - T;
            for (y = 0; y < A; y++) {
                var R = y * x - w;
                C[e] = R * n, C[t] = L * r, C[i] = M, l.push(C.x, C.y, C.z), C[e] = 0, C[t] = 0, C[i] = f > 0 ? 1 : -1, c.push(C.x, C.y, C.z), u.push(y / m), u.push(1 - b / v), E += 1;
            }
        } for (b = 0; b < v; b++)
                for (y = 0; y < m; y++) {
                    var I = h + y + A * b, O = h + y + A * (b + 1), D = h + (y + 1) + A * (b + 1), F = h + (y + 1) + A * b;
                    s.push(I, O, F), s.push(O, D, F), P += 6;
                } o.addGroup(d, P, g), d += P, h += E;
        } p("z", "y", "x", -1, -1, i, t, e, a, r, 0), p("z", "y", "x", 1, -1, i, t, -e, a, r, 1), p("x", "z", "y", 1, 1, e, i, t, n, a, 2), p("x", "z", "y", 1, -1, e, i, -t, n, a, 3), p("x", "y", "z", 1, -1, e, t, i, n, r, 4), p("x", "y", "z", -1, -1, e, t, -i, n, r, 5), this.setIndex(s), this.setAttribute("position", new Dn(l, 3)), this.setAttribute("normal", new Dn(c, 3)), this.setAttribute("uv", new Dn(u, 2));
        }
    }
    function yr(e) {
    var t = {}; for (var i in e)
        for (var n in t[i] = {}, e[i]) {
            var r = e[i][n];
            r && (r.isColor || r.isMatrix3 || r.isMatrix4 || r.isVector2 || r.isVector3 || r.isVector4 || r.isTexture) ? t[i][n] = r.clone() : Array.isArray(r) ? t[i][n] = r.slice() : t[i][n] = r;
        } return t;
    }
    function br(e) {
    for (var t = {}, i = 0; i < e.length; i++) {
        var n = yr(e[i]);
        for (var r in n)
            t[r] = n[r];
    } return t;
    }
    var xr = { clone: yr, merge: br }, _r = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", wr = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";
    function Tr(e) { Mn.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.vertexShader = _r, this.fragmentShader = wr, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.clipping = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.extensions = { derivatives: !1, fragDepth: !1, drawBuffers: !1, shaderTextureLOD: !1 }, this.defaultAttributeValues = { color: [1, 1, 1], uv: [0, 0], uv2: [0, 0] }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = !1, void 0 !== e && (void 0 !== e.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), this.setValues(e)); }
    function Mr() { Si.call(this), this.type = "Camera", this.matrixWorldInverse = new li, this.projectionMatrix = new li, this.projectionMatrixInverse = new li; }
    function Ar(e, t, i, n) { Mr.call(this), this.type = "PerspectiveCamera", this.fov = void 0 !== e ? e : 50, this.zoom = 1, this.near = void 0 !== i ? i : .1, this.far = void 0 !== n ? n : 2e3, this.focus = 10, this.aspect = void 0 !== t ? t : 1, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix(); }
    Tr.prototype = Object.create(Mn.prototype), Tr.prototype.constructor = Tr, Tr.prototype.isShaderMaterial = !0, Tr.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.fragmentShader = e.fragmentShader, this.vertexShader = e.vertexShader, this.uniforms = yr(e.uniforms), this.defines = Object.assign({}, e.defines), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.lights = e.lights, this.clipping = e.clipping, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this.extensions = e.extensions, this; }, Tr.prototype.toJSON = function (e) {
    var t = Mn.prototype.toJSON.call(this, e); for (var i in t.uniforms = {}, this.uniforms) {
        var n = this.uniforms[i].value;
        n && n.isTexture ? t.uniforms[i] = { type: "t", value: n.toJSON(e).uuid } : n && n.isColor ? t.uniforms[i] = { type: "c", value: n.getHex() } : n && n.isVector2 ? t.uniforms[i] = { type: "v2", value: n.toArray() } : n && n.isVector3 ? t.uniforms[i] = { type: "v3", value: n.toArray() } : n && n.isVector4 ? t.uniforms[i] = { type: "v4", value: n.toArray() } : n && n.isMatrix3 ? t.uniforms[i] = { type: "m3", value: n.toArray() } : n && n.isMatrix4 ? t.uniforms[i] = { type: "m4", value: n.toArray() } : t.uniforms[i] = { value: n };
    } Object.keys(this.defines).length > 0 && (t.defines = this.defines), t.vertexShader = this.vertexShader, t.fragmentShader = this.fragmentShader; var r = {}; for (var a in this.extensions)
            !0 === this.extensions[a] && (r[a] = !0); return Object.keys(r).length > 0 && (t.extensions = r), t;
    }, Mr.prototype = Object.assign(Object.create(Si.prototype), { constructor: Mr, isCamera: !0, copy: function (e, t) { return Si.prototype.copy.call(this, e, t), this.matrixWorldInverse.copy(e.matrixWorldInverse), this.projectionMatrix.copy(e.projectionMatrix), this.projectionMatrixInverse.copy(e.projectionMatrixInverse), this; }, getWorldDirection: function (e) { void 0 === e && (console.warn("THREE.Camera: .getWorldDirection() target is now required"), e = new Wt), this.updateMatrixWorld(!0); var t = this.matrixWorld.elements; return e.set(-t[8], -t[9], -t[10]).normalize(); }, updateMatrixWorld: function (e) { Si.prototype.updateMatrixWorld.call(this, e), this.matrixWorldInverse.getInverse(this.matrixWorld); }, clone: function () { return (new this.constructor).copy(this); } }), Ar.prototype = Object.assign(Object.create(Mr.prototype), {
    constructor: Ar, isPerspectiveCamera: !0, copy: function (e, t) { return Mr.prototype.copy.call(this, e, t), this.fov = e.fov, this.zoom = e.zoom, this.near = e.near, this.far = e.far, this.focus = e.focus, this.aspect = e.aspect, this.view = null === e.view ? null : Object.assign({}, e.view), this.filmGauge = e.filmGauge, this.filmOffset = e.filmOffset, this; }, setFocalLength: function (e) { var t = .5 * this.getFilmHeight() / e; this.fov = 2 * Ht.RAD2DEG * Math.atan(t), this.updateProjectionMatrix(); }, getFocalLength: function () { var e = Math.tan(.5 * Ht.DEG2RAD * this.fov); return .5 * this.getFilmHeight() / e; }, getEffectiveFOV: function () { return 2 * Ht.RAD2DEG * Math.atan(Math.tan(.5 * Ht.DEG2RAD * this.fov) / this.zoom); }, getFilmWidth: function () { return this.filmGauge * Math.min(this.aspect, 1); }, getFilmHeight: function () { return this.filmGauge / Math.max(this.aspect, 1); }, setViewOffset: function (e, t, i, n, r, a) { this.aspect = e / t, null === this.view && (this.view = { enabled: !0, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = !0, this.view.fullWidth = e, this.view.fullHeight = t, this.view.offsetX = i, this.view.offsetY = n, this.view.width = r, this.view.height = a, this.updateProjectionMatrix(); }, clearViewOffset: function () { null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix(); }, updateProjectionMatrix: function () {
    var e = this.near, t = e * Math.tan(.5 * Ht.DEG2RAD * this.fov) / this.zoom, i = 2 * t, n = this.aspect * i, r = -.5 * n, a = this.view; if (null !== this.view && this.view.enabled) {
        var o = a.fullWidth, s = a.fullHeight;
        r += a.offsetX * n / o, t -= a.offsetY * i / s, n *= a.width / o, i *= a.height / s;
    } var l = this.filmOffset; 0 !== l && (r += e * l / this.getFilmWidth()), this.projectionMatrix.makePerspective(r, r + n, t, t - i, e, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix);
    }, toJSON: function (e) { var t = Si.prototype.toJSON.call(this, e); return t.object.fov = this.fov, t.object.zoom = this.zoom, t.object.near = this.near, t.object.far = this.far, t.object.focus = this.focus, t.object.aspect = this.aspect, null !== this.view && (t.object.view = Object.assign({}, this.view)), t.object.filmGauge = this.filmGauge, t.object.filmOffset = this.filmOffset, t; }
    });
    var Sr = 90, Er = 1;
    function Pr(e, t, i, n) {
    Si.call(this), this.type = "CubeCamera"; var r = new Ar(Sr, Er, e, t); r.up.set(0, -1, 0), r.lookAt(new Wt(1, 0, 0)), this.add(r); var a = new Ar(Sr, Er, e, t); a.up.set(0, -1, 0), a.lookAt(new Wt(-1, 0, 0)), this.add(a); var o = new Ar(Sr, Er, e, t); o.up.set(0, 0, 1), o.lookAt(new Wt(0, 1, 0)), this.add(o); var s = new Ar(Sr, Er, e, t); s.up.set(0, 0, -1), s.lookAt(new Wt(0, -1, 0)), this.add(s); var l = new Ar(Sr, Er, e, t); l.up.set(0, -1, 0), l.lookAt(new Wt(0, 0, 1)), this.add(l); var c = new Ar(Sr, Er, e, t); c.up.set(0, -1, 0), c.lookAt(new Wt(0, 0, -1)), this.add(c), n = n || { format: Ue, magFilter: Ae, minFilter: Ae }, this.renderTarget = new Cr(i, i, n), this.renderTarget.texture.name = "CubeCamera", this.update = function (e, t) { null === this.parent && this.updateMatrixWorld(); var i = e.getRenderTarget(), n = this.renderTarget, u = n.texture.generateMipmaps; n.texture.generateMipmaps = !1, e.setRenderTarget(n, 0), e.render(t, r), e.setRenderTarget(n, 1), e.render(t, a), e.setRenderTarget(n, 2), e.render(t, o), e.setRenderTarget(n, 3), e.render(t, s), e.setRenderTarget(n, 4), e.render(t, l), n.texture.generateMipmaps = u, e.setRenderTarget(n, 5), e.render(t, c), e.setRenderTarget(i); }, this.clear = function (e, t, i, n) {
    for (var r = e.getRenderTarget(), a = this.renderTarget, o = 0; o < 6; o++)
        e.setRenderTarget(a, o), e.clear(t, i, n); e.setRenderTarget(r);
    };
    }
    function Cr(e, t, i) { Jt.call(this, e, t, i); }
    function Lr(e, t, i, n, r, a, o, s, l, c, u, h) { Zt.call(this, null, a, o, s, l, c, n, r, u, h), this.image = { data: e || null, width: t || 1, height: i || 1 }, this.magFilter = void 0 !== l ? l : we, this.minFilter = void 0 !== c ? c : we, this.generateMipmaps = !1, this.flipY = !1, this.unpackAlignment = 1, this.needsUpdate = !0; }
    Pr.prototype = Object.create(Si.prototype), Pr.prototype.constructor = Pr, Cr.prototype = Object.create(Jt.prototype), Cr.prototype.constructor = Cr, Cr.prototype.isWebGLRenderTargetCube = !0, Cr.prototype.fromEquirectangularTexture = function (e, t) { this.texture.type = t.type, this.texture.format = t.format, this.texture.encoding = t.encoding; var i = new Ei, n = { uniforms: { tEquirect: { value: null } }, vertexShader: ["varying vec3 vWorldDirection;", "vec3 transformDirection( in vec3 dir, in mat4 matrix ) {", "\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );", "}", "void main() {", "\tvWorldDirection = transformDirection( position, modelMatrix );", "\t#include <begin_vertex>", "\t#include <project_vertex>", "}"].join("\n"), fragmentShader: ["uniform sampler2D tEquirect;", "varying vec3 vWorldDirection;", "#define RECIPROCAL_PI 0.31830988618", "#define RECIPROCAL_PI2 0.15915494", "void main() {", "\tvec3 direction = normalize( vWorldDirection );", "\tvec2 sampleUV;", "\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;", "\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;", "\tgl_FragColor = texture2D( tEquirect, sampleUV );", "}"].join("\n") }, r = new Tr({ type: "CubemapFromEquirect", uniforms: yr(n.uniforms), vertexShader: n.vertexShader, fragmentShader: n.fragmentShader, side: w, blending: E }); r.uniforms.tEquirect.value = t; var a = new cr(new gr(5, 5, 5), r); i.add(a); var o = new Pr(1, 10, 1); return o.renderTarget = this, o.renderTarget.texture.name = "CubeCameraTexture", o.update(e, i), a.geometry.dispose(), a.material.dispose(), this; }, Lr.prototype = Object.create(Zt.prototype), Lr.prototype.constructor = Lr, Lr.prototype.isDataTexture = !0;
    var Rr = new ji, Ir = new Wt;
    function Or(e, t, i, n, r, a) { this.planes = [void 0 !== e ? e : new nn, void 0 !== t ? t : new nn, void 0 !== i ? i : new nn, void 0 !== n ? n : new nn, void 0 !== r ? r : new nn, void 0 !== a ? a : new nn]; }
    Object.assign(Or.prototype, {
    set: function (e, t, i, n, r, a) { var o = this.planes; return o[0].copy(e), o[1].copy(t), o[2].copy(i), o[3].copy(n), o[4].copy(r), o[5].copy(a), this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) {
    for (var t = this.planes, i = 0; i < 6; i++)
        t[i].copy(e.planes[i]); return this;
    }, setFromMatrix: function (e) { var t = this.planes, i = e.elements, n = i[0], r = i[1], a = i[2], o = i[3], s = i[4], l = i[5], c = i[6], u = i[7], h = i[8], d = i[9], p = i[10], f = i[11], m = i[12], v = i[13], g = i[14], y = i[15]; return t[0].setComponents(o - n, u - s, f - h, y - m).normalize(), t[1].setComponents(o + n, u + s, f + h, y + m).normalize(), t[2].setComponents(o + r, u + l, f + d, y + v).normalize(), t[3].setComponents(o - r, u - l, f - d, y - v).normalize(), t[4].setComponents(o - a, u - c, f - p, y - g).normalize(), t[5].setComponents(o + a, u + c, f + p, y + g).normalize(), this; }, intersectsObject: function (e) { var t = e.geometry; return null === t.boundingSphere && t.computeBoundingSphere(), Rr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld), this.intersectsSphere(Rr); }, intersectsSprite: function (e) { return Rr.center.set(0, 0, 0), Rr.radius = .7071067811865476, Rr.applyMatrix4(e.matrixWorld), this.intersectsSphere(Rr); }, intersectsSphere: function (e) {
    for (var t = this.planes, i = e.center, n = -e.radius, r = 0; r < 6; r++) {
        if (t[r].distanceToPoint(i) < n)
            return !1;
    } return !0;
    }, intersectsBox: function (e) {
    for (var t = this.planes, i = 0; i < 6; i++) {
        var n = t[i];
        if (Ir.x = n.normal.x > 0 ? e.max.x : e.min.x, Ir.y = n.normal.y > 0 ? e.max.y : e.min.y, Ir.z = n.normal.z > 0 ? e.max.z : e.min.z, n.distanceToPoint(Ir) < 0)
            return !1;
    } return !0;
    }, containsPoint: function (e) {
    for (var t = this.planes, i = 0; i < 6; i++)
        if (t[i].distanceToPoint(e) < 0)
            return !1; return !0;
    }
    });
    var Dr = { alphamap_fragment: "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif", alphamap_pars_fragment: "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif", alphatest_fragment: "#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif", aomap_fragment: "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif", aomap_pars_fragment: "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif", begin_vertex: "vec3 transformed = vec3( position );", beginnormal_vertex: "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif", bsdfs: "vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif", bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif", clipping_planes_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif", clipping_planes_pars_fragment: "#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif", clipping_planes_pars_vertex: "#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif", clipping_planes_vertex: "#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif", color_fragment: "#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif", color_pars_fragment: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif", color_pars_vertex: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif", color_vertex: "#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif", common: "#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}", cube_uv_reflection_fragment: "#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif", defaultnormal_vertex: "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif", displacementmap_pars_vertex: "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif", displacementmap_vertex: "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif", emissivemap_fragment: "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif", emissivemap_pars_fragment: "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif", encodings_fragment: "gl_FragColor = linearToOutputTexel( gl_FragColor );", encodings_pars_fragment: "\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}", envmap_fragment: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif", envmap_common_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif", envmap_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif", envmap_pars_vertex: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif", envmap_physical_pars_fragment: "#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif", envmap_vertex: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif", fog_vertex: "#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif", fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif", fog_fragment: "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif", fog_pars_fragment: "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif", gradientmap_pars_fragment: "#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif", lightmap_fragment: "#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif", lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif", lights_lambert_vertex: "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif", lights_pars_begin: "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif", lights_phong_fragment: "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;", lights_phong_pars_fragment: "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)", lights_physical_fragment: "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = clamp( clearcoatRoughness, 0.04, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif", lights_physical_pars_fragment: "struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}", lights_fragment_begin: "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif", lights_fragment_maps: "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif", lights_fragment_end: "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif", logdepthbuf_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif", logdepthbuf_pars_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif", logdepthbuf_pars_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif", logdepthbuf_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif", map_fragment: "#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif", map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif", map_particle_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif", map_particle_pars_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif", metalnessmap_fragment: "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif", metalnessmap_pars_fragment: "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif", morphnormal_vertex: "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif", morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif", morphtarget_vertex: "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif", normal_fragment_begin: "#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;", normal_fragment_maps: "#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif", normalmap_pars_fragment: "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif", clearcoat_normal_fragment_begin: "#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif", clearcoat_normal_fragment_maps: "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif", clearcoat_normalmap_pars_fragment: "#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif", packing: "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpack2HalfToRGBA( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}", premultiplied_alpha_fragment: "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif", project_vertex: "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;", dithering_fragment: "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif", dithering_pars_fragment: "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif", roughnessmap_fragment: "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif", roughnessmap_pars_fragment: "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif", shadowmap_pars_fragment: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpack2HalfToRGBA( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif", shadowmap_pars_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif", shadowmap_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif", shadowmask_pars_fragment: "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}", skinbase_vertex: "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif", skinning_pars_vertex: "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif", skinning_vertex: "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif", skinnormal_vertex: "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif", specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif", specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif", tonemapping_fragment: "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif", tonemapping_pars_fragment: "#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}", uv_pars_fragment: "#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif", uv_pars_vertex: "#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif", uv_vertex: "#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif", uv2_pars_fragment: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif", uv2_pars_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif", uv2_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif", worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif", background_frag: "uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}", background_vert: "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}", cube_frag: "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}", cube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}", depth_frag: "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}", depth_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}", distanceRGBA_frag: "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}", distanceRGBA_vert: "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}", equirect_frag: "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}", equirect_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}", linedashed_frag: "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", linedashed_vert: "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}", meshbasic_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", meshbasic_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}", meshlambert_frag: "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshlambert_vert: "#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshmatcap_frag: "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", meshmatcap_vert: "#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}", meshphong_frag: "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshphong_vert: "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", meshphysical_frag: "#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}", meshphysical_vert: "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", normal_frag: "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}", normal_vert: "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}", points_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", points_vert: "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}", shadow_frag: "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}", shadow_vert: "#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}", sprite_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}", sprite_vert: "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}" }, Fr = { common: { diffuse: { value: new yn(15658734) }, opacity: { value: 1 }, map: { value: null }, uvTransform: { value: new Qt }, alphaMap: { value: null } }, specularmap: { specularMap: { value: null } }, envmap: { envMap: { value: null }, flipEnvMap: { value: -1 }, reflectivity: { value: 1 }, refractionRatio: { value: .98 }, maxMipLevel: { value: 0 } }, aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } }, lightmap: { lightMap: { value: null }, lightMapIntensity: { value: 1 } }, emissivemap: { emissiveMap: { value: null } }, bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } }, normalmap: { normalMap: { value: null }, normalScale: { value: new Ut(1, 1) } }, displacementmap: { displacementMap: { value: null }, displacementScale: { value: 1 }, displacementBias: { value: 0 } }, roughnessmap: { roughnessMap: { value: null } }, metalnessmap: { metalnessMap: { value: null } }, gradientmap: { gradientMap: { value: null } }, fog: { fogDensity: { value: 25e-5 }, fogNear: { value: 1 }, fogFar: { value: 2e3 }, fogColor: { value: new yn(16777215) } }, lights: { ambientLightColor: { value: [] }, lightProbe: { value: [] }, directionalLights: { value: [], properties: { direction: {}, color: {}, shadow: {}, shadowBias: {}, shadowRadius: {}, shadowMapSize: {} } }, directionalShadowMap: { value: [] }, directionalShadowMatrix: { value: [] }, spotLights: { value: [], properties: { color: {}, position: {}, direction: {}, distance: {}, coneCos: {}, penumbraCos: {}, decay: {}, shadow: {}, shadowBias: {}, shadowRadius: {}, shadowMapSize: {} } }, spotShadowMap: { value: [] }, spotShadowMatrix: { value: [] }, pointLights: { value: [], properties: { color: {}, position: {}, decay: {}, distance: {}, shadow: {}, shadowBias: {}, shadowRadius: {}, shadowMapSize: {}, shadowCameraNear: {}, shadowCameraFar: {} } }, pointShadowMap: { value: [] }, pointShadowMatrix: { value: [] }, hemisphereLights: { value: [], properties: { direction: {}, skyColor: {}, groundColor: {} } }, rectAreaLights: { value: [], properties: { color: {}, position: {}, width: {}, height: {} } } }, points: { diffuse: { value: new yn(15658734) }, opacity: { value: 1 }, size: { value: 1 }, scale: { value: 1 }, map: { value: null }, alphaMap: { value: null }, uvTransform: { value: new Qt } }, sprite: { diffuse: { value: new yn(15658734) }, opacity: { value: 1 }, center: { value: new Ut(.5, .5) }, rotation: { value: 0 }, map: { value: null }, alphaMap: { value: null }, uvTransform: { value: new Qt } } }, kr = { basic: { uniforms: br([Fr.common, Fr.specularmap, Fr.envmap, Fr.aomap, Fr.lightmap, Fr.fog]), vertexShader: Dr.meshbasic_vert, fragmentShader: Dr.meshbasic_frag }, lambert: { uniforms: br([Fr.common, Fr.specularmap, Fr.envmap, Fr.aomap, Fr.lightmap, Fr.emissivemap, Fr.fog, Fr.lights, { emissive: { value: new yn(0) } }]), vertexShader: Dr.meshlambert_vert, fragmentShader: Dr.meshlambert_frag }, phong: { uniforms: br([Fr.common, Fr.specularmap, Fr.envmap, Fr.aomap, Fr.lightmap, Fr.emissivemap, Fr.bumpmap, Fr.normalmap, Fr.displacementmap, Fr.gradientmap, Fr.fog, Fr.lights, { emissive: { value: new yn(0) }, specular: { value: new yn(1118481) }, shininess: { value: 30 } }]), vertexShader: Dr.meshphong_vert, fragmentShader: Dr.meshphong_frag }, standard: { uniforms: br([Fr.common, Fr.envmap, Fr.aomap, Fr.lightmap, Fr.emissivemap, Fr.bumpmap, Fr.normalmap, Fr.displacementmap, Fr.roughnessmap, Fr.metalnessmap, Fr.fog, Fr.lights, { emissive: { value: new yn(0) }, roughness: { value: .5 }, metalness: { value: .5 }, envMapIntensity: { value: 1 } }]), vertexShader: Dr.meshphysical_vert, fragmentShader: Dr.meshphysical_frag }, matcap: { uniforms: br([Fr.common, Fr.bumpmap, Fr.normalmap, Fr.displacementmap, Fr.fog, { matcap: { value: null } }]), vertexShader: Dr.meshmatcap_vert, fragmentShader: Dr.meshmatcap_frag }, points: { uniforms: br([Fr.points, Fr.fog]), vertexShader: Dr.points_vert, fragmentShader: Dr.points_frag }, dashed: { uniforms: br([Fr.common, Fr.fog, { scale: { value: 1 }, dashSize: { value: 1 }, totalSize: { value: 2 } }]), vertexShader: Dr.linedashed_vert, fragmentShader: Dr.linedashed_frag }, depth: { uniforms: br([Fr.common, Fr.displacementmap]), vertexShader: Dr.depth_vert, fragmentShader: Dr.depth_frag }, normal: { uniforms: br([Fr.common, Fr.bumpmap, Fr.normalmap, Fr.displacementmap, { opacity: { value: 1 } }]), vertexShader: Dr.normal_vert, fragmentShader: Dr.normal_frag }, sprite: { uniforms: br([Fr.sprite, Fr.fog]), vertexShader: Dr.sprite_vert, fragmentShader: Dr.sprite_frag }, background: { uniforms: { uvTransform: { value: new Qt }, t2D: { value: null } }, vertexShader: Dr.background_vert, fragmentShader: Dr.background_frag }, cube: { uniforms: { tCube: { value: null }, tFlip: { value: -1 }, opacity: { value: 1 } }, vertexShader: Dr.cube_vert, fragmentShader: Dr.cube_frag }, equirect: { uniforms: { tEquirect: { value: null } }, vertexShader: Dr.equirect_vert, fragmentShader: Dr.equirect_frag }, distanceRGBA: { uniforms: br([Fr.common, Fr.displacementmap, { referencePosition: { value: new Wt }, nearDistance: { value: 1 }, farDistance: { value: 1e3 } }]), vertexShader: Dr.distanceRGBA_vert, fragmentShader: Dr.distanceRGBA_frag }, shadow: { uniforms: br([Fr.lights, Fr.fog, { color: { value: new yn(0) }, opacity: { value: 1 } }]), vertexShader: Dr.shadow_vert, fragmentShader: Dr.shadow_frag } };
    function Nr() { var e = null, t = !1, i = null; function n(r, a) { !1 !== t && (i(r, a), e.requestAnimationFrame(n)); } return { start: function () { !0 !== t && null !== i && (e.requestAnimationFrame(n), t = !0); }, stop: function () { t = !1; }, setAnimationLoop: function (e) { i = e; }, setContext: function (t) { e = t; } }; }
    function Br(e) { var t = new WeakMap; return { get: function (e) { return e.isInterleavedBufferAttribute && (e = e.data), t.get(e); }, remove: function (i) { i.isInterleavedBufferAttribute && (i = i.data); var n = t.get(i); n && (e.deleteBuffer(n.buffer), t.delete(i)); }, update: function (i, n) { i.isInterleavedBufferAttribute && (i = i.data); var r = t.get(i); void 0 === r ? t.set(i, function (t, i) { var n = t.array, r = t.usage, a = e.createBuffer(); e.bindBuffer(i, a), e.bufferData(i, n, r), t.onUploadCallback(); var o = 5126; return n instanceof Float32Array ? o = 5126 : n instanceof Float64Array ? console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.") : n instanceof Uint16Array ? o = 5123 : n instanceof Int16Array ? o = 5122 : n instanceof Uint32Array ? o = 5125 : n instanceof Int32Array ? o = 5124 : n instanceof Int8Array ? o = 5120 : n instanceof Uint8Array && (o = 5121), { buffer: a, type: o, bytesPerElement: n.BYTES_PER_ELEMENT, version: t.version }; } (i, n)) : r.version < i.version && (!function (t, i, n) { var r = i.array, a = i.updateRange; e.bindBuffer(n, t), -1 === a.count ? e.bufferSubData(n, 0, r) : (e.bufferSubData(n, a.offset * r.BYTES_PER_ELEMENT, r.subarray(a.offset, a.offset + a.count)), a.count = -1); } (r.buffer, i, n), r.version = i.version); } }; }
    function Gr(e, t, i, n) { vr.call(this), this.type = "PlaneGeometry", this.parameters = { width: e, height: t, widthSegments: i, heightSegments: n }, this.fromBufferGeometry(new Hr(e, t, i, n)), this.mergeVertices(); }
    function Hr(e, t, i, n) {
    Wn.call(this), this.type = "PlaneBufferGeometry", this.parameters = { width: e, height: t, widthSegments: i, heightSegments: n }; var r, a, o = (e = e || 1) / 2, s = (t = t || 1) / 2, l = Math.floor(i) || 1, c = Math.floor(n) || 1, u = l + 1, h = c + 1, d = e / l, p = t / c, f = [], m = [], v = [], g = []; for (a = 0; a < h; a++) {
        var y = a * p - s;
        for (r = 0; r < u; r++) {
            var b = r * d - o;
            m.push(b, -y, 0), v.push(0, 0, 1), g.push(r / l), g.push(1 - a / c);
        }
    } for (a = 0; a < c; a++)
            for (r = 0; r < l; r++) {
                var x = r + u * a, _ = r + u * (a + 1), w = r + 1 + u * (a + 1), T = r + 1 + u * a;
                f.push(x, _, T), f.push(_, w, T);
            } this.setIndex(f), this.setAttribute("position", new Dn(m, 3)), this.setAttribute("normal", new Dn(v, 3)), this.setAttribute("uv", new Dn(g, 2));
    }
    function Ur(e, t, i, n) {
    var r, a, o = new yn(0), s = 0, l = null, c = 0; function u(e, i) { t.buffers.color.setClear(e.r, e.g, e.b, i, n); } return {
    getClearColor: function () { return o; }, setClearColor: function (e, t) { o.set(e), u(o, s = void 0 !== t ? t : 1); }, getClearAlpha: function () { return s; }, setClearAlpha: function (e) { u(o, s = e); }, render: function (t, n, h, d) {
    var p = n.background, f = e.vr, m = f.getSession && f.getSession(); if (m && "additive" === m.environmentBlendMode && (p = null), null === p ? (u(o, s), l = null, c = 0) : p && p.isColor && (u(p, 1), d = !0, l = null, c = 0), (e.autoClear || d) && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), p && (p.isCubeTexture || p.isWebGLRenderTargetCube)) {
        void 0 === a && ((a = new cr(new gr(1, 1, 1), new Tr({ type: "BackgroundCubeMaterial", uniforms: yr(kr.cube.uniforms), vertexShader: kr.cube.vertexShader, fragmentShader: kr.cube.fragmentShader, side: w, depthTest: !1, depthWrite: !1, fog: !1 }))).geometry.deleteAttribute("normal"), a.geometry.deleteAttribute("uv"), a.onBeforeRender = function (e, t, i) { this.matrixWorld.copyPosition(i.matrixWorld); }, Object.defineProperty(a.material, "map", { get: function () { return this.uniforms.tCube.value; } }), i.update(a));
        var v = p.isWebGLRenderTargetCube ? p.texture : p;
        a.material.uniforms.tCube.value = v, a.material.uniforms.tFlip.value = p.isWebGLRenderTargetCube ? 1 : -1, l === p && c === v.version || (a.material.needsUpdate = !0, l = p, c = v.version), t.unshift(a, a.geometry, a.material, 0, 0, null);
    }
    else
        p && p.isTexture && (void 0 === r && ((r = new cr(new Hr(2, 2), new Tr({ type: "BackgroundMaterial", uniforms: yr(kr.background.uniforms), vertexShader: kr.background.vertexShader, fragmentShader: kr.background.fragmentShader, side: _, depthTest: !1, depthWrite: !1, fog: !1 }))).geometry.deleteAttribute("normal"), Object.defineProperty(r.material, "map", { get: function () { return this.uniforms.t2D.value; } }), i.update(r)), r.material.uniforms.t2D.value = p, !0 === p.matrixAutoUpdate && p.updateMatrix(), r.material.uniforms.uvTransform.value.copy(p.matrix), l === p && c === p.version || (r.material.needsUpdate = !0, l = p, c = p.version), t.unshift(r, r.geometry, r.material, 0, 0, null));
    }
    };
    }
    function zr(e, t, i, n) {
    var r, a = n.isWebGL2; this.setMode = function (e) { r = e; }, this.render = function (t, n) { e.drawArrays(r, t, n), i.update(n, r); }, this.renderInstances = function (n, o, s, l) {
    if (0 !== l) {
        var c, u;
        if (a)
            c = e, u = "drawArraysInstanced";
        else if (u = "drawArraysInstancedANGLE", null === (c = t.get("ANGLE_instanced_arrays")))
            return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
        c[u](r, o, s, l), i.update(s, r, l);
    }
    };
    }
    function Vr(e, t, i) {
    var n; function r(t) {
    if ("highp" === t) {
        if (e.getShaderPrecisionFormat(35633, 36338).precision > 0 && e.getShaderPrecisionFormat(35632, 36338).precision > 0)
            return "highp";
        t = "mediump";
    } return "mediump" === t && e.getShaderPrecisionFormat(35633, 36337).precision > 0 && e.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp";
    } var a = "undefined" != typeof WebGL2RenderingContext && e instanceof WebGL2RenderingContext || "undefined" != typeof WebGL2ComputeRenderingContext && e instanceof WebGL2ComputeRenderingContext, o = void 0 !== i.precision ? i.precision : "highp", s = r(o); s !== o && (console.warn("THREE.WebGLRenderer:", o, "not supported, using", s, "instead."), o = s); var l = !0 === i.logarithmicDepthBuffer, c = e.getParameter(34930), u = e.getParameter(35660), h = e.getParameter(3379), d = e.getParameter(34076), p = e.getParameter(34921), f = e.getParameter(36347), m = e.getParameter(36348), v = e.getParameter(36349), g = u > 0, y = a || !!t.get("OES_texture_float"); return {
    isWebGL2: a, getMaxAnisotropy: function () {
    if (void 0 !== n)
        return n; var i = t.get("EXT_texture_filter_anisotropic"); return n = null !== i ? e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0;
    }, getMaxPrecision: r, precision: o, logarithmicDepthBuffer: l, maxTextures: c, maxVertexTextures: u, maxTextureSize: h, maxCubemapSize: d, maxAttributes: p, maxVertexUniforms: f, maxVaryings: m, maxFragmentUniforms: v, vertexTextures: g, floatFragmentTextures: y, floatVertexTextures: g && y, maxSamples: a ? e.getParameter(36183) : 0
    };
    }
    function jr() {
    var e = this, t = null, i = 0, n = !1, r = !1, a = new nn, o = new Qt, s = { value: null, needsUpdate: !1 }; function l() { s.value !== t && (s.value = t, s.needsUpdate = i > 0), e.numPlanes = i, e.numIntersection = 0; } function c(t, i, n, r) {
    var l = null !== t ? t.length : 0, c = null; if (0 !== l) {
        if (c = s.value, !0 !== r || null === c) {
            var u = n + 4 * l, h = i.matrixWorldInverse;
            o.getNormalMatrix(h), (null === c || c.length < u) && (c = new Float32Array(u));
            for (var d = 0, p = n; d !== l; ++d, p += 4)
                a.copy(t[d]).applyMatrix4(h, o), a.normal.toArray(c, p), c[p + 3] = a.constant;
        }
        s.value = c, s.needsUpdate = !0;
    } return e.numPlanes = l, c;
    } this.uniform = s, this.numPlanes = 0, this.numIntersection = 0, this.init = function (e, r, a) { var o = 0 !== e.length || r || 0 !== i || n; return n = r, t = c(e, a, 0), i = e.length, o; }, this.beginShadows = function () { r = !0, c(null); }, this.endShadows = function () { r = !1, l(); }, this.setState = function (e, a, o, u, h, d) {
    if (!n || null === e || 0 === e.length || r && !o)
        r ? c(null) : l();
    else {
        var p = r ? 0 : i, f = 4 * p, m = h.clippingState || null;
        s.value = m, m = c(e, u, f, d);
        for (var v = 0; v !== f; ++v)
            m[v] = t[v];
        h.clippingState = m, this.numIntersection = a ? this.numPlanes : 0, this.numPlanes += p;
    }
    };
    }
    function Wr(e) {
    var t = {}; return {
    get: function (i) {
    if (void 0 !== t[i])
        return t[i]; var n; switch (i) {
            case "WEBGL_depth_texture":
                n = e.getExtension("WEBGL_depth_texture") || e.getExtension("MOZ_WEBGL_depth_texture") || e.getExtension("WEBKIT_WEBGL_depth_texture");
                break;
            case "EXT_texture_filter_anisotropic":
                n = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                break;
            case "WEBGL_compressed_texture_s3tc":
                n = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                break;
            case "WEBGL_compressed_texture_pvrtc":
                n = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                break;
            default: n = e.getExtension(i);
        } return null === n && console.warn("THREE.WebGLRenderer: " + i + " extension not supported."), t[i] = n, n;
    }
    };
    }
    function Xr(e, t, i) {
    var n = new WeakMap, r = new WeakMap; function a(e) {
    var o = e.target, s = n.get(o); for (var l in null !== s.index && t.remove(s.index), s.attributes)
        t.remove(s.attributes[l]); o.removeEventListener("dispose", a), n.delete(o); var c = r.get(s); c && (t.remove(c), r.delete(s)), i.memory.geometries--;
    } function o(e) {
    var i = [], n = e.index, a = e.attributes.position, o = 0; if (null !== n) {
        var s = n.array;
        o = n.version;
        for (var l = 0, c = s.length; l < c; l += 3) {
            var u = s[l + 0], h = s[l + 1], d = s[l + 2];
            i.push(u, h, h, d, d, u);
        }
    }
    else {
        s = a.array;
        o = a.version;
        for (l = 0, c = s.length / 3 - 1; l < c; l += 3) {
            u = l + 0, h = l + 1, d = l + 2;
            i.push(u, h, h, d, d, u);
        }
    } var p = new (Nn(i) > 65535 ? On : Rn)(i, 1); p.version = o, t.update(p, 34963); var f = r.get(e); f && t.remove(f), r.set(e, p);
    } return {
    get: function (e, t) { var r = n.get(t); return r || (t.addEventListener("dispose", a), t.isBufferGeometry ? r = t : t.isGeometry && (void 0 === t._bufferGeometry && (t._bufferGeometry = (new Wn).setFromObject(e)), r = t._bufferGeometry), n.set(t, r), i.memory.geometries++ , r); }, update: function (e) {
    var i = e.index, n = e.attributes; for (var r in null !== i && t.update(i, 34963), n)
        t.update(n[r], 34962); var a = e.morphAttributes; for (var r in a)
            for (var o = a[r], s = 0, l = o.length; s < l; s++)
                t.update(o[s], 34962);
    }, getWireframeAttribute: function (e) {
    var t = r.get(e); if (t) {
        var i = e.index;
        null !== i && t.version < i.version && o(e);
    }
    else
        o(e); return r.get(e);
    }
    };
    }
    function Yr(e, t, i, n) {
    var r, a, o, s = n.isWebGL2; this.setMode = function (e) { r = e; }, this.setIndex = function (e) { a = e.type, o = e.bytesPerElement; }, this.render = function (t, n) { e.drawElements(r, n, a, t * o), i.update(n, r); }, this.renderInstances = function (n, l, c, u) {
    if (0 !== u) {
        var h, d;
        if (s)
            h = e, d = "drawElementsInstanced";
        else if (d = "drawElementsInstancedANGLE", null === (h = t.get("ANGLE_instanced_arrays")))
            return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
        h[d](r, c, a, l * o, u), i.update(c, r, u);
    }
    };
    }
    function Qr(e) {
    var t = { frame: 0, calls: 0, triangles: 0, points: 0, lines: 0 }; return {
    memory: { geometries: 0, textures: 0 }, render: t, programs: null, autoReset: !0, reset: function () { t.frame++ , t.calls = 0, t.triangles = 0, t.points = 0, t.lines = 0; }, update: function (e, i, n) {
    switch (n = n || 1, t.calls++ , i) {
        case 4:
            t.triangles += n * (e / 3);
            break;
        case 5:
        case 6:
            t.triangles += n * (e - 2);
            break;
        case 1:
            t.lines += n * (e / 2);
            break;
        case 3:
            t.lines += n * (e - 1);
            break;
        case 2:
            t.lines += n * e;
            break;
        case 0:
            t.points += n * e;
            break;
        default: console.error("THREE.WebGLInfo: Unknown draw mode:", i);
    }
    }
    };
    }
    function qr(e, t) { return Math.abs(t[1]) - Math.abs(e[1]); }
    function $r(e) {
    var t = {}, i = new Float32Array(8); return {
    update: function (n, r, a, o) {
    var s = n.morphTargetInfluences, l = s.length, c = t[r.id]; if (void 0 === c) {
        c = [];
        for (var u = 0; u < l; u++)
            c[u] = [u, 0];
        t[r.id] = c;
    } var h = a.morphTargets && r.morphAttributes.position, d = a.morphNormals && r.morphAttributes.normal; for (u = 0; u < l; u++) {
        0 !== (f = c[u])[1] && (h && r.deleteAttribute("morphTarget" + u), d && r.deleteAttribute("morphNormal" + u));
    } for (u = 0; u < l; u++) {
        (f = c[u])[0] = u, f[1] = s[u];
    } c.sort(qr); var p = 0; for (u = 0; u < 8; u++) {
        var f;
        if (f = c[u]) {
            var m = f[0], v = f[1];
            if (v) {
                h && r.setAttribute("morphTarget" + u, h[m]), d && r.setAttribute("morphNormal" + u, d[m]), i[u] = v, p += v;
                continue;
            }
        }
        i[u] = 0;
    } var g = r.morphTargetsRelative ? 1 : 1 - p; o.getUniforms().setValue(e, "morphTargetBaseInfluence", g), o.getUniforms().setValue(e, "morphTargetInfluences", i);
    }
    };
    }
    function Zr(e, t, i, n) { var r = {}; return { update: function (e) { var a = n.render.frame, o = e.geometry, s = t.get(e, o); return r[s.id] !== a && (o.isGeometry && s.updateFromObject(e), t.update(s), r[s.id] = a), e.isInstancedMesh && i.update(e.instanceMatrix, 34962), s; }, dispose: function () { r = {}; } }; }
    function Kr(e, t, i, n, r, a, o, s, l, c) { e = void 0 !== e ? e : [], t = void 0 !== t ? t : de, o = void 0 !== o ? o : Ue, Zt.call(this, e, t, i, n, r, a, o, s, l, c), this.flipY = !1; }
    function Jr(e, t, i, n) { Zt.call(this, null), this.image = { data: e || null, width: t || 1, height: i || 1, depth: n || 1 }, this.magFilter = we, this.minFilter = we, this.wrapR = xe, this.generateMipmaps = !1, this.flipY = !1, this.needsUpdate = !0; }
    function ea(e, t, i, n) { Zt.call(this, null), this.image = { data: e || null, width: t || 1, height: i || 1, depth: n || 1 }, this.magFilter = we, this.minFilter = we, this.wrapR = xe, this.generateMipmaps = !1, this.flipY = !1, this.needsUpdate = !0; }
    kr.physical = { uniforms: br([kr.standard.uniforms, { transparency: { value: 0 }, clearcoat: { value: 0 }, clearcoatRoughness: { value: 0 }, sheen: { value: new yn(0) }, clearcoatNormalScale: { value: new Ut(1, 1) }, clearcoatNormalMap: { value: null } }]), vertexShader: Dr.meshphysical_vert, fragmentShader: Dr.meshphysical_frag }, Gr.prototype = Object.create(vr.prototype), Gr.prototype.constructor = Gr, Hr.prototype = Object.create(Wn.prototype), Hr.prototype.constructor = Hr, Kr.prototype = Object.create(Zt.prototype), Kr.prototype.constructor = Kr, Kr.prototype.isCubeTexture = !0, Object.defineProperty(Kr.prototype, "images", { get: function () { return this.image; }, set: function (e) { this.image = e; } }), Jr.prototype = Object.create(Zt.prototype), Jr.prototype.constructor = Jr, Jr.prototype.isDataTexture2DArray = !0, ea.prototype = Object.create(Zt.prototype), ea.prototype.constructor = ea, ea.prototype.isDataTexture3D = !0;
    var ta = new Zt, ia = new Jr, na = new ea, ra = new Kr, aa = [], oa = [], sa = new Float32Array(16), la = new Float32Array(9), ca = new Float32Array(4);
    function ua(e, t, i) {
    var n = e[0]; if (n <= 0 || n > 0)
        return e; var r = t * i, a = aa[r]; if (void 0 === a && (a = new Float32Array(r), aa[r] = a), 0 !== t) {
            n.toArray(a, 0);
            for (var o = 1, s = 0; o !== t; ++o)
                s += i, e[o].toArray(a, s);
        } return a;
    }
    function ha(e, t) {
    if (e.length !== t.length)
        return !1; for (var i = 0, n = e.length; i < n; i++)
            if (e[i] !== t[i])
                return !1; return !0;
    }
    function da(e, t) {
    for (var i = 0, n = t.length; i < n; i++)
        e[i] = t[i];
    }
    function pa(e, t) {
    var i = oa[t]; void 0 === i && (i = new Int32Array(t), oa[t] = i); for (var n = 0; n !== t; ++n)
        i[n] = e.allocateTextureUnit(); return i;
    }
    function fa(e, t) { var i = this.cache; i[0] !== t && (e.uniform1f(this.addr, t), i[0] = t); }
    function ma(e, t) {
    var i = this.cache; if (void 0 !== t.x)
        i[0] === t.x && i[1] === t.y || (e.uniform2f(this.addr, t.x, t.y), i[0] = t.x, i[1] = t.y);
    else {
        if (ha(i, t))
            return;
        e.uniform2fv(this.addr, t), da(i, t);
    }
    }
    function va(e, t) {
    var i = this.cache; if (void 0 !== t.x)
        i[0] === t.x && i[1] === t.y && i[2] === t.z || (e.uniform3f(this.addr, t.x, t.y, t.z), i[0] = t.x, i[1] = t.y, i[2] = t.z);
    else if (void 0 !== t.r)
        i[0] === t.r && i[1] === t.g && i[2] === t.b || (e.uniform3f(this.addr, t.r, t.g, t.b), i[0] = t.r, i[1] = t.g, i[2] = t.b);
    else {
        if (ha(i, t))
            return;
        e.uniform3fv(this.addr, t), da(i, t);
    }
    }
    function ga(e, t) {
    var i = this.cache; if (void 0 !== t.x)
        i[0] === t.x && i[1] === t.y && i[2] === t.z && i[3] === t.w || (e.uniform4f(this.addr, t.x, t.y, t.z, t.w), i[0] = t.x, i[1] = t.y, i[2] = t.z, i[3] = t.w);
    else {
        if (ha(i, t))
            return;
        e.uniform4fv(this.addr, t), da(i, t);
    }
    }
    function ya(e, t) {
    var i = this.cache, n = t.elements; if (void 0 === n) {
        if (ha(i, t))
            return;
        e.uniformMatrix2fv(this.addr, !1, t), da(i, t);
    }
    else {
        if (ha(i, n))
            return;
        ca.set(n), e.uniformMatrix2fv(this.addr, !1, ca), da(i, n);
    }
    }
    function ba(e, t) {
    var i = this.cache, n = t.elements; if (void 0 === n) {
        if (ha(i, t))
            return;
        e.uniformMatrix3fv(this.addr, !1, t), da(i, t);
    }
    else {
        if (ha(i, n))
            return;
        la.set(n), e.uniformMatrix3fv(this.addr, !1, la), da(i, n);
    }
    }
    function xa(e, t) {
    var i = this.cache, n = t.elements; if (void 0 === n) {
        if (ha(i, t))
            return;
        e.uniformMatrix4fv(this.addr, !1, t), da(i, t);
    }
    else {
        if (ha(i, n))
            return;
        sa.set(n), e.uniformMatrix4fv(this.addr, !1, sa), da(i, n);
    }
    }
    function _a(e, t, i) { var n = this.cache, r = i.allocateTextureUnit(); n[0] !== r && (e.uniform1i(this.addr, r), n[0] = r), i.safeSetTexture2D(t || ta, r); }
    function wa(e, t, i) { var n = this.cache, r = i.allocateTextureUnit(); n[0] !== r && (e.uniform1i(this.addr, r), n[0] = r), i.setTexture2DArray(t || ia, r); }
    function Ta(e, t, i) { var n = this.cache, r = i.allocateTextureUnit(); n[0] !== r && (e.uniform1i(this.addr, r), n[0] = r), i.setTexture3D(t || na, r); }
    function Ma(e, t, i) { var n = this.cache, r = i.allocateTextureUnit(); n[0] !== r && (e.uniform1i(this.addr, r), n[0] = r), i.safeSetTextureCube(t || ra, r); }
    function Aa(e, t) { var i = this.cache; i[0] !== t && (e.uniform1i(this.addr, t), i[0] = t); }
    function Sa(e, t) { var i = this.cache; ha(i, t) || (e.uniform2iv(this.addr, t), da(i, t)); }
    function Ea(e, t) { var i = this.cache; ha(i, t) || (e.uniform3iv(this.addr, t), da(i, t)); }
    function Pa(e, t) { var i = this.cache; ha(i, t) || (e.uniform4iv(this.addr, t), da(i, t)); }
    function Ca(e, t) { e.uniform1fv(this.addr, t); }
    function La(e, t) { e.uniform1iv(this.addr, t); }
    function Ra(e, t) { e.uniform2iv(this.addr, t); }
    function Ia(e, t) { e.uniform3iv(this.addr, t); }
    function Oa(e, t) { e.uniform4iv(this.addr, t); }
    function Da(e, t) { var i = ua(t, this.size, 2); e.uniform2fv(this.addr, i); }
    function Fa(e, t) { var i = ua(t, this.size, 3); e.uniform3fv(this.addr, i); }
    function ka(e, t) { var i = ua(t, this.size, 4); e.uniform4fv(this.addr, i); }
    function Na(e, t) { var i = ua(t, this.size, 4); e.uniformMatrix2fv(this.addr, !1, i); }
    function Ba(e, t) { var i = ua(t, this.size, 9); e.uniformMatrix3fv(this.addr, !1, i); }
    function Ga(e, t) { var i = ua(t, this.size, 16); e.uniformMatrix4fv(this.addr, !1, i); }
    function Ha(e, t, i) {
    var n = t.length, r = pa(i, n); e.uniform1iv(this.addr, r); for (var a = 0; a !== n; ++a)
        i.safeSetTexture2D(t[a] || ta, r[a]);
    }
    function Ua(e, t, i) {
    var n = t.length, r = pa(i, n); e.uniform1iv(this.addr, r); for (var a = 0; a !== n; ++a)
        i.safeSetTextureCube(t[a] || ra, r[a]);
    }
    function za(e, t, i) {
    this.id = e, this.addr = i, this.cache = [], this.setValue = function (e) {
    switch (e) {
        case 5126: return fa;
        case 35664: return ma;
        case 35665: return va;
        case 35666: return ga;
        case 35674: return ya;
        case 35675: return ba;
        case 35676: return xa;
        case 35678:
        case 36198: return _a;
        case 35679: return Ta;
        case 35680: return Ma;
        case 36289: return wa;
        case 5124:
        case 35670: return Aa;
        case 35667:
        case 35671: return Sa;
        case 35668:
        case 35672: return Ea;
        case 35669:
        case 35673: return Pa;
    }
    } (t.type);
    }
    function Va(e, t, i) {
    this.id = e, this.addr = i, this.cache = [], this.size = t.size, this.setValue = function (e) {
    switch (e) {
        case 5126: return Ca;
        case 35664: return Da;
        case 35665: return Fa;
        case 35666: return ka;
        case 35674: return Na;
        case 35675: return Ba;
        case 35676: return Ga;
        case 35678: return Ha;
        case 35680: return Ua;
        case 5124:
        case 35670: return La;
        case 35667:
        case 35671: return Ra;
        case 35668:
        case 35672: return Ia;
        case 35669:
        case 35673: return Oa;
    }
    } (t.type);
    }
    function ja(e) { this.id = e, this.seq = [], this.map = {}; }
    Va.prototype.updateCache = function (e) { var t = this.cache; e instanceof Float32Array && t.length !== e.length && (this.cache = new Float32Array(e.length)), da(t, e); }, ja.prototype.setValue = function (e, t, i) {
    for (var n = this.seq, r = 0, a = n.length; r !== a; ++r) {
        var o = n[r];
        o.setValue(e, t[o.id], i);
    }
    };
    var Wa = /([\w\d_]+)(\])?(\[|\.)?/g;
    function Xa(e, t) { e.seq.push(t), e.map[t.id] = t; }
    function Ya(e, t, i) {
    var n = e.name, r = n.length; for (Wa.lastIndex = 0; ;) {
        var a = Wa.exec(n), o = Wa.lastIndex, s = a[1], l = "]" === a[2], c = a[3];
        if (l && (s |= 0), void 0 === c || "[" === c && o + 2 === r) {
            Xa(i, void 0 === c ? new za(s, e, t) : new Va(s, e, t));
            break;
        }
        var u = i.map[s];
        void 0 === u && Xa(i, u = new ja(s)), i = u;
    }
    }
    function Qa(e, t) {
    this.seq = [], this.map = {}; for (var i = e.getProgramParameter(t, 35718), n = 0; n < i; ++n) {
        var r = e.getActiveUniform(t, n);
        Ya(r, e.getUniformLocation(t, r.name), this);
    }
    }
    function qa(e, t, i) { var n = e.createShader(t); return e.shaderSource(n, i), e.compileShader(n), n; }
    Qa.prototype.setValue = function (e, t, i, n) { var r = this.map[t]; void 0 !== r && r.setValue(e, i, n); }, Qa.prototype.setOptional = function (e, t, i) { var n = t[i]; void 0 !== n && this.setValue(e, i, n); }, Qa.upload = function (e, t, i, n) {
    for (var r = 0, a = t.length; r !== a; ++r) {
        var o = t[r], s = i[o.id];
        !1 !== s.needsUpdate && o.setValue(e, s.value, n);
    }
    }, Qa.seqWithValue = function (e, t) {
    for (var i = [], n = 0, r = e.length; n !== r; ++n) {
        var a = e[n];
        a.id in t && i.push(a);
    } return i;
    };
    var $a = 0;
    function Za(e) {
    switch (e) {
        case wt: return ["Linear", "( value )"];
        case Tt: return ["sRGB", "( value )"];
        case At: return ["RGBE", "( value )"];
        case Et: return ["RGBM", "( value, 7.0 )"];
        case Pt: return ["RGBM", "( value, 16.0 )"];
        case Ct: return ["RGBD", "( value, 256.0 )"];
        case Mt: return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
        case St: return ["LogLuv", "( value )"];
        default: throw new Error("unsupported encoding: " + e);
    }
    }
    function Ka(e, t, i) {
    var n = e.getShaderParameter(t, 35713), r = e.getShaderInfoLog(t).trim(); return n && "" === r ? "" : "THREE.WebGLShader: gl.getShaderInfoLog() " + i + "\n" + r + function (e) {
    for (var t = e.split("\n"), i = 0; i < t.length; i++)
        t[i] = i + 1 + ": " + t[i]; return t.join("\n");
    } (e.getShaderSource(t));
    }
    function Ja(e, t) { var i = Za(t); return "vec4 " + e + "( vec4 value ) { return " + i[0] + "ToLinear" + i[1] + "; }"; }
    function eo(e, t) {
    var i; switch (t) {
        case se:
            i = "Linear";
            break;
        case le:
            i = "Reinhard";
            break;
        case ce:
            i = "Uncharted2";
            break;
        case ue:
            i = "OptimizedCineon";
            break;
        case he:
            i = "ACESFilmic";
            break;
        default: throw new Error("unsupported toneMapping: " + t);
    } return "vec3 " + e + "( vec3 color ) { return " + i + "ToneMapping( color ); }";
    }
    function to(e) { return "" !== e; }
    function io(e, t) { return e.replace(/NUM_DIR_LIGHTS/g, t.numDirLights).replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, t.numPointLights).replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, t.numPointLightShadows); }
    function no(e, t) { return e.replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, t.numClippingPlanes - t.numClipIntersection); }
    var ro = /^[ \t]*#include +<([\w\d./]+)>/gm;
    function ao(e) { return e.replace(ro, oo); }
    function oo(e, t) {
    var i = Dr[t]; if (void 0 === i)
        throw new Error("Can not resolve #include <" + t + ">"); return ao(i);
    }
    var so = /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;
    function lo(e) { return e.replace(so, co); }
    function co(e, t, i, n) {
    for (var r = "", a = parseInt(t); a < parseInt(i); a++)
        r += n.replace(/\[ i \]/g, "[ " + a + " ]").replace(/UNROLLED_LOOP_INDEX/g, a); return r;
    }
    function uo(e) { var t = "precision " + e.precision + " float;\nprecision " + e.precision + " int;"; return "highp" === e.precision ? t += "\n#define HIGH_PRECISION" : "mediump" === e.precision ? t += "\n#define MEDIUM_PRECISION" : "lowp" === e.precision && (t += "\n#define LOW_PRECISION"), t; }
    function ho(e, t, i, n, r, a) {
    var o, s, l, c, u, h = e.getContext(), d = n.defines, p = r.vertexShader, f = r.fragmentShader, m = function (e) { var t = "SHADOWMAP_TYPE_BASIC"; return e.shadowMapType === y ? t = "SHADOWMAP_TYPE_PCF" : e.shadowMapType === b ? t = "SHADOWMAP_TYPE_PCF_SOFT" : e.shadowMapType === x && (t = "SHADOWMAP_TYPE_VSM"), t; } (a), v = function (e) {
    var t = "ENVMAP_TYPE_CUBE"; if (e.envMap)
        switch (e.envMapMode) {
            case de:
            case pe:
                t = "ENVMAP_TYPE_CUBE";
                break;
            case ge:
            case ye:
                t = "ENVMAP_TYPE_CUBE_UV";
                break;
            case fe:
            case me:
                t = "ENVMAP_TYPE_EQUIREC";
                break;
            case ve: t = "ENVMAP_TYPE_SPHERE";
        } return t;
    } (a), g = function (e) {
    var t = "ENVMAP_MODE_REFLECTION"; if (e.envMap)
        switch (e.envMapMode) {
            case pe:
            case me: t = "ENVMAP_MODE_REFRACTION";
        } return t;
    } (a), _ = function (e) {
    var t = "ENVMAP_BLENDING_MULTIPLY"; if (e.envMap)
        switch (e.combine) {
            case ne:
                t = "ENVMAP_BLENDING_MULTIPLY";
                break;
            case re:
                t = "ENVMAP_BLENDING_MIX";
                break;
            case ae: t = "ENVMAP_BLENDING_ADD";
        } return t;
    } (a), w = e.gammaFactor > 0 ? e.gammaFactor : 1, T = a.isWebGL2 ? "" : function (e, t, i) { return [(e = e || {}).derivatives || t.envMapCubeUV || t.bumpMap || t.tangentSpaceNormalMap || t.clearcoatNormalMap || t.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", (e.fragDepth || t.logarithmicDepthBuffer) && i.get("EXT_frag_depth") ? "#extension GL_EXT_frag_depth : enable" : "", e.drawBuffers && i.get("WEBGL_draw_buffers") ? "#extension GL_EXT_draw_buffers : require" : "", (e.shaderTextureLOD || t.envMap) && i.get("EXT_shader_texture_lod") ? "#extension GL_EXT_shader_texture_lod : enable" : ""].filter(to).join("\n"); } (n.extensions, a, t), M = function (e) {
    var t = []; for (var i in e) {
        var n = e[i];
        !1 !== n && t.push("#define " + i + " " + n);
    } return t.join("\n");
    } (d), A = h.createProgram(), S = a.numMultiviewViews; if (n.isRawShaderMaterial ? ((o = [M].filter(to).join("\n")).length > 0 && (o += "\n"), (s = [T, M].filter(to).join("\n")).length > 0 && (s += "\n")) : (o = [uo(a), "#define SHADER_NAME " + r.name, M, a.instancing ? "#define USE_INSTANCING" : "", a.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + w, "#define MAX_BONES " + a.maxBones, a.useFog && a.fog ? "#define USE_FOG" : "", a.useFog && a.fogExp2 ? "#define FOG_EXP2" : "", a.map ? "#define USE_MAP" : "", a.envMap ? "#define USE_ENVMAP" : "", a.envMap ? "#define " + g : "", a.lightMap ? "#define USE_LIGHTMAP" : "", a.aoMap ? "#define USE_AOMAP" : "", a.emissiveMap ? "#define USE_EMISSIVEMAP" : "", a.bumpMap ? "#define USE_BUMPMAP" : "", a.normalMap ? "#define USE_NORMALMAP" : "", a.normalMap && a.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", a.normalMap && a.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", a.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", a.displacementMap && a.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", a.specularMap ? "#define USE_SPECULARMAP" : "", a.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", a.metalnessMap ? "#define USE_METALNESSMAP" : "", a.alphaMap ? "#define USE_ALPHAMAP" : "", a.vertexTangents ? "#define USE_TANGENT" : "", a.vertexColors ? "#define USE_COLOR" : "", a.vertexUvs ? "#define USE_UV" : "", a.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", a.flatShading ? "#define FLAT_SHADED" : "", a.skinning ? "#define USE_SKINNING" : "", a.useVertexTexture ? "#define BONE_TEXTURE" : "", a.morphTargets ? "#define USE_MORPHTARGETS" : "", a.morphNormals && !1 === a.flatShading ? "#define USE_MORPHNORMALS" : "", a.doubleSided ? "#define DOUBLE_SIDED" : "", a.flipSided ? "#define FLIP_SIDED" : "", a.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", a.shadowMapEnabled ? "#define " + m : "", a.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", a.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", a.logarithmicDepthBuffer && (a.isWebGL2 || t.get("EXT_frag_depth")) ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", " attribute mat4 instanceMatrix;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_TANGENT", "\tattribute vec4 tangent;", "#endif", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(to).join("\n"), s = [T, uo(a), "#define SHADER_NAME " + r.name, M, a.alphaTest ? "#define ALPHATEST " + a.alphaTest + (a.alphaTest % 1 ? "" : ".0") : "", "#define GAMMA_FACTOR " + w, a.useFog && a.fog ? "#define USE_FOG" : "", a.useFog && a.fogExp2 ? "#define FOG_EXP2" : "", a.map ? "#define USE_MAP" : "", a.matcap ? "#define USE_MATCAP" : "", a.envMap ? "#define USE_ENVMAP" : "", a.envMap ? "#define " + v : "", a.envMap ? "#define " + g : "", a.envMap ? "#define " + _ : "", a.lightMap ? "#define USE_LIGHTMAP" : "", a.aoMap ? "#define USE_AOMAP" : "", a.emissiveMap ? "#define USE_EMISSIVEMAP" : "", a.bumpMap ? "#define USE_BUMPMAP" : "", a.normalMap ? "#define USE_NORMALMAP" : "", a.normalMap && a.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", a.normalMap && a.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", a.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", a.specularMap ? "#define USE_SPECULARMAP" : "", a.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", a.metalnessMap ? "#define USE_METALNESSMAP" : "", a.alphaMap ? "#define USE_ALPHAMAP" : "", a.sheen ? "#define USE_SHEEN" : "", a.vertexTangents ? "#define USE_TANGENT" : "", a.vertexColors ? "#define USE_COLOR" : "", a.vertexUvs ? "#define USE_UV" : "", a.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", a.gradientMap ? "#define USE_GRADIENTMAP" : "", a.flatShading ? "#define FLAT_SHADED" : "", a.doubleSided ? "#define DOUBLE_SIDED" : "", a.flipSided ? "#define FLIP_SIDED" : "", a.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", a.shadowMapEnabled ? "#define " + m : "", a.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", a.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", a.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", a.logarithmicDepthBuffer && (a.isWebGL2 || t.get("EXT_frag_depth")) ? "#define USE_LOGDEPTHBUF_EXT" : "", (n.extensions && n.extensions.shaderTextureLOD || a.envMap) && (a.isWebGL2 || t.get("EXT_shader_texture_lod")) ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", a.toneMapping !== oe ? "#define TONE_MAPPING" : "", a.toneMapping !== oe ? Dr.tonemapping_pars_fragment : "", a.toneMapping !== oe ? eo("toneMapping", a.toneMapping) : "", a.dithering ? "#define DITHERING" : "", a.outputEncoding || a.mapEncoding || a.matcapEncoding || a.envMapEncoding || a.emissiveMapEncoding ? Dr.encodings_pars_fragment : "", a.mapEncoding ? Ja("mapTexelToLinear", a.mapEncoding) : "", a.matcapEncoding ? Ja("matcapTexelToLinear", a.matcapEncoding) : "", a.envMapEncoding ? Ja("envMapTexelToLinear", a.envMapEncoding) : "", a.emissiveMapEncoding ? Ja("emissiveMapTexelToLinear", a.emissiveMapEncoding) : "", a.outputEncoding ? (l = "linearToOutputTexel", c = a.outputEncoding, u = Za(c), "vec4 " + l + "( vec4 value ) { return LinearTo" + u[0] + u[1] + "; }") : "", a.depthPacking ? "#define DEPTH_PACKING " + n.depthPacking : "", "\n"].filter(to).join("\n")), p = no(p = io(p = ao(p), a), a), f = no(f = io(f = ao(f), a), a), p = lo(p), f = lo(f), a.isWebGL2 && !n.isRawShaderMaterial) {
        var E = !1, P = /^\s*#version\s+300\s+es\s*\n/;
        n.isShaderMaterial && null !== p.match(P) && null !== f.match(P) && (E = !0, p = p.replace(P, ""), f = f.replace(P, "")), o = ["#version 300 es\n", "#define attribute in", "#define varying out", "#define texture2D texture"].join("\n") + "\n" + o, s = ["#version 300 es\n", "#define varying in", E ? "" : "out highp vec4 pc_fragColor;", E ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + s, S > 0 && (o = (o = o.replace("#version 300 es\n", ["#version 300 es\n", "#extension GL_OVR_multiview2 : require", "layout(num_views = " + S + ") in;", "#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;"].join("\n"), ["uniform mat4 modelViewMatrices[" + S + "];", "uniform mat4 projectionMatrices[" + S + "];", "uniform mat4 viewMatrices[" + S + "];", "uniform mat3 normalMatrices[" + S + "];", "#define modelViewMatrix modelViewMatrices[VIEW_ID]", "#define projectionMatrix projectionMatrices[VIEW_ID]", "#define viewMatrix viewMatrices[VIEW_ID]", "#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")), s = (s = s.replace("#version 300 es\n", ["#version 300 es\n", "#extension GL_OVR_multiview2 : require", "#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;", ["uniform mat4 viewMatrices[" + S + "];", "#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")));
    } var C, L, R = s + f, I = qa(h, 35633, o + p), O = qa(h, 35632, R); if (h.attachShader(A, I), h.attachShader(A, O), void 0 !== n.index0AttributeName ? h.bindAttribLocation(A, 0, n.index0AttributeName) : !0 === a.morphTargets && h.bindAttribLocation(A, 0, "position"), h.linkProgram(A), e.debug.checkShaderErrors) {
        var D = h.getProgramInfoLog(A).trim(), F = h.getShaderInfoLog(I).trim(), k = h.getShaderInfoLog(O).trim(), N = !0, B = !0;
        if (!1 === h.getProgramParameter(A, 35714)) {
            N = !1;
            var G = Ka(h, I, "vertex"), H = Ka(h, O, "fragment");
            console.error("THREE.WebGLProgram: shader error: ", h.getError(), "35715", h.getProgramParameter(A, 35715), "gl.getProgramInfoLog", D, G, H);
        }
        else
            "" !== D ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", D) : "" !== F && "" !== k || (B = !1);
        B && (this.diagnostics = { runnable: N, material: n, programLog: D, vertexShader: { log: F, prefix: o }, fragmentShader: { log: k, prefix: s } });
    } return h.deleteShader(I), h.deleteShader(O), this.getUniforms = function () { return void 0 === C && (C = new Qa(h, A)), C; }, this.getAttributes = function () {
    return void 0 === L && (L = function (e, t) {
    for (var i = {}, n = e.getProgramParameter(t, 35721), r = 0; r < n; r++) {
        var a = e.getActiveAttrib(t, r).name;
        i[a] = e.getAttribLocation(t, a);
    } return i;
    } (h, A)), L;
    }, this.destroy = function () { h.deleteProgram(A), this.program = void 0; }, this.name = r.name, this.id = $a++ , this.cacheKey = i, this.usedTimes = 1, this.program = A, this.vertexShader = I, this.fragmentShader = O, this.numMultiviewViews = S, this;
    }
    function po(e, t, i) {
    var n = [], r = i.isWebGL2, a = i.logarithmicDepthBuffer, o = i.floatVertexTextures, s = i.precision, l = i.maxVertexUniforms, c = i.vertexTextures, u = { MeshDepthMaterial: "depth", MeshDistanceMaterial: "distanceRGBA", MeshNormalMaterial: "normal", MeshBasicMaterial: "basic", MeshLambertMaterial: "lambert", MeshPhongMaterial: "phong", MeshToonMaterial: "phong", MeshStandardMaterial: "physical", MeshPhysicalMaterial: "physical", MeshMatcapMaterial: "matcap", LineBasicMaterial: "basic", LineDashedMaterial: "dashed", PointsMaterial: "points", ShadowMaterial: "shadow", SpriteMaterial: "sprite" }, h = ["precision", "isWebGL2", "supportsVertexTextures", "outputEncoding", "instancing", "numMultiviewViews", "map", "mapEncoding", "matcap", "matcapEncoding", "envMap", "envMapMode", "envMapEncoding", "envMapCubeUV", "lightMap", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "objectSpaceNormalMap", "tangentSpaceNormalMap", "clearcoatNormalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "vertexTangents", "vertexUvs", "uvsVertexOnly", "fog", "useFog", "fogExp2", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "numDirLightShadows", "numPointLightShadows", "numSpotLightShadows", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "dithering", "sheen"]; function d(e, t) { var i; return e ? e.isTexture ? i = e.encoding : e.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."), i = e.texture.encoding) : i = wt, i === wt && t && (i = Mt), i; } this.getParameters = function (t, n, h, p, f, m, v) {
    var g = u[t.type], y = v.isSkinnedMesh ? function (e) {
    var t = e.skeleton.bones; if (o)
        return 1024; var i = l, n = Math.floor((i - 20) / 4), r = Math.min(n, t.length); return r < t.length ? (console.warn("THREE.WebGLRenderer: Skeleton has " + t.length + " bones. This GPU supports " + r + "."), 0) : r;
    } (v) : 0; null !== t.precision && (s = i.getMaxPrecision(t.precision)) !== t.precision && console.warn("THREE.WebGLProgram.getParameters:", t.precision, "not supported, using", s, "instead."); var b = e.getRenderTarget(), x = b && b.isWebGLMultiviewRenderTarget ? b.numViews : 0; return { isWebGL2: r, shaderID: g, precision: s, instancing: !0 === v.isInstancedMesh, supportsVertexTextures: c, numMultiviewViews: x, outputEncoding: d(b ? b.texture : null, e.gammaOutput), map: !!t.map, mapEncoding: d(t.map, e.gammaInput), matcap: !!t.matcap, matcapEncoding: d(t.matcap, e.gammaInput), envMap: !!t.envMap, envMapMode: t.envMap && t.envMap.mapping, envMapEncoding: d(t.envMap, e.gammaInput), envMapCubeUV: !!t.envMap && (t.envMap.mapping === ge || t.envMap.mapping === ye), lightMap: !!t.lightMap, aoMap: !!t.aoMap, emissiveMap: !!t.emissiveMap, emissiveMapEncoding: d(t.emissiveMap, e.gammaInput), bumpMap: !!t.bumpMap, normalMap: !!t.normalMap, objectSpaceNormalMap: t.normalMapType === Ot, tangentSpaceNormalMap: t.normalMapType === It, clearcoatNormalMap: !!t.clearcoatNormalMap, displacementMap: !!t.displacementMap, roughnessMap: !!t.roughnessMap, metalnessMap: !!t.metalnessMap, specularMap: !!t.specularMap, alphaMap: !!t.alphaMap, gradientMap: !!t.gradientMap, sheen: !!t.sheen, combine: t.combine, vertexTangents: t.normalMap && t.vertexTangents, vertexColors: t.vertexColors, vertexUvs: !!(t.map || t.bumpMap || t.normalMap || t.specularMap || t.alphaMap || t.emissiveMap || t.roughnessMap || t.metalnessMap || t.clearcoatNormalMap || t.displacementMap), uvsVertexOnly: !(t.map || t.bumpMap || t.normalMap || t.specularMap || t.alphaMap || t.emissiveMap || t.roughnessMap || t.metalnessMap || t.clearcoatNormalMap || !t.displacementMap), fog: !!p, useFog: t.fog, fogExp2: p && p.isFogExp2, flatShading: t.flatShading, sizeAttenuation: t.sizeAttenuation, logarithmicDepthBuffer: a, skinning: t.skinning && y > 0, maxBones: y, useVertexTexture: o, morphTargets: t.morphTargets, morphNormals: t.morphNormals, maxMorphTargets: e.maxMorphTargets, maxMorphNormals: e.maxMorphNormals, numDirLights: n.directional.length, numPointLights: n.point.length, numSpotLights: n.spot.length, numRectAreaLights: n.rectArea.length, numHemiLights: n.hemi.length, numDirLightShadows: n.directionalShadowMap.length, numPointLightShadows: n.pointShadowMap.length, numSpotLightShadows: n.spotShadowMap.length, numClippingPlanes: f, numClipIntersection: m, dithering: t.dithering, shadowMapEnabled: e.shadowMap.enabled && h.length > 0, shadowMapType: e.shadowMap.type, toneMapping: t.toneMapped ? e.toneMapping : oe, physicallyCorrectLights: e.physicallyCorrectLights, premultipliedAlpha: t.premultipliedAlpha, alphaTest: t.alphaTest, doubleSided: t.side === T, flipSided: t.side === w, depthPacking: void 0 !== t.depthPacking && t.depthPacking };
    }, this.getProgramCacheKey = function (t, i) {
    var n = []; if (i.shaderID ? n.push(i.shaderID) : (n.push(t.fragmentShader), n.push(t.vertexShader)), void 0 !== t.defines)
        for (var r in t.defines)
            n.push(r), n.push(t.defines[r]); for (var a = 0; a < h.length; a++)
            n.push(i[h[a]]); return n.push(t.onBeforeCompile.toString()), n.push(e.gammaOutput), n.push(e.gammaFactor), n.join();
    }, this.acquireProgram = function (i, r, a, o) {
    for (var s, l = 0, c = n.length; l < c; l++) {
        var u = n[l];
        if (u.cacheKey === o) {
            ++(s = u).usedTimes;
            break;
        }
    } return void 0 === s && (s = new ho(e, t, o, i, r, a), n.push(s)), s;
    }, this.releaseProgram = function (e) {
    if (0 == --e.usedTimes) {
        var t = n.indexOf(e);
        n[t] = n[n.length - 1], n.pop(), e.destroy();
    }
    }, this.programs = n;
    }
    function fo() { var e = new WeakMap; return { get: function (t) { var i = e.get(t); return void 0 === i && (i = {}, e.set(t, i)), i; }, remove: function (t) { e.delete(t); }, update: function (t, i, n) { e.get(t)[i] = n; }, dispose: function () { e = new WeakMap; } }; }
    function mo(e, t) { return e.groupOrder !== t.groupOrder ? e.groupOrder - t.groupOrder : e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.program !== t.program ? e.program.id - t.program.id : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id; }
    function vo(e, t) { return e.groupOrder !== t.groupOrder ? e.groupOrder - t.groupOrder : e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id; }
    function go() { var e = [], t = 0, i = [], n = [], r = { id: -1 }; function a(i, n, a, o, s, l) { var c = e[t]; return void 0 === c ? (c = { id: i.id, object: i, geometry: n, material: a, program: a.program || r, groupOrder: o, renderOrder: i.renderOrder, z: s, group: l }, e[t] = c) : (c.id = i.id, c.object = i, c.geometry = n, c.material = a, c.program = a.program || r, c.groupOrder = o, c.renderOrder = i.renderOrder, c.z = s, c.group = l), t++ , c; } return { opaque: i, transparent: n, init: function () { t = 0, i.length = 0, n.length = 0; }, push: function (e, t, r, o, s, l) { var c = a(e, t, r, o, s, l); (!0 === r.transparent ? n : i).push(c); }, unshift: function (e, t, r, o, s, l) { var c = a(e, t, r, o, s, l); (!0 === r.transparent ? n : i).unshift(c); }, sort: function () { i.length > 1 && i.sort(mo), n.length > 1 && n.sort(vo); } }; }
    function yo() { var e = new WeakMap; function t(i) { var n = i.target; n.removeEventListener("dispose", t), e.delete(n); } return { get: function (i, n) { var r, a = e.get(i); return void 0 === a ? (r = new go, e.set(i, new WeakMap), e.get(i).set(n, r), i.addEventListener("dispose", t)) : void 0 === (r = a.get(n)) && (r = new go, a.set(n, r)), r; }, dispose: function () { e = new WeakMap; } }; }
    function bo() {
    var e = {}; return {
    get: function (t) {
    if (void 0 !== e[t.id])
        return e[t.id]; var i; switch (t.type) {
            case "DirectionalLight":
                i = { direction: new Wt, color: new yn, shadow: !1, shadowBias: 0, shadowRadius: 1, shadowMapSize: new Ut };
                break;
            case "SpotLight":
                i = { position: new Wt, direction: new Wt, color: new yn, distance: 0, coneCos: 0, penumbraCos: 0, decay: 0, shadow: !1, shadowBias: 0, shadowRadius: 1, shadowMapSize: new Ut };
                break;
            case "PointLight":
                i = { position: new Wt, color: new yn, distance: 0, decay: 0, shadow: !1, shadowBias: 0, shadowRadius: 1, shadowMapSize: new Ut, shadowCameraNear: 1, shadowCameraFar: 1e3 };
                break;
            case "HemisphereLight":
                i = { direction: new Wt, skyColor: new yn, groundColor: new yn };
                break;
            case "RectAreaLight": i = { color: new yn, position: new Wt, halfWidth: new Wt, halfHeight: new Wt };
        } return e[t.id] = i, i;
    }
    };
    }
    var xo = 0;
    function _o(e, t) { return (t.castShadow ? 1 : 0) - (e.castShadow ? 1 : 0); }
    function wo() {
    for (var e = new bo, t = { version: 0, hash: { directionalLength: -1, pointLength: -1, spotLength: -1, rectAreaLength: -1, hemiLength: -1, numDirectionalShadows: -1, numPointShadows: -1, numSpotShadows: -1 }, ambient: [0, 0, 0], probe: [], directional: [], directionalShadowMap: [], directionalShadowMatrix: [], spot: [], spotShadowMap: [], spotShadowMatrix: [], rectArea: [], point: [], pointShadowMap: [], pointShadowMatrix: [], hemi: [], numDirectionalShadows: -1, numPointShadows: -1, numSpotShadows: -1 }, i = 0; i < 9; i++)
        t.probe.push(new Wt); var n = new Wt, r = new li, a = new li; return {
        setup: function (i, o, s) {
        for (var l = 0, c = 0, u = 0, h = 0; h < 9; h++)
            t.probe[h].set(0, 0, 0); var d = 0, p = 0, f = 0, m = 0, v = 0, g = 0, y = 0, b = 0, x = s.matrixWorldInverse; i.sort(_o), h = 0; for (var _ = i.length; h < _; h++) {
                var w = i[h], T = w.color, M = w.intensity, A = w.distance, S = w.shadow && w.shadow.map ? w.shadow.map.texture : null;
                if (w.isAmbientLight)
                    l += T.r * M, c += T.g * M, u += T.b * M;
                else if (w.isLightProbe)
                    for (var E = 0; E < 9; E++)
                        t.probe[E].addScaledVector(w.sh.coefficients[E], M);
                else if (w.isDirectionalLight) {
                    if ((C = e.get(w)).color.copy(w.color).multiplyScalar(w.intensity), C.direction.setFromMatrixPosition(w.matrixWorld), n.setFromMatrixPosition(w.target.matrixWorld), C.direction.sub(n), C.direction.transformDirection(x), C.shadow = w.castShadow, w.castShadow) {
                        var P = w.shadow;
                        C.shadowBias = P.bias, C.shadowRadius = P.radius, C.shadowMapSize = P.mapSize, t.directionalShadowMap[d] = S, t.directionalShadowMatrix[d] = w.shadow.matrix, g++;
                    }
                    t.directional[d] = C, d++;
                }
                else if (w.isSpotLight) {
                    if ((C = e.get(w)).position.setFromMatrixPosition(w.matrixWorld), C.position.applyMatrix4(x), C.color.copy(T).multiplyScalar(M), C.distance = A, C.direction.setFromMatrixPosition(w.matrixWorld), n.setFromMatrixPosition(w.target.matrixWorld), C.direction.sub(n), C.direction.transformDirection(x), C.coneCos = Math.cos(w.angle), C.penumbraCos = Math.cos(w.angle * (1 - w.penumbra)), C.decay = w.decay, C.shadow = w.castShadow, w.castShadow) {
                        P = w.shadow;
                        C.shadowBias = P.bias, C.shadowRadius = P.radius, C.shadowMapSize = P.mapSize, t.spotShadowMap[f] = S, t.spotShadowMatrix[f] = w.shadow.matrix, b++;
                    }
                    t.spot[f] = C, f++;
                }
                else if (w.isRectAreaLight) {
                    (C = e.get(w)).color.copy(T).multiplyScalar(M), C.position.setFromMatrixPosition(w.matrixWorld), C.position.applyMatrix4(x), a.identity(), r.copy(w.matrixWorld), r.premultiply(x), a.extractRotation(r), C.halfWidth.set(.5 * w.width, 0, 0), C.halfHeight.set(0, .5 * w.height, 0), C.halfWidth.applyMatrix4(a), C.halfHeight.applyMatrix4(a), t.rectArea[m] = C, m++;
                }
                else if (w.isPointLight) {
                    if ((C = e.get(w)).position.setFromMatrixPosition(w.matrixWorld), C.position.applyMatrix4(x), C.color.copy(w.color).multiplyScalar(w.intensity), C.distance = w.distance, C.decay = w.decay, C.shadow = w.castShadow, w.castShadow) {
                        P = w.shadow;
                        C.shadowBias = P.bias, C.shadowRadius = P.radius, C.shadowMapSize = P.mapSize, C.shadowCameraNear = P.camera.near, C.shadowCameraFar = P.camera.far, t.pointShadowMap[p] = S, t.pointShadowMatrix[p] = w.shadow.matrix, y++;
                    }
                    t.point[p] = C, p++;
                }
                else if (w.isHemisphereLight) {
                    var C;
                    (C = e.get(w)).direction.setFromMatrixPosition(w.matrixWorld), C.direction.transformDirection(x), C.direction.normalize(), C.skyColor.copy(w.color).multiplyScalar(M), C.groundColor.copy(w.groundColor).multiplyScalar(M), t.hemi[v] = C, v++;
                }
            } t.ambient[0] = l, t.ambient[1] = c, t.ambient[2] = u; var L = t.hash; L.directionalLength === d && L.pointLength === p && L.spotLength === f && L.rectAreaLength === m && L.hemiLength === v && L.numDirectionalShadows === g && L.numPointShadows === y && L.numSpotShadows === b || (t.directional.length = d, t.spot.length = f, t.rectArea.length = m, t.point.length = p, t.hemi.length = v, t.directionalShadowMap.length = g, t.pointShadowMap.length = y, t.spotShadowMap.length = b, t.directionalShadowMatrix.length = g, t.pointShadowMatrix.length = y, t.spotShadowMatrix.length = b, L.directionalLength = d, L.pointLength = p, L.spotLength = f, L.rectAreaLength = m, L.hemiLength = v, L.numDirectionalShadows = g, L.numPointShadows = y, L.numSpotShadows = b, t.version = xo++);
        }, state: t
        };
    }
    function To() { var e = new wo, t = [], i = []; return { init: function () { t.length = 0, i.length = 0; }, state: { lightsArray: t, shadowsArray: i, lights: e }, setupLights: function (n) { e.setup(t, i, n); }, pushLight: function (e) { t.push(e); }, pushShadow: function (e) { i.push(e); } }; }
    function Mo() { var e = new WeakMap; function t(i) { var n = i.target; n.removeEventListener("dispose", t), e.delete(n); } return { get: function (i, n) { var r; return !1 === e.has(i) ? (r = new To, e.set(i, new WeakMap), e.get(i).set(n, r), i.addEventListener("dispose", t)) : !1 === e.get(i).has(n) ? (r = new To, e.get(i).set(n, r)) : r = e.get(i).get(n), r; }, dispose: function () { e = new WeakMap; } }; }
    function Ao(e) { Mn.call(this), this.type = "MeshDepthMaterial", this.depthPacking = Lt, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.setValues(e); }
    function So(e) { Mn.call(this), this.type = "MeshDistanceMaterial", this.referencePosition = new Wt, this.nearDistance = 1, this.farDistance = 1e3, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.fog = !1, this.setValues(e); }
    Ao.prototype = Object.create(Mn.prototype), Ao.prototype.constructor = Ao, Ao.prototype.isMeshDepthMaterial = !0, Ao.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.depthPacking = e.depthPacking, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.map = e.map, this.alphaMap = e.alphaMap, this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this; }, So.prototype = Object.create(Mn.prototype), So.prototype.constructor = So, So.prototype.isMeshDistanceMaterial = !0, So.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.referencePosition.copy(e.referencePosition), this.nearDistance = e.nearDistance, this.farDistance = e.farDistance, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.map = e.map, this.alphaMap = e.alphaMap, this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this; };
    var Eo = "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpack2HalfToRGBA ( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}", Po = "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";
    function Co(e, t, i) {
    var n = new Or, r = new Ut, a = new Ut, o = new Kt, s = [], l = [], c = {}, u = { 0: w, 1: _, 2: T }, h = new Tr({ defines: { SAMPLE_RATE: .25, HALF_SAMPLE_RATE: 1 / 8 }, uniforms: { shadow_pass: { value: null }, resolution: { value: new Ut }, radius: { value: 4 } }, vertexShader: Po, fragmentShader: Eo }), d = h.clone(); d.defines.HORIZONAL_PASS = 1; var p = new Wn; p.setAttribute("position", new Sn(new Float32Array([-1, -1, .5, 3, -1, .5, -1, 3, .5]), 3)); var f = new cr(p, h), m = this; function v(i, n) { var r = t.update(f); h.uniforms.shadow_pass.value = i.map.texture, h.uniforms.resolution.value = i.mapSize, h.uniforms.radius.value = i.radius, e.setRenderTarget(i.mapPass), e.clear(), e.renderBufferDirect(n, null, r, h, f, null), d.uniforms.shadow_pass.value = i.mapPass.texture, d.uniforms.resolution.value = i.mapSize, d.uniforms.radius.value = i.radius, e.setRenderTarget(i.map), e.clear(), e.renderBufferDirect(n, null, r, d, f, null); } function g(e, t, i) { var n = e << 0 | t << 1 | i << 2, r = s[n]; return void 0 === r && (r = new Ao({ depthPacking: Rt, morphTargets: e, skinning: t }), s[n] = r), r; } function b(e, t, i) { var n = e << 0 | t << 1 | i << 2, r = l[n]; return void 0 === r && (r = new So({ morphTargets: e, skinning: t }), l[n] = r), r; } function M(t, i, n, r, a, o) {
    var s = t.geometry, l = null, h = g, d = t.customDepthMaterial; if (!0 === n.isPointLight && (h = b, d = t.customDistanceMaterial), void 0 === d) {
        var p = !1;
        !0 === i.morphTargets && (!0 === s.isBufferGeometry ? p = s.morphAttributes && s.morphAttributes.position && s.morphAttributes.position.length > 0 : !0 === s.isGeometry && (p = s.morphTargets && s.morphTargets.length > 0));
        var f = !1;
        !0 === t.isSkinnedMesh && (!0 === i.skinning ? f = !0 : console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:", t)), l = h(p, f, !0 === t.isInstancedMesh);
    }
    else
        l = d; if (e.localClippingEnabled && !0 === i.clipShadows && 0 !== i.clippingPlanes.length) {
            var m = l.uuid, v = i.uuid, y = c[m];
            void 0 === y && (y = {}, c[m] = y);
            var _ = y[v];
            void 0 === _ && (_ = l.clone(), y[v] = _), l = _;
        } return l.visible = i.visible, l.wireframe = i.wireframe, l.side = o === x ? null !== i.shadowSide ? i.shadowSide : i.side : null !== i.shadowSide ? i.shadowSide : u[i.side], l.clipShadows = i.clipShadows, l.clippingPlanes = i.clippingPlanes, l.clipIntersection = i.clipIntersection, l.wireframeLinewidth = i.wireframeLinewidth, l.linewidth = i.linewidth, !0 === n.isPointLight && !0 === l.isMeshDistanceMaterial && (l.referencePosition.setFromMatrixPosition(n.matrixWorld), l.nearDistance = r, l.farDistance = a), l;
    } function A(i, r, a, o, s) {
    if (!1 !== i.visible) {
        if (i.layers.test(r.layers) && (i.isMesh || i.isLine || i.isPoints) && (i.castShadow || i.receiveShadow && s === x) && (!i.frustumCulled || n.intersectsObject(i))) {
            i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse, i.matrixWorld);
            var l = t.update(i), c = i.material;
            if (Array.isArray(c))
                for (var u = l.groups, h = 0, d = u.length; h < d; h++) {
                    var p = u[h], f = c[p.materialIndex];
                    if (f && f.visible) {
                        var m = M(i, f, o, a.near, a.far, s);
                        e.renderBufferDirect(a, null, l, m, i, p);
                    }
                }
            else if (c.visible) {
                m = M(i, c, o, a.near, a.far, s);
                e.renderBufferDirect(a, null, l, m, i, null);
            }
        }
        for (var v = i.children, g = 0, y = v.length; g < y; g++)
            A(v[g], r, a, o, s);
    }
    } this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = y, this.render = function (t, s, l) {
    if (!1 !== m.enabled && (!1 !== m.autoUpdate || !1 !== m.needsUpdate) && 0 !== t.length) {
        var c = e.getRenderTarget(), u = e.getActiveCubeFace(), h = e.getActiveMipmapLevel(), d = e.state;
        d.setBlending(E), d.buffers.color.setClear(1, 1, 1, 1), d.buffers.depth.setTest(!0), d.setScissorTest(!1);
        for (var p = 0, f = t.length; p < f; p++) {
            var g = t[p], y = g.shadow;
            if (void 0 !== y) {
                r.copy(y.mapSize);
                var b = y.getFrameExtents();
                if (r.multiply(b), a.copy(y.mapSize), (r.x > i || r.y > i) && (console.warn("THREE.WebGLShadowMap:", g, "has shadow exceeding max texture size, reducing"), r.x > i && (a.x = Math.floor(i / b.x), r.x = a.x * b.x, y.mapSize.x = a.x), r.y > i && (a.y = Math.floor(i / b.y), r.y = a.y * b.y, y.mapSize.y = a.y)), null === y.map && !y.isPointLightShadow && this.type === x) {
                    var _ = { minFilter: Ae, magFilter: Ae, format: ze };
                    y.map = new Jt(r.x, r.y, _), y.map.texture.name = g.name + ".shadowMap", y.mapPass = new Jt(r.x, r.y, _), y.camera.updateProjectionMatrix();
                }
                if (null === y.map) {
                    _ = { minFilter: we, magFilter: we, format: ze };
                    y.map = new Jt(r.x, r.y, _), y.map.texture.name = g.name + ".shadowMap", y.camera.updateProjectionMatrix();
                }
                e.setRenderTarget(y.map), e.clear();
                for (var w = y.getViewportCount(), T = 0; T < w; T++) {
                    var M = y.getViewport(T);
                    o.set(a.x * M.x, a.y * M.y, a.x * M.z, a.y * M.w), d.viewport(o), y.updateMatrices(g, T), n = y.getFrustum(), A(s, l, y.camera, g, this.type);
                }
                y.isPointLightShadow || this.type !== x || v(y, l);
            }
            else
                console.warn("THREE.WebGLShadowMap:", g, "has no shadow.");
        }
        m.needsUpdate = !1, e.setRenderTarget(c, u, h);
    }
    };
    }
    function Lo(e, t, i) {
    var n = i.isWebGL2; var r = new function () { var t = !1, i = new Kt, n = null, r = new Kt(0, 0, 0, 0); return { setMask: function (i) { n === i || t || (e.colorMask(i, i, i, i), n = i); }, setLocked: function (e) { t = e; }, setClear: function (t, n, a, o, s) { !0 === s && (t *= o, n *= o, a *= o), i.set(t, n, a, o), !1 === r.equals(i) && (e.clearColor(t, n, a, o), r.copy(i)); }, reset: function () { t = !1, n = null, r.set(-1, 0, 0, 0); } }; }, a = new function () {
    var t = !1, i = null, n = null, r = null; return {
    setTest: function (e) { e ? be(2929) : xe(2929); }, setMask: function (n) { i === n || t || (e.depthMask(n), i = n); }, setFunc: function (t) {
    if (n !== t) {
        if (t)
            switch (t) {
                case q:
                    e.depthFunc(512);
                    break;
                case $:
                    e.depthFunc(519);
                    break;
                case Z:
                    e.depthFunc(513);
                    break;
                case K:
                    e.depthFunc(515);
                    break;
                case J:
                    e.depthFunc(514);
                    break;
                case ee:
                    e.depthFunc(518);
                    break;
                case te:
                    e.depthFunc(516);
                    break;
                case ie:
                    e.depthFunc(517);
                    break;
                default: e.depthFunc(515);
            }
        else
            e.depthFunc(515);
        n = t;
    }
    }, setLocked: function (e) { t = e; }, setClear: function (t) { r !== t && (e.clearDepth(t), r = t); }, reset: function () { t = !1, i = null, n = null, r = null; }
    };
    }, o = new function () { var t = !1, i = null, n = null, r = null, a = null, o = null, s = null, l = null, c = null; return { setTest: function (e) { t || (e ? be(2960) : xe(2960)); }, setMask: function (n) { i === n || t || (e.stencilMask(n), i = n); }, setFunc: function (t, i, o) { n === t && r === i && a === o || (e.stencilFunc(t, i, o), n = t, r = i, a = o); }, setOp: function (t, i, n) { o === t && s === i && l === n || (e.stencilOp(t, i, n), o = t, s = i, l = n); }, setLocked: function (e) { t = e; }, setClear: function (t) { c !== t && (e.clearStencil(t), c = t); }, reset: function () { t = !1, i = null, n = null, r = null, a = null, o = null, s = null, l = null, c = null; } }; }, s = e.getParameter(34921), l = new Uint8Array(s), c = new Uint8Array(s), u = new Uint8Array(s), h = {}, d = null, p = null, f = null, y = null, b = null, x = null, _ = null, M = null, A = null, S = !1, ne = null, re = null, ae = null, oe = null, se = null, le = e.getParameter(35661), ce = !1, ue = 0, he = e.getParameter(7938); -1 !== he.indexOf("WebGL") ? (ue = parseFloat(/^WebGL\ ([0-9])/.exec(he)[1]), ce = ue >= 1) : -1 !== he.indexOf("OpenGL ES") && (ue = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(he)[1]), ce = ue >= 2); var de = null, pe = {}, fe = new Kt, me = new Kt; function ve(t, i, n) {
    var r = new Uint8Array(4), a = e.createTexture(); e.bindTexture(t, a), e.texParameteri(t, 10241, 9728), e.texParameteri(t, 10240, 9728); for (var o = 0; o < n; o++)
        e.texImage2D(i + o, 0, 6408, 1, 1, 0, 6408, 5121, r); return a;
    } var ge = {}; function ye(i, r) { (l[i] = 1, 0 === c[i] && (e.enableVertexAttribArray(i), c[i] = 1), u[i] !== r) && ((n ? e : t.get("ANGLE_instanced_arrays"))[n ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](i, r), u[i] = r); } function be(t) { !0 !== h[t] && (e.enable(t), h[t] = !0); } function xe(t) { !1 !== h[t] && (e.disable(t), h[t] = !1); } ge[3553] = ve(3553, 3553, 1), ge[34067] = ve(34067, 34069, 6), r.setClear(0, 0, 0, 1), a.setClear(1), o.setClear(0), be(2929), a.setFunc(K), Ae(!1), Se(v), be(2884), Me(E); var _e = { [O]: 32774, [D]: 32778, [F]: 32779 }; if (n)
            _e[k] = 32775, _e[N] = 32776;
        else {
            var we = t.get("EXT_blend_minmax");
            null !== we && (_e[k] = we.MIN_EXT, _e[N] = we.MAX_EXT);
        } var Te = { [B]: 0, [G]: 1, [H]: 768, [z]: 770, [Q]: 776, [X]: 774, [j]: 772, [U]: 769, [V]: 771, [Y]: 775, [W]: 773 }; function Me(t, i, n, r, a, o, s, l) {
        if (t !== E) {
            if (p || (be(3042), p = !0), t === I)
                a = a || i, o = o || n, s = s || r, i === y && a === _ || (e.blendEquationSeparate(_e[i], _e[a]), y = i, _ = a), n === b && r === x && o === M && s === A || (e.blendFuncSeparate(Te[n], Te[r], Te[o], Te[s]), b = n, x = r, M = o, A = s), f = t, S = null;
            else if (t !== f || l !== S) {
                if (y === O && _ === O || (e.blendEquation(32774), y = O, _ = O), l)
                    switch (t) {
                        case P:
                            e.blendFuncSeparate(1, 771, 1, 771);
                            break;
                        case C:
                            e.blendFunc(1, 1);
                            break;
                        case L:
                            e.blendFuncSeparate(0, 0, 769, 771);
                            break;
                        case R:
                            e.blendFuncSeparate(0, 768, 0, 770);
                            break;
                        default: console.error("THREE.WebGLState: Invalid blending: ", t);
                    }
                else
                    switch (t) {
                        case P:
                            e.blendFuncSeparate(770, 771, 1, 771);
                            break;
                        case C:
                            e.blendFunc(770, 1);
                            break;
                        case L:
                            e.blendFunc(0, 769);
                            break;
                        case R:
                            e.blendFunc(0, 768);
                            break;
                        default: console.error("THREE.WebGLState: Invalid blending: ", t);
                    }
                b = null, x = null, M = null, A = null, f = t, S = l;
            }
        }
        else
            p && (xe(3042), p = !1);
        } function Ae(t) { ne !== t && (t ? e.frontFace(2304) : e.frontFace(2305), ne = t); } function Se(t) { t !== m ? (be(2884), t !== re && (t === v ? e.cullFace(1029) : t === g ? e.cullFace(1028) : e.cullFace(1032))) : xe(2884), re = t; } function Ee(t, i, n) { t ? (be(32823), oe === i && se === n || (e.polygonOffset(i, n), oe = i, se = n)) : xe(32823); } function Pe(t) { void 0 === t && (t = 33984 + le - 1), de !== t && (e.activeTexture(t), de = t); } return {
        buffers: { color: r, depth: a, stencil: o }, initAttributes: function () {
        for (var e = 0, t = l.length; e < t; e++)
            l[e] = 0;
        }, enableAttribute: function (e) { ye(e, 0); }, enableAttributeAndDivisor: ye, disableUnusedAttributes: function () {
        for (var t = 0, i = c.length; t !== i; ++t)
            c[t] !== l[t] && (e.disableVertexAttribArray(t), c[t] = 0);
        }, enable: be, disable: xe, useProgram: function (t) { return d !== t && (e.useProgram(t), d = t, !0); }, setBlending: Me, setMaterial: function (e, t) { e.side === T ? xe(2884) : be(2884); var i = e.side === w; t && (i = !i), Ae(i), e.blending === P && !1 === e.transparent ? Me(E) : Me(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha, e.premultipliedAlpha), a.setFunc(e.depthFunc), a.setTest(e.depthTest), a.setMask(e.depthWrite), r.setMask(e.colorWrite); var n = e.stencilWrite; o.setTest(n), n && (o.setMask(e.stencilWriteMask), o.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask), o.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)), Ee(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits); }, setFlipSided: Ae, setCullFace: Se, setLineWidth: function (t) { t !== ae && (ce && e.lineWidth(t), ae = t); }, setPolygonOffset: Ee, setScissorTest: function (e) { e ? be(3089) : xe(3089); }, activeTexture: Pe, bindTexture: function (t, i) { null === de && Pe(); var n = pe[de]; void 0 === n && (n = { type: void 0, texture: void 0 }, pe[de] = n), n.type === t && n.texture === i || (e.bindTexture(t, i || ge[t]), n.type = t, n.texture = i); }, unbindTexture: function () { var t = pe[de]; void 0 !== t && void 0 !== t.type && (e.bindTexture(t.type, null), t.type = void 0, t.texture = void 0); }, compressedTexImage2D: function () {
        try {
            e.compressedTexImage2D.apply(e, arguments);
        }
            catch (e) {
                console.error("THREE.WebGLState:", e);
            }
        }, texImage2D: function () {
        try {
            e.texImage2D.apply(e, arguments);
        }
            catch (e) {
                console.error("THREE.WebGLState:", e);
            }
        }, texImage3D: function () {
        try {
            e.texImage3D.apply(e, arguments);
        }
            catch (e) {
                console.error("THREE.WebGLState:", e);
            }
        }, scissor: function (t) { !1 === fe.equals(t) && (e.scissor(t.x, t.y, t.z, t.w), fe.copy(t)); }, viewport: function (t) { !1 === me.equals(t) && (e.viewport(t.x, t.y, t.z, t.w), me.copy(t)); }, reset: function () {
        for (var t = 0; t < c.length; t++)
            1 === c[t] && (e.disableVertexAttribArray(t), c[t] = 0); h = {}, de = null, pe = {}, d = null, f = null, ne = null, re = null, r.reset(), a.reset(), o.reset();
        }
        };
    }
    function Ro(e, t, i, n, r, a, o) {
    var s, l = r.isWebGL2, c = r.maxTextures, u = r.maxCubemapSize, h = r.maxTextureSize, d = r.maxSamples, p = new WeakMap, f = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d"); function m(e, t) { return f ? new OffscreenCanvas(e, t) : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"); } function v(e, t, i, n) {
    var r = 1; if ((e.width > n || e.height > n) && (r = n / Math.max(e.width, e.height)), r < 1 || !0 === t) {
        if ("undefined" != typeof HTMLImageElement && e instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e instanceof ImageBitmap) {
            var a = t ? Ht.floorPowerOfTwo : Math.floor, o = a(r * e.width), l = a(r * e.height);
            void 0 === s && (s = m(o, l));
            var c = i ? m(o, l) : s;
            return c.width = o, c.height = l, c.getContext("2d").drawImage(e, 0, 0, o, l), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + e.width + "x" + e.height + ") to (" + o + "x" + l + ")."), c;
        }
        return "data" in e && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + e.width + "x" + e.height + ")."), e;
    } return e;
    } function g(e) { return Ht.isPowerOfTwo(e.width) && Ht.isPowerOfTwo(e.height); } function y(e, t) { return e.generateMipmaps && t && e.minFilter !== we && e.minFilter !== Ae; } function b(t, i, r, a) { e.generateMipmap(t), n.get(i).__maxMipLevel = Math.log(Math.max(r, a)) * Math.LOG2E; } function x(e, i) {
    if (!1 === l)
        return e; var n = e; return 6403 === e && (5126 === i && (n = 33326), 5131 === i && (n = 33325), 5121 === i && (n = 33321)), 6407 === e && (5126 === i && (n = 34837), 5131 === i && (n = 34843), 5121 === i && (n = 32849)), 6408 === e && (5126 === i && (n = 34836), 5131 === i && (n = 34842), 5121 === i && (n = 32856)), 33325 === n || 33326 === n || 34842 === n || 34836 === n ? t.get("EXT_color_buffer_float") : 34843 !== n && 34837 !== n || console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."), n;
    } function _(e) { return e === we || e === Te || e === Me ? 9728 : 9729; } function w(t) {
    var i = t.target; i.removeEventListener("dispose", w), function (t) {
    var i = n.get(t); if (void 0 === i.__webglInit)
        return; e.deleteTexture(i.__webglTexture), n.remove(t);
    } (i), i.isVideoTexture && p.delete(i), o.memory.textures--;
    } function T(t) {
    var i = t.target; i.removeEventListener("dispose", T), function (t) {
    var i = n.get(t), r = n.get(t.texture); if (!t)
        return; void 0 !== r.__webglTexture && e.deleteTexture(r.__webglTexture); t.depthTexture && t.depthTexture.dispose(); if (t.isWebGLRenderTargetCube)
            for (var a = 0; a < 6; a++)
                e.deleteFramebuffer(i.__webglFramebuffer[a]), i.__webglDepthbuffer && e.deleteRenderbuffer(i.__webglDepthbuffer[a]);
        else
            e.deleteFramebuffer(i.__webglFramebuffer), i.__webglDepthbuffer && e.deleteRenderbuffer(i.__webglDepthbuffer); if (t.isWebGLMultiviewRenderTarget) {
                e.deleteTexture(i.__webglColorTexture), e.deleteTexture(i.__webglDepthStencilTexture), o.memory.textures -= 2;
                a = 0;
                for (var s = i.__webglViewFramebuffers.length; a < s; a++)
                    e.deleteFramebuffer(i.__webglViewFramebuffers[a]);
            } n.remove(t.texture), n.remove(t);
    } (i), o.memory.textures--;
    } var M = 0; function A(e, t) {
    var r = n.get(e); if (e.isVideoTexture && function (e) { var t = o.render.frame; p.get(e) !== t && (p.set(e, t), e.update()); } (e), e.version > 0 && r.__version !== e.version) {
        var a = e.image;
        if (void 0 === a)
            console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
        else {
            if (!1 !== a.complete)
                return void I(r, e, t);
            console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
        }
    } i.activeTexture(33984 + t), i.bindTexture(3553, r.__webglTexture);
    } function S(t, r) {
    if (6 === t.image.length) {
        var o = n.get(t);
        if (t.version > 0 && o.__version !== t.version) {
            R(o, t), i.activeTexture(33984 + r), i.bindTexture(34067, o.__webglTexture), e.pixelStorei(37440, t.flipY);
            for (var s = t && t.isCompressedTexture, c = t.image[0] && t.image[0].isDataTexture, h = [], d = 0; d < 6; d++)
                h[d] = s || c ? c ? t.image[d].image : t.image[d] : v(t.image[d], !1, !0, u);
            var p, f = h[0], m = g(f) || l, _ = a.convert(t.format), w = a.convert(t.type), T = x(_, w);
            if (L(34067, t, m), s) {
                for (d = 0; d < 6; d++) {
                    p = h[d].mipmaps;
                    for (var M = 0; M < p.length; M++) {
                        var A = p[M];
                        t.format !== ze && t.format !== Ue ? null !== _ ? i.compressedTexImage2D(34069 + d, M, T, A.width, A.height, 0, A.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : i.texImage2D(34069 + d, M, T, A.width, A.height, 0, _, w, A.data);
                    }
                }
                o.__maxMipLevel = p.length - 1;
            }
            else {
                p = t.mipmaps;
                for (d = 0; d < 6; d++)
                    if (c) {
                        i.texImage2D(34069 + d, 0, T, h[d].width, h[d].height, 0, _, w, h[d].data);
                        for (M = 0; M < p.length; M++) {
                            var S = (A = p[M]).image[d].image;
                            i.texImage2D(34069 + d, M + 1, T, S.width, S.height, 0, _, w, S.data);
                        }
                    }
                    else {
                        i.texImage2D(34069 + d, 0, T, _, w, h[d]);
                        for (M = 0; M < p.length; M++) {
                            A = p[M];
                            i.texImage2D(34069 + d, M + 1, T, _, w, A.image[d]);
                        }
                    }
                o.__maxMipLevel = p.length;
            }
            y(t, m) && b(34067, t, f.width, f.height), o.__version = t.version, t.onUpdate && t.onUpdate(t);
        }
        else
            i.activeTexture(33984 + r), i.bindTexture(34067, o.__webglTexture);
    }
    } function E(e, t) { i.activeTexture(33984 + t), i.bindTexture(34067, n.get(e).__webglTexture); } var P = { [be]: 10497, [xe]: 33071, [_e]: 33648 }, C = { [we]: 9728, [Te]: 9984, [Me]: 9986, [Ae]: 9729, [Se]: 9985, [Ee]: 9987 }; function L(i, a, o) {
    o ? (e.texParameteri(i, 10242, P[a.wrapS]), e.texParameteri(i, 10243, P[a.wrapT]), 32879 !== i && 35866 !== i || e.texParameteri(i, 32882, P[a.wrapR]), e.texParameteri(i, 10240, C[a.magFilter]), e.texParameteri(i, 10241, C[a.minFilter])) : (e.texParameteri(i, 10242, 33071), e.texParameteri(i, 10243, 33071), 32879 !== i && 35866 !== i || e.texParameteri(i, 32882, 33071), a.wrapS === xe && a.wrapT === xe || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), e.texParameteri(i, 10240, _(a.magFilter)), e.texParameteri(i, 10241, _(a.minFilter)), a.minFilter !== we && a.minFilter !== Ae && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")); var s = t.get("EXT_texture_filter_anisotropic"); if (s) {
        if (a.type === De && null === t.get("OES_texture_float_linear"))
            return;
        if (a.type === Fe && null === (l || t.get("OES_texture_half_float_linear")))
            return;
        (a.anisotropy > 1 || n.get(a).__currentAnisotropy) && (e.texParameterf(i, s.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(a.anisotropy, r.getMaxAnisotropy())), n.get(a).__currentAnisotropy = a.anisotropy);
    }
    } function R(t, i) { void 0 === t.__webglInit && (t.__webglInit = !0, i.addEventListener("dispose", w), t.__webglTexture = e.createTexture(), o.memory.textures++); } function I(t, n, r) {
    var o = 3553; n.isDataTexture2DArray && (o = 35866), n.isDataTexture3D && (o = 32879), R(t, n), i.activeTexture(33984 + r), i.bindTexture(o, t.__webglTexture), e.pixelStorei(37440, n.flipY), e.pixelStorei(37441, n.premultiplyAlpha), e.pixelStorei(3317, n.unpackAlignment); var s = function (e) { return !l && (e.wrapS !== xe || e.wrapT !== xe || e.minFilter !== we && e.minFilter !== Ae); } (n) && !1 === g(n.image), c = v(n.image, s, !1, h), u = g(c) || l, d = a.convert(n.format), p = a.convert(n.type), f = x(d, p); L(o, n, u); var m, _ = n.mipmaps; if (n.isDepthTexture) {
        if (f = 6402, n.type === De) {
            if (!1 === l)
                throw new Error("Float Depth Texture only supported in WebGL2.0");
            f = 36012;
        }
        else
            l && (f = 33189);
        n.format === We && 6402 === f && n.type !== Re && n.type !== Oe && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), n.type = Re, p = a.convert(n.type)), n.format === Xe && (f = 34041, n.type !== Ge && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), n.type = Ge, p = a.convert(n.type))), i.texImage2D(3553, 0, f, c.width, c.height, 0, d, p, null);
    }
    else if (n.isDataTexture)
        if (_.length > 0 && u) {
            for (var w = 0, T = _.length; w < T; w++)
                m = _[w], i.texImage2D(3553, w, f, m.width, m.height, 0, d, p, m.data);
            n.generateMipmaps = !1, t.__maxMipLevel = _.length - 1;
        }
        else
            i.texImage2D(3553, 0, f, c.width, c.height, 0, d, p, c.data), t.__maxMipLevel = 0;
    else if (n.isCompressedTexture) {
        for (w = 0, T = _.length; w < T; w++)
            m = _[w], n.format !== ze && n.format !== Ue ? null !== d ? i.compressedTexImage2D(3553, w, f, m.width, m.height, 0, m.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : i.texImage2D(3553, w, f, m.width, m.height, 0, d, p, m.data);
        t.__maxMipLevel = _.length - 1;
    }
    else if (n.isDataTexture2DArray)
        i.texImage3D(35866, 0, f, c.width, c.height, c.depth, 0, d, p, c.data), t.__maxMipLevel = 0;
    else if (n.isDataTexture3D)
        i.texImage3D(32879, 0, f, c.width, c.height, c.depth, 0, d, p, c.data), t.__maxMipLevel = 0;
    else if (_.length > 0 && u) {
        for (w = 0, T = _.length; w < T; w++)
            m = _[w], i.texImage2D(3553, w, f, d, p, m);
        n.generateMipmaps = !1, t.__maxMipLevel = _.length - 1;
    }
    else
        i.texImage2D(3553, 0, f, d, p, c), t.__maxMipLevel = 0; y(n, u) && b(3553, n, c.width, c.height), t.__version = n.version, n.onUpdate && n.onUpdate(n);
    } function O(t, r, o, s) { var l = a.convert(r.texture.format), c = a.convert(r.texture.type), u = x(l, c); i.texImage2D(s, 0, u, r.width, r.height, 0, l, c, null), e.bindFramebuffer(36160, t), e.framebufferTexture2D(36160, o, s, n.get(r.texture).__webglTexture, 0), e.bindFramebuffer(36160, null); } function D(t, i, n) {
    if (e.bindRenderbuffer(36161, t), i.depthBuffer && !i.stencilBuffer) {
        if (n) {
            var r = k(i);
            e.renderbufferStorageMultisample(36161, r, 33189, i.width, i.height);
        }
        else
            e.renderbufferStorage(36161, 33189, i.width, i.height);
        e.framebufferRenderbuffer(36160, 36096, 36161, t);
    }
    else if (i.depthBuffer && i.stencilBuffer) {
        if (n) {
            r = k(i);
            e.renderbufferStorageMultisample(36161, r, 35056, i.width, i.height);
        }
        else
            e.renderbufferStorage(36161, 34041, i.width, i.height);
        e.framebufferRenderbuffer(36160, 33306, 36161, t);
    }
    else {
        var o = x(a.convert(i.texture.format), a.convert(i.texture.type));
        if (n) {
            r = k(i);
            e.renderbufferStorageMultisample(36161, r, o, i.width, i.height);
        }
        else
            e.renderbufferStorage(36161, o, i.width, i.height);
    } e.bindRenderbuffer(36161, null);
    } function F(t) {
    var i = n.get(t), r = !0 === t.isWebGLRenderTargetCube; if (t.depthTexture) {
        if (r)
            throw new Error("target.depthTexture not supported in Cube render targets");
        !function (t, i) {
        if (i && i.isWebGLRenderTargetCube)
            throw new Error("Depth Texture with cube render targets is not supported"); if (e.bindFramebuffer(36160, t), !i.depthTexture || !i.depthTexture.isDepthTexture)
                throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture"); n.get(i.depthTexture).__webglTexture && i.depthTexture.image.width === i.width && i.depthTexture.image.height === i.height || (i.depthTexture.image.width = i.width, i.depthTexture.image.height = i.height, i.depthTexture.needsUpdate = !0), A(i.depthTexture, 0); var r = n.get(i.depthTexture).__webglTexture; if (i.depthTexture.format === We)
                e.framebufferTexture2D(36160, 36096, 3553, r, 0);
            else {
                if (i.depthTexture.format !== Xe)
                    throw new Error("Unknown depthTexture format");
                e.framebufferTexture2D(36160, 33306, 3553, r, 0);
            }
        } (i.__webglFramebuffer, t);
    }
    else if (r) {
        i.__webglDepthbuffer = [];
        for (var a = 0; a < 6; a++)
            e.bindFramebuffer(36160, i.__webglFramebuffer[a]), i.__webglDepthbuffer[a] = e.createRenderbuffer(), D(i.__webglDepthbuffer[a], t);
    }
    else
        e.bindFramebuffer(36160, i.__webglFramebuffer), i.__webglDepthbuffer = e.createRenderbuffer(), D(i.__webglDepthbuffer, t); e.bindFramebuffer(36160, null);
    } function k(e) { return l && e.isWebGLMultisampleRenderTarget ? Math.min(d, e.samples) : 0; } var N = !1, B = !1; this.allocateTextureUnit = function () { var e = M; return e >= c && console.warn("THREE.WebGLTextures: Trying to use " + e + " texture units while this GPU supports only " + c), M += 1, e; }, this.resetTextureUnits = function () { M = 0; }, this.setTexture2D = A, this.setTexture2DArray = function (e, t) { var r = n.get(e); e.version > 0 && r.__version !== e.version ? I(r, e, t) : (i.activeTexture(33984 + t), i.bindTexture(35866, r.__webglTexture)); }, this.setTexture3D = function (e, t) { var r = n.get(e); e.version > 0 && r.__version !== e.version ? I(r, e, t) : (i.activeTexture(33984 + t), i.bindTexture(32879, r.__webglTexture)); }, this.setTextureCube = S, this.setTextureCubeDynamic = E, this.setupRenderTarget = function (r) {
    var s = n.get(r), c = n.get(r.texture); r.addEventListener("dispose", T), c.__webglTexture = e.createTexture(), o.memory.textures++; var u = !0 === r.isWebGLRenderTargetCube, h = !0 === r.isWebGLMultisampleRenderTarget, d = !0 === r.isWebGLMultiviewRenderTarget, p = g(r) || l; if (u) {
        s.__webglFramebuffer = [];
        for (var f = 0; f < 6; f++)
            s.__webglFramebuffer[f] = e.createFramebuffer();
    }
    else if (s.__webglFramebuffer = e.createFramebuffer(), h)
        if (l) {
            s.__webglMultisampledFramebuffer = e.createFramebuffer(), s.__webglColorRenderbuffer = e.createRenderbuffer(), e.bindRenderbuffer(36161, s.__webglColorRenderbuffer);
            var m = x(a.convert(r.texture.format), a.convert(r.texture.type)), v = k(r);
            e.renderbufferStorageMultisample(36161, v, m, r.width, r.height), e.bindFramebuffer(36160, s.__webglMultisampledFramebuffer), e.framebufferRenderbuffer(36160, 36064, 36161, s.__webglColorRenderbuffer), e.bindRenderbuffer(36161, null), r.depthBuffer && (s.__webglDepthRenderbuffer = e.createRenderbuffer(), D(s.__webglDepthRenderbuffer, r, !0)), e.bindFramebuffer(36160, null);
        }
        else
            console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
    else if (d) {
        var _ = r.width, w = r.height, M = r.numViews;
        e.bindFramebuffer(36160, s.__webglFramebuffer);
        var A = t.get("OVR_multiview2");
        o.memory.textures += 2;
        var S = e.createTexture();
        e.bindTexture(35866, S), e.texParameteri(35866, 10240, 9728), e.texParameteri(35866, 10241, 9728), e.texImage3D(35866, 0, 32856, _, w, M, 0, 6408, 5121, null), A.framebufferTextureMultiviewOVR(36160, 36064, S, 0, 0, M);
        var E = e.createTexture();
        e.bindTexture(35866, E), e.texParameteri(35866, 10240, 9728), e.texParameteri(35866, 10241, 9728), e.texImage3D(35866, 0, 35056, _, w, M, 0, 34041, 34042, null), A.framebufferTextureMultiviewOVR(36160, 33306, E, 0, 0, M);
        var P = new Array(M);
        for (f = 0; f < M; ++f)
            P[f] = e.createFramebuffer(), e.bindFramebuffer(36160, P[f]), e.framebufferTextureLayer(36160, 36064, S, 0, f);
        s.__webglColorTexture = S, s.__webglDepthStencilTexture = E, s.__webglViewFramebuffers = P, e.bindFramebuffer(36160, null), e.bindTexture(35866, null);
    } if (u) {
        i.bindTexture(34067, c.__webglTexture), L(34067, r.texture, p);
        for (f = 0; f < 6; f++)
            O(s.__webglFramebuffer[f], r, 36064, 34069 + f);
        y(r.texture, p) && b(34067, r.texture, r.width, r.height), i.bindTexture(34067, null);
    }
        else
            d || (i.bindTexture(3553, c.__webglTexture), L(3553, r.texture, p), O(s.__webglFramebuffer, r, 36064, 3553), y(r.texture, p) && b(3553, r.texture, r.width, r.height), i.bindTexture(3553, null)); r.depthBuffer && F(r);
    }, this.updateRenderTargetMipmap = function (e) {
    var t = e.texture; if (y(t, g(e) || l)) {
        var r = e.isWebGLRenderTargetCube ? 34067 : 3553, a = n.get(t).__webglTexture;
        i.bindTexture(r, a), b(r, t, e.width, e.height), i.bindTexture(r, null);
    }
    }, this.updateMultisampleRenderTarget = function (t) {
    if (t.isWebGLMultisampleRenderTarget)
        if (l) {
            var i = n.get(t);
            e.bindFramebuffer(36008, i.__webglMultisampledFramebuffer), e.bindFramebuffer(36009, i.__webglFramebuffer);
            var r = t.width, a = t.height, o = 16384;
            t.depthBuffer && (o |= 256), t.stencilBuffer && (o |= 1024), e.blitFramebuffer(0, 0, r, a, 0, 0, r, a, o, 9728);
        }
        else
            console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
    }, this.safeSetTexture2D = function (e, t) { e && e.isWebGLRenderTarget && (!1 === N && (console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."), N = !0), e = e.texture), A(e, t); }, this.safeSetTextureCube = function (e, t) { e && e.isWebGLRenderTargetCube && (!1 === B && (console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."), B = !0), e = e.texture), e && e.isCubeTexture || Array.isArray(e.image) && 6 === e.image.length ? S(e, t) : E(e, t); };
    }
    function Io(e, t, i) {
    var n = i.isWebGL2; return {
    convert: function (e) {
    var i; if (e === Pe)
        return 5121; if (e === ke)
            return 32819; if (e === Ne)
            return 32820; if (e === Be)
            return 33635; if (e === Ce)
            return 5120; if (e === Le)
            return 5122; if (e === Re)
            return 5123; if (e === Ie)
            return 5124; if (e === Oe)
            return 5125; if (e === De)
            return 5126; if (e === Fe)
            return n ? 5131 : null !== (i = t.get("OES_texture_half_float")) ? i.HALF_FLOAT_OES : null; if (e === He)
            return 6406; if (e === Ue)
            return 6407; if (e === ze)
            return 6408; if (e === Ve)
            return 6409; if (e === je)
            return 6410; if (e === We)
            return 6402; if (e === Xe)
            return 34041; if (e === Ye)
            return 6403; if (e === Qe || e === qe || e === $e || e === Ze) {
                if (null === (i = t.get("WEBGL_compressed_texture_s3tc")))
                    return null;
                if (e === Qe)
                    return i.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (e === qe)
                    return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (e === $e)
                    return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (e === Ze)
                    return i.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            } if (e === Ke || e === Je || e === et || e === tt) {
                if (null === (i = t.get("WEBGL_compressed_texture_pvrtc")))
                    return null;
                if (e === Ke)
                    return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (e === Je)
                    return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (e === et)
                    return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (e === tt)
                    return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
            } return e === it ? null !== (i = t.get("WEBGL_compressed_texture_etc1")) ? i.COMPRESSED_RGB_ETC1_WEBGL : null : e === nt || e === rt || e === at || e === ot || e === st || e === lt || e === ct || e === ut || e === ht || e === dt || e === pt || e === ft || e === mt || e === vt ? null !== (i = t.get("WEBGL_compressed_texture_astc")) ? e : null : e === Ge ? n ? 34042 : null !== (i = t.get("WEBGL_depth_texture")) ? i.UNSIGNED_INT_24_8_WEBGL : null : void 0;
    }
    };
    }
    function Oo(e, t, i, n) { Jt.call(this, e, t, n), this.depthBuffer = !1, this.stencilBuffer = !1, this.numViews = i; }
    function Do(e, t) {
    var i, n, r, a, o, s, l, c = 2, u = e.extensions, h = e.properties, d = 0; function p(e) { return e.isArrayCamera ? e.cameras : (o[0] = e, o); } this.isAvailable = function () {
    if (void 0 === l) {
        var e = u.get("OVR_multiview2");
        if (l = null !== e && !1 === t.getContextAttributes().antialias) {
            d = t.getParameter(e.MAX_VIEWS_OVR), i = new Oo(0, 0, c), s = new Ut, a = [], r = [], o = [];
            for (var n = 0; n < d; n++)
                a[n] = new li, r[n] = new Qt;
        }
    } return l;
    }, this.attachCamera = function (t) {
    !1 !== function (e) {
    if (void 0 === e.isArrayCamera)
        return !0; var t = e.cameras; if (t.length > d)
            return !1; for (var i = 1, n = t.length; i < n; i++)
            if (t[0].viewport.z !== t[i].viewport.z || t[0].viewport.w !== t[i].viewport.w)
                return !1; return !0;
    } (t) && (n = e.getRenderTarget(), function (t) {
    if (n ? s.set(n.width, n.height) : e.getDrawingBufferSize(s), t.isArrayCamera) {
        var r = t.cameras[0].viewport;
        i.setSize(r.z, r.w), i.setNumViews(t.cameras.length);
    }
    else
        i.setSize(s.x, s.y), i.setNumViews(c);
    } (t), e.setRenderTarget(i));
    }, this.detachCamera = function (r) {
    i === e.getRenderTarget() && (e.setRenderTarget(n), function (e) {
    var n = i, r = n.numViews, a = h.get(n).__webglViewFramebuffers, o = n.width, l = n.height; if (e.isArrayCamera)
        for (var c = 0; c < r; c++) {
            var u = e.cameras[c].viewport, d = u.x, p = u.y, f = d + u.z, m = p + u.w;
            t.bindFramebuffer(36008, a[c]), t.blitFramebuffer(0, 0, o, l, d, p, f, m, 16384, 9728);
        }
    else
        t.bindFramebuffer(36008, a[0]), t.blitFramebuffer(0, 0, o, l, 0, 0, s.x, s.y, 16384, 9728);
    } (r));
    }, this.updateCameraProjectionMatricesUniform = function (e, i) {
    for (var n = p(e), r = 0; r < n.length; r++)
        a[r].copy(n[r].projectionMatrix); i.setValue(t, "projectionMatrices", a);
    }, this.updateCameraViewMatricesUniform = function (e, i) {
    for (var n = p(e), r = 0; r < n.length; r++)
        a[r].copy(n[r].matrixWorldInverse); i.setValue(t, "viewMatrices", a);
    }, this.updateObjectMatricesUniforms = function (e, i, n) {
    for (var o = p(i), s = 0; s < o.length; s++)
        a[s].multiplyMatrices(o[s].matrixWorldInverse, e.matrixWorld), r[s].getNormalMatrix(a[s]); n.setValue(t, "modelViewMatrices", a), n.setValue(t, "normalMatrices", r);
    };
    }
    function Fo() { Si.call(this), this.type = "Group"; }
    function ko(e) { Ar.call(this), this.cameras = e || []; }
    Oo.prototype = Object.assign(Object.create(Jt.prototype), { constructor: Oo, isWebGLMultiviewRenderTarget: !0, copy: function (e) { return Jt.prototype.copy.call(this, e), this.numViews = e.numViews, this; }, setNumViews: function (e) { return this.numViews !== e && (this.numViews = e, this.dispose()), this; } }), Fo.prototype = Object.assign(Object.create(Si.prototype), { constructor: Fo, isGroup: !0 }), ko.prototype = Object.assign(Object.create(Ar.prototype), { constructor: ko, isArrayCamera: !0 });
    var No, Bo = new Wt, Go = new Wt;
    function Ho(e, t, i) { Bo.setFromMatrixPosition(t.matrixWorld), Go.setFromMatrixPosition(i.matrixWorld); var n = Bo.distanceTo(Go), r = t.projectionMatrix.elements, a = i.projectionMatrix.elements, o = r[14] / (r[10] - 1), s = r[14] / (r[10] + 1), l = (r[9] + 1) / r[5], c = (r[9] - 1) / r[5], u = (r[8] - 1) / r[0], h = (a[8] + 1) / a[0], d = o * u, p = o * h, f = n / (-u + h), m = f * -u; t.matrixWorld.decompose(e.position, e.quaternion, e.scale), e.translateX(m), e.translateZ(f), e.matrixWorld.compose(e.position, e.quaternion, e.scale), e.matrixWorldInverse.getInverse(e.matrixWorld); var v = o + f, g = s + f, y = d - m, b = p + (n - m), x = l * s / g * v, _ = c * s / g * v; e.projectionMatrix.makePerspective(y, b, x, _, v, g); }
    function Uo(e) {
    var t, i, n = this, r = null, a = null, o = [], s = new li, l = new li, c = 1, u = "local-floor"; "undefined" != typeof window && "VRFrameData" in window && (a = new window.VRFrameData, window.addEventListener("vrdisplaypresentchange", _, !1)); var h = new li, d = new zt, p = new Wt, f = new Ar, m = new Ar; m.viewport = new Kt, m.layers.enable(1); var v = new Ar; v.viewport = new Kt, v.layers.enable(2); var g = new ko([m, v]); function y() { return null !== r && !0 === r.isPresenting; } g.layers.enable(1), g.layers.enable(2); var b, x = new Ut; function _() {
    if (y()) {
        var a = r.getEyeParameters("left");
        t = 2 * a.renderWidth * c, i = a.renderHeight * c, b = e.getPixelRatio(), e.getSize(x), e.setDrawingBufferSize(t, i, 1), m.viewport.set(0, 0, t / 2, i), v.viewport.set(t / 2, 0, t / 2, i), S.start(), n.dispatchEvent({ type: "sessionstart" });
    }
    else
        n.enabled && e.setDrawingBufferSize(x.width, x.height, b), S.stop(), n.dispatchEvent({ type: "sessionend" });
    } var w = [], T = []; function M(e) {
    for (var t = navigator.getGamepads && navigator.getGamepads(), i = 0, n = t.length; i < n; i++) {
        var r = t[i];
        if (r && ("Daydream Controller" === r.id || "Gear VR Controller" === r.id || "Oculus Go Controller" === r.id || "OpenVR Gamepad" === r.id || r.id.startsWith("Oculus Touch") || r.id.startsWith("HTC Vive Focus") || r.id.startsWith("Spatial Controller"))) {
            var a = r.hand;
            if (0 === e && ("" === a || "right" === a))
                return r;
            if (1 === e && "left" === a)
                return r;
        }
    }
    } function A(e, n) { null !== n && 4 === n.length && e.set(n[0] * t, n[1] * i, n[2] * t, n[3] * i); } this.enabled = !1, this.getController = function (e) { var t = o[e]; return void 0 === t && ((t = new Fo).matrixAutoUpdate = !1, t.visible = !1, o[e] = t), t; }, this.getDevice = function () { return r; }, this.setDevice = function (e) { void 0 !== e && (r = e), S.setContext(e); }, this.setFramebufferScaleFactor = function (e) { c = e; }, this.setReferenceSpaceType = function (e) { u = e; }, this.getCamera = function (e) {
    var t = "local-floor" === u ? 1.6 : 0; if (r.depthNear = e.near, r.depthFar = e.far, r.getFrameData(a), "local-floor" === u) {
        var i = r.stageParameters;
        i ? s.fromArray(i.sittingToStandingTransform) : s.makeTranslation(0, t, 0);
    } var n = a.pose; f.matrix.copy(s), f.matrix.decompose(f.position, f.quaternion, f.scale), null !== n.orientation && (d.fromArray(n.orientation), f.quaternion.multiply(d)), null !== n.position && (d.setFromRotationMatrix(s), p.fromArray(n.position), p.applyQuaternion(d), f.position.add(p)), f.updateMatrixWorld(), e.matrixWorld.copy(f.matrixWorld); for (var c = e.children, y = 0, b = c.length; y < b; y++)
            c[y].updateMatrixWorld(!0); m.near = e.near, v.near = e.near, m.far = e.far, v.far = e.far, m.matrixWorldInverse.fromArray(a.leftViewMatrix), v.matrixWorldInverse.fromArray(a.rightViewMatrix), l.getInverse(s), "local-floor" === u && (m.matrixWorldInverse.multiply(l), v.matrixWorldInverse.multiply(l)); var x = e.parent; null !== x && (h.getInverse(x.matrixWorld), m.matrixWorldInverse.multiply(h), v.matrixWorldInverse.multiply(h)), m.matrixWorld.getInverse(m.matrixWorldInverse), v.matrixWorld.getInverse(v.matrixWorldInverse), m.projectionMatrix.fromArray(a.leftProjectionMatrix), v.projectionMatrix.fromArray(a.rightProjectionMatrix), Ho(g, m, v); var _ = r.getLayers(); if (_.length) {
                var S = _[0];
                A(m.viewport, S.leftBounds), A(v.viewport, S.rightBounds);
            } return function () {
            for (var e = 0; e < o.length; e++) {
                var t = o[e], i = M(e);
                if (void 0 !== i && void 0 !== i.pose) {
                    if (null === i.pose)
                        return;
                    var n = i.pose;
                    !1 === n.hasPosition && t.position.set(.2, -.6, -.05), null !== n.position && t.position.fromArray(n.position), null !== n.orientation && t.quaternion.fromArray(n.orientation), t.matrix.compose(t.position, t.quaternion, t.scale), t.matrix.premultiply(s), t.matrix.decompose(t.position, t.quaternion, t.scale), t.matrixWorldNeedsUpdate = !0, t.visible = !0;
                    var r = "Daydream Controller" === i.id ? 0 : 1;
                    void 0 === w[e] && (w[e] = !1), w[e] !== i.buttons[r].pressed && (w[e] = i.buttons[r].pressed, !0 === w[e] ? t.dispatchEvent({ type: "selectstart" }) : (t.dispatchEvent({ type: "selectend" }), t.dispatchEvent({ type: "select" }))), r = 2, void 0 === T[e] && (T[e] = !1), void 0 !== i.buttons[r] && T[e] !== i.buttons[r].pressed && (T[e] = i.buttons[r].pressed, !0 === T[e] ? t.dispatchEvent({ type: "squeezestart" }) : (t.dispatchEvent({ type: "squeezeend" }), t.dispatchEvent({ type: "squeeze" })));
                }
                else
                    t.visible = !1;
            }
            } (), g;
    }, this.getStandingMatrix = function () { return s; }, this.isPresenting = y; var S = new Nr; this.setAnimationLoop = function (e) { S.setAnimationLoop(e), y() && S.start(); }, this.submitFrame = function () { y() && r.submitFrame(); }, this.dispose = function () { "undefined" != typeof window && window.removeEventListener("vrdisplaypresentchange", _); }, this.setFrameOfReferenceType = function () { console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated."); };
    }
    function zo(e, t) {
    var i = this, n = null, r = null, a = "local-floor", o = null, s = [], l = []; var c = new Ar; c.layers.enable(1), c.viewport = new Kt; var u = new Ar; u.layers.enable(2), u.viewport = new Kt; var h = new ko([c, u]); function d(e) {
    for (var t = 0; t < s.length; t++)
        l[t] === e.inputSource && s[t].dispatchEvent({ type: e.type });
    } function p() { e.setFramebuffer(null), e.setRenderTarget(e.getRenderTarget()), b.stop(), i.dispatchEvent({ type: "sessionend" }); } function f(e) { r = e, b.setContext(n), b.start(), i.dispatchEvent({ type: "sessionstart" }); } function m() {
    for (var e = 0; e < s.length; e++)
        l[e] = v(e);
    } function v(e) {
    for (var t = n.inputSources, i = 0; i < t.length; i++) {
        var r = t[i], a = r.handedness;
        if (0 === e && ("none" === a || "right" === a))
            return r;
        if (1 === e && "left" === a)
            return r;
    }
    } function g(e, t) { null === t ? e.matrixWorld.copy(e.matrix) : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix), e.matrixWorldInverse.getInverse(e.matrixWorld); } h.layers.enable(1), h.layers.enable(2), this.enabled = !1, this.getController = function (e) { var t = s[e]; return void 0 === t && ((t = new Fo).matrixAutoUpdate = !1, t.visible = !1, s[e] = t), t; }, this.setFramebufferScaleFactor = function () { }, this.setReferenceSpaceType = function (e) { a = e; }, this.getSession = function () { return n; }, this.setSession = function (e) { null !== (n = e) && (n.addEventListener("select", d), n.addEventListener("selectstart", d), n.addEventListener("selectend", d), n.addEventListener("squeeze", d), n.addEventListener("squeezestart", d), n.addEventListener("squeezeend", d), n.addEventListener("end", p), n.updateRenderState({ baseLayer: new XRWebGLLayer(n, t) }), n.requestReferenceSpace(a).then(f), n.addEventListener("inputsourceschange", m), m()); }, this.getCamera = function (e) {
    var t = e.parent, i = h.cameras; g(h, t); for (var n = 0; n < i.length; n++)
        g(i[n], t); e.matrixWorld.copy(h.matrixWorld); for (var r = e.children, a = (n = 0, r.length); n < a; n++)
            r[n].updateMatrixWorld(!0); return Ho(h, c, u), h;
    }, this.isPresenting = function () { return null !== n && null !== r; }; var y = null; var b = new Nr; b.setAnimationLoop((function (t, i) {
    if (null !== (o = i.getViewerPose(r))) {
        var a = o.views, c = n.renderState.baseLayer;
        e.setFramebuffer(c.framebuffer);
        for (var u = 0; u < a.length; u++) {
            var d = a[u], p = c.getViewport(d), f = d.transform.inverse.matrix, m = h.cameras[u];
            m.matrix.fromArray(f).getInverse(m.matrix), m.projectionMatrix.fromArray(d.projectionMatrix), m.viewport.set(p.x, p.y, p.width, p.height), 0 === u && h.matrix.copy(m.matrix);
        }
    } for (u = 0; u < s.length; u++) {
        var v = s[u], g = l[u];
        if (g) {
            var b = i.getPose(g.targetRaySpace, r);
            if (null !== b) {
                v.matrix.fromArray(b.transform.matrix), v.matrix.decompose(v.position, v.rotation, v.scale), v.visible = !0;
                continue;
            }
        }
        v.visible = !1;
    } y && y(t);
    })), this.setAnimationLoop = function (e) { y = e; }, this.dispose = function () { }, this.getStandingMatrix = function () { return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."), new li; }, this.getDevice = function () { console.warn("THREE.WebXRManager: getDevice() has been deprecated."); }, this.setDevice = function () { console.warn("THREE.WebXRManager: setDevice() has been deprecated."); }, this.setFrameOfReferenceType = function () { console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated."); }, this.submitFrame = function () { };
    }
    function Vo(e) {
    var t = void 0 !== (e = e || {}).canvas ? e.canvas : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"), i = void 0 !== e.context ? e.context : null, n = void 0 !== e.alpha && e.alpha, r = void 0 === e.depth || e.depth, a = void 0 === e.stencil || e.stencil, o = void 0 !== e.antialias && e.antialias, s = void 0 === e.premultipliedAlpha || e.premultipliedAlpha, l = void 0 !== e.preserveDrawingBuffer && e.preserveDrawingBuffer, c = void 0 !== e.powerPreference ? e.powerPreference : "default", u = void 0 !== e.failIfMajorPerformanceCaveat && e.failIfMajorPerformanceCaveat, h = null, d = null; this.domElement = t, this.debug = { checkShaderErrors: !0 }, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.clippingPlanes = [], this.localClippingEnabled = !1, this.gammaFactor = 2, this.gammaInput = !1, this.gammaOutput = !1, this.physicallyCorrectLights = !1, this.toneMapping = se, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, this.maxMorphTargets = 8, this.maxMorphNormals = 4; var p, f, m, v, g, y, b, x, _, T, M, A, S, E, P, C, L, R, I = this, O = !1, D = null, F = 0, k = 0, N = null, B = null, G = -1, H = { geometry: null, program: null, wireframe: !1 }, U = null, z = null, V = new Kt, j = new Kt, W = null, X = t.width, Y = t.height, Q = 1, q = new Kt(0, 0, X, Y), $ = new Kt(0, 0, X, Y), Z = !1, K = new Or, J = new jr, ee = !1, te = !1, ie = new li, ne = new Wt; function re() { return null === N ? Q : 1; } try {
        var ae = { alpha: n, depth: r, stencil: a, antialias: o, premultipliedAlpha: s, preserveDrawingBuffer: l, powerPreference: c, failIfMajorPerformanceCaveat: u, xrCompatible: !0 };
        if (t.addEventListener("webglcontextlost", he, !1), t.addEventListener("webglcontextrestored", de, !1), null === (p = i || t.getContext("webgl", ae) || t.getContext("experimental-webgl", ae)))
            throw null !== t.getContext("webgl") ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
        void 0 === p.getShaderPrecisionFormat && (p.getShaderPrecisionFormat = function () { return { rangeMin: 1, rangeMax: 1, precision: 1 }; });
    }
        catch (e) {
            throw console.error("THREE.WebGLRenderer: " + e.message), e;
        } function oe() { f = new Wr(p), !1 === (m = new Vr(p, f, e)).isWebGL2 && (f.get("WEBGL_depth_texture"), f.get("OES_texture_float"), f.get("OES_texture_half_float"), f.get("OES_texture_half_float_linear"), f.get("OES_standard_derivatives"), f.get("OES_element_index_uint"), f.get("ANGLE_instanced_arrays")), f.get("OES_texture_float_linear"), R = new Io(p, f, m), (v = new Lo(p, f, m)).scissor(j.copy($).multiplyScalar(Q).floor()), v.viewport(V.copy(q).multiplyScalar(Q).floor()), g = new Qr(p), y = new fo, b = new Ro(p, f, v, y, m, R, g), x = new Br(p), _ = new Xr(p, x, g), T = new Zr(p, _, x, g), P = new $r(p), M = new po(I, f, m), A = new yo, S = new Mo, E = new Ur(I, v, T, s), C = new zr(p, f, g, m), L = new Yr(p, f, g, m), g.programs = M.programs, I.capabilities = m, I.extensions = f, I.properties = y, I.renderLists = A, I.state = v, I.info = g; } oe(); var le = "undefined" != typeof navigator && "xr" in navigator ? new zo(I, p) : new Uo(I); this.vr = le; var ce = new Do(I, p), ue = new Co(I, T, m.maxTextureSize); function he(e) { e.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), O = !0; } function de() { console.log("THREE.WebGLRenderer: Context Restored."), O = !1, oe(); } function pe(e) { var t = e.target; t.removeEventListener("dispose", pe), function (e) { fe(e), y.remove(e); } (t); } function fe(e) { var t = y.get(e).program; e.program = void 0, void 0 !== t && M.releaseProgram(t); } this.shadowMap = ue, this.getContext = function () { return p; }, this.getContextAttributes = function () { return p.getContextAttributes(); }, this.forceContextLoss = function () { var e = f.get("WEBGL_lose_context"); e && e.loseContext(); }, this.forceContextRestore = function () { var e = f.get("WEBGL_lose_context"); e && e.restoreContext(); }, this.getPixelRatio = function () { return Q; }, this.setPixelRatio = function (e) { void 0 !== e && (Q = e, this.setSize(X, Y, !1)); }, this.getSize = function (e) { return void 0 === e && (console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"), e = new Ut), e.set(X, Y); }, this.setSize = function (e, i, n) { le.isPresenting() ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (X = e, Y = i, t.width = Math.floor(e * Q), t.height = Math.floor(i * Q), !1 !== n && (t.style.width = e + "px", t.style.height = i + "px"), this.setViewport(0, 0, e, i)); }, this.getDrawingBufferSize = function (e) { return void 0 === e && (console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"), e = new Ut), e.set(X * Q, Y * Q).floor(); }, this.setDrawingBufferSize = function (e, i, n) { X = e, Y = i, Q = n, t.width = Math.floor(e * n), t.height = Math.floor(i * n), this.setViewport(0, 0, e, i); }, this.getCurrentViewport = function (e) { return void 0 === e && (console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"), e = new Kt), e.copy(V); }, this.getViewport = function (e) { return e.copy(q); }, this.setViewport = function (e, t, i, n) { e.isVector4 ? q.set(e.x, e.y, e.z, e.w) : q.set(e, t, i, n), v.viewport(V.copy(q).multiplyScalar(Q).floor()); }, this.getScissor = function (e) { return e.copy($); }, this.setScissor = function (e, t, i, n) { e.isVector4 ? $.set(e.x, e.y, e.z, e.w) : $.set(e, t, i, n), v.scissor(j.copy($).multiplyScalar(Q).floor()); }, this.getScissorTest = function () { return Z; }, this.setScissorTest = function (e) { v.setScissorTest(Z = e); }, this.getClearColor = function () { return E.getClearColor(); }, this.setClearColor = function () { E.setClearColor.apply(E, arguments); }, this.getClearAlpha = function () { return E.getClearAlpha(); }, this.setClearAlpha = function () { E.setClearAlpha.apply(E, arguments); }, this.clear = function (e, t, i) { var n = 0; (void 0 === e || e) && (n |= 16384), (void 0 === t || t) && (n |= 256), (void 0 === i || i) && (n |= 1024), p.clear(n); }, this.clearColor = function () { this.clear(!0, !1, !1); }, this.clearDepth = function () { this.clear(!1, !0, !1); }, this.clearStencil = function () { this.clear(!1, !1, !0); }, this.dispose = function () { t.removeEventListener("webglcontextlost", he, !1), t.removeEventListener("webglcontextrestored", de, !1), A.dispose(), S.dispose(), y.dispose(), T.dispose(), le.dispose(), ve.stop(); }, this.renderBufferImmediate = function (e, t) { v.initAttributes(); var i = y.get(e); e.hasPositions && !i.position && (i.position = p.createBuffer()), e.hasNormals && !i.normal && (i.normal = p.createBuffer()), e.hasUvs && !i.uv && (i.uv = p.createBuffer()), e.hasColors && !i.color && (i.color = p.createBuffer()); var n = t.getAttributes(); e.hasPositions && (p.bindBuffer(34962, i.position), p.bufferData(34962, e.positionArray, 35048), v.enableAttribute(n.position), p.vertexAttribPointer(n.position, 3, 5126, !1, 0, 0)), e.hasNormals && (p.bindBuffer(34962, i.normal), p.bufferData(34962, e.normalArray, 35048), v.enableAttribute(n.normal), p.vertexAttribPointer(n.normal, 3, 5126, !1, 0, 0)), e.hasUvs && (p.bindBuffer(34962, i.uv), p.bufferData(34962, e.uvArray, 35048), v.enableAttribute(n.uv), p.vertexAttribPointer(n.uv, 2, 5126, !1, 0, 0)), e.hasColors && (p.bindBuffer(34962, i.color), p.bufferData(34962, e.colorArray, 35048), v.enableAttribute(n.color), p.vertexAttribPointer(n.color, 3, 5126, !1, 0, 0)), v.disableUnusedAttributes(), p.drawArrays(4, 0, e.count), e.count = 0; }, this.renderBufferDirect = function (e, t, i, n, r, a) {
        var o = r.isMesh && r.matrixWorld.determinant() < 0; v.setMaterial(n, o); var s = _e(e, t, n, r), l = !1; H.geometry === i.id && H.program === s.id && H.wireframe === (!0 === n.wireframe) || (H.geometry = i.id, H.program = s.id, H.wireframe = !0 === n.wireframe, l = !0), r.morphTargetInfluences && (P.update(r, i, n, s), l = !0); var c = i.index, u = i.attributes.position; if ((null === c || 0 !== c.count) && void 0 !== u && 0 !== u.count) {
            var h, d = 1;
            !0 === n.wireframe && (c = _.getWireframeAttribute(i), d = 2);
            var g = C;
            null !== c && (h = x.get(c), (g = L).setIndex(h)), l && (!function (e, t, i, n) {
            if (!1 === m.isWebGL2 && (e.isInstancedMesh || t.isInstancedBufferGeometry) && null === f.get("ANGLE_instanced_arrays"))
                return; v.initAttributes(); var r = t.attributes, a = n.getAttributes(), o = i.defaultAttributeValues; for (var s in a) {
                    var l = a[s];
                    if (l >= 0) {
                        var c = r[s];
                        if (void 0 !== c) {
                            var u = c.normalized, h = c.itemSize;
                            if (void 0 === (T = x.get(c)))
                                continue;
                            var d = T.buffer, g = T.type, y = T.bytesPerElement;
                            if (c.isInterleavedBufferAttribute) {
                                var b = c.data, _ = b.stride, w = c.offset;
                                b && b.isInstancedInterleavedBuffer ? (v.enableAttributeAndDivisor(l, b.meshPerAttribute), void 0 === t.maxInstancedCount && (t.maxInstancedCount = b.meshPerAttribute * b.count)) : v.enableAttribute(l), p.bindBuffer(34962, d), p.vertexAttribPointer(l, h, g, u, _ * y, w * y);
                            }
                            else
                                c.isInstancedBufferAttribute ? (v.enableAttributeAndDivisor(l, c.meshPerAttribute), void 0 === t.maxInstancedCount && (t.maxInstancedCount = c.meshPerAttribute * c.count)) : v.enableAttribute(l), p.bindBuffer(34962, d), p.vertexAttribPointer(l, h, g, u, 0, 0);
                        }
                        else if ("instanceMatrix" === s) {
                            var T;
                            if (void 0 === (T = x.get(e.instanceMatrix)))
                                continue;
                            d = T.buffer, g = T.type;
                            v.enableAttributeAndDivisor(l + 0, 1), v.enableAttributeAndDivisor(l + 1, 1), v.enableAttributeAndDivisor(l + 2, 1), v.enableAttributeAndDivisor(l + 3, 1), p.bindBuffer(34962, d), p.vertexAttribPointer(l + 0, 4, g, !1, 64, 0), p.vertexAttribPointer(l + 1, 4, g, !1, 64, 16), p.vertexAttribPointer(l + 2, 4, g, !1, 64, 32), p.vertexAttribPointer(l + 3, 4, g, !1, 64, 48);
                        }
                        else if (void 0 !== o) {
                            var M = o[s];
                            if (void 0 !== M)
                                switch (M.length) {
                                    case 2:
                                        p.vertexAttrib2fv(l, M);
                                        break;
                                    case 3:
                                        p.vertexAttrib3fv(l, M);
                                        break;
                                    case 4:
                                        p.vertexAttrib4fv(l, M);
                                        break;
                                    default: p.vertexAttrib1fv(l, M);
                                }
                        }
                    }
                } v.disableUnusedAttributes();
            } (r, i, n, s), null !== c && p.bindBuffer(34963, h.buffer));
            var y = 1 / 0;
            null !== c ? y = c.count : void 0 !== u && (y = u.count);
            var b = i.drawRange.start * d, w = i.drawRange.count * d, T = null !== a ? a.start * d : 0, M = null !== a ? a.count * d : 1 / 0, A = Math.max(b, T), S = Math.min(y, b + w, T + M) - 1, E = Math.max(0, S - A + 1);
            if (0 !== E) {
                if (r.isMesh)
                    if (!0 === n.wireframe)
                        v.setLineWidth(n.wireframeLinewidth * re()), g.setMode(1);
                    else
                        switch (r.drawMode) {
                            case bt:
                                g.setMode(4);
                                break;
                            case xt:
                                g.setMode(5);
                                break;
                            case _t: g.setMode(6);
                        }
                else if (r.isLine) {
                    var R = n.linewidth;
                    void 0 === R && (R = 1), v.setLineWidth(R * re()), r.isLineSegments ? g.setMode(1) : r.isLineLoop ? g.setMode(2) : g.setMode(3);
                }
                else
                    r.isPoints ? g.setMode(0) : r.isSprite && g.setMode(4);
                r.isInstancedMesh ? g.renderInstances(i, A, E, r.count) : i.isInstancedBufferGeometry ? g.renderInstances(i, A, E, i.maxInstancedCount) : g.render(A, E);
            }
        }
        }, this.compile = function (e, t) {
        (d = S.get(e, t)).init(), e.traverse((function (e) { e.isLight && (d.pushLight(e), e.castShadow && d.pushShadow(e)); })), d.setupLights(t), e.traverse((function (t) {
        if (t.material)
            if (Array.isArray(t.material))
                for (var i = 0; i < t.material.length; i++)
                    xe(t.material[i], e.fog, t);
            else
                xe(t.material, e.fog, t);
        }));
        }; var me = null; var ve = new Nr; function ge(e, t, i, n) {
        if (!1 !== e.visible) {
            if (e.layers.test(t.layers))
                if (e.isGroup)
                    i = e.renderOrder;
                else if (e.isLOD)
                    !0 === e.autoUpdate && e.update(t);
                else if (e.isLight)
                    d.pushLight(e), e.castShadow && d.pushShadow(e);
                else if (e.isSprite) {
                    if (!e.frustumCulled || K.intersectsSprite(e)) {
                        n && ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);
                        var r = T.update(e);
                        (a = e.material).visible && h.push(e, r, a, i, ne.z, null);
                    }
                }
                else if (e.isImmediateRenderObject)
                    n && ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie), h.push(e, null, e.material, i, ne.z, null);
                else if ((e.isMesh || e.isLine || e.isPoints) && (e.isSkinnedMesh && e.skeleton.frame !== g.render.frame && (e.skeleton.update(), e.skeleton.frame = g.render.frame), !e.frustumCulled || K.intersectsObject(e))) {
                    n && ne.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ie);
                    r = T.update(e);
                    var a = e.material;
                    if (Array.isArray(a))
                        for (var o = r.groups, s = 0, l = o.length; s < l; s++) {
                            var c = o[s], u = a[c.materialIndex];
                            u && u.visible && h.push(e, r, u, i, ne.z, c);
                        }
                    else
                        a.visible && h.push(e, r, a, i, ne.z, null);
                }
            var p = e.children;
            for (s = 0, l = p.length; s < l; s++)
                ge(p[s], t, i, n);
        }
        } function ye(e, t, i, n) {
        for (var r = 0, a = e.length; r < a; r++) {
            var o = e[r], s = o.object, l = o.geometry, c = void 0 === n ? o.material : n, u = o.group;
            if (i.isArrayCamera)
                if (z = i, le.enabled && ce.isAvailable())
                    be(s, t, i, l, c, u);
                else
                    for (var h = i.cameras, p = 0, f = h.length; p < f; p++) {
                        var m = h[p];
                        s.layers.test(m.layers) && (v.viewport(V.copy(m.viewport)), d.setupLights(m), be(s, t, m, l, c, u));
                    }
            else
                z = null, be(s, t, i, l, c, u);
        }
        } function be(e, t, i, n, r, a) {
        if (e.onBeforeRender(I, t, i, n, r, a), d = S.get(t, z || i), e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse, e.matrixWorld), e.normalMatrix.getNormalMatrix(e.modelViewMatrix), e.isImmediateRenderObject) {
            v.setMaterial(r);
            var o = _e(i, t.fog, r, e);
            H.geometry = null, H.program = null, H.wireframe = !1, function (e, t) { e.render((function (e) { I.renderBufferImmediate(e, t); })); } (e, o);
        }
        else
            I.renderBufferDirect(i, t.fog, n, r, e, a); e.onAfterRender(I, t, i, n, r, a), d = S.get(t, z || i);
        } function xe(e, t, i) {
        var n = y.get(e), r = d.state.lights, a = d.state.shadowsArray, o = r.state.version, s = M.getParameters(e, r.state, a, t, J.numPlanes, J.numIntersection, i), l = M.getProgramCacheKey(e, s), c = n.program, u = !0; if (void 0 === c)
            e.addEventListener("dispose", pe);
        else if (c.cacheKey !== l)
            fe(e);
        else if (n.lightsStateVersion !== o)
            n.lightsStateVersion = o, u = !1;
        else {
            if (void 0 !== s.shaderID)
                return;
            u = !1;
        } if (u) {
            if (s.shaderID) {
                var h = kr[s.shaderID];
                n.shader = { name: e.type, uniforms: yr(h.uniforms), vertexShader: h.vertexShader, fragmentShader: h.fragmentShader };
            }
            else
                n.shader = { name: e.type, uniforms: e.uniforms, vertexShader: e.vertexShader, fragmentShader: e.fragmentShader };
            e.onBeforeCompile(n.shader, I), l = M.getProgramCacheKey(e, s), c = M.acquireProgram(e, n.shader, s, l), n.program = c, e.program = c;
        } var p = c.getAttributes(); if (e.morphTargets) {
            e.numSupportedMorphTargets = 0;
            for (var f = 0; f < I.maxMorphTargets; f++)
                p["morphTarget" + f] >= 0 && e.numSupportedMorphTargets++;
        } if (e.morphNormals) {
            e.numSupportedMorphNormals = 0;
            for (f = 0; f < I.maxMorphNormals; f++)
                p["morphNormal" + f] >= 0 && e.numSupportedMorphNormals++;
        } var m = n.shader.uniforms; (e.isShaderMaterial || e.isRawShaderMaterial) && !0 !== e.clipping || (n.numClippingPlanes = J.numPlanes, n.numIntersection = J.numIntersection, m.clippingPlanes = J.uniform), n.fog = t, n.needsLights = function (e) { return e.isMeshLambertMaterial || e.isMeshPhongMaterial || e.isMeshStandardMaterial || e.isShadowMaterial || e.isShaderMaterial && !0 === e.lights; } (e), n.lightsStateVersion = o, n.needsLights && (m.ambientLightColor.value = r.state.ambient, m.lightProbe.value = r.state.probe, m.directionalLights.value = r.state.directional, m.spotLights.value = r.state.spot, m.rectAreaLights.value = r.state.rectArea, m.pointLights.value = r.state.point, m.hemisphereLights.value = r.state.hemi, m.directionalShadowMap.value = r.state.directionalShadowMap, m.directionalShadowMatrix.value = r.state.directionalShadowMatrix, m.spotShadowMap.value = r.state.spotShadowMap, m.spotShadowMatrix.value = r.state.spotShadowMatrix, m.pointShadowMap.value = r.state.pointShadowMap, m.pointShadowMatrix.value = r.state.pointShadowMatrix); var v = n.program.getUniforms(), g = Qa.seqWithValue(v.seq, m); n.uniformsList = g;
        } function _e(e, t, i, n) {
        b.resetTextureUnits(); var r = y.get(i), a = d.state.lights; if (ee && (te || e !== U)) {
            var o = e === U && i.id === G;
            J.setState(i.clippingPlanes, i.clipIntersection, i.clipShadows, e, r, o);
        } i.version === r.__version && (void 0 === r.program ? i.needsUpdate = !0 : i.fog && r.fog !== t ? i.needsUpdate = !0 : r.needsLights && r.lightsStateVersion !== a.state.version ? i.needsUpdate = !0 : void 0 === r.numClippingPlanes || r.numClippingPlanes === J.numPlanes && r.numIntersection === J.numIntersection || (i.needsUpdate = !0)), i.version !== r.__version && (xe(i, t, n), r.__version = i.version); var s, l, c = !1, u = !1, h = !1, f = r.program, g = f.getUniforms(), x = r.shader.uniforms; if (v.useProgram(f.program) && (c = !0, u = !0, h = !0), i.id !== G && (G = i.id, u = !0), c || U !== e) {
            if (f.numMultiviewViews > 0 ? ce.updateCameraProjectionMatricesUniform(e, g) : g.setValue(p, "projectionMatrix", e.projectionMatrix), m.logarithmicDepthBuffer && g.setValue(p, "logDepthBufFC", 2 / (Math.log(e.far + 1) / Math.LN2)), U !== e && (U = e, u = !0, h = !0), i.isShaderMaterial || i.isMeshPhongMaterial || i.isMeshStandardMaterial || i.envMap) {
                var _ = g.map.cameraPosition;
                void 0 !== _ && _.setValue(p, ne.setFromMatrixPosition(e.matrixWorld));
            }
            (i.isMeshPhongMaterial || i.isMeshLambertMaterial || i.isMeshBasicMaterial || i.isMeshStandardMaterial || i.isShaderMaterial) && g.setValue(p, "isOrthographic", !0 === e.isOrthographicCamera), (i.isMeshPhongMaterial || i.isMeshLambertMaterial || i.isMeshBasicMaterial || i.isMeshStandardMaterial || i.isShaderMaterial || i.skinning) && (f.numMultiviewViews > 0 ? ce.updateCameraViewMatricesUniform(e, g) : g.setValue(p, "viewMatrix", e.matrixWorldInverse));
        } if (i.skinning) {
            g.setOptional(p, n, "bindMatrix"), g.setOptional(p, n, "bindMatrixInverse");
            var T = n.skeleton;
            if (T) {
                var M = T.bones;
                if (m.floatVertexTextures) {
                    if (void 0 === T.boneTexture) {
                        var A = Math.sqrt(4 * M.length);
                        A = Ht.ceilPowerOfTwo(A), A = Math.max(A, 4);
                        var S = new Float32Array(A * A * 4);
                        S.set(T.boneMatrices);
                        var E = new Lr(S, A, A, ze, De);
                        T.boneMatrices = S, T.boneTexture = E, T.boneTextureSize = A;
                    }
                    g.setValue(p, "boneTexture", T.boneTexture, b), g.setValue(p, "boneTextureSize", T.boneTextureSize);
                }
                else
                    g.setOptional(p, T, "boneMatrices");
            }
        } return (u || r.receiveShadow !== n.receiveShadow) && (r.receiveShadow = n.receiveShadow, g.setValue(p, "receiveShadow", n.receiveShadow)), u && (g.setValue(p, "toneMappingExposure", I.toneMappingExposure), g.setValue(p, "toneMappingWhitePoint", I.toneMappingWhitePoint), r.needsLights && (l = h, (s = x).ambientLightColor.needsUpdate = l, s.lightProbe.needsUpdate = l, s.directionalLights.needsUpdate = l, s.pointLights.needsUpdate = l, s.spotLights.needsUpdate = l, s.rectAreaLights.needsUpdate = l, s.hemisphereLights.needsUpdate = l), t && i.fog && function (e, t) { e.fogColor.value.copy(t.color), t.isFog ? (e.fogNear.value = t.near, e.fogFar.value = t.far) : t.isFogExp2 && (e.fogDensity.value = t.density); } (x, t), i.isMeshBasicMaterial ? we(x, i) : i.isMeshLambertMaterial ? (we(x, i), function (e, t) { t.emissiveMap && (e.emissiveMap.value = t.emissiveMap); } (x, i)) : i.isMeshPhongMaterial ? (we(x, i), i.isMeshToonMaterial ? function (e, t) { Te(e, t), t.gradientMap && (e.gradientMap.value = t.gradientMap); } (x, i) : Te(x, i)) : i.isMeshStandardMaterial ? (we(x, i), i.isMeshPhysicalMaterial ? function (e, t) { Me(e, t), e.reflectivity.value = t.reflectivity, e.clearcoat.value = t.clearcoat, e.clearcoatRoughness.value = t.clearcoatRoughness, t.sheen && e.sheen.value.copy(t.sheen); t.clearcoatNormalMap && (e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale), e.clearcoatNormalMap.value = t.clearcoatNormalMap, t.side === w && e.clearcoatNormalScale.value.negate()); e.transparency.value = t.transparency; } (x, i) : Me(x, i)) : i.isMeshMatcapMaterial ? (we(x, i), function (e, t) { t.matcap && (e.matcap.value = t.matcap); t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === w && (e.bumpScale.value *= -1)); t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === w && e.normalScale.value.negate()); t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias); } (x, i)) : i.isMeshDepthMaterial ? (we(x, i), function (e, t) { t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias); } (x, i)) : i.isMeshDistanceMaterial ? (we(x, i), function (e, t) { t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias); e.referencePosition.value.copy(t.referencePosition), e.nearDistance.value = t.nearDistance, e.farDistance.value = t.farDistance; } (x, i)) : i.isMeshNormalMaterial ? (we(x, i), function (e, t) { t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === w && (e.bumpScale.value *= -1)); t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === w && e.normalScale.value.negate()); t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias); } (x, i)) : i.isLineBasicMaterial ? (function (e, t) { e.diffuse.value.copy(t.color), e.opacity.value = t.opacity; } (x, i), i.isLineDashedMaterial && function (e, t) { e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale; } (x, i)) : i.isPointsMaterial ? function (e, t) { e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, e.size.value = t.size * Q, e.scale.value = .5 * Y, t.map && (e.map.value = t.map); t.alphaMap && (e.alphaMap.value = t.alphaMap); var i; t.map ? i = t.map : t.alphaMap && (i = t.alphaMap); void 0 !== i && (!0 === i.matrixAutoUpdate && i.updateMatrix(), e.uvTransform.value.copy(i.matrix)); } (x, i) : i.isSpriteMaterial ? function (e, t) { e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, e.rotation.value = t.rotation, t.map && (e.map.value = t.map); t.alphaMap && (e.alphaMap.value = t.alphaMap); var i; t.map ? i = t.map : t.alphaMap && (i = t.alphaMap); void 0 !== i && (!0 === i.matrixAutoUpdate && i.updateMatrix(), e.uvTransform.value.copy(i.matrix)); } (x, i) : i.isShadowMaterial && (x.color.value.copy(i.color), x.opacity.value = i.opacity), void 0 !== x.ltc_1 && (x.ltc_1.value = Fr.LTC_1), void 0 !== x.ltc_2 && (x.ltc_2.value = Fr.LTC_2), Qa.upload(p, r.uniformsList, x, b), i.isShaderMaterial && (i.uniformsNeedUpdate = !1)), i.isShaderMaterial && !0 === i.uniformsNeedUpdate && (Qa.upload(p, r.uniformsList, x, b), i.uniformsNeedUpdate = !1), i.isSpriteMaterial && g.setValue(p, "center", n.center), f.numMultiviewViews > 0 ? ce.updateObjectMatricesUniforms(n, e, g) : (g.setValue(p, "modelViewMatrix", n.modelViewMatrix), g.setValue(p, "normalMatrix", n.normalMatrix)), g.setValue(p, "modelMatrix", n.matrixWorld), f;
        } function we(e, t) { var i; e.opacity.value = t.opacity, t.color && e.diffuse.value.copy(t.color), t.emissive && e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity), t.map && (e.map.value = t.map), t.alphaMap && (e.alphaMap.value = t.alphaMap), t.specularMap && (e.specularMap.value = t.specularMap), t.envMap && (e.envMap.value = t.envMap, e.flipEnvMap.value = t.envMap.isCubeTexture ? -1 : 1, e.reflectivity.value = t.reflectivity, e.refractionRatio.value = t.refractionRatio, e.maxMipLevel.value = y.get(t.envMap).__maxMipLevel), t.lightMap && (e.lightMap.value = t.lightMap, e.lightMapIntensity.value = t.lightMapIntensity), t.aoMap && (e.aoMap.value = t.aoMap, e.aoMapIntensity.value = t.aoMapIntensity), t.map ? i = t.map : t.specularMap ? i = t.specularMap : t.displacementMap ? i = t.displacementMap : t.normalMap ? i = t.normalMap : t.bumpMap ? i = t.bumpMap : t.roughnessMap ? i = t.roughnessMap : t.metalnessMap ? i = t.metalnessMap : t.alphaMap ? i = t.alphaMap : t.emissiveMap && (i = t.emissiveMap), void 0 !== i && (i.isWebGLRenderTarget && (i = i.texture), !0 === i.matrixAutoUpdate && i.updateMatrix(), e.uvTransform.value.copy(i.matrix)); } function Te(e, t) { e.specular.value.copy(t.specular), e.shininess.value = Math.max(t.shininess, 1e-4), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap), t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === w && (e.bumpScale.value *= -1)), t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === w && e.normalScale.value.negate()), t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias); } function Me(e, t) { e.roughness.value = t.roughness, e.metalness.value = t.metalness, t.roughnessMap && (e.roughnessMap.value = t.roughnessMap), t.metalnessMap && (e.metalnessMap.value = t.metalnessMap), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap), t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === w && (e.bumpScale.value *= -1)), t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === w && e.normalScale.value.negate()), t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias), t.envMap && (e.envMapIntensity.value = t.envMapIntensity); } ve.setAnimationLoop((function (e) { le.isPresenting() || me && me(e); })), "undefined" != typeof window && ve.setContext(window), this.setAnimationLoop = function (e) { me = e, le.setAnimationLoop(e), ve.start(); }, this.render = function (e, t) {
        var i, n; if (void 0 !== arguments[2] && (console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."), i = arguments[2]), void 0 !== arguments[3] && (console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."), n = arguments[3]), t && t.isCamera) {
            if (!O) {
                H.geometry = null, H.program = null, H.wireframe = !1, G = -1, U = null, !0 === e.autoUpdate && e.updateMatrixWorld(), null === t.parent && t.updateMatrixWorld(), le.enabled && le.isPresenting() && (t = le.getCamera(t)), (d = S.get(e, t)).init(), e.onBeforeRender(I, e, t, i || N), ie.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), K.setFromMatrix(ie), te = this.localClippingEnabled, ee = J.init(this.clippingPlanes, te, t), (h = A.get(e, t)).init(), ge(e, t, 0, I.sortObjects), !0 === I.sortObjects && h.sort(), ee && J.beginShadows();
                var r = d.state.shadowsArray;
                ue.render(r, e, t), d.setupLights(t), ee && J.endShadows(), this.info.autoReset && this.info.reset(), void 0 !== i && this.setRenderTarget(i), le.enabled && ce.isAvailable() && ce.attachCamera(t), E.render(h, e, t, n);
                var a = h.opaque, o = h.transparent;
                if (e.overrideMaterial) {
                    var s = e.overrideMaterial;
                    a.length && ye(a, e, t, s), o.length && ye(o, e, t, s);
                }
                else
                    a.length && ye(a, e, t), o.length && ye(o, e, t);
                e.onAfterRender(I, e, t), null !== N && (b.updateRenderTargetMipmap(N), b.updateMultisampleRenderTarget(N)), v.buffers.depth.setTest(!0), v.buffers.depth.setMask(!0), v.buffers.color.setMask(!0), v.setPolygonOffset(!1), le.enabled && (ce.isAvailable() && ce.detachCamera(t), le.submitFrame()), h = null, d = null;
            }
        }
        else
            console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        }, this.setFramebuffer = function (e) { D !== e && null === N && p.bindFramebuffer(36160, e), D = e; }, this.getActiveCubeFace = function () { return F; }, this.getActiveMipmapLevel = function () { return k; }, this.getRenderTarget = function () { return N; }, this.setRenderTarget = function (e, t, i) {
        N = e, F = t, k = i, e && void 0 === y.get(e).__webglFramebuffer && b.setupRenderTarget(e); var n = D, r = !1; if (e) {
            var a = y.get(e).__webglFramebuffer;
            e.isWebGLRenderTargetCube ? (n = a[t || 0], r = !0) : n = e.isWebGLMultisampleRenderTarget ? y.get(e).__webglMultisampledFramebuffer : a, V.copy(e.viewport), j.copy(e.scissor), W = e.scissorTest;
        }
        else
            V.copy(q).multiplyScalar(Q).floor(), j.copy($).multiplyScalar(Q).floor(), W = Z; if (B !== n && (p.bindFramebuffer(36160, n), B = n), v.viewport(V), v.scissor(j), v.setScissorTest(W), r) {
                var o = y.get(e.texture);
                p.framebufferTexture2D(36160, 36064, 34069 + (t || 0), o.__webglTexture, i || 0);
            }
        }, this.readRenderTargetPixels = function (e, t, i, n, r, a, o) {
        if (e && e.isWebGLRenderTarget) {
            var s = y.get(e).__webglFramebuffer;
            if (e.isWebGLRenderTargetCube && void 0 !== o && (s = s[o]), s) {
                var l = !1;
                s !== B && (p.bindFramebuffer(36160, s), l = !0);
                try {
                    var c = e.texture, u = c.format, h = c.type;
                    if (u !== ze && R.convert(u) !== p.getParameter(35739))
                        return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                    if (!(h === Pe || R.convert(h) === p.getParameter(35738) || h === De && (m.isWebGL2 || f.get("OES_texture_float") || f.get("WEBGL_color_buffer_float")) || h === Fe && (m.isWebGL2 ? f.get("EXT_color_buffer_float") : f.get("EXT_color_buffer_half_float"))))
                        return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                    36053 === p.checkFramebufferStatus(36160) ? t >= 0 && t <= e.width - n && i >= 0 && i <= e.height - r && p.readPixels(t, i, n, r, R.convert(u), R.convert(h), a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.");
                }
                finally {
                    l && p.bindFramebuffer(36160, B);
                }
            }
        }
        else
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        }, this.copyFramebufferToTexture = function (e, t, i) { void 0 === i && (i = 0); var n = Math.pow(2, -i), r = Math.floor(t.image.width * n), a = Math.floor(t.image.height * n), o = R.convert(t.format); b.setTexture2D(t, 0), p.copyTexImage2D(3553, i, o, e.x, e.y, r, a, 0), v.unbindTexture(); }, this.copyTextureToTexture = function (e, t, i, n) { var r = t.image.width, a = t.image.height, o = R.convert(i.format), s = R.convert(i.type); b.setTexture2D(i, 0), t.isDataTexture ? p.texSubImage2D(3553, n || 0, e.x, e.y, r, a, o, s, t.image.data) : p.texSubImage2D(3553, n || 0, e.x, e.y, o, s, t.image), v.unbindTexture(); }, this.initTexture = function (e) { b.setTexture2D(e, 0), v.unbindTexture(); }, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
    }
    function jo(e, t) { this.name = "", this.color = new yn(e), this.density = void 0 !== t ? t : 25e-5; }
    function Wo(e, t, i) { this.name = "", this.color = new yn(e), this.near = void 0 !== t ? t : 1, this.far = void 0 !== i ? i : 1e3; }
    function Xo(e, t) { this.array = e, this.stride = t, this.count = void 0 !== e ? e.length / t : 0, this.usage = kt, this.updateRange = { offset: 0, count: -1 }, this.version = 0; }
    function Yo(e, t, i, n) { this.data = e, this.itemSize = t, this.offset = i, this.normalized = !0 === n; }
    function Qo(e) { Mn.call(this), this.type = "SpriteMaterial", this.color = new yn(16777215), this.map = null, this.alphaMap = null, this.rotation = 0, this.sizeAttenuation = !0, this.transparent = !0, this.setValues(e); }
    Object.assign(Uo.prototype, Nt.prototype), Object.assign(zo.prototype, Nt.prototype), Object.assign(jo.prototype, { isFogExp2: !0, clone: function () { return new jo(this.color, this.density); }, toJSON: function () { return { type: "FogExp2", color: this.color.getHex(), density: this.density }; } }), Object.assign(Wo.prototype, { isFog: !0, clone: function () { return new Wo(this.color, this.near, this.far); }, toJSON: function () { return { type: "Fog", color: this.color.getHex(), near: this.near, far: this.far }; } }), Object.defineProperty(Xo.prototype, "needsUpdate", { set: function (e) { !0 === e && this.version++; } }), Object.assign(Xo.prototype, {
    isInterleavedBuffer: !0, onUploadCallback: function () { }, setUsage: function (e) { return this.usage = e, this; }, copy: function (e) { return this.array = new e.array.constructor(e.array), this.count = e.count, this.stride = e.stride, this.usage = e.usage, this; }, copyAt: function (e, t, i) {
    e *= this.stride, i *= t.stride; for (var n = 0, r = this.stride; n < r; n++)
        this.array[e + n] = t.array[i + n]; return this;
    }, set: function (e, t) { return void 0 === t && (t = 0), this.array.set(e, t), this; }, clone: function () { return (new this.constructor).copy(this); }, onUpload: function (e) { return this.onUploadCallback = e, this; }
    }), Object.defineProperties(Yo.prototype, { count: { get: function () { return this.data.count; } }, array: { get: function () { return this.data.array; } } }), Object.assign(Yo.prototype, { isInterleavedBufferAttribute: !0, setX: function (e, t) { return this.data.array[e * this.data.stride + this.offset] = t, this; }, setY: function (e, t) { return this.data.array[e * this.data.stride + this.offset + 1] = t, this; }, setZ: function (e, t) { return this.data.array[e * this.data.stride + this.offset + 2] = t, this; }, setW: function (e, t) { return this.data.array[e * this.data.stride + this.offset + 3] = t, this; }, getX: function (e) { return this.data.array[e * this.data.stride + this.offset]; }, getY: function (e) { return this.data.array[e * this.data.stride + this.offset + 1]; }, getZ: function (e) { return this.data.array[e * this.data.stride + this.offset + 2]; }, getW: function (e) { return this.data.array[e * this.data.stride + this.offset + 3]; }, setXY: function (e, t, i) { return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = i, this; }, setXYZ: function (e, t, i, n) { return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = i, this.data.array[e + 2] = n, this; }, setXYZW: function (e, t, i, n, r) { return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = i, this.data.array[e + 2] = n, this.data.array[e + 3] = r, this; } }), Qo.prototype = Object.create(Mn.prototype), Qo.prototype.constructor = Qo, Qo.prototype.isSpriteMaterial = !0, Qo.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.alphaMap = e.alphaMap, this.rotation = e.rotation, this.sizeAttenuation = e.sizeAttenuation, this; };
    var qo = new Wt, $o = new Wt, Zo = new Wt, Ko = new Ut, Jo = new Ut, es = new li, ts = new Wt, is = new Wt, ns = new Wt, rs = new Ut, as = new Ut, os = new Ut;
    function ss(e) {
    if (Si.call(this), this.type = "Sprite", void 0 === No) {
        No = new Wn;
        var t = new Xo(new Float32Array([-.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1]), 5);
        No.setIndex([0, 1, 2, 0, 2, 3]), No.setAttribute("position", new Yo(t, 3, 0, !1)), No.setAttribute("uv", new Yo(t, 2, 3, !1));
    } this.geometry = No, this.material = void 0 !== e ? e : new Qo, this.center = new Ut(.5, .5);
    }
    function ls(e, t, i, n, r, a) { Ko.subVectors(e, i).addScalar(.5).multiply(n), void 0 !== r ? (Jo.x = a * Ko.x - r * Ko.y, Jo.y = r * Ko.x + a * Ko.y) : Jo.copy(Ko), e.copy(t), e.x += Jo.x, e.y += Jo.y, e.applyMatrix4(es); }
    ss.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: ss, isSprite: !0, raycast: function (e, t) {
    null === e.camera && console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'), $o.setFromMatrixScale(this.matrixWorld), es.copy(e.camera.matrixWorld), this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse, this.matrixWorld), Zo.setFromMatrixPosition(this.modelViewMatrix), e.camera.isPerspectiveCamera && !1 === this.material.sizeAttenuation && $o.multiplyScalar(-Zo.z); var i, n, r = this.material.rotation; 0 !== r && (n = Math.cos(r), i = Math.sin(r)); var a = this.center; ls(ts.set(-.5, -.5, 0), Zo, a, $o, i, n), ls(is.set(.5, -.5, 0), Zo, a, $o, i, n), ls(ns.set(.5, .5, 0), Zo, a, $o, i, n), rs.set(0, 0), as.set(1, 0), os.set(1, 1); var o = e.ray.intersectTriangle(ts, is, ns, !1, qo); if (null !== o || (ls(is.set(-.5, .5, 0), Zo, a, $o, i, n), as.set(0, 1), null !== (o = e.ray.intersectTriangle(ts, ns, is, !1, qo)))) {
        var s = e.ray.origin.distanceTo(qo);
        s < e.near || s > e.far || t.push({ distance: s, point: qo.clone(), uv: fn.getUV(qo, ts, is, ns, rs, as, os, new Ut), face: null, object: this });
    }
    }, clone: function () { return new this.constructor(this.material).copy(this); }, copy: function (e) { return Si.prototype.copy.call(this, e), void 0 !== e.center && this.center.copy(e.center), this; }
    });
    var cs = new Wt, us = new Wt;
    function hs() { Si.call(this), this.type = "LOD", Object.defineProperties(this, { levels: { enumerable: !0, value: [] } }), this.autoUpdate = !0; }
    function ds(e, t) { e && e.isGeometry && console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."), cr.call(this, e, t), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new li, this.bindMatrixInverse = new li; }
    hs.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: hs, isLOD: !0, copy: function (e) {
    Si.prototype.copy.call(this, e, !1); for (var t = e.levels, i = 0, n = t.length; i < n; i++) {
        var r = t[i];
        this.addLevel(r.object.clone(), r.distance);
    } return this.autoUpdate = e.autoUpdate, this;
    }, addLevel: function (e, t) {
    void 0 === t && (t = 0), t = Math.abs(t); for (var i = this.levels, n = 0; n < i.length && !(t < i[n].distance); n++)
        ; return i.splice(n, 0, { distance: t, object: e }), this.add(e), this;
    }, getObjectForDistance: function (e) {
    var t = this.levels; if (t.length > 0) {
        for (var i = 1, n = t.length; i < n && !(e < t[i].distance); i++)
            ;
        return t[i - 1].object;
    } return null;
    }, raycast: function (e, t) {
    if (this.levels.length > 0) {
        cs.setFromMatrixPosition(this.matrixWorld);
        var i = e.ray.origin.distanceTo(cs);
        this.getObjectForDistance(i).raycast(e, t);
    }
    }, update: function (e) {
    var t = this.levels; if (t.length > 1) {
        cs.setFromMatrixPosition(e.matrixWorld), us.setFromMatrixPosition(this.matrixWorld);
        var i = cs.distanceTo(us);
        t[0].object.visible = !0;
        for (var n = 1, r = t.length; n < r && i >= t[n].distance; n++)
            t[n - 1].object.visible = !1, t[n].object.visible = !0;
        for (; n < r; n++)
            t[n].object.visible = !1;
    }
    }, toJSON: function (e) {
    var t = Si.prototype.toJSON.call(this, e); !1 === this.autoUpdate && (t.object.autoUpdate = !1), t.object.levels = []; for (var i = this.levels, n = 0, r = i.length; n < r; n++) {
        var a = i[n];
        t.object.levels.push({ object: a.object.uuid, distance: a.distance });
    } return t;
    }
    }), ds.prototype = Object.assign(Object.create(cr.prototype), {
    constructor: ds, isSkinnedMesh: !0, bind: function (e, t) { this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.getInverse(t); }, pose: function () { this.skeleton.pose(); }, normalizeSkinWeights: function () {
    for (var e = new Kt, t = this.geometry.attributes.skinWeight, i = 0, n = t.count; i < n; i++) {
        e.x = t.getX(i), e.y = t.getY(i), e.z = t.getZ(i), e.w = t.getW(i);
        var r = 1 / e.manhattanLength();
        r !== 1 / 0 ? e.multiplyScalar(r) : e.set(1, 0, 0, 0), t.setXYZW(i, e.x, e.y, e.z, e.w);
    }
    }, updateMatrixWorld: function (e) { cr.prototype.updateMatrixWorld.call(this, e), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode); }, clone: function () { return new this.constructor(this.geometry, this.material).copy(this); }
    });
    var ps = new li, fs = new li;
    function ms(e, t) {
    if (e = e || [], this.bones = e.slice(0), this.boneMatrices = new Float32Array(16 * this.bones.length), this.frame = -1, void 0 === t)
        this.calculateInverses();
    else if (this.bones.length === t.length)
        this.boneInverses = t.slice(0);
    else {
        console.warn("THREE.Skeleton boneInverses is the wrong length."), this.boneInverses = [];
        for (var i = 0, n = this.bones.length; i < n; i++)
            this.boneInverses.push(new li);
    }
    }
    function vs() { Si.call(this), this.type = "Bone"; }
    Object.assign(ms.prototype, {
    calculateInverses: function () {
    this.boneInverses = []; for (var e = 0, t = this.bones.length; e < t; e++) {
        var i = new li;
        this.bones[e] && i.getInverse(this.bones[e].matrixWorld), this.boneInverses.push(i);
    }
    }, pose: function () {
    var e, t, i; for (t = 0, i = this.bones.length; t < i; t++)
        (e = this.bones[t]) && e.matrixWorld.getInverse(this.boneInverses[t]); for (t = 0, i = this.bones.length; t < i; t++)
            (e = this.bones[t]) && (e.parent && e.parent.isBone ? (e.matrix.getInverse(e.parent.matrixWorld), e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld), e.matrix.decompose(e.position, e.quaternion, e.scale));
    }, update: function () {
    for (var e = this.bones, t = this.boneInverses, i = this.boneMatrices, n = this.boneTexture, r = 0, a = e.length; r < a; r++) {
        var o = e[r] ? e[r].matrixWorld : fs;
        ps.multiplyMatrices(o, t[r]), ps.toArray(i, 16 * r);
    } void 0 !== n && (n.needsUpdate = !0);
    }, clone: function () { return new ms(this.bones, this.boneInverses); }, getBoneByName: function (e) {
    for (var t = 0, i = this.bones.length; t < i; t++) {
        var n = this.bones[t];
        if (n.name === e)
            return n;
    }
    }
    }), vs.prototype = Object.assign(Object.create(Si.prototype), { constructor: vs, isBone: !0 });
    var gs = new li, ys = new li, bs = [], xs = new cr;
    function _s(e, t, i) { cr.call(this, e, t), this.instanceMatrix = new Sn(new Float32Array(16 * i), 16), this.count = i; }
    function ws(e) { Mn.call(this), this.type = "LineBasicMaterial", this.color = new yn(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.setValues(e); }
    _s.prototype = Object.assign(Object.create(cr.prototype), {
    constructor: _s, isInstancedMesh: !0, getMatrixAt: function (e, t) { t.fromArray(this.instanceMatrix.array, 16 * e); }, raycast: function (e, t) {
    var i = this.matrixWorld, n = this.count; if (xs.geometry = this.geometry, xs.material = this.material, void 0 !== xs.material)
        for (var r = 0; r < n; r++)
            this.getMatrixAt(r, gs), ys.multiplyMatrices(i, gs), xs.matrixWorld = ys, xs.raycast(e, bs), bs.length > 0 && (bs[0].instanceId = r, bs[0].object = this, t.push(bs[0]), bs.length = 0);
    }, setMatrixAt: function (e, t) { t.toArray(this.instanceMatrix.array, 16 * e); }, updateMorphTargets: function () { }
    }), ws.prototype = Object.create(Mn.prototype), ws.prototype.constructor = ws, ws.prototype.isLineBasicMaterial = !0, ws.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this.linewidth = e.linewidth, this.linecap = e.linecap, this.linejoin = e.linejoin, this; };
    var Ts = new Wt, Ms = new Wt, As = new li, Ss = new Ki, Es = new ji;
    function Ps(e, t, i) { 1 === i && console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."), Si.call(this), this.type = "Line", this.geometry = void 0 !== e ? e : new Wn, this.material = void 0 !== t ? t : new ws({ color: 16777215 * Math.random() }); }
    Ps.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: Ps, isLine: !0, computeLineDistances: function () {
    var e = this.geometry; if (e.isBufferGeometry)
        if (null === e.index) {
            for (var t = e.attributes.position, i = [0], n = 1, r = t.count; n < r; n++)
                Ts.fromBufferAttribute(t, n - 1), Ms.fromBufferAttribute(t, n), i[n] = i[n - 1], i[n] += Ts.distanceTo(Ms);
            e.setAttribute("lineDistance", new Dn(i, 1));
        }
        else
            console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    else if (e.isGeometry) {
        var a = e.vertices;
        (i = e.lineDistances)[0] = 0;
        for (n = 1, r = a.length; n < r; n++)
            i[n] = i[n - 1], i[n] += a[n - 1].distanceTo(a[n]);
    } return this;
    }, raycast: function (e, t) {
    var i = e.linePrecision, n = this.geometry, r = this.matrixWorld; if (null === n.boundingSphere && n.computeBoundingSphere(), Es.copy(n.boundingSphere), Es.applyMatrix4(r), Es.radius += i, !1 !== e.ray.intersectsSphere(Es)) {
        As.getInverse(r), Ss.copy(e.ray).applyMatrix4(As);
        var a = i / ((this.scale.x + this.scale.y + this.scale.z) / 3), o = a * a, s = new Wt, l = new Wt, c = new Wt, u = new Wt, h = this && this.isLineSegments ? 2 : 1;
        if (n.isBufferGeometry) {
            var d = n.index, p = n.attributes.position.array;
            if (null !== d)
                for (var f = d.array, m = 0, v = f.length - 1; m < v; m += h) {
                    var g = f[m], y = f[m + 1];
                    if (s.fromArray(p, 3 * g), l.fromArray(p, 3 * y), !(Ss.distanceSqToSegment(s, l, u, c) > o))
                        u.applyMatrix4(this.matrixWorld), (_ = e.ray.origin.distanceTo(u)) < e.near || _ > e.far || t.push({ distance: _, point: c.clone().applyMatrix4(this.matrixWorld), index: m, face: null, faceIndex: null, object: this });
                }
            else
                for (m = 0, v = p.length / 3 - 1; m < v; m += h) {
                    if (s.fromArray(p, 3 * m), l.fromArray(p, 3 * m + 3), !(Ss.distanceSqToSegment(s, l, u, c) > o))
                        u.applyMatrix4(this.matrixWorld), (_ = e.ray.origin.distanceTo(u)) < e.near || _ > e.far || t.push({ distance: _, point: c.clone().applyMatrix4(this.matrixWorld), index: m, face: null, faceIndex: null, object: this });
                }
        }
        else if (n.isGeometry) {
            var b = n.vertices, x = b.length;
            for (m = 0; m < x - 1; m += h) {
                var _;
                if (!(Ss.distanceSqToSegment(b[m], b[m + 1], u, c) > o))
                    u.applyMatrix4(this.matrixWorld), (_ = e.ray.origin.distanceTo(u)) < e.near || _ > e.far || t.push({ distance: _, point: c.clone().applyMatrix4(this.matrixWorld), index: m, face: null, faceIndex: null, object: this });
            }
        }
    }
    }, clone: function () { return new this.constructor(this.geometry, this.material).copy(this); }
    });
    var Cs = new Wt, Ls = new Wt;
    function Rs(e, t) { Ps.call(this, e, t), this.type = "LineSegments"; }
    function Is(e, t) { Ps.call(this, e, t), this.type = "LineLoop"; }
    function Os(e) { Mn.call(this), this.type = "PointsMaterial", this.color = new yn(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = !0, this.morphTargets = !1, this.setValues(e); }
    Rs.prototype = Object.assign(Object.create(Ps.prototype), {
    constructor: Rs, isLineSegments: !0, computeLineDistances: function () {
    var e = this.geometry; if (e.isBufferGeometry)
        if (null === e.index) {
            for (var t = e.attributes.position, i = [], n = 0, r = t.count; n < r; n += 2)
                Cs.fromBufferAttribute(t, n), Ls.fromBufferAttribute(t, n + 1), i[n] = 0 === n ? 0 : i[n - 1], i[n + 1] = i[n] + Cs.distanceTo(Ls);
            e.setAttribute("lineDistance", new Dn(i, 1));
        }
        else
            console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    else if (e.isGeometry) {
        var a = e.vertices;
        for (i = e.lineDistances, n = 0, r = a.length; n < r; n += 2)
            Cs.copy(a[n]), Ls.copy(a[n + 1]), i[n] = 0 === n ? 0 : i[n - 1], i[n + 1] = i[n] + Cs.distanceTo(Ls);
    } return this;
    }
    }), Is.prototype = Object.assign(Object.create(Ps.prototype), { constructor: Is, isLineLoop: !0 }), Os.prototype = Object.create(Mn.prototype), Os.prototype.constructor = Os, Os.prototype.isPointsMaterial = !0, Os.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.alphaMap = e.alphaMap, this.size = e.size, this.sizeAttenuation = e.sizeAttenuation, this.morphTargets = e.morphTargets, this; };
    var Ds = new li, Fs = new Ki, ks = new ji, Ns = new Wt;
    function Bs(e, t) { Si.call(this), this.type = "Points", this.geometry = void 0 !== e ? e : new Wn, this.material = void 0 !== t ? t : new Os({ color: 16777215 * Math.random() }), this.updateMorphTargets(); }
    function Gs(e, t, i, n, r, a, o) {
    var s = Fs.distanceSqToPoint(e); if (s < i) {
        var l = new Wt;
        Fs.closestPointToPoint(e, l), l.applyMatrix4(n);
        var c = r.ray.origin.distanceTo(l);
        if (c < r.near || c > r.far)
            return;
        a.push({ distance: c, distanceToRay: Math.sqrt(s), point: l, index: t, face: null, object: o });
    }
    }
    function Hs(e, t, i, n, r, a, o, s, l) { Zt.call(this, e, t, i, n, r, a, o, s, l), this.format = void 0 !== o ? o : Ue, this.minFilter = void 0 !== a ? a : Ae, this.magFilter = void 0 !== r ? r : Ae, this.generateMipmaps = !1; }
    function Us(e, t, i, n, r, a, o, s, l, c, u, h) { Zt.call(this, null, a, o, s, l, c, n, r, u, h), this.image = { width: t, height: i }, this.mipmaps = e, this.flipY = !1, this.generateMipmaps = !1; }
    function zs(e, t, i, n, r, a, o, s, l) { Zt.call(this, e, t, i, n, r, a, o, s, l), this.needsUpdate = !0; }
    function Vs(e, t, i, n, r, a, o, s, l, c) {
    if ((c = void 0 !== c ? c : We) !== We && c !== Xe)
        throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"); void 0 === i && c === We && (i = Re), void 0 === i && c === Xe && (i = Ge), Zt.call(this, null, n, r, a, o, s, c, i, l), this.image = { width: e, height: t }, this.magFilter = void 0 !== o ? o : we, this.minFilter = void 0 !== s ? s : we, this.flipY = !1, this.generateMipmaps = !1;
    }
    function js(e) {
    Wn.call(this), this.type = "WireframeGeometry"; var t, i, n, r, a, o, s, l, c, u, h = [], d = [0, 0], p = {}, f = ["a", "b", "c"]; if (e && e.isGeometry) {
        var m = e.faces;
        for (t = 0, n = m.length; t < n; t++) {
            var v = m[t];
            for (i = 0; i < 3; i++)
                s = v[f[i]], l = v[f[(i + 1) % 3]], d[0] = Math.min(s, l), d[1] = Math.max(s, l), void 0 === p[c = d[0] + "," + d[1]] && (p[c] = { index1: d[0], index2: d[1] });
        }
        for (c in p)
            o = p[c], u = e.vertices[o.index1], h.push(u.x, u.y, u.z), u = e.vertices[o.index2], h.push(u.x, u.y, u.z);
    }
    else if (e && e.isBufferGeometry) {
        var g, y, b, x, _, w, T;
        if (u = new Wt, null !== e.index) {
            for (g = e.attributes.position, y = e.index, 0 === (b = e.groups).length && (b = [{ start: 0, count: y.count, materialIndex: 0 }]), r = 0, a = b.length; r < a; ++r)
                for (t = _ = (x = b[r]).start, n = _ + x.count; t < n; t += 3)
                    for (i = 0; i < 3; i++)
                        s = y.getX(t + i), l = y.getX(t + (i + 1) % 3), d[0] = Math.min(s, l), d[1] = Math.max(s, l), void 0 === p[c = d[0] + "," + d[1]] && (p[c] = { index1: d[0], index2: d[1] });
            for (c in p)
                o = p[c], u.fromBufferAttribute(g, o.index1), h.push(u.x, u.y, u.z), u.fromBufferAttribute(g, o.index2), h.push(u.x, u.y, u.z);
        }
        else
            for (t = 0, n = (g = e.attributes.position).count / 3; t < n; t++)
                for (i = 0; i < 3; i++)
                    w = 3 * t + i, u.fromBufferAttribute(g, w), h.push(u.x, u.y, u.z), T = 3 * t + (i + 1) % 3, u.fromBufferAttribute(g, T), h.push(u.x, u.y, u.z);
    } this.setAttribute("position", new Dn(h, 3));
    }
    function Ws(e, t, i) { vr.call(this), this.type = "ParametricGeometry", this.parameters = { func: e, slices: t, stacks: i }, this.fromBufferGeometry(new Xs(e, t, i)), this.mergeVertices(); }
    function Xs(e, t, i) {
    Wn.call(this), this.type = "ParametricBufferGeometry", this.parameters = { func: e, slices: t, stacks: i }; var n, r, a = [], o = [], s = [], l = [], c = new Wt, u = new Wt, h = new Wt, d = new Wt, p = new Wt; e.length < 3 && console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter."); var f = t + 1; for (n = 0; n <= i; n++) {
        var m = n / i;
        for (r = 0; r <= t; r++) {
            var v = r / t;
            e(v, m, u), o.push(u.x, u.y, u.z), v - 1e-5 >= 0 ? (e(v - 1e-5, m, h), d.subVectors(u, h)) : (e(v + 1e-5, m, h), d.subVectors(h, u)), m - 1e-5 >= 0 ? (e(v, m - 1e-5, h), p.subVectors(u, h)) : (e(v, m + 1e-5, h), p.subVectors(h, u)), c.crossVectors(d, p).normalize(), s.push(c.x, c.y, c.z), l.push(v, m);
        }
    } for (n = 0; n < i; n++)
            for (r = 0; r < t; r++) {
                var g = n * f + r, y = n * f + r + 1, b = (n + 1) * f + r + 1, x = (n + 1) * f + r;
                a.push(g, y, x), a.push(y, b, x);
            } this.setIndex(a), this.setAttribute("position", new Dn(o, 3)), this.setAttribute("normal", new Dn(s, 3)), this.setAttribute("uv", new Dn(l, 2));
    }
    function Ys(e, t, i, n) { vr.call(this), this.type = "PolyhedronGeometry", this.parameters = { vertices: e, indices: t, radius: i, detail: n }, this.fromBufferGeometry(new Qs(e, t, i, n)), this.mergeVertices(); }
    function Qs(e, t, i, n) {
    Wn.call(this), this.type = "PolyhedronBufferGeometry", this.parameters = { vertices: e, indices: t, radius: i, detail: n }, i = i || 1; var r = [], a = []; function o(e, t, i, n) {
    var r, a, o = Math.pow(2, n), l = []; for (r = 0; r <= o; r++) {
        l[r] = [];
        var c = e.clone().lerp(i, r / o), u = t.clone().lerp(i, r / o), h = o - r;
        for (a = 0; a <= h; a++)
            l[r][a] = 0 === a && r === o ? c : c.clone().lerp(u, a / h);
    } for (r = 0; r < o; r++)
            for (a = 0; a < 2 * (o - r) - 1; a++) {
                var d = Math.floor(a / 2);
                a % 2 == 0 ? (s(l[r][d + 1]), s(l[r + 1][d]), s(l[r][d])) : (s(l[r][d + 1]), s(l[r + 1][d + 1]), s(l[r + 1][d]));
            }
    } function s(e) { r.push(e.x, e.y, e.z); } function l(t, i) { var n = 3 * t; i.x = e[n + 0], i.y = e[n + 1], i.z = e[n + 2]; } function c(e, t, i, n) { n < 0 && 1 === e.x && (a[t] = e.x - 1), 0 === i.x && 0 === i.z && (a[t] = n / 2 / Math.PI + .5); } function u(e) { return Math.atan2(e.z, -e.x); } !function (e) {
    for (var i = new Wt, n = new Wt, r = new Wt, a = 0; a < t.length; a += 3)
        l(t[a + 0], i), l(t[a + 1], n), l(t[a + 2], r), o(i, n, r, e);
    } (n = n || 0), function (e) {
    for (var t = new Wt, i = 0; i < r.length; i += 3)
        t.x = r[i + 0], t.y = r[i + 1], t.z = r[i + 2], t.normalize().multiplyScalar(e), r[i + 0] = t.x, r[i + 1] = t.y, r[i + 2] = t.z;
    } (i), function () {
    for (var e = new Wt, t = 0; t < r.length; t += 3) {
        e.x = r[t + 0], e.y = r[t + 1], e.z = r[t + 2];
        var i = u(e) / 2 / Math.PI + .5, n = (o = e, Math.atan2(-o.y, Math.sqrt(o.x * o.x + o.z * o.z)) / Math.PI + .5);
        a.push(i, 1 - n);
    } var o; (function () {
    for (var e = new Wt, t = new Wt, i = new Wt, n = new Wt, o = new Ut, s = new Ut, l = new Ut, h = 0, d = 0; h < r.length; h += 9, d += 6) {
        e.set(r[h + 0], r[h + 1], r[h + 2]), t.set(r[h + 3], r[h + 4], r[h + 5]), i.set(r[h + 6], r[h + 7], r[h + 8]), o.set(a[d + 0], a[d + 1]), s.set(a[d + 2], a[d + 3]), l.set(a[d + 4], a[d + 5]), n.copy(e).add(t).add(i).divideScalar(3);
        var p = u(n);
        c(o, d + 0, e, p), c(s, d + 2, t, p), c(l, d + 4, i, p);
    }
    })(), function () {
    for (var e = 0; e < a.length; e += 6) {
        var t = a[e + 0], i = a[e + 2], n = a[e + 4], r = Math.max(t, i, n), o = Math.min(t, i, n);
        r > .9 && o < .1 && (t < .2 && (a[e + 0] += 1), i < .2 && (a[e + 2] += 1), n < .2 && (a[e + 4] += 1));
    }
    } ();
    } (), this.setAttribute("position", new Dn(r, 3)), this.setAttribute("normal", new Dn(r.slice(), 3)), this.setAttribute("uv", new Dn(a, 2)), 0 === n ? this.computeVertexNormals() : this.normalizeNormals();
    }
    function qs(e, t) { vr.call(this), this.type = "TetrahedronGeometry", this.parameters = { radius: e, detail: t }, this.fromBufferGeometry(new $s(e, t)), this.mergeVertices(); }
    function $s(e, t) { Qs.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], e, t), this.type = "TetrahedronBufferGeometry", this.parameters = { radius: e, detail: t }; }
    function Zs(e, t) { vr.call(this), this.type = "OctahedronGeometry", this.parameters = { radius: e, detail: t }, this.fromBufferGeometry(new Ks(e, t)), this.mergeVertices(); }
    function Ks(e, t) { Qs.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], e, t), this.type = "OctahedronBufferGeometry", this.parameters = { radius: e, detail: t }; }
    function Js(e, t) { vr.call(this), this.type = "IcosahedronGeometry", this.parameters = { radius: e, detail: t }, this.fromBufferGeometry(new el(e, t)), this.mergeVertices(); }
    function el(e, t) { var i = (1 + Math.sqrt(5)) / 2, n = [-1, i, 0, 1, i, 0, -1, -i, 0, 1, -i, 0, 0, -1, i, 0, 1, i, 0, -1, -i, 0, 1, -i, i, 0, -1, i, 0, 1, -i, 0, -1, -i, 0, 1]; Qs.call(this, n, [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], e, t), this.type = "IcosahedronBufferGeometry", this.parameters = { radius: e, detail: t }; }
    function tl(e, t) { vr.call(this), this.type = "DodecahedronGeometry", this.parameters = { radius: e, detail: t }, this.fromBufferGeometry(new il(e, t)), this.mergeVertices(); }
    function il(e, t) { var i = (1 + Math.sqrt(5)) / 2, n = 1 / i, r = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -n, -i, 0, -n, i, 0, n, -i, 0, n, i, -n, -i, 0, -n, i, 0, n, -i, 0, n, i, 0, -i, 0, -n, i, 0, -n, -i, 0, n, i, 0, n]; Qs.call(this, r, [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], e, t), this.type = "DodecahedronBufferGeometry", this.parameters = { radius: e, detail: t }; }
    function nl(e, t, i, n, r, a) { vr.call(this), this.type = "TubeGeometry", this.parameters = { path: e, tubularSegments: t, radius: i, radialSegments: n, closed: r }, void 0 !== a && console.warn("THREE.TubeGeometry: taper has been removed."); var o = new rl(e, t, i, n, r); this.tangents = o.tangents, this.normals = o.normals, this.binormals = o.binormals, this.fromBufferGeometry(o), this.mergeVertices(); }
    function rl(e, t, i, n, r) {
    Wn.call(this), this.type = "TubeBufferGeometry", this.parameters = { path: e, tubularSegments: t, radius: i, radialSegments: n, closed: r }, t = t || 64, i = i || 1, n = n || 8, r = r || !1; var a = e.computeFrenetFrames(t, r); this.tangents = a.tangents, this.normals = a.normals, this.binormals = a.binormals; var o, s, l = new Wt, c = new Wt, u = new Ut, h = new Wt, d = [], p = [], f = [], m = []; function v(r) {
    h = e.getPointAt(r / t, h); var o = a.normals[r], u = a.binormals[r]; for (s = 0; s <= n; s++) {
        var f = s / n * Math.PI * 2, m = Math.sin(f), v = -Math.cos(f);
        c.x = v * o.x + m * u.x, c.y = v * o.y + m * u.y, c.z = v * o.z + m * u.z, c.normalize(), p.push(c.x, c.y, c.z), l.x = h.x + i * c.x, l.y = h.y + i * c.y, l.z = h.z + i * c.z, d.push(l.x, l.y, l.z);
    }
    } !function () {
    for (o = 0; o < t; o++)
        v(o); v(!1 === r ? t : 0), function () {
        for (o = 0; o <= t; o++)
            for (s = 0; s <= n; s++)
                u.x = o / t, u.y = s / n, f.push(u.x, u.y);
        } (), function () {
        for (s = 1; s <= t; s++)
            for (o = 1; o <= n; o++) {
                var e = (n + 1) * (s - 1) + (o - 1), i = (n + 1) * s + (o - 1), r = (n + 1) * s + o, a = (n + 1) * (s - 1) + o;
                m.push(e, i, a), m.push(i, r, a);
            }
        } ();
    } (), this.setIndex(m), this.setAttribute("position", new Dn(d, 3)), this.setAttribute("normal", new Dn(p, 3)), this.setAttribute("uv", new Dn(f, 2));
    }
    function al(e, t, i, n, r, a, o) { vr.call(this), this.type = "TorusKnotGeometry", this.parameters = { radius: e, tube: t, tubularSegments: i, radialSegments: n, p: r, q: a }, void 0 !== o && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."), this.fromBufferGeometry(new ol(e, t, i, n, r, a)), this.mergeVertices(); }
    function ol(e, t, i, n, r, a) {
    Wn.call(this), this.type = "TorusKnotBufferGeometry", this.parameters = { radius: e, tube: t, tubularSegments: i, radialSegments: n, p: r, q: a }, e = e || 1, t = t || .4, i = Math.floor(i) || 64, n = Math.floor(n) || 8, r = r || 2, a = a || 3; var o, s, l = [], c = [], u = [], h = [], d = new Wt, p = new Wt, f = new Wt, m = new Wt, v = new Wt, g = new Wt, y = new Wt; for (o = 0; o <= i; ++o) {
        var b = o / i * r * Math.PI * 2;
        for (E(b, r, a, e, f), E(b + .01, r, a, e, m), g.subVectors(m, f), y.addVectors(m, f), v.crossVectors(g, y), y.crossVectors(v, g), v.normalize(), y.normalize(), s = 0; s <= n; ++s) {
            var x = s / n * Math.PI * 2, _ = -t * Math.cos(x), w = t * Math.sin(x);
            d.x = f.x + (_ * y.x + w * v.x), d.y = f.y + (_ * y.y + w * v.y), d.z = f.z + (_ * y.z + w * v.z), c.push(d.x, d.y, d.z), p.subVectors(d, f).normalize(), u.push(p.x, p.y, p.z), h.push(o / i), h.push(s / n);
        }
    } for (s = 1; s <= i; s++)
            for (o = 1; o <= n; o++) {
                var T = (n + 1) * (s - 1) + (o - 1), M = (n + 1) * s + (o - 1), A = (n + 1) * s + o, S = (n + 1) * (s - 1) + o;
                l.push(T, M, S), l.push(M, A, S);
            } function E(e, t, i, n, r) { var a = Math.cos(e), o = Math.sin(e), s = i / t * e, l = Math.cos(s); r.x = n * (2 + l) * .5 * a, r.y = n * (2 + l) * o * .5, r.z = n * Math.sin(s) * .5; } this.setIndex(l), this.setAttribute("position", new Dn(c, 3)), this.setAttribute("normal", new Dn(u, 3)), this.setAttribute("uv", new Dn(h, 2));
    }
    function sl(e, t, i, n, r) { vr.call(this), this.type = "TorusGeometry", this.parameters = { radius: e, tube: t, radialSegments: i, tubularSegments: n, arc: r }, this.fromBufferGeometry(new ll(e, t, i, n, r)), this.mergeVertices(); }
    function ll(e, t, i, n, r) {
    Wn.call(this), this.type = "TorusBufferGeometry", this.parameters = { radius: e, tube: t, radialSegments: i, tubularSegments: n, arc: r }, e = e || 1, t = t || .4, i = Math.floor(i) || 8, n = Math.floor(n) || 6, r = r || 2 * Math.PI; var a, o, s = [], l = [], c = [], u = [], h = new Wt, d = new Wt, p = new Wt; for (a = 0; a <= i; a++)
        for (o = 0; o <= n; o++) {
            var f = o / n * r, m = a / i * Math.PI * 2;
            d.x = (e + t * Math.cos(m)) * Math.cos(f), d.y = (e + t * Math.cos(m)) * Math.sin(f), d.z = t * Math.sin(m), l.push(d.x, d.y, d.z), h.x = e * Math.cos(f), h.y = e * Math.sin(f), p.subVectors(d, h).normalize(), c.push(p.x, p.y, p.z), u.push(o / n), u.push(a / i);
        } for (a = 1; a <= i; a++)
            for (o = 1; o <= n; o++) {
                var v = (n + 1) * a + o - 1, g = (n + 1) * (a - 1) + o - 1, y = (n + 1) * (a - 1) + o, b = (n + 1) * a + o;
                s.push(v, g, b), s.push(g, y, b);
            } this.setIndex(s), this.setAttribute("position", new Dn(l, 3)), this.setAttribute("normal", new Dn(c, 3)), this.setAttribute("uv", new Dn(u, 2));
    }
    Bs.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: Bs, isPoints: !0, raycast: function (e, t) {
    var i = this.geometry, n = this.matrixWorld, r = e.params.Points.threshold; if (null === i.boundingSphere && i.computeBoundingSphere(), ks.copy(i.boundingSphere), ks.applyMatrix4(n), ks.radius += r, !1 !== e.ray.intersectsSphere(ks)) {
        Ds.getInverse(n), Fs.copy(e.ray).applyMatrix4(Ds);
        var a = r / ((this.scale.x + this.scale.y + this.scale.z) / 3), o = a * a;
        if (i.isBufferGeometry) {
            var s = i.index, l = i.attributes.position.array;
            if (null !== s)
                for (var c = s.array, u = 0, h = c.length; u < h; u++) {
                    var d = c[u];
                    Ns.fromArray(l, 3 * d), Gs(Ns, d, o, n, e, t, this);
                }
            else {
                u = 0;
                for (var p = l.length / 3; u < p; u++)
                    Ns.fromArray(l, 3 * u), Gs(Ns, u, o, n, e, t, this);
            }
        }
        else {
            var f = i.vertices;
            for (u = 0, p = f.length; u < p; u++)
                Gs(f[u], u, o, n, e, t, this);
        }
    }
    }, updateMorphTargets: function () {
    var e, t, i, n = this.geometry; if (n.isBufferGeometry) {
        var r = n.morphAttributes, a = Object.keys(r);
        if (a.length > 0) {
            var o = r[a[0]];
            if (void 0 !== o)
                for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, e = 0, t = o.length; e < t; e++)
                    i = o[e].name || String(e), this.morphTargetInfluences.push(0), this.morphTargetDictionary[i] = e;
        }
    }
    else {
        var s = n.morphTargets;
        void 0 !== s && s.length > 0 && console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.");
    }
    }, clone: function () { return new this.constructor(this.geometry, this.material).copy(this); }
    }), Hs.prototype = Object.assign(Object.create(Zt.prototype), { constructor: Hs, isVideoTexture: !0, update: function () { var e = this.image; e.readyState >= e.HAVE_CURRENT_DATA && (this.needsUpdate = !0); } }), Us.prototype = Object.create(Zt.prototype), Us.prototype.constructor = Us, Us.prototype.isCompressedTexture = !0, zs.prototype = Object.create(Zt.prototype), zs.prototype.constructor = zs, zs.prototype.isCanvasTexture = !0, Vs.prototype = Object.create(Zt.prototype), Vs.prototype.constructor = Vs, Vs.prototype.isDepthTexture = !0, js.prototype = Object.create(Wn.prototype), js.prototype.constructor = js, Ws.prototype = Object.create(vr.prototype), Ws.prototype.constructor = Ws, Xs.prototype = Object.create(Wn.prototype), Xs.prototype.constructor = Xs, Ys.prototype = Object.create(vr.prototype), Ys.prototype.constructor = Ys, Qs.prototype = Object.create(Wn.prototype), Qs.prototype.constructor = Qs, qs.prototype = Object.create(vr.prototype), qs.prototype.constructor = qs, $s.prototype = Object.create(Qs.prototype), $s.prototype.constructor = $s, Zs.prototype = Object.create(vr.prototype), Zs.prototype.constructor = Zs, Ks.prototype = Object.create(Qs.prototype), Ks.prototype.constructor = Ks, Js.prototype = Object.create(vr.prototype), Js.prototype.constructor = Js, el.prototype = Object.create(Qs.prototype), el.prototype.constructor = el, tl.prototype = Object.create(vr.prototype), tl.prototype.constructor = tl, il.prototype = Object.create(Qs.prototype), il.prototype.constructor = il, nl.prototype = Object.create(vr.prototype), nl.prototype.constructor = nl, rl.prototype = Object.create(Wn.prototype), rl.prototype.constructor = rl, rl.prototype.toJSON = function () { var e = Wn.prototype.toJSON.call(this); return e.path = this.parameters.path.toJSON(), e; }, al.prototype = Object.create(vr.prototype), al.prototype.constructor = al, ol.prototype = Object.create(Wn.prototype), ol.prototype.constructor = ol, sl.prototype = Object.create(vr.prototype), sl.prototype.constructor = sl, ll.prototype = Object.create(Wn.prototype), ll.prototype.constructor = ll;
    var cl = function (e, t, i) {
    i = i || 2; var n, r, a, o, s, l, c, u = t && t.length, h = u ? t[0] * i : e.length, d = ul(e, 0, h, i, !0), p = []; if (!d || d.next === d.prev)
        return p; if (u && (d = function (e, t, i, n) {
        var r, a, o, s, l, c = []; for (r = 0, a = t.length; r < a; r++)
            o = t[r] * n, s = r < a - 1 ? t[r + 1] * n : e.length, (l = ul(e, o, s, n, !1)) === l.next && (l.steiner = !0), c.push(xl(l)); for (c.sort(gl), r = 0; r < c.length; r++)
                yl(c[r], i), i = hl(i, i.next); return i;
        } (e, t, d, i)), e.length > 80 * i) {
            n = a = e[0], r = o = e[1];
            for (var f = i; f < h; f += i)
                (s = e[f]) < n && (n = s), (l = e[f + 1]) < r && (r = l), s > a && (a = s), l > o && (o = l);
            c = 0 !== (c = Math.max(a - n, o - r)) ? 1 / c : 0;
        } return dl(d, p, i, n, r, c), p;
    };
    function ul(e, t, i, n, r) {
    var a, o; if (r === function (e, t, i, n) {
    for (var r = 0, a = t, o = i - n; a < i; a += n)
        r += (e[o] - e[a]) * (e[a + 1] + e[o + 1]), o = a; return r;
    } (e, t, i, n) > 0)
        for (a = t; a < i; a += n)
            o = Pl(a, e[a], e[a + 1], o);
    else
        for (a = i - n; a >= t; a -= n)
            o = Pl(a, e[a], e[a + 1], o); return o && Ml(o, o.next) && (Cl(o), o = o.next), o;
    }
    function hl(e, t) {
    if (!e)
        return e; t || (t = e); var i, n = e; do {
            if (i = !1, n.steiner || !Ml(n, n.next) && 0 !== Tl(n.prev, n, n.next))
                n = n.next;
            else {
                if (Cl(n), (n = t = n.prev) === n.next)
                    break;
                i = !0;
            }
        } while (i || n !== t); return t;
    }
    function dl(e, t, i, n, r, a, o) {
    if (e) {
        !o && a && function (e, t, i, n) {
        var r = e; do {
            null === r.z && (r.z = bl(r.x, r.y, t, i, n)), r.prevZ = r.prev, r.nextZ = r.next, r = r.next;
        } while (r !== e); r.prevZ.nextZ = null, r.prevZ = null, function (e) {
        var t, i, n, r, a, o, s, l, c = 1; do {
            for (i = e, e = null, a = null, o = 0; i;) {
                for (o++ , n = i, s = 0, t = 0; t < c && (s++ , n = n.nextZ); t++)
                    ;
                for (l = c; s > 0 || l > 0 && n;)
                    0 !== s && (0 === l || !n || i.z <= n.z) ? (r = i, i = i.nextZ, s--) : (r = n, n = n.nextZ, l--), a ? a.nextZ = r : e = r, r.prevZ = a, a = r;
                i = n;
            }
            a.nextZ = null, c *= 2;
        } while (o > 1);
        } (r);
        } (e, n, r, a);
        for (var s, l, c = e; e.prev !== e.next;)
            if (s = e.prev, l = e.next, a ? fl(e, n, r, a) : pl(e))
                t.push(s.i / i), t.push(e.i / i), t.push(l.i / i), Cl(e), e = l.next, c = l.next;
            else if ((e = l) === c) {
                o ? 1 === o ? dl(e = ml(e, t, i), t, i, n, r, a, 2) : 2 === o && vl(e, t, i, n, r, a) : dl(hl(e), t, i, n, r, a, 1);
                break;
            }
    }
    }
    function pl(e) {
    var t = e.prev, i = e, n = e.next; if (Tl(t, i, n) >= 0)
        return !1; for (var r = e.next.next; r !== e.prev;) {
            if (_l(t.x, t.y, i.x, i.y, n.x, n.y, r.x, r.y) && Tl(r.prev, r, r.next) >= 0)
                return !1;
            r = r.next;
        } return !0;
    }
    function fl(e, t, i, n) {
    var r = e.prev, a = e, o = e.next; if (Tl(r, a, o) >= 0)
        return !1; for (var s = r.x < a.x ? r.x < o.x ? r.x : o.x : a.x < o.x ? a.x : o.x, l = r.y < a.y ? r.y < o.y ? r.y : o.y : a.y < o.y ? a.y : o.y, c = r.x > a.x ? r.x > o.x ? r.x : o.x : a.x > o.x ? a.x : o.x, u = r.y > a.y ? r.y > o.y ? r.y : o.y : a.y > o.y ? a.y : o.y, h = bl(s, l, t, i, n), d = bl(c, u, t, i, n), p = e.prevZ, f = e.nextZ; p && p.z >= h && f && f.z <= d;) {
            if (p !== e.prev && p !== e.next && _l(r.x, r.y, a.x, a.y, o.x, o.y, p.x, p.y) && Tl(p.prev, p, p.next) >= 0)
                return !1;
            if (p = p.prevZ, f !== e.prev && f !== e.next && _l(r.x, r.y, a.x, a.y, o.x, o.y, f.x, f.y) && Tl(f.prev, f, f.next) >= 0)
                return !1;
            f = f.nextZ;
        } for (; p && p.z >= h;) {
            if (p !== e.prev && p !== e.next && _l(r.x, r.y, a.x, a.y, o.x, o.y, p.x, p.y) && Tl(p.prev, p, p.next) >= 0)
                return !1;
            p = p.prevZ;
        } for (; f && f.z <= d;) {
            if (f !== e.prev && f !== e.next && _l(r.x, r.y, a.x, a.y, o.x, o.y, f.x, f.y) && Tl(f.prev, f, f.next) >= 0)
                return !1;
            f = f.nextZ;
        } return !0;
    }
    function ml(e, t, i) {
    var n = e; do {
        var r = n.prev, a = n.next.next;
        !Ml(r, a) && Al(r, n, n.next, a) && Sl(r, a) && Sl(a, r) && (t.push(r.i / i), t.push(n.i / i), t.push(a.i / i), Cl(n), Cl(n.next), n = e = a), n = n.next;
    } while (n !== e); return n;
    }
    function vl(e, t, i, n, r, a) {
    var o = e; do {
        for (var s = o.next.next; s !== o.prev;) {
            if (o.i !== s.i && wl(o, s)) {
                var l = El(o, s);
                return o = hl(o, o.next), l = hl(l, l.next), dl(o, t, i, n, r, a), void dl(l, t, i, n, r, a);
            }
            s = s.next;
        }
        o = o.next;
    } while (o !== e);
    }
    function gl(e, t) { return e.x - t.x; }
    function yl(e, t) {
    if (t = function (e, t) {
    var i, n = t, r = e.x, a = e.y, o = -1 / 0; do {
        if (a <= n.y && a >= n.next.y && n.next.y !== n.y) {
            var s = n.x + (a - n.y) * (n.next.x - n.x) / (n.next.y - n.y);
            if (s <= r && s > o) {
                if (o = s, s === r) {
                    if (a === n.y)
                        return n;
                    if (a === n.next.y)
                        return n.next;
                }
                i = n.x < n.next.x ? n : n.next;
            }
        }
        n = n.next;
    } while (n !== t); if (!i)
            return null; if (r === o)
            return i.prev; var l, c = i, u = i.x, h = i.y, d = 1 / 0; n = i.next; for (; n !== c;)
            r >= n.x && n.x >= u && r !== n.x && _l(a < h ? r : o, a, u, h, a < h ? o : r, a, n.x, n.y) && ((l = Math.abs(a - n.y) / (r - n.x)) < d || l === d && n.x > i.x) && Sl(n, e) && (i = n, d = l), n = n.next; return i;
    } (e, t)) {
        var i = El(t, e);
        hl(i, i.next);
    }
    }
    function bl(e, t, i, n, r) { return (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - i) * r) | e << 8)) | e << 4)) | e << 2)) | e << 1)) | (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - n) * r) | t << 8)) | t << 4)) | t << 2)) | t << 1)) << 1; }
    function xl(e) {
    var t = e, i = e; do {
        (t.x < i.x || t.x === i.x && t.y < i.y) && (i = t), t = t.next;
    } while (t !== e); return i;
    }
    function _l(e, t, i, n, r, a, o, s) { return (r - o) * (t - s) - (e - o) * (a - s) >= 0 && (e - o) * (n - s) - (i - o) * (t - s) >= 0 && (i - o) * (a - s) - (r - o) * (n - s) >= 0; }
    function wl(e, t) {
    return e.next.i !== t.i && e.prev.i !== t.i && !function (e, t) {
    var i = e; do {
        if (i.i !== e.i && i.next.i !== e.i && i.i !== t.i && i.next.i !== t.i && Al(i, i.next, e, t))
            return !0;
        i = i.next;
    } while (i !== e); return !1;
    } (e, t) && Sl(e, t) && Sl(t, e) && function (e, t) {
    var i = e, n = !1, r = (e.x + t.x) / 2, a = (e.y + t.y) / 2; do {
        i.y > a != i.next.y > a && i.next.y !== i.y && r < (i.next.x - i.x) * (a - i.y) / (i.next.y - i.y) + i.x && (n = !n), i = i.next;
    } while (i !== e); return n;
    } (e, t);
    }
    function Tl(e, t, i) { return (t.y - e.y) * (i.x - t.x) - (t.x - e.x) * (i.y - t.y); }
    function Ml(e, t) { return e.x === t.x && e.y === t.y; }
    function Al(e, t, i, n) { return !!(Ml(e, i) && Ml(t, n) || Ml(e, n) && Ml(i, t)) || Tl(e, t, i) > 0 != Tl(e, t, n) > 0 && Tl(i, n, e) > 0 != Tl(i, n, t) > 0; }
    function Sl(e, t) { return Tl(e.prev, e, e.next) < 0 ? Tl(e, t, e.next) >= 0 && Tl(e, e.prev, t) >= 0 : Tl(e, t, e.prev) < 0 || Tl(e, e.next, t) < 0; }
    function El(e, t) { var i = new Ll(e.i, e.x, e.y), n = new Ll(t.i, t.x, t.y), r = e.next, a = t.prev; return e.next = t, t.prev = e, i.next = r, r.prev = i, n.next = i, i.prev = n, a.next = n, n.prev = a, n; }
    function Pl(e, t, i, n) { var r = new Ll(e, t, i); return n ? (r.next = n.next, r.prev = n, n.next.prev = r, n.next = r) : (r.prev = r, r.next = r), r; }
    function Cl(e) { e.next.prev = e.prev, e.prev.next = e.next, e.prevZ && (e.prevZ.nextZ = e.nextZ), e.nextZ && (e.nextZ.prevZ = e.prevZ); }
    function Ll(e, t, i) { this.i = e, this.x = t, this.y = i, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1; }
    var Rl = {
    area: function (e) {
    for (var t = e.length, i = 0, n = t - 1, r = 0; r < t; n = r++)
        i += e[n].x * e[r].y - e[r].x * e[n].y; return .5 * i;
    }, isClockWise: function (e) { return Rl.area(e) < 0; }, triangulateShape: function (e, t) {
    var i = [], n = [], r = []; Il(e), Ol(i, e); var a = e.length; t.forEach(Il); for (var o = 0; o < t.length; o++)
        n.push(a), a += t[o].length, Ol(i, t[o]); var s = cl(i, n); for (o = 0; o < s.length; o += 3)
            r.push(s.slice(o, o + 3)); return r;
    }
    };
    function Il(e) { var t = e.length; t > 2 && e[t - 1].equals(e[0]) && e.pop(); }
    function Ol(e, t) {
    for (var i = 0; i < t.length; i++)
        e.push(t[i].x), e.push(t[i].y);
    }
    function Dl(e, t) { vr.call(this), this.type = "ExtrudeGeometry", this.parameters = { shapes: e, options: t }, this.fromBufferGeometry(new Fl(e, t)), this.mergeVertices(); }
    function Fl(e, t) {
    Wn.call(this), this.type = "ExtrudeBufferGeometry", this.parameters = { shapes: e, options: t }, e = Array.isArray(e) ? e : [e]; for (var i = this, n = [], r = [], a = 0, o = e.length; a < o; a++) {
        s(e[a]);
    } function s(e) {
    var a = [], o = void 0 !== t.curveSegments ? t.curveSegments : 12, s = void 0 !== t.steps ? t.steps : 1, l = void 0 !== t.depth ? t.depth : 100, c = void 0 === t.bevelEnabled || t.bevelEnabled, u = void 0 !== t.bevelThickness ? t.bevelThickness : 6, h = void 0 !== t.bevelSize ? t.bevelSize : u - 2, d = void 0 !== t.bevelOffset ? t.bevelOffset : 0, p = void 0 !== t.bevelSegments ? t.bevelSegments : 3, f = t.extrudePath, m = void 0 !== t.UVGenerator ? t.UVGenerator : kl; void 0 !== t.amount && (console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."), l = t.amount); var v, g, y, b, x, _, w, T, M = !1; f && (v = f.getSpacedPoints(s), M = !0, c = !1, g = f.computeFrenetFrames(s, !1), y = new Wt, b = new Wt, x = new Wt), c || (p = 0, u = 0, h = 0, d = 0); var A = e.extractPoints(o), S = A.shape, E = A.holes; if (!Rl.isClockWise(S))
        for (S = S.reverse(), w = 0, T = E.length; w < T; w++)
            _ = E[w], Rl.isClockWise(_) && (E[w] = _.reverse()); var P = Rl.triangulateShape(S, E), C = S; for (w = 0, T = E.length; w < T; w++)
            _ = E[w], S = S.concat(_); function L(e, t, i) { return t || console.error("THREE.ExtrudeGeometry: vec does not exist"), t.clone().multiplyScalar(i).add(e); } var R, I, O, D, F, k, N = S.length, B = P.length; function G(e, t, i) {
            var n, r, a, o = e.x - t.x, s = e.y - t.y, l = i.x - e.x, c = i.y - e.y, u = o * o + s * s, h = o * c - s * l; if (Math.abs(h) > Number.EPSILON) {
                var d = Math.sqrt(u), p = Math.sqrt(l * l + c * c), f = t.x - s / d, m = t.y + o / d, v = ((i.x - c / p - f) * c - (i.y + l / p - m) * l) / (o * c - s * l), g = (n = f + o * v - e.x) * n + (r = m + s * v - e.y) * r;
                if (g <= 2)
                    return new Ut(n, r);
                a = Math.sqrt(g / 2);
            }
            else {
                var y = !1;
                o > Number.EPSILON ? l > Number.EPSILON && (y = !0) : o < -Number.EPSILON ? l < -Number.EPSILON && (y = !0) : Math.sign(s) === Math.sign(c) && (y = !0), y ? (n = -s, r = o, a = Math.sqrt(u)) : (n = o, r = s, a = Math.sqrt(u / 2));
            } return new Ut(n / a, r / a);
            } for (var H = [], U = 0, z = C.length, V = z - 1, j = U + 1; U < z; U++ , V++ , j++)
            V === z && (V = 0), j === z && (j = 0), H[U] = G(C[U], C[V], C[j]); var W, X, Y = [], Q = H.concat(); for (w = 0, T = E.length; w < T; w++) {
                for (_ = E[w], W = [], U = 0, V = (z = _.length) - 1, j = U + 1; U < z; U++ , V++ , j++)
                    V === z && (V = 0), j === z && (j = 0), W[U] = G(_[U], _[V], _[j]);
                Y.push(W), Q = Q.concat(W);
            } for (R = 0; R < p; R++) {
                for (O = R / p, D = u * Math.cos(O * Math.PI / 2), I = h * Math.sin(O * Math.PI / 2) + d, U = 0, z = C.length; U < z; U++)
                    $((F = L(C[U], H[U], I)).x, F.y, -D);
                for (w = 0, T = E.length; w < T; w++)
                    for (_ = E[w], W = Y[w], U = 0, z = _.length; U < z; U++)
                        $((F = L(_[U], W[U], I)).x, F.y, -D);
            } for (I = h + d, U = 0; U < N; U++)
            F = c ? L(S[U], Q[U], I) : S[U], M ? (b.copy(g.normals[0]).multiplyScalar(F.x), y.copy(g.binormals[0]).multiplyScalar(F.y), x.copy(v[0]).add(b).add(y), $(x.x, x.y, x.z)) : $(F.x, F.y, 0); for (X = 1; X <= s; X++)
            for (U = 0; U < N; U++)
                F = c ? L(S[U], Q[U], I) : S[U], M ? (b.copy(g.normals[X]).multiplyScalar(F.x), y.copy(g.binormals[X]).multiplyScalar(F.y), x.copy(v[X]).add(b).add(y), $(x.x, x.y, x.z)) : $(F.x, F.y, l / s * X); for (R = p - 1; R >= 0; R--) {
                    for (O = R / p, D = u * Math.cos(O * Math.PI / 2), I = h * Math.sin(O * Math.PI / 2) + d, U = 0, z = C.length; U < z; U++)
                        $((F = L(C[U], H[U], I)).x, F.y, l + D);
                    for (w = 0, T = E.length; w < T; w++)
                        for (_ = E[w], W = Y[w], U = 0, z = _.length; U < z; U++)
                            F = L(_[U], W[U], I), M ? $(F.x, F.y + v[s - 1].y, v[s - 1].x + D) : $(F.x, F.y, l + D);
                } function q(e, t) {
                var i, n; for (U = e.length; --U >= 0;) {
                    i = U, (n = U - 1) < 0 && (n = e.length - 1);
                    var r = 0, a = s + 2 * p;
                    for (r = 0; r < a; r++) {
                        var o = N * r, l = N * (r + 1);
                        K(t + i + o, t + n + o, t + n + l, t + i + l);
                    }
                }
                } function $(e, t, i) { a.push(e), a.push(t), a.push(i); } function Z(e, t, r) { J(e), J(t), J(r); var a = n.length / 3, o = m.generateTopUV(i, n, a - 3, a - 2, a - 1); ee(o[0]), ee(o[1]), ee(o[2]); } function K(e, t, r, a) { J(e), J(t), J(a), J(t), J(r), J(a); var o = n.length / 3, s = m.generateSideWallUV(i, n, o - 6, o - 3, o - 2, o - 1); ee(s[0]), ee(s[1]), ee(s[3]), ee(s[1]), ee(s[2]), ee(s[3]); } function J(e) { n.push(a[3 * e + 0]), n.push(a[3 * e + 1]), n.push(a[3 * e + 2]); } function ee(e) { r.push(e.x), r.push(e.y); } !function () {
                var e = n.length / 3; if (c) {
                    var t = 0, r = N * t;
                    for (U = 0; U < B; U++)
                        Z((k = P[U])[2] + r, k[1] + r, k[0] + r);
                    for (r = N * (t = s + 2 * p), U = 0; U < B; U++)
                        Z((k = P[U])[0] + r, k[1] + r, k[2] + r);
                }
                else {
                    for (U = 0; U < B; U++)
                        Z((k = P[U])[2], k[1], k[0]);
                    for (U = 0; U < B; U++)
                        Z((k = P[U])[0] + N * s, k[1] + N * s, k[2] + N * s);
                } i.addGroup(e, n.length / 3 - e, 0);
                } (), function () {
                var e = n.length / 3, t = 0; for (q(C, t), t += C.length, w = 0, T = E.length; w < T; w++)
                    q(_ = E[w], t), t += _.length; i.addGroup(e, n.length / 3 - e, 1);
                } ();
    } this.setAttribute("position", new Dn(n, 3)), this.setAttribute("uv", new Dn(r, 2)), this.computeVertexNormals();
    }
    Dl.prototype = Object.create(vr.prototype), Dl.prototype.constructor = Dl, Dl.prototype.toJSON = function () { var e = vr.prototype.toJSON.call(this); return Nl(this.parameters.shapes, this.parameters.options, e); }, Fl.prototype = Object.create(Wn.prototype), Fl.prototype.constructor = Fl, Fl.prototype.toJSON = function () { var e = Wn.prototype.toJSON.call(this); return Nl(this.parameters.shapes, this.parameters.options, e); };
    var kl = { generateTopUV: function (e, t, i, n, r) { var a = t[3 * i], o = t[3 * i + 1], s = t[3 * n], l = t[3 * n + 1], c = t[3 * r], u = t[3 * r + 1]; return [new Ut(a, o), new Ut(s, l), new Ut(c, u)]; }, generateSideWallUV: function (e, t, i, n, r, a) { var o = t[3 * i], s = t[3 * i + 1], l = t[3 * i + 2], c = t[3 * n], u = t[3 * n + 1], h = t[3 * n + 2], d = t[3 * r], p = t[3 * r + 1], f = t[3 * r + 2], m = t[3 * a], v = t[3 * a + 1], g = t[3 * a + 2]; return Math.abs(s - u) < .01 ? [new Ut(o, 1 - l), new Ut(c, 1 - h), new Ut(d, 1 - f), new Ut(m, 1 - g)] : [new Ut(s, 1 - l), new Ut(u, 1 - h), new Ut(p, 1 - f), new Ut(v, 1 - g)]; } };
    function Nl(e, t, i) {
    if (i.shapes = [], Array.isArray(e))
        for (var n = 0, r = e.length; n < r; n++) {
            var a = e[n];
            i.shapes.push(a.uuid);
        }
    else
        i.shapes.push(e.uuid); return void 0 !== t.extrudePath && (i.options.extrudePath = t.extrudePath.toJSON()), i;
    }
    function Bl(e, t) { vr.call(this), this.type = "TextGeometry", this.parameters = { text: e, parameters: t }, this.fromBufferGeometry(new Gl(e, t)), this.mergeVertices(); }
    function Gl(e, t) {
    var i = (t = t || {}).font; if (!i || !i.isFont)
        return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."), new vr; var n = i.generateShapes(e, t.size); t.depth = void 0 !== t.height ? t.height : 50, void 0 === t.bevelThickness && (t.bevelThickness = 10), void 0 === t.bevelSize && (t.bevelSize = 8), void 0 === t.bevelEnabled && (t.bevelEnabled = !1), Fl.call(this, n, t), this.type = "TextBufferGeometry";
    }
    function Hl(e, t, i, n, r, a, o) { vr.call(this), this.type = "SphereGeometry", this.parameters = { radius: e, widthSegments: t, heightSegments: i, phiStart: n, phiLength: r, thetaStart: a, thetaLength: o }, this.fromBufferGeometry(new Ul(e, t, i, n, r, a, o)), this.mergeVertices(); }
    function Ul(e, t, i, n, r, a, o) {
    Wn.call(this), this.type = "SphereBufferGeometry", this.parameters = { radius: e, widthSegments: t, heightSegments: i, phiStart: n, phiLength: r, thetaStart: a, thetaLength: o }, e = e || 1, t = Math.max(3, Math.floor(t) || 8), i = Math.max(2, Math.floor(i) || 6), n = void 0 !== n ? n : 0, r = void 0 !== r ? r : 2 * Math.PI, a = void 0 !== a ? a : 0, o = void 0 !== o ? o : Math.PI; var s, l, c = Math.min(a + o, Math.PI), u = 0, h = [], d = new Wt, p = new Wt, f = [], m = [], v = [], g = []; for (l = 0; l <= i; l++) {
        var y = [], b = l / i, x = 0;
        for (0 == l && 0 == a ? x = .5 / t : l == i && c == Math.PI && (x = -.5 / t), s = 0; s <= t; s++) {
            var _ = s / t;
            d.x = -e * Math.cos(n + _ * r) * Math.sin(a + b * o), d.y = e * Math.cos(a + b * o), d.z = e * Math.sin(n + _ * r) * Math.sin(a + b * o), m.push(d.x, d.y, d.z), p.copy(d).normalize(), v.push(p.x, p.y, p.z), g.push(_ + x, 1 - b), y.push(u++);
        }
        h.push(y);
    } for (l = 0; l < i; l++)
            for (s = 0; s < t; s++) {
                var w = h[l][s + 1], T = h[l][s], M = h[l + 1][s], A = h[l + 1][s + 1];
                (0 !== l || a > 0) && f.push(w, T, A), (l !== i - 1 || c < Math.PI) && f.push(T, M, A);
            } this.setIndex(f), this.setAttribute("position", new Dn(m, 3)), this.setAttribute("normal", new Dn(v, 3)), this.setAttribute("uv", new Dn(g, 2));
    }
    function zl(e, t, i, n, r, a) { vr.call(this), this.type = "RingGeometry", this.parameters = { innerRadius: e, outerRadius: t, thetaSegments: i, phiSegments: n, thetaStart: r, thetaLength: a }, this.fromBufferGeometry(new Vl(e, t, i, n, r, a)), this.mergeVertices(); }
    function Vl(e, t, i, n, r, a) {
    Wn.call(this), this.type = "RingBufferGeometry", this.parameters = { innerRadius: e, outerRadius: t, thetaSegments: i, phiSegments: n, thetaStart: r, thetaLength: a }, e = e || .5, t = t || 1, r = void 0 !== r ? r : 0, a = void 0 !== a ? a : 2 * Math.PI, i = void 0 !== i ? Math.max(3, i) : 8; var o, s, l, c = [], u = [], h = [], d = [], p = e, f = (t - e) / (n = void 0 !== n ? Math.max(1, n) : 1), m = new Wt, v = new Ut; for (s = 0; s <= n; s++) {
        for (l = 0; l <= i; l++)
            o = r + l / i * a, m.x = p * Math.cos(o), m.y = p * Math.sin(o), u.push(m.x, m.y, m.z), h.push(0, 0, 1), v.x = (m.x / t + 1) / 2, v.y = (m.y / t + 1) / 2, d.push(v.x, v.y);
        p += f;
    } for (s = 0; s < n; s++) {
        var g = s * (i + 1);
        for (l = 0; l < i; l++) {
            var y = o = l + g, b = o + i + 1, x = o + i + 2, _ = o + 1;
            c.push(y, b, _), c.push(b, x, _);
        }
    } this.setIndex(c), this.setAttribute("position", new Dn(u, 3)), this.setAttribute("normal", new Dn(h, 3)), this.setAttribute("uv", new Dn(d, 2));
    }
    function jl(e, t, i, n) { vr.call(this), this.type = "LatheGeometry", this.parameters = { points: e, segments: t, phiStart: i, phiLength: n }, this.fromBufferGeometry(new Wl(e, t, i, n)), this.mergeVertices(); }
    function Wl(e, t, i, n) {
    Wn.call(this), this.type = "LatheBufferGeometry", this.parameters = { points: e, segments: t, phiStart: i, phiLength: n }, t = Math.floor(t) || 12, i = i || 0, n = n || 2 * Math.PI, n = Ht.clamp(n, 0, 2 * Math.PI); var r, a, o, s = [], l = [], c = [], u = 1 / t, h = new Wt, d = new Ut; for (a = 0; a <= t; a++) {
        var p = i + a * u * n, f = Math.sin(p), m = Math.cos(p);
        for (o = 0; o <= e.length - 1; o++)
            h.x = e[o].x * f, h.y = e[o].y, h.z = e[o].x * m, l.push(h.x, h.y, h.z), d.x = a / t, d.y = o / (e.length - 1), c.push(d.x, d.y);
    } for (a = 0; a < t; a++)
            for (o = 0; o < e.length - 1; o++) {
                var v = r = o + a * e.length, g = r + e.length, y = r + e.length + 1, b = r + 1;
                s.push(v, g, b), s.push(g, y, b);
            } if (this.setIndex(s), this.setAttribute("position", new Dn(l, 3)), this.setAttribute("uv", new Dn(c, 2)), this.computeVertexNormals(), n === 2 * Math.PI) {
                var x = this.attributes.normal.array, _ = new Wt, w = new Wt, T = new Wt;
                for (r = t * e.length * 3, a = 0, o = 0; a < e.length; a++ , o += 3)
                    _.x = x[o + 0], _.y = x[o + 1], _.z = x[o + 2], w.x = x[r + o + 0], w.y = x[r + o + 1], w.z = x[r + o + 2], T.addVectors(_, w).normalize(), x[o + 0] = x[r + o + 0] = T.x, x[o + 1] = x[r + o + 1] = T.y, x[o + 2] = x[r + o + 2] = T.z;
            }
    }
    function Xl(e, t) { vr.call(this), this.type = "ShapeGeometry", "object" == typeof t && (console.warn("THREE.ShapeGeometry: Options parameter has been removed."), t = t.curveSegments), this.parameters = { shapes: e, curveSegments: t }, this.fromBufferGeometry(new Yl(e, t)), this.mergeVertices(); }
    function Yl(e, t) {
    Wn.call(this), this.type = "ShapeBufferGeometry", this.parameters = { shapes: e, curveSegments: t }, t = t || 12; var i = [], n = [], r = [], a = [], o = 0, s = 0; if (!1 === Array.isArray(e))
        c(e);
    else
        for (var l = 0; l < e.length; l++)
            c(e[l]), this.addGroup(o, s, l), o += s, s = 0; function c(e) {
            var o, l, c, u = n.length / 3, h = e.extractPoints(t), d = h.shape, p = h.holes; for (!1 === Rl.isClockWise(d) && (d = d.reverse()), o = 0, l = p.length; o < l; o++)
                c = p[o], !0 === Rl.isClockWise(c) && (p[o] = c.reverse()); var f = Rl.triangulateShape(d, p); for (o = 0, l = p.length; o < l; o++)
                    c = p[o], d = d.concat(c); for (o = 0, l = d.length; o < l; o++) {
                        var m = d[o];
                        n.push(m.x, m.y, 0), r.push(0, 0, 1), a.push(m.x, m.y);
                    } for (o = 0, l = f.length; o < l; o++) {
                        var v = f[o], g = v[0] + u, y = v[1] + u, b = v[2] + u;
                        i.push(g, y, b), s += 3;
                    }
            } this.setIndex(i), this.setAttribute("position", new Dn(n, 3)), this.setAttribute("normal", new Dn(r, 3)), this.setAttribute("uv", new Dn(a, 2));
    }
    function Ql(e, t) {
    if (t.shapes = [], Array.isArray(e))
        for (var i = 0, n = e.length; i < n; i++) {
            var r = e[i];
            t.shapes.push(r.uuid);
        }
    else
        t.shapes.push(e.uuid); return t;
    }
    function ql(e, t) {
    Wn.call(this), this.type = "EdgesGeometry", this.parameters = { thresholdAngle: t }, t = void 0 !== t ? t : 1; var i, n, r, a, o = [], s = Math.cos(Ht.DEG2RAD * t), l = [0, 0], c = {}, u = ["a", "b", "c"]; e.isBufferGeometry ? (a = new vr).fromBufferGeometry(e) : a = e.clone(), a.mergeVertices(), a.computeFaceNormals(); for (var h = a.vertices, d = a.faces, p = 0, f = d.length; p < f; p++)
        for (var m = d[p], v = 0; v < 3; v++)
            i = m[u[v]], n = m[u[(v + 1) % 3]], l[0] = Math.min(i, n), l[1] = Math.max(i, n), void 0 === c[r = l[0] + "," + l[1]] ? c[r] = { index1: l[0], index2: l[1], face1: p, face2: void 0 } : c[r].face2 = p; for (r in c) {
                var g = c[r];
                if (void 0 === g.face2 || d[g.face1].normal.dot(d[g.face2].normal) <= s) {
                    var y = h[g.index1];
                    o.push(y.x, y.y, y.z), y = h[g.index2], o.push(y.x, y.y, y.z);
                }
            } this.setAttribute("position", new Dn(o, 3));
    }
    function $l(e, t, i, n, r, a, o, s) { vr.call(this), this.type = "CylinderGeometry", this.parameters = { radiusTop: e, radiusBottom: t, height: i, radialSegments: n, heightSegments: r, openEnded: a, thetaStart: o, thetaLength: s }, this.fromBufferGeometry(new Zl(e, t, i, n, r, a, o, s)), this.mergeVertices(); }
    function Zl(e, t, i, n, r, a, o, s) {
    Wn.call(this), this.type = "CylinderBufferGeometry", this.parameters = { radiusTop: e, radiusBottom: t, height: i, radialSegments: n, heightSegments: r, openEnded: a, thetaStart: o, thetaLength: s }; var l = this; e = void 0 !== e ? e : 1, t = void 0 !== t ? t : 1, i = i || 1, n = Math.floor(n) || 8, r = Math.floor(r) || 1, a = void 0 !== a && a, o = void 0 !== o ? o : 0, s = void 0 !== s ? s : 2 * Math.PI; var c = [], u = [], h = [], d = [], p = 0, f = [], m = i / 2, v = 0; function g(i) {
    var r, a, f, g = new Ut, y = new Wt, b = 0, x = !0 === i ? e : t, _ = !0 === i ? 1 : -1; for (a = p, r = 1; r <= n; r++)
        u.push(0, m * _, 0), h.push(0, _, 0), d.push(.5, .5), p++; for (f = p, r = 0; r <= n; r++) {
            var w = r / n * s + o, T = Math.cos(w), M = Math.sin(w);
            y.x = x * M, y.y = m * _, y.z = x * T, u.push(y.x, y.y, y.z), h.push(0, _, 0), g.x = .5 * T + .5, g.y = .5 * M * _ + .5, d.push(g.x, g.y), p++;
        } for (r = 0; r < n; r++) {
            var A = a + r, S = f + r;
            !0 === i ? c.push(S, S + 1, A) : c.push(S + 1, S, A), b += 3;
        } l.addGroup(v, b, !0 === i ? 1 : 2), v += b;
    } !function () {
    var a, g, y = new Wt, b = new Wt, x = 0, _ = (t - e) / i; for (g = 0; g <= r; g++) {
        var w = [], T = g / r, M = T * (t - e) + e;
        for (a = 0; a <= n; a++) {
            var A = a / n, S = A * s + o, E = Math.sin(S), P = Math.cos(S);
            b.x = M * E, b.y = -T * i + m, b.z = M * P, u.push(b.x, b.y, b.z), y.set(E, _, P).normalize(), h.push(y.x, y.y, y.z), d.push(A, 1 - T), w.push(p++);
        }
        f.push(w);
    } for (a = 0; a < n; a++)
            for (g = 0; g < r; g++) {
                var C = f[g][a], L = f[g + 1][a], R = f[g + 1][a + 1], I = f[g][a + 1];
                c.push(C, L, I), c.push(L, R, I), x += 6;
            } l.addGroup(v, x, 0), v += x;
    } (), !1 === a && (e > 0 && g(!0), t > 0 && g(!1)), this.setIndex(c), this.setAttribute("position", new Dn(u, 3)), this.setAttribute("normal", new Dn(h, 3)), this.setAttribute("uv", new Dn(d, 2));
    }
    function Kl(e, t, i, n, r, a, o) { $l.call(this, 0, e, t, i, n, r, a, o), this.type = "ConeGeometry", this.parameters = { radius: e, height: t, radialSegments: i, heightSegments: n, openEnded: r, thetaStart: a, thetaLength: o }; }
    function Jl(e, t, i, n, r, a, o) { Zl.call(this, 0, e, t, i, n, r, a, o), this.type = "ConeBufferGeometry", this.parameters = { radius: e, height: t, radialSegments: i, heightSegments: n, openEnded: r, thetaStart: a, thetaLength: o }; }
    function ec(e, t, i, n) { vr.call(this), this.type = "CircleGeometry", this.parameters = { radius: e, segments: t, thetaStart: i, thetaLength: n }, this.fromBufferGeometry(new tc(e, t, i, n)), this.mergeVertices(); }
    function tc(e, t, i, n) {
    Wn.call(this), this.type = "CircleBufferGeometry", this.parameters = { radius: e, segments: t, thetaStart: i, thetaLength: n }, e = e || 1, t = void 0 !== t ? Math.max(3, t) : 8, i = void 0 !== i ? i : 0, n = void 0 !== n ? n : 2 * Math.PI; var r, a, o = [], s = [], l = [], c = [], u = new Wt, h = new Ut; for (s.push(0, 0, 0), l.push(0, 0, 1), c.push(.5, .5), a = 0, r = 3; a <= t; a++ , r += 3) {
        var d = i + a / t * n;
        u.x = e * Math.cos(d), u.y = e * Math.sin(d), s.push(u.x, u.y, u.z), l.push(0, 0, 1), h.x = (s[r] / e + 1) / 2, h.y = (s[r + 1] / e + 1) / 2, c.push(h.x, h.y);
    } for (r = 1; r <= t; r++)
            o.push(r, r + 1, 0); this.setIndex(o), this.setAttribute("position", new Dn(s, 3)), this.setAttribute("normal", new Dn(l, 3)), this.setAttribute("uv", new Dn(c, 2));
    }
    Bl.prototype = Object.create(vr.prototype), Bl.prototype.constructor = Bl, Gl.prototype = Object.create(Fl.prototype), Gl.prototype.constructor = Gl, Hl.prototype = Object.create(vr.prototype), Hl.prototype.constructor = Hl, Ul.prototype = Object.create(Wn.prototype), Ul.prototype.constructor = Ul, zl.prototype = Object.create(vr.prototype), zl.prototype.constructor = zl, Vl.prototype = Object.create(Wn.prototype), Vl.prototype.constructor = Vl, jl.prototype = Object.create(vr.prototype), jl.prototype.constructor = jl, Wl.prototype = Object.create(Wn.prototype), Wl.prototype.constructor = Wl, Xl.prototype = Object.create(vr.prototype), Xl.prototype.constructor = Xl, Xl.prototype.toJSON = function () { var e = vr.prototype.toJSON.call(this); return Ql(this.parameters.shapes, e); }, Yl.prototype = Object.create(Wn.prototype), Yl.prototype.constructor = Yl, Yl.prototype.toJSON = function () { var e = Wn.prototype.toJSON.call(this); return Ql(this.parameters.shapes, e); }, ql.prototype = Object.create(Wn.prototype), ql.prototype.constructor = ql, $l.prototype = Object.create(vr.prototype), $l.prototype.constructor = $l, Zl.prototype = Object.create(Wn.prototype), Zl.prototype.constructor = Zl, Kl.prototype = Object.create($l.prototype), Kl.prototype.constructor = Kl, Jl.prototype = Object.create(Zl.prototype), Jl.prototype.constructor = Jl, ec.prototype = Object.create(vr.prototype), ec.prototype.constructor = ec, tc.prototype = Object.create(Wn.prototype), tc.prototype.constructor = tc;
    var ic = Object.freeze({
    __proto__: null, WireframeGeometry: js, ParametricGeometry: Ws, ParametricBufferGeometry: Xs, TetrahedronGeometry: qs, TetrahedronBufferGeometry: $s, OctahedronGeometry: Zs, OctahedronBufferGeometry: Ks, IcosahedronGeometry: Js, IcosahedronBufferGeometry: el, DodecahedronGeometry: tl, DodecahedronBufferGeometry: il, PolyhedronGeometry: Ys, PolyhedronBufferGeometry: Qs, TubeGeometry: nl, TubeBufferGeometry: rl, TorusKnotGeometry: al, TorusKnotBufferGeometry: ol, TorusGeometry: sl, TorusBufferGeometry: ll, TextGeometry: Bl, TextBufferGeometry: Gl, SphereGeometry: Hl, SphereBufferGeometry: Ul, RingGeometry: zl, RingBufferGeometry: Vl, PlaneGeometry: Gr, PlaneBufferGeometry: Hr, LatheGeometry: jl, LatheBufferGeometry: Wl, ShapeGeometry: Xl, ShapeBufferGeometry: Yl, ExtrudeGeometry: Dl, ExtrudeBufferGeometry: Fl, EdgesGeometry: ql, ConeGeometry: Kl, ConeBufferGeometry: Jl, CylinderGeometry: $l, CylinderBufferGeometry: Zl, CircleGeometry: ec, CircleBufferGeometry: tc, BoxGeometry: class extends vr {
        constructor(e, t, i, n, r, a) { super(), this.type = "BoxGeometry", this.parameters = { width: e, height: t, depth: i, widthSegments: n, heightSegments: r, depthSegments: a }, this.fromBufferGeometry(new gr(e, t, i, n, r, a)), this.mergeVertices(); }
    }, BoxBufferGeometry: gr
    });
    function nc(e) { Mn.call(this), this.type = "ShadowMaterial", this.color = new yn(0), this.transparent = !0, this.setValues(e); }
    function rc(e) { Tr.call(this, e), this.type = "RawShaderMaterial"; }
    function ac(e) { Mn.call(this), this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new yn(16777215), this.roughness = .5, this.metalness = .5, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new yn(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = It, this.normalScale = new Ut(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e); }
    function oc(e) { ac.call(this), this.defines = { STANDARD: "", PHYSICAL: "" }, this.type = "MeshPhysicalMaterial", this.reflectivity = .5, this.clearcoat = 0, this.clearcoatRoughness = 0, this.sheen = null, this.clearcoatNormalScale = new Ut(1, 1), this.clearcoatNormalMap = null, this.transparency = 0, this.setValues(e); }
    function sc(e) { Mn.call(this), this.type = "MeshPhongMaterial", this.color = new yn(16777215), this.specular = new yn(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new yn(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = It, this.normalScale = new Ut(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ne, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e); }
    function lc(e) { sc.call(this), this.defines = { TOON: "" }, this.type = "MeshToonMaterial", this.gradientMap = null, this.setValues(e); }
    function cc(e) { Mn.call(this), this.type = "MeshNormalMaterial", this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = It, this.normalScale = new Ut(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e); }
    function uc(e) { Mn.call(this), this.type = "MeshLambertMaterial", this.color = new yn(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new yn(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ne, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e); }
    function hc(e) { Mn.call(this), this.defines = { MATCAP: "" }, this.type = "MeshMatcapMaterial", this.color = new yn(16777215), this.matcap = null, this.map = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = It, this.normalScale = new Ut(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.alphaMap = null, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e); }
    function dc(e) { ws.call(this), this.type = "LineDashedMaterial", this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.setValues(e); }
    nc.prototype = Object.create(Mn.prototype), nc.prototype.constructor = nc, nc.prototype.isShadowMaterial = !0, nc.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this; }, rc.prototype = Object.create(Tr.prototype), rc.prototype.constructor = rc, rc.prototype.isRawShaderMaterial = !0, ac.prototype = Object.create(Mn.prototype), ac.prototype.constructor = ac, ac.prototype.isMeshStandardMaterial = !0, ac.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.defines = { STANDARD: "" }, this.color.copy(e.color), this.roughness = e.roughness, this.metalness = e.metalness, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.roughnessMap = e.roughnessMap, this.metalnessMap = e.metalnessMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.envMapIntensity = e.envMapIntensity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this; }, oc.prototype = Object.create(ac.prototype), oc.prototype.constructor = oc, oc.prototype.isMeshPhysicalMaterial = !0, oc.prototype.copy = function (e) { return ac.prototype.copy.call(this, e), this.defines = { STANDARD: "", PHYSICAL: "" }, this.reflectivity = e.reflectivity, this.clearcoat = e.clearcoat, this.clearcoatRoughness = e.clearcoatRoughness, e.sheen ? this.sheen = (this.sheen || new yn).copy(e.sheen) : this.sheen = null, this.clearcoatNormalMap = e.clearcoatNormalMap, this.clearcoatNormalScale.copy(e.clearcoatNormalScale), this.transparency = e.transparency, this; }, sc.prototype = Object.create(Mn.prototype), sc.prototype.constructor = sc, sc.prototype.isMeshPhongMaterial = !0, sc.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this.specular.copy(e.specular), this.shininess = e.shininess, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this; }, lc.prototype = Object.create(sc.prototype), lc.prototype.constructor = lc, lc.prototype.isMeshToonMaterial = !0, lc.prototype.copy = function (e) { return sc.prototype.copy.call(this, e), this.gradientMap = e.gradientMap, this; }, cc.prototype = Object.create(Mn.prototype), cc.prototype.constructor = cc, cc.prototype.isMeshNormalMaterial = !0, cc.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this; }, uc.prototype = Object.create(Mn.prototype), uc.prototype.constructor = uc, uc.prototype.isMeshLambertMaterial = !0, uc.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this; }, hc.prototype = Object.create(Mn.prototype), hc.prototype.constructor = hc, hc.prototype.isMeshMatcapMaterial = !0, hc.prototype.copy = function (e) { return Mn.prototype.copy.call(this, e), this.defines = { MATCAP: "" }, this.color.copy(e.color), this.matcap = e.matcap, this.map = e.map, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.alphaMap = e.alphaMap, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this; }, dc.prototype = Object.create(ws.prototype), dc.prototype.constructor = dc, dc.prototype.isLineDashedMaterial = !0, dc.prototype.copy = function (e) { return ws.prototype.copy.call(this, e), this.scale = e.scale, this.dashSize = e.dashSize, this.gapSize = e.gapSize, this; };
    var pc = Object.freeze({ __proto__: null, ShadowMaterial: nc, SpriteMaterial: Qo, RawShaderMaterial: rc, ShaderMaterial: Tr, PointsMaterial: Os, MeshPhysicalMaterial: oc, MeshStandardMaterial: ac, MeshPhongMaterial: sc, MeshToonMaterial: lc, MeshNormalMaterial: cc, MeshLambertMaterial: uc, MeshDepthMaterial: Ao, MeshDistanceMaterial: So, MeshBasicMaterial: An, MeshMatcapMaterial: hc, LineDashedMaterial: dc, LineBasicMaterial: ws, Material: Mn }), fc = {
    arraySlice: function (e, t, i) { return fc.isTypedArray(e) ? new e.constructor(e.subarray(t, void 0 !== i ? i : e.length)) : e.slice(t, i); }, convertArray: function (e, t, i) { return !e || !i && e.constructor === t ? e : "number" == typeof t.BYTES_PER_ELEMENT ? new t(e) : Array.prototype.slice.call(e); }, isTypedArray: function (e) { return ArrayBuffer.isView(e) && !(e instanceof DataView); }, getKeyframeOrder: function (e) {
    for (var t = e.length, i = new Array(t), n = 0; n !== t; ++n)
        i[n] = n; return i.sort((function (t, i) { return e[t] - e[i]; })), i;
    }, sortedArray: function (e, t, i) {
    for (var n = e.length, r = new e.constructor(n), a = 0, o = 0; o !== n; ++a)
        for (var s = i[a] * t, l = 0; l !== t; ++l)
            r[o++] = e[s + l]; return r;
    }, flattenJSON: function (e, t, i, n) {
    for (var r = 1, a = e[0]; void 0 !== a && void 0 === a[n];)
        a = e[r++]; if (void 0 !== a) {
            var o = a[n];
            if (void 0 !== o)
                if (Array.isArray(o))
                    do {
                        void 0 !== (o = a[n]) && (t.push(a.time), i.push.apply(i, o)), a = e[r++];
                    } while (void 0 !== a);
                else if (void 0 !== o.toArray)
                    do {
                        void 0 !== (o = a[n]) && (t.push(a.time), o.toArray(i, i.length)), a = e[r++];
                    } while (void 0 !== a);
                else
                    do {
                        void 0 !== (o = a[n]) && (t.push(a.time), i.push(o)), a = e[r++];
                    } while (void 0 !== a);
        }
    }, subclip: function (e, t, i, n, r) {
    r = r || 30; var a = e.clone(); a.name = t; for (var o = [], s = 0; s < a.tracks.length; ++s) {
        for (var l = a.tracks[s], c = l.getValueSize(), u = [], h = [], d = 0; d < l.times.length; ++d) {
            var p = l.times[d] * r;
            if (!(p < i || p >= n)) {
                u.push(l.times[d]);
                for (var f = 0; f < c; ++f)
                    h.push(l.values[d * c + f]);
            }
        }
        0 !== u.length && (l.times = fc.convertArray(u, l.times.constructor), l.values = fc.convertArray(h, l.values.constructor), o.push(l));
    } a.tracks = o; var m = 1 / 0; for (s = 0; s < a.tracks.length; ++s)
            m > a.tracks[s].times[0] && (m = a.tracks[s].times[0]); for (s = 0; s < a.tracks.length; ++s)
            a.tracks[s].shift(-1 * m); return a.resetDuration(), a;
    }
    };
    function mc(e, t, i, n) { this.parameterPositions = e, this._cachedIndex = 0, this.resultBuffer = void 0 !== n ? n : new t.constructor(i), this.sampleValues = t, this.valueSize = i; }
    function vc(e, t, i, n) { mc.call(this, e, t, i, n), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0; }
    function gc(e, t, i, n) { mc.call(this, e, t, i, n); }
    function yc(e, t, i, n) { mc.call(this, e, t, i, n); }
    function bc(e, t, i, n) {
    if (void 0 === e)
        throw new Error("THREE.KeyframeTrack: track name is undefined"); if (void 0 === t || 0 === t.length)
            throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e); this.name = e, this.times = fc.convertArray(t, this.TimeBufferType), this.values = fc.convertArray(i, this.ValueBufferType), this.setInterpolation(n || this.DefaultInterpolation);
    }
    function xc(e, t, i) { bc.call(this, e, t, i); }
    function _c(e, t, i, n) { bc.call(this, e, t, i, n); }
    function wc(e, t, i, n) { bc.call(this, e, t, i, n); }
    function Tc(e, t, i, n) { mc.call(this, e, t, i, n); }
    function Mc(e, t, i, n) { bc.call(this, e, t, i, n); }
    function Ac(e, t, i, n) { bc.call(this, e, t, i, n); }
    function Sc(e, t, i, n) { bc.call(this, e, t, i, n); }
    function Ec(e, t, i) { this.name = e, this.tracks = i, this.duration = void 0 !== t ? t : -1, this.uuid = Ht.generateUUID(), this.duration < 0 && this.resetDuration(); }
    function Pc(e) {
    if (void 0 === e.type)
        throw new Error("THREE.KeyframeTrack: track type undefined, can not parse"); var t = function (e) {
        switch (e.toLowerCase()) {
            case "scalar":
            case "double":
            case "float":
            case "number":
            case "integer": return wc;
            case "vector":
            case "vector2":
            case "vector3":
            case "vector4": return Sc;
            case "color": return _c;
            case "quaternion": return Mc;
            case "bool":
            case "boolean": return xc;
            case "string": return Ac;
        } throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + e);
        } (e.type); if (void 0 === e.times) {
            var i = [], n = [];
            fc.flattenJSON(e.keys, i, n, "value"), e.times = i, e.values = n;
        } return void 0 !== t.parse ? t.parse(e) : new t(e.name, e.times, e.values, e.interpolation);
    }
    Object.assign(mc.prototype, {
    evaluate: function (e) {
    var t = this.parameterPositions, i = this._cachedIndex, n = t[i], r = t[i - 1]; e: {
        t: {
            var a;
            i: {
                n: if (!(e < n)) {
                    for (var o = i + 2; ;) {
                        if (void 0 === n) {
                            if (e < r)
                                break n;
                            return i = t.length, this._cachedIndex = i, this.afterEnd_(i - 1, e, r);
                        }
                        if (i === o)
                            break;
                        if (r = n, e < (n = t[++i]))
                            break t;
                    }
                    a = t.length;
                    break i;
                }
                if (e >= r)
                    break e;
                var s = t[1];
                e < s && (i = 2, r = s);
                for (o = i - 2; ;) {
                    if (void 0 === r)
                        return this._cachedIndex = 0, this.beforeStart_(0, e, n);
                    if (i === o)
                        break;
                    if (n = r, e >= (r = t[--i - 1]))
                        break t;
                }
                a = i, i = 0;
            }
            for (; i < a;) {
                var l = i + a >>> 1;
                e < t[l] ? a = l : i = l + 1;
            }
            if (n = t[i], void 0 === (r = t[i - 1]))
                return this._cachedIndex = 0, this.beforeStart_(0, e, n);
            if (void 0 === n)
                return i = t.length, this._cachedIndex = i, this.afterEnd_(i - 1, r, e);
        }
        this._cachedIndex = i, this.intervalChanged_(i, r, n);
    } return this.interpolate_(i, r, e, n);
    }, settings: null, DefaultSettings_: {}, getSettings_: function () { return this.settings || this.DefaultSettings_; }, copySampleValue_: function (e) {
    for (var t = this.resultBuffer, i = this.sampleValues, n = this.valueSize, r = e * n, a = 0; a !== n; ++a)
        t[a] = i[r + a]; return t;
    }, interpolate_: function () { throw new Error("call to abstract method"); }, intervalChanged_: function () { }
    }), Object.assign(mc.prototype, { beforeStart_: mc.prototype.copySampleValue_, afterEnd_: mc.prototype.copySampleValue_ }), vc.prototype = Object.assign(Object.create(mc.prototype), {
    constructor: vc, DefaultSettings_: { endingStart: yt, endingEnd: yt }, intervalChanged_: function (e, t, i) {
    var n = this.parameterPositions, r = e - 2, a = e + 1, o = n[r], s = n[a]; if (void 0 === o)
        switch (this.getSettings_().endingStart) {
            case 2401:
                r = e, o = 2 * t - i;
                break;
            case 2402:
                o = t + n[r = n.length - 2] - n[r + 1];
                break;
            default: r = e, o = i;
        } if (void 0 === s)
            switch (this.getSettings_().endingEnd) {
                case 2401:
                    a = e, s = 2 * i - t;
                    break;
                case 2402:
                    a = 1, s = i + n[1] - n[0];
                    break;
                default: a = e - 1, s = t;
            } var l = .5 * (i - t), c = this.valueSize; this._weightPrev = l / (t - o), this._weightNext = l / (s - i), this._offsetPrev = r * c, this._offsetNext = a * c;
    }, interpolate_: function (e, t, i, n) {
    for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, l = s - o, c = this._offsetPrev, u = this._offsetNext, h = this._weightPrev, d = this._weightNext, p = (i - t) / (n - t), f = p * p, m = f * p, v = -h * m + 2 * h * f - h * p, g = (1 + h) * m + (-1.5 - 2 * h) * f + (-.5 + h) * p + 1, y = (-1 - d) * m + (1.5 + d) * f + .5 * p, b = d * m - d * f, x = 0; x !== o; ++x)
        r[x] = v * a[c + x] + g * a[l + x] + y * a[s + x] + b * a[u + x]; return r;
    }
    }), gc.prototype = Object.assign(Object.create(mc.prototype), {
    constructor: gc, interpolate_: function (e, t, i, n) {
    for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, l = s - o, c = (i - t) / (n - t), u = 1 - c, h = 0; h !== o; ++h)
        r[h] = a[l + h] * u + a[s + h] * c; return r;
    }
    }), yc.prototype = Object.assign(Object.create(mc.prototype), { constructor: yc, interpolate_: function (e) { return this.copySampleValue_(e - 1); } }), Object.assign(bc, {
    toJSON: function (e) {
    var t, i = e.constructor; if (void 0 !== i.toJSON)
        t = i.toJSON(e);
    else {
        t = { name: e.name, times: fc.convertArray(e.times, Array), values: fc.convertArray(e.values, Array) };
        var n = e.getInterpolation();
        n !== e.DefaultInterpolation && (t.interpolation = n);
    } return t.type = e.ValueTypeName, t;
    }
    }), Object.assign(bc.prototype, {
    constructor: bc, TimeBufferType: Float32Array, ValueBufferType: Float32Array, DefaultInterpolation: 2301, InterpolantFactoryMethodDiscrete: function (e) { return new yc(this.times, this.values, this.getValueSize(), e); }, InterpolantFactoryMethodLinear: function (e) { return new gc(this.times, this.values, this.getValueSize(), e); }, InterpolantFactoryMethodSmooth: function (e) { return new vc(this.times, this.values, this.getValueSize(), e); }, setInterpolation: function (e) {
    var t; switch (e) {
        case 2300:
            t = this.InterpolantFactoryMethodDiscrete;
            break;
        case 2301:
            t = this.InterpolantFactoryMethodLinear;
            break;
        case 2302: t = this.InterpolantFactoryMethodSmooth;
    } if (void 0 === t) {
        var i = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
        if (void 0 === this.createInterpolant) {
            if (e === this.DefaultInterpolation)
                throw new Error(i);
            this.setInterpolation(this.DefaultInterpolation);
        }
        return console.warn("THREE.KeyframeTrack:", i), this;
    } return this.createInterpolant = t, this;
    }, getInterpolation: function () {
    switch (this.createInterpolant) {
        case this.InterpolantFactoryMethodDiscrete: return 2300;
        case this.InterpolantFactoryMethodLinear: return 2301;
        case this.InterpolantFactoryMethodSmooth: return 2302;
    }
    }, getValueSize: function () { return this.values.length / this.times.length; }, shift: function (e) {
    if (0 !== e)
        for (var t = this.times, i = 0, n = t.length; i !== n; ++i)
            t[i] += e; return this;
    }, scale: function (e) {
    if (1 !== e)
        for (var t = this.times, i = 0, n = t.length; i !== n; ++i)
            t[i] *= e; return this;
    }, trim: function (e, t) {
    for (var i = this.times, n = i.length, r = 0, a = n - 1; r !== n && i[r] < e;)
        ++r; for (; -1 !== a && i[a] > t;)
            --a; if (++a, 0 !== r || a !== n) {
                r >= a && (r = (a = Math.max(a, 1)) - 1);
                var o = this.getValueSize();
                this.times = fc.arraySlice(i, r, a), this.values = fc.arraySlice(this.values, r * o, a * o);
            } return this;
    }, validate: function () {
    var e = !0, t = this.getValueSize(); t - Math.floor(t) != 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e = !1); var i = this.times, n = this.values, r = i.length; 0 === r && (console.error("THREE.KeyframeTrack: Track is empty.", this), e = !1); for (var a = null, o = 0; o !== r; o++) {
        var s = i[o];
        if ("number" == typeof s && isNaN(s)) {
            console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o, s), e = !1;
            break;
        }
        if (null !== a && a > s) {
            console.error("THREE.KeyframeTrack: Out of order keys.", this, o, s, a), e = !1;
            break;
        }
        a = s;
    } if (void 0 !== n && fc.isTypedArray(n)) {
        o = 0;
        for (var l = n.length; o !== l; ++o) {
            var c = n[o];
            if (isNaN(c)) {
                console.error("THREE.KeyframeTrack: Value is not a valid number.", this, o, c), e = !1;
                break;
            }
        }
    } return e;
    }, optimize: function () {
    for (var e = this.times, t = this.values, i = this.getValueSize(), n = 2302 === this.getInterpolation(), r = 1, a = e.length - 1, o = 1; o < a; ++o) {
        var s = !1, l = e[o];
        if (l !== e[o + 1] && (1 !== o || l !== l[0]))
            if (n)
                s = !0;
            else
                for (var c = o * i, u = c - i, h = c + i, d = 0; d !== i; ++d) {
                    var p = t[c + d];
                    if (p !== t[u + d] || p !== t[h + d]) {
                        s = !0;
                        break;
                    }
                }
        if (s) {
            if (o !== r) {
                e[r] = e[o];
                var f = o * i, m = r * i;
                for (d = 0; d !== i; ++d)
                    t[m + d] = t[f + d];
            }
            ++r;
        }
    } if (a > 0) {
        e[r] = e[a];
        for (f = a * i, m = r * i, d = 0; d !== i; ++d)
            t[m + d] = t[f + d];
        ++r;
    } return r !== e.length && (this.times = fc.arraySlice(e, 0, r), this.values = fc.arraySlice(t, 0, r * i)), this;
    }, clone: function () { var e = fc.arraySlice(this.times, 0), t = fc.arraySlice(this.values, 0), i = new (0, this.constructor)(this.name, e, t); return i.createInterpolant = this.createInterpolant, i; }
    }), xc.prototype = Object.assign(Object.create(bc.prototype), { constructor: xc, ValueTypeName: "bool", ValueBufferType: Array, DefaultInterpolation: 2300, InterpolantFactoryMethodLinear: void 0, InterpolantFactoryMethodSmooth: void 0 }), _c.prototype = Object.assign(Object.create(bc.prototype), { constructor: _c, ValueTypeName: "color" }), wc.prototype = Object.assign(Object.create(bc.prototype), { constructor: wc, ValueTypeName: "number" }), Tc.prototype = Object.assign(Object.create(mc.prototype), {
    constructor: Tc, interpolate_: function (e, t, i, n) {
    for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = e * o, l = (i - t) / (n - t), c = s + o; s !== c; s += 4)
        zt.slerpFlat(r, 0, a, s - o, a, s, l); return r;
    }
    }), Mc.prototype = Object.assign(Object.create(bc.prototype), { constructor: Mc, ValueTypeName: "quaternion", DefaultInterpolation: 2301, InterpolantFactoryMethodLinear: function (e) { return new Tc(this.times, this.values, this.getValueSize(), e); }, InterpolantFactoryMethodSmooth: void 0 }), Ac.prototype = Object.assign(Object.create(bc.prototype), { constructor: Ac, ValueTypeName: "string", ValueBufferType: Array, DefaultInterpolation: 2300, InterpolantFactoryMethodLinear: void 0, InterpolantFactoryMethodSmooth: void 0 }), Sc.prototype = Object.assign(Object.create(bc.prototype), { constructor: Sc, ValueTypeName: "vector" }), Object.assign(Ec, {
    parse: function (e) {
    for (var t = [], i = e.tracks, n = 1 / (e.fps || 1), r = 0, a = i.length; r !== a; ++r)
        t.push(Pc(i[r]).scale(n)); return new Ec(e.name, e.duration, t);
    }, toJSON: function (e) {
    for (var t = [], i = e.tracks, n = { name: e.name, duration: e.duration, tracks: t, uuid: e.uuid }, r = 0, a = i.length; r !== a; ++r)
        t.push(bc.toJSON(i[r])); return n;
    }, CreateFromMorphTargetSequence: function (e, t, i, n) {
    for (var r = t.length, a = [], o = 0; o < r; o++) {
        var s = [], l = [];
        s.push((o + r - 1) % r, o, (o + 1) % r), l.push(0, 1, 0);
        var c = fc.getKeyframeOrder(s);
        s = fc.sortedArray(s, 1, c), l = fc.sortedArray(l, 1, c), n || 0 !== s[0] || (s.push(r), l.push(l[0])), a.push(new wc(".morphTargetInfluences[" + t[o].name + "]", s, l).scale(1 / i));
    } return new Ec(e, -1, a);
    }, findByName: function (e, t) {
    var i = e; if (!Array.isArray(e)) {
        var n = e;
        i = n.geometry && n.geometry.animations || n.animations;
    } for (var r = 0; r < i.length; r++)
            if (i[r].name === t)
                return i[r]; return null;
    }, CreateClipsFromMorphTargetSequences: function (e, t, i) {
    for (var n = {}, r = /^([\w-]*?)([\d]+)$/, a = 0, o = e.length; a < o; a++) {
        var s = e[a], l = s.name.match(r);
        if (l && l.length > 1) {
            var c = n[h = l[1]];
            c || (n[h] = c = []), c.push(s);
        }
    } var u = []; for (var h in n)
            u.push(Ec.CreateFromMorphTargetSequence(h, n[h], t, i)); return u;
    }, parseAnimation: function (e, t) {
    if (!e)
        return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null; for (var i = function (e, t, i, n, r) {
        if (0 !== i.length) {
            var a = [], o = [];
            fc.flattenJSON(i, a, o, n), 0 !== a.length && r.push(new e(t, a, o));
        }
        }, n = [], r = e.name || "default", a = e.length || -1, o = e.fps || 30, s = e.hierarchy || [], l = 0; l < s.length; l++) {
            var c = s[l].keys;
            if (c && 0 !== c.length)
                if (c[0].morphTargets) {
                    for (var u = {}, h = 0; h < c.length; h++)
                        if (c[h].morphTargets)
                            for (var d = 0; d < c[h].morphTargets.length; d++)
                                u[c[h].morphTargets[d]] = -1;
                    for (var p in u) {
                        var f = [], m = [];
                        for (d = 0; d !== c[h].morphTargets.length; ++d) {
                            var v = c[h];
                            f.push(v.time), m.push(v.morphTarget === p ? 1 : 0);
                        }
                        n.push(new wc(".morphTargetInfluence[" + p + "]", f, m));
                    }
                    a = u.length * (o || 1);
                }
                else {
                    var g = ".bones[" + t[l].name + "]";
                    i(Sc, g + ".position", c, "pos", n), i(Mc, g + ".quaternion", c, "rot", n), i(Sc, g + ".scale", c, "scl", n);
                }
        } return 0 === n.length ? null : new Ec(r, a, n);
    }
    }), Object.assign(Ec.prototype, {
    resetDuration: function () {
    for (var e = 0, t = 0, i = this.tracks.length; t !== i; ++t) {
        var n = this.tracks[t];
        e = Math.max(e, n.times[n.times.length - 1]);
    } return this.duration = e, this;
    }, trim: function () {
    for (var e = 0; e < this.tracks.length; e++)
        this.tracks[e].trim(0, this.duration); return this;
    }, validate: function () {
    for (var e = !0, t = 0; t < this.tracks.length; t++)
        e = e && this.tracks[t].validate(); return e;
    }, optimize: function () {
    for (var e = 0; e < this.tracks.length; e++)
        this.tracks[e].optimize(); return this;
    }, clone: function () {
    for (var e = [], t = 0; t < this.tracks.length; t++)
        e.push(this.tracks[t].clone()); return new Ec(this.name, this.duration, e);
    }
    });
    var Cc = {
    enabled: !1, files: {}, add: function (e, t) { !1 !== this.enabled && (this.files[e] = t); }, get: function (e) {
    if (!1 !== this.enabled)
        return this.files[e];
    }, remove: function (e) { delete this.files[e]; }, clear: function () { this.files = {}; }
    };
    function Lc(e, t, i) {
    var n = this, r = !1, a = 0, o = 0, s = void 0, l = []; this.onStart = void 0, this.onLoad = e, this.onProgress = t, this.onError = i, this.itemStart = function (e) { o++ , !1 === r && void 0 !== n.onStart && n.onStart(e, a, o), r = !0; }, this.itemEnd = function (e) { a++ , void 0 !== n.onProgress && n.onProgress(e, a, o), a === o && (r = !1, void 0 !== n.onLoad && n.onLoad()); }, this.itemError = function (e) { void 0 !== n.onError && n.onError(e); }, this.resolveURL = function (e) { return s ? s(e) : e; }, this.setURLModifier = function (e) { return s = e, this; }, this.addHandler = function (e, t) { return l.push(e, t), this; }, this.removeHandler = function (e) { var t = l.indexOf(e); return -1 !== t && l.splice(t, 2), this; }, this.getHandler = function (e) {
    for (var t = 0, i = l.length; t < i; t += 2) {
        var n = l[t], r = l[t + 1];
        if (n.global && (n.lastIndex = 0), n.test(e))
            return r;
    } return null;
    };
    }
    var Rc = new Lc;
    function Ic(e) { this.manager = void 0 !== e ? e : Rc, this.crossOrigin = "anonymous", this.path = "", this.resourcePath = ""; }
    Object.assign(Ic.prototype, { load: function () { }, parse: function () { }, setCrossOrigin: function (e) { return this.crossOrigin = e, this; }, setPath: function (e) { return this.path = e, this; }, setResourcePath: function (e) { return this.resourcePath = e, this; } });
    var Oc = {};
    function Dc(e) { Ic.call(this, e); }
    function Fc(e) { Ic.call(this, e); }
    function kc(e) { Ic.call(this, e); }
    function Nc(e) { Ic.call(this, e); }
    function Bc(e) { Ic.call(this, e); }
    function Gc(e) { Ic.call(this, e); }
    function Hc(e) { Ic.call(this, e); }
    function Uc() { this.type = "Curve", this.arcLengthDivisions = 200; }
    function zc(e, t, i, n, r, a, o, s) { Uc.call(this), this.type = "EllipseCurve", this.aX = e || 0, this.aY = t || 0, this.xRadius = i || 1, this.yRadius = n || 1, this.aStartAngle = r || 0, this.aEndAngle = a || 2 * Math.PI, this.aClockwise = o || !1, this.aRotation = s || 0; }
    function Vc(e, t, i, n, r, a) { zc.call(this, e, t, i, i, n, r, a), this.type = "ArcCurve"; }
    function jc() { var e = 0, t = 0, i = 0, n = 0; function r(r, a, o, s) { e = r, t = o, i = -3 * r + 3 * a - 2 * o - s, n = 2 * r - 2 * a + o + s; } return { initCatmullRom: function (e, t, i, n, a) { r(t, i, a * (i - e), a * (n - t)); }, initNonuniformCatmullRom: function (e, t, i, n, a, o, s) { var l = (t - e) / a - (i - e) / (a + o) + (i - t) / o, c = (i - t) / o - (n - t) / (o + s) + (n - i) / s; r(t, i, l *= o, c *= o); }, calc: function (r) { var a = r * r; return e + t * r + i * a + n * (a * r); } }; }
    Dc.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Dc, load: function (e, t, i, n) {
    void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e); var r = this, a = Cc.get(e); if (void 0 !== a)
        return r.manager.itemStart(e), setTimeout((function () { t && t(a), r.manager.itemEnd(e); }), 0), a; if (void 0 === Oc[e]) {
            var o = e.match(/^data:(.*?)(;base64)?,(.*)$/);
            if (o) {
                var s = o[1], l = !!o[2], c = o[3];
                c = decodeURIComponent(c), l && (c = atob(c));
                try {
                    var u, h = (this.responseType || "").toLowerCase();
                    switch (h) {
                        case "arraybuffer":
                        case "blob":
                            for (var d = new Uint8Array(c.length), p = 0; p < c.length; p++)
                                d[p] = c.charCodeAt(p);
                            u = "blob" === h ? new Blob([d.buffer], { type: s }) : d.buffer;
                            break;
                        case "document":
                            var f = new DOMParser;
                            u = f.parseFromString(c, s);
                            break;
                        case "json":
                            u = JSON.parse(c);
                            break;
                        default: u = c;
                    }
                    setTimeout((function () { t && t(u), r.manager.itemEnd(e); }), 0);
                }
                catch (t) {
                    setTimeout((function () { n && n(t), r.manager.itemError(e), r.manager.itemEnd(e); }), 0);
                }
            }
            else {
                Oc[e] = [], Oc[e].push({ onLoad: t, onProgress: i, onError: n });
                var m = new XMLHttpRequest;
                for (var v in m.open("GET", e, !0), m.addEventListener("load", (function (t) {
                var i = this.response, n = Oc[e]; if (delete Oc[e], 200 === this.status || 0 === this.status) {
                    0 === this.status && console.warn("THREE.FileLoader: HTTP Status 0 received."), Cc.add(e, i);
                    for (var a = 0, o = n.length; a < o; a++) {
                        (s = n[a]).onLoad && s.onLoad(i);
                    }
                    r.manager.itemEnd(e);
                }
                else {
                    for (a = 0, o = n.length; a < o; a++) {
                        var s;
                        (s = n[a]).onError && s.onError(t);
                    }
                    r.manager.itemError(e), r.manager.itemEnd(e);
                }
                }), !1), m.addEventListener("progress", (function (t) {
                for (var i = Oc[e], n = 0, r = i.length; n < r; n++) {
                    var a = i[n];
                    a.onProgress && a.onProgress(t);
                }
                }), !1), m.addEventListener("error", (function (t) {
                var i = Oc[e]; delete Oc[e]; for (var n = 0, a = i.length; n < a; n++) {
                    var o = i[n];
                    o.onError && o.onError(t);
                } r.manager.itemError(e), r.manager.itemEnd(e);
                }), !1), m.addEventListener("abort", (function (t) {
                var i = Oc[e]; delete Oc[e]; for (var n = 0, a = i.length; n < a; n++) {
                    var o = i[n];
                    o.onError && o.onError(t);
                } r.manager.itemError(e), r.manager.itemEnd(e);
                }), !1), void 0 !== this.responseType && (m.responseType = this.responseType), void 0 !== this.withCredentials && (m.withCredentials = this.withCredentials), m.overrideMimeType && m.overrideMimeType(void 0 !== this.mimeType ? this.mimeType : "text/plain"), this.requestHeader)
                    m.setRequestHeader(v, this.requestHeader[v]);
                m.send(null);
            }
            return r.manager.itemStart(e), m;
        } Oc[e].push({ onLoad: t, onProgress: i, onError: n });
    }, setResponseType: function (e) { return this.responseType = e, this; }, setWithCredentials: function (e) { return this.withCredentials = e, this; }, setMimeType: function (e) { return this.mimeType = e, this; }, setRequestHeader: function (e) { return this.requestHeader = e, this; }
    }), Fc.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Fc, load: function (e, t, i, n) { var r = this, a = new Dc(r.manager); a.setPath(r.path), a.load(e, (function (e) { t(r.parse(JSON.parse(e))); }), i, n); }, parse: function (e) {
    for (var t = [], i = 0; i < e.length; i++) {
        var n = Ec.parse(e[i]);
        t.push(n);
    } return t;
    }
    }), kc.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: kc, load: function (e, t, i, n) {
    var r = this, a = [], o = new Us; o.image = a; var s = new Dc(this.manager); function l(l) { s.load(e[l], (function (e) { var i = r.parse(e, !0); a[l] = { width: i.width, height: i.height, format: i.format, mipmaps: i.mipmaps }, 6 === (c += 1) && (1 === i.mipmapCount && (o.minFilter = Ae), o.format = i.format, o.needsUpdate = !0, t && t(o)); }), i, n); } if (s.setPath(this.path), s.setResponseType("arraybuffer"), Array.isArray(e))
        for (var c = 0, u = 0, h = e.length; u < h; ++u)
            l(u);
    else
        s.load(e, (function (e) {
        var i = r.parse(e, !0); if (i.isCubemap)
            for (var n = i.mipmaps.length / i.mipmapCount, s = 0; s < n; s++) {
                a[s] = { mipmaps: [] };
                for (var l = 0; l < i.mipmapCount; l++)
                    a[s].mipmaps.push(i.mipmaps[s * i.mipmapCount + l]), a[s].format = i.format, a[s].width = i.width, a[s].height = i.height;
            }
        else
            o.image.width = i.width, o.image.height = i.height, o.mipmaps = i.mipmaps; 1 === i.mipmapCount && (o.minFilter = Ae), o.format = i.format, o.needsUpdate = !0, t && t(o);
        }), i, n); return o;
    }
    }), Nc.prototype = Object.assign(Object.create(Ic.prototype), { constructor: Nc, load: function (e, t, i, n) { var r = this, a = new Lr, o = new Dc(this.manager); return o.setResponseType("arraybuffer"), o.setPath(this.path), o.load(e, (function (e) { var i = r.parse(e); i && (void 0 !== i.image ? a.image = i.image : void 0 !== i.data && (a.image.width = i.width, a.image.height = i.height, a.image.data = i.data), a.wrapS = void 0 !== i.wrapS ? i.wrapS : xe, a.wrapT = void 0 !== i.wrapT ? i.wrapT : xe, a.magFilter = void 0 !== i.magFilter ? i.magFilter : Ae, a.minFilter = void 0 !== i.minFilter ? i.minFilter : Ae, a.anisotropy = void 0 !== i.anisotropy ? i.anisotropy : 1, void 0 !== i.format && (a.format = i.format), void 0 !== i.type && (a.type = i.type), void 0 !== i.mipmaps && (a.mipmaps = i.mipmaps, a.minFilter = Ee), 1 === i.mipmapCount && (a.minFilter = Ae), a.needsUpdate = !0, t && t(a, i)); }), i, n), a; } }), Bc.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Bc, load: function (e, t, i, n) {
    void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e); var r = this, a = Cc.get(e); if (void 0 !== a)
        return r.manager.itemStart(e), setTimeout((function () { t && t(a), r.manager.itemEnd(e); }), 0), a; var o = document.createElementNS("http://www.w3.org/1999/xhtml", "img"); function s() { o.removeEventListener("load", s, !1), o.removeEventListener("error", l, !1), Cc.add(e, this), t && t(this), r.manager.itemEnd(e); } function l(t) { o.removeEventListener("load", s, !1), o.removeEventListener("error", l, !1), n && n(t), r.manager.itemError(e), r.manager.itemEnd(e); } return o.addEventListener("load", s, !1), o.addEventListener("error", l, !1), "data:" !== e.substr(0, 5) && void 0 !== this.crossOrigin && (o.crossOrigin = this.crossOrigin), r.manager.itemStart(e), o.src = e, o;
    }
    }), Gc.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Gc, load: function (e, t, i, n) {
    var r = new Kr, a = new Bc(this.manager); a.setCrossOrigin(this.crossOrigin), a.setPath(this.path); var o = 0; function s(i) { a.load(e[i], (function (e) { r.images[i] = e, 6 === ++o && (r.needsUpdate = !0, t && t(r)); }), void 0, n); } for (var l = 0; l < e.length; ++l)
        s(l); return r;
    }
    }), Hc.prototype = Object.assign(Object.create(Ic.prototype), { constructor: Hc, load: function (e, t, i, n) { var r = new Zt, a = new Bc(this.manager); return a.setCrossOrigin(this.crossOrigin), a.setPath(this.path), a.load(e, (function (i) { r.image = i; var n = e.search(/\.jpe?g($|\?)/i) > 0 || 0 === e.search(/^data\:image\/jpeg/); r.format = n ? Ue : ze, r.needsUpdate = !0, void 0 !== t && t(r); }), i, n), r; } }), Object.assign(Uc.prototype, {
    getPoint: function () { return console.warn("THREE.Curve: .getPoint() not implemented."), null; }, getPointAt: function (e, t) { var i = this.getUtoTmapping(e); return this.getPoint(i, t); }, getPoints: function (e) {
    void 0 === e && (e = 5); for (var t = [], i = 0; i <= e; i++)
        t.push(this.getPoint(i / e)); return t;
    }, getSpacedPoints: function (e) {
    void 0 === e && (e = 5); for (var t = [], i = 0; i <= e; i++)
        t.push(this.getPointAt(i / e)); return t;
    }, getLength: function () { var e = this.getLengths(); return e[e.length - 1]; }, getLengths: function (e) {
    if (void 0 === e && (e = this.arcLengthDivisions), this.cacheArcLengths && this.cacheArcLengths.length === e + 1 && !this.needsUpdate)
        return this.cacheArcLengths; this.needsUpdate = !1; var t, i, n = [], r = this.getPoint(0), a = 0; for (n.push(0), i = 1; i <= e; i++)
            a += (t = this.getPoint(i / e)).distanceTo(r), n.push(a), r = t; return this.cacheArcLengths = n, n;
    }, updateArcLengths: function () { this.needsUpdate = !0, this.getLengths(); }, getUtoTmapping: function (e, t) {
    var i, n = this.getLengths(), r = 0, a = n.length; i = t || e * n[a - 1]; for (var o, s = 0, l = a - 1; s <= l;)
        if ((o = n[r = Math.floor(s + (l - s) / 2)] - i) < 0)
            s = r + 1;
        else {
            if (!(o > 0)) {
                l = r;
                break;
            }
            l = r - 1;
        } if (n[r = l] === i)
            return r / (a - 1); var c = n[r]; return (r + (i - c) / (n[r + 1] - c)) / (a - 1);
    }, getTangent: function (e) { var t = e - 1e-4, i = e + 1e-4; t < 0 && (t = 0), i > 1 && (i = 1); var n = this.getPoint(t); return this.getPoint(i).clone().sub(n).normalize(); }, getTangentAt: function (e) { var t = this.getUtoTmapping(e); return this.getTangent(t); }, computeFrenetFrames: function (e, t) {
    var i, n, r, a = new Wt, o = [], s = [], l = [], c = new Wt, u = new li; for (i = 0; i <= e; i++)
        n = i / e, o[i] = this.getTangentAt(n), o[i].normalize(); s[0] = new Wt, l[0] = new Wt; var h = Number.MAX_VALUE, d = Math.abs(o[0].x), p = Math.abs(o[0].y), f = Math.abs(o[0].z); for (d <= h && (h = d, a.set(1, 0, 0)), p <= h && (h = p, a.set(0, 1, 0)), f <= h && a.set(0, 0, 1), c.crossVectors(o[0], a).normalize(), s[0].crossVectors(o[0], c), l[0].crossVectors(o[0], s[0]), i = 1; i <= e; i++)
            s[i] = s[i - 1].clone(), l[i] = l[i - 1].clone(), c.crossVectors(o[i - 1], o[i]), c.length() > Number.EPSILON && (c.normalize(), r = Math.acos(Ht.clamp(o[i - 1].dot(o[i]), -1, 1)), s[i].applyMatrix4(u.makeRotationAxis(c, r))), l[i].crossVectors(o[i], s[i]); if (!0 === t)
            for (r = Math.acos(Ht.clamp(s[0].dot(s[e]), -1, 1)), r /= e, o[0].dot(c.crossVectors(s[0], s[e])) > 0 && (r = -r), i = 1; i <= e; i++)
                s[i].applyMatrix4(u.makeRotationAxis(o[i], r * i)), l[i].crossVectors(o[i], s[i]); return { tangents: o, normals: s, binormals: l };
    }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.arcLengthDivisions = e.arcLengthDivisions, this; }, toJSON: function () { var e = { metadata: { version: 4.5, type: "Curve", generator: "Curve.toJSON" } }; return e.arcLengthDivisions = this.arcLengthDivisions, e.type = this.type, e; }, fromJSON: function (e) { return this.arcLengthDivisions = e.arcLengthDivisions, this; }
    }), zc.prototype = Object.create(Uc.prototype), zc.prototype.constructor = zc, zc.prototype.isEllipseCurve = !0, zc.prototype.getPoint = function (e, t) {
    for (var i = t || new Ut, n = 2 * Math.PI, r = this.aEndAngle - this.aStartAngle, a = Math.abs(r) < Number.EPSILON; r < 0;)
        r += n; for (; r > n;)
            r -= n; r < Number.EPSILON && (r = a ? 0 : n), !0 !== this.aClockwise || a || (r === n ? r = -n : r -= n); var o = this.aStartAngle + e * r, s = this.aX + this.xRadius * Math.cos(o), l = this.aY + this.yRadius * Math.sin(o); if (0 !== this.aRotation) {
                var c = Math.cos(this.aRotation), u = Math.sin(this.aRotation), h = s - this.aX, d = l - this.aY;
                s = h * c - d * u + this.aX, l = h * u + d * c + this.aY;
            } return i.set(s, l);
    }, zc.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.aX = e.aX, this.aY = e.aY, this.xRadius = e.xRadius, this.yRadius = e.yRadius, this.aStartAngle = e.aStartAngle, this.aEndAngle = e.aEndAngle, this.aClockwise = e.aClockwise, this.aRotation = e.aRotation, this; }, zc.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.aX = this.aX, e.aY = this.aY, e.xRadius = this.xRadius, e.yRadius = this.yRadius, e.aStartAngle = this.aStartAngle, e.aEndAngle = this.aEndAngle, e.aClockwise = this.aClockwise, e.aRotation = this.aRotation, e; }, zc.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.aX = e.aX, this.aY = e.aY, this.xRadius = e.xRadius, this.yRadius = e.yRadius, this.aStartAngle = e.aStartAngle, this.aEndAngle = e.aEndAngle, this.aClockwise = e.aClockwise, this.aRotation = e.aRotation, this; }, Vc.prototype = Object.create(zc.prototype), Vc.prototype.constructor = Vc, Vc.prototype.isArcCurve = !0;
    var Wc = new Wt, Xc = new jc, Yc = new jc, Qc = new jc;
    function qc(e, t, i, n) { Uc.call(this), this.type = "CatmullRomCurve3", this.points = e || [], this.closed = t || !1, this.curveType = i || "centripetal", this.tension = n || .5; }
    function $c(e, t, i, n, r) { var a = .5 * (n - t), o = .5 * (r - i), s = e * e; return (2 * i - 2 * n + a + o) * (e * s) + (-3 * i + 3 * n - 2 * a - o) * s + a * e + i; }
    function Zc(e, t, i, n) { return function (e, t) { var i = 1 - e; return i * i * t; } (e, t) + function (e, t) { return 2 * (1 - e) * e * t; } (e, i) + function (e, t) { return e * e * t; } (e, n); }
    function Kc(e, t, i, n, r) { return function (e, t) { var i = 1 - e; return i * i * i * t; } (e, t) + function (e, t) { var i = 1 - e; return 3 * i * i * e * t; } (e, i) + function (e, t) { return 3 * (1 - e) * e * e * t; } (e, n) + function (e, t) { return e * e * e * t; } (e, r); }
    function Jc(e, t, i, n) { Uc.call(this), this.type = "CubicBezierCurve", this.v0 = e || new Ut, this.v1 = t || new Ut, this.v2 = i || new Ut, this.v3 = n || new Ut; }
    function eu(e, t, i, n) { Uc.call(this), this.type = "CubicBezierCurve3", this.v0 = e || new Wt, this.v1 = t || new Wt, this.v2 = i || new Wt, this.v3 = n || new Wt; }
    function tu(e, t) { Uc.call(this), this.type = "LineCurve", this.v1 = e || new Ut, this.v2 = t || new Ut; }
    function iu(e, t) { Uc.call(this), this.type = "LineCurve3", this.v1 = e || new Wt, this.v2 = t || new Wt; }
    function nu(e, t, i) { Uc.call(this), this.type = "QuadraticBezierCurve", this.v0 = e || new Ut, this.v1 = t || new Ut, this.v2 = i || new Ut; }
    function ru(e, t, i) { Uc.call(this), this.type = "QuadraticBezierCurve3", this.v0 = e || new Wt, this.v1 = t || new Wt, this.v2 = i || new Wt; }
    function au(e) { Uc.call(this), this.type = "SplineCurve", this.points = e || []; }
    qc.prototype = Object.create(Uc.prototype), qc.prototype.constructor = qc, qc.prototype.isCatmullRomCurve3 = !0, qc.prototype.getPoint = function (e, t) {
    var i, n, r, a, o = t || new Wt, s = this.points, l = s.length, c = (l - (this.closed ? 0 : 1)) * e, u = Math.floor(c), h = c - u; if (this.closed ? u += u > 0 ? 0 : (Math.floor(Math.abs(u) / l) + 1) * l : 0 === h && u === l - 1 && (u = l - 2, h = 1), this.closed || u > 0 ? i = s[(u - 1) % l] : (Wc.subVectors(s[0], s[1]).add(s[0]), i = Wc), n = s[u % l], r = s[(u + 1) % l], this.closed || u + 2 < l ? a = s[(u + 2) % l] : (Wc.subVectors(s[l - 1], s[l - 2]).add(s[l - 1]), a = Wc), "centripetal" === this.curveType || "chordal" === this.curveType) {
        var d = "chordal" === this.curveType ? .5 : .25, p = Math.pow(i.distanceToSquared(n), d), f = Math.pow(n.distanceToSquared(r), d), m = Math.pow(r.distanceToSquared(a), d);
        f < 1e-4 && (f = 1), p < 1e-4 && (p = f), m < 1e-4 && (m = f), Xc.initNonuniformCatmullRom(i.x, n.x, r.x, a.x, p, f, m), Yc.initNonuniformCatmullRom(i.y, n.y, r.y, a.y, p, f, m), Qc.initNonuniformCatmullRom(i.z, n.z, r.z, a.z, p, f, m);
    }
    else
        "catmullrom" === this.curveType && (Xc.initCatmullRom(i.x, n.x, r.x, a.x, this.tension), Yc.initCatmullRom(i.y, n.y, r.y, a.y, this.tension), Qc.initCatmullRom(i.z, n.z, r.z, a.z, this.tension)); return o.set(Xc.calc(h), Yc.calc(h), Qc.calc(h)), o;
    }, qc.prototype.copy = function (e) {
    Uc.prototype.copy.call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) {
        var n = e.points[t];
        this.points.push(n.clone());
    } return this.closed = e.closed, this.curveType = e.curveType, this.tension = e.tension, this;
    }, qc.prototype.toJSON = function () {
    var e = Uc.prototype.toJSON.call(this); e.points = []; for (var t = 0, i = this.points.length; t < i; t++) {
        var n = this.points[t];
        e.points.push(n.toArray());
    } return e.closed = this.closed, e.curveType = this.curveType, e.tension = this.tension, e;
    }, qc.prototype.fromJSON = function (e) {
    Uc.prototype.fromJSON.call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) {
        var n = e.points[t];
        this.points.push((new Wt).fromArray(n));
    } return this.closed = e.closed, this.curveType = e.curveType, this.tension = e.tension, this;
    }, Jc.prototype = Object.create(Uc.prototype), Jc.prototype.constructor = Jc, Jc.prototype.isCubicBezierCurve = !0, Jc.prototype.getPoint = function (e, t) { var i = t || new Ut, n = this.v0, r = this.v1, a = this.v2, o = this.v3; return i.set(Kc(e, n.x, r.x, a.x, o.x), Kc(e, n.y, r.y, a.y, o.y)), i; }, Jc.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this.v3.copy(e.v3), this; }, Jc.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e.v3 = this.v3.toArray(), e; }, Jc.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this.v3.fromArray(e.v3), this; }, eu.prototype = Object.create(Uc.prototype), eu.prototype.constructor = eu, eu.prototype.isCubicBezierCurve3 = !0, eu.prototype.getPoint = function (e, t) { var i = t || new Wt, n = this.v0, r = this.v1, a = this.v2, o = this.v3; return i.set(Kc(e, n.x, r.x, a.x, o.x), Kc(e, n.y, r.y, a.y, o.y), Kc(e, n.z, r.z, a.z, o.z)), i; }, eu.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this.v3.copy(e.v3), this; }, eu.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e.v3 = this.v3.toArray(), e; }, eu.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this.v3.fromArray(e.v3), this; }, tu.prototype = Object.create(Uc.prototype), tu.prototype.constructor = tu, tu.prototype.isLineCurve = !0, tu.prototype.getPoint = function (e, t) { var i = t || new Ut; return 1 === e ? i.copy(this.v2) : (i.copy(this.v2).sub(this.v1), i.multiplyScalar(e).add(this.v1)), i; }, tu.prototype.getPointAt = function (e, t) { return this.getPoint(e, t); }, tu.prototype.getTangent = function () { return this.v2.clone().sub(this.v1).normalize(); }, tu.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.v1.copy(e.v1), this.v2.copy(e.v2), this; }, tu.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e; }, tu.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this; }, iu.prototype = Object.create(Uc.prototype), iu.prototype.constructor = iu, iu.prototype.isLineCurve3 = !0, iu.prototype.getPoint = function (e, t) { var i = t || new Wt; return 1 === e ? i.copy(this.v2) : (i.copy(this.v2).sub(this.v1), i.multiplyScalar(e).add(this.v1)), i; }, iu.prototype.getPointAt = function (e, t) { return this.getPoint(e, t); }, iu.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.v1.copy(e.v1), this.v2.copy(e.v2), this; }, iu.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e; }, iu.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this; }, nu.prototype = Object.create(Uc.prototype), nu.prototype.constructor = nu, nu.prototype.isQuadraticBezierCurve = !0, nu.prototype.getPoint = function (e, t) { var i = t || new Ut, n = this.v0, r = this.v1, a = this.v2; return i.set(Zc(e, n.x, r.x, a.x), Zc(e, n.y, r.y, a.y)), i; }, nu.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this; }, nu.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e; }, nu.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this; }, ru.prototype = Object.create(Uc.prototype), ru.prototype.constructor = ru, ru.prototype.isQuadraticBezierCurve3 = !0, ru.prototype.getPoint = function (e, t) { var i = t || new Wt, n = this.v0, r = this.v1, a = this.v2; return i.set(Zc(e, n.x, r.x, a.x), Zc(e, n.y, r.y, a.y), Zc(e, n.z, r.z, a.z)), i; }, ru.prototype.copy = function (e) { return Uc.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this; }, ru.prototype.toJSON = function () { var e = Uc.prototype.toJSON.call(this); return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e; }, ru.prototype.fromJSON = function (e) { return Uc.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this; }, au.prototype = Object.create(Uc.prototype), au.prototype.constructor = au, au.prototype.isSplineCurve = !0, au.prototype.getPoint = function (e, t) { var i = t || new Ut, n = this.points, r = (n.length - 1) * e, a = Math.floor(r), o = r - a, s = n[0 === a ? a : a - 1], l = n[a], c = n[a > n.length - 2 ? n.length - 1 : a + 1], u = n[a > n.length - 3 ? n.length - 1 : a + 2]; return i.set($c(o, s.x, l.x, c.x, u.x), $c(o, s.y, l.y, c.y, u.y)), i; }, au.prototype.copy = function (e) {
    Uc.prototype.copy.call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) {
        var n = e.points[t];
        this.points.push(n.clone());
    } return this;
    }, au.prototype.toJSON = function () {
    var e = Uc.prototype.toJSON.call(this); e.points = []; for (var t = 0, i = this.points.length; t < i; t++) {
        var n = this.points[t];
        e.points.push(n.toArray());
    } return e;
    }, au.prototype.fromJSON = function (e) {
    Uc.prototype.fromJSON.call(this, e), this.points = []; for (var t = 0, i = e.points.length; t < i; t++) {
        var n = e.points[t];
        this.points.push((new Ut).fromArray(n));
    } return this;
    };
    var ou = Object.freeze({ __proto__: null, ArcCurve: Vc, CatmullRomCurve3: qc, CubicBezierCurve: Jc, CubicBezierCurve3: eu, EllipseCurve: zc, LineCurve: tu, LineCurve3: iu, QuadraticBezierCurve: nu, QuadraticBezierCurve3: ru, SplineCurve: au });
    function su() { Uc.call(this), this.type = "CurvePath", this.curves = [], this.autoClose = !1; }
    function lu(e) { su.call(this), this.type = "Path", this.currentPoint = new Ut, e && this.setFromPoints(e); }
    function cu(e) { lu.call(this, e), this.uuid = Ht.generateUUID(), this.type = "Shape", this.holes = []; }
    function uu(e, t) { Si.call(this), this.type = "Light", this.color = new yn(e), this.intensity = void 0 !== t ? t : 1, this.receiveShadow = void 0; }
    function hu(e, t, i) { uu.call(this, e, i), this.type = "HemisphereLight", this.castShadow = void 0, this.position.copy(Si.DefaultUp), this.updateMatrix(), this.groundColor = new yn(t); }
    function du(e) { this.camera = e, this.bias = 0, this.radius = 1, this.mapSize = new Ut(512, 512), this.map = null, this.mapPass = null, this.matrix = new li, this._frustum = new Or, this._frameExtents = new Ut(1, 1), this._viewportCount = 1, this._viewports = [new Kt(0, 0, 1, 1)]; }
    function pu() { du.call(this, new Ar(50, 1, .5, 500)); }
    function fu(e, t, i, n, r, a) { uu.call(this, e, t), this.type = "SpotLight", this.position.copy(Si.DefaultUp), this.updateMatrix(), this.target = new Si, Object.defineProperty(this, "power", { get: function () { return this.intensity * Math.PI; }, set: function (e) { this.intensity = e / Math.PI; } }), this.distance = void 0 !== i ? i : 0, this.angle = void 0 !== n ? n : Math.PI / 3, this.penumbra = void 0 !== r ? r : 0, this.decay = void 0 !== a ? a : 1, this.shadow = new pu; }
    function mu() { du.call(this, new Ar(90, 1, .5, 500)), this._frameExtents = new Ut(4, 2), this._viewportCount = 6, this._viewports = [new Kt(2, 1, 1, 1), new Kt(0, 1, 1, 1), new Kt(3, 1, 1, 1), new Kt(1, 1, 1, 1), new Kt(3, 0, 1, 1), new Kt(1, 0, 1, 1)], this._cubeDirections = [new Wt(1, 0, 0), new Wt(-1, 0, 0), new Wt(0, 0, 1), new Wt(0, 0, -1), new Wt(0, 1, 0), new Wt(0, -1, 0)], this._cubeUps = [new Wt(0, 1, 0), new Wt(0, 1, 0), new Wt(0, 1, 0), new Wt(0, 1, 0), new Wt(0, 0, 1), new Wt(0, 0, -1)]; }
    function vu(e, t, i, n) { uu.call(this, e, t), this.type = "PointLight", Object.defineProperty(this, "power", { get: function () { return 4 * this.intensity * Math.PI; }, set: function (e) { this.intensity = e / (4 * Math.PI); } }), this.distance = void 0 !== i ? i : 0, this.decay = void 0 !== n ? n : 1, this.shadow = new mu; }
    function gu(e, t, i, n, r, a) { Mr.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = void 0 !== e ? e : -1, this.right = void 0 !== t ? t : 1, this.top = void 0 !== i ? i : 1, this.bottom = void 0 !== n ? n : -1, this.near = void 0 !== r ? r : .1, this.far = void 0 !== a ? a : 2e3, this.updateProjectionMatrix(); }
    function yu() { du.call(this, new gu(-5, 5, 5, -5, .5, 500)); }
    function bu(e, t) { uu.call(this, e, t), this.type = "DirectionalLight", this.position.copy(Si.DefaultUp), this.updateMatrix(), this.target = new Si, this.shadow = new yu; }
    function xu(e, t) { uu.call(this, e, t), this.type = "AmbientLight", this.castShadow = void 0; }
    function _u(e, t, i, n) { uu.call(this, e, t), this.type = "RectAreaLight", this.width = void 0 !== i ? i : 10, this.height = void 0 !== n ? n : 10; }
    function wu(e) { Ic.call(this, e), this.textures = {}; }
    su.prototype = Object.assign(Object.create(Uc.prototype), {
    constructor: su, add: function (e) { this.curves.push(e); }, closePath: function () { var e = this.curves[0].getPoint(0), t = this.curves[this.curves.length - 1].getPoint(1); e.equals(t) || this.curves.push(new tu(t, e)); }, getPoint: function (e) {
    for (var t = e * this.getLength(), i = this.getCurveLengths(), n = 0; n < i.length;) {
        if (i[n] >= t) {
            var r = i[n] - t, a = this.curves[n], o = a.getLength(), s = 0 === o ? 0 : 1 - r / o;
            return a.getPointAt(s);
        }
        n++;
    } return null;
    }, getLength: function () { var e = this.getCurveLengths(); return e[e.length - 1]; }, updateArcLengths: function () { this.needsUpdate = !0, this.cacheLengths = null, this.getCurveLengths(); }, getCurveLengths: function () {
    if (this.cacheLengths && this.cacheLengths.length === this.curves.length)
        return this.cacheLengths; for (var e = [], t = 0, i = 0, n = this.curves.length; i < n; i++)
            t += this.curves[i].getLength(), e.push(t); return this.cacheLengths = e, e;
    }, getSpacedPoints: function (e) {
    void 0 === e && (e = 40); for (var t = [], i = 0; i <= e; i++)
        t.push(this.getPoint(i / e)); return this.autoClose && t.push(t[0]), t;
    }, getPoints: function (e) {
    e = e || 12; for (var t, i = [], n = 0, r = this.curves; n < r.length; n++)
        for (var a = r[n], o = a && a.isEllipseCurve ? 2 * e : a && (a.isLineCurve || a.isLineCurve3) ? 1 : a && a.isSplineCurve ? e * a.points.length : e, s = a.getPoints(o), l = 0; l < s.length; l++) {
            var c = s[l];
            t && t.equals(c) || (i.push(c), t = c);
        } return this.autoClose && i.length > 1 && !i[i.length - 1].equals(i[0]) && i.push(i[0]), i;
    }, copy: function (e) {
    Uc.prototype.copy.call(this, e), this.curves = []; for (var t = 0, i = e.curves.length; t < i; t++) {
        var n = e.curves[t];
        this.curves.push(n.clone());
    } return this.autoClose = e.autoClose, this;
    }, toJSON: function () {
    var e = Uc.prototype.toJSON.call(this); e.autoClose = this.autoClose, e.curves = []; for (var t = 0, i = this.curves.length; t < i; t++) {
        var n = this.curves[t];
        e.curves.push(n.toJSON());
    } return e;
    }, fromJSON: function (e) {
    Uc.prototype.fromJSON.call(this, e), this.autoClose = e.autoClose, this.curves = []; for (var t = 0, i = e.curves.length; t < i; t++) {
        var n = e.curves[t];
        this.curves.push((new ou[n.type]).fromJSON(n));
    } return this;
    }
    }), lu.prototype = Object.assign(Object.create(su.prototype), {
    constructor: lu, setFromPoints: function (e) {
    this.moveTo(e[0].x, e[0].y); for (var t = 1, i = e.length; t < i; t++)
        this.lineTo(e[t].x, e[t].y); return this;
    }, moveTo: function (e, t) { return this.currentPoint.set(e, t), this; }, lineTo: function (e, t) { var i = new tu(this.currentPoint.clone(), new Ut(e, t)); return this.curves.push(i), this.currentPoint.set(e, t), this; }, quadraticCurveTo: function (e, t, i, n) { var r = new nu(this.currentPoint.clone(), new Ut(e, t), new Ut(i, n)); return this.curves.push(r), this.currentPoint.set(i, n), this; }, bezierCurveTo: function (e, t, i, n, r, a) { var o = new Jc(this.currentPoint.clone(), new Ut(e, t), new Ut(i, n), new Ut(r, a)); return this.curves.push(o), this.currentPoint.set(r, a), this; }, splineThru: function (e) { var t = new au([this.currentPoint.clone()].concat(e)); return this.curves.push(t), this.currentPoint.copy(e[e.length - 1]), this; }, arc: function (e, t, i, n, r, a) { var o = this.currentPoint.x, s = this.currentPoint.y; return this.absarc(e + o, t + s, i, n, r, a), this; }, absarc: function (e, t, i, n, r, a) { return this.absellipse(e, t, i, i, n, r, a), this; }, ellipse: function (e, t, i, n, r, a, o, s) { var l = this.currentPoint.x, c = this.currentPoint.y; return this.absellipse(e + l, t + c, i, n, r, a, o, s), this; }, absellipse: function (e, t, i, n, r, a, o, s) {
    var l = new zc(e, t, i, n, r, a, o, s); if (this.curves.length > 0) {
        var c = l.getPoint(0);
        c.equals(this.currentPoint) || this.lineTo(c.x, c.y);
    } this.curves.push(l); var u = l.getPoint(1); return this.currentPoint.copy(u), this;
    }, copy: function (e) { return su.prototype.copy.call(this, e), this.currentPoint.copy(e.currentPoint), this; }, toJSON: function () { var e = su.prototype.toJSON.call(this); return e.currentPoint = this.currentPoint.toArray(), e; }, fromJSON: function (e) { return su.prototype.fromJSON.call(this, e), this.currentPoint.fromArray(e.currentPoint), this; }
    }), cu.prototype = Object.assign(Object.create(lu.prototype), {
    constructor: cu, getPointsHoles: function (e) {
    for (var t = [], i = 0, n = this.holes.length; i < n; i++)
        t[i] = this.holes[i].getPoints(e); return t;
    }, extractPoints: function (e) { return { shape: this.getPoints(e), holes: this.getPointsHoles(e) }; }, copy: function (e) {
    lu.prototype.copy.call(this, e), this.holes = []; for (var t = 0, i = e.holes.length; t < i; t++) {
        var n = e.holes[t];
        this.holes.push(n.clone());
    } return this;
    }, toJSON: function () {
    var e = lu.prototype.toJSON.call(this); e.uuid = this.uuid, e.holes = []; for (var t = 0, i = this.holes.length; t < i; t++) {
        var n = this.holes[t];
        e.holes.push(n.toJSON());
    } return e;
    }, fromJSON: function (e) {
    lu.prototype.fromJSON.call(this, e), this.uuid = e.uuid, this.holes = []; for (var t = 0, i = e.holes.length; t < i; t++) {
        var n = e.holes[t];
        this.holes.push((new lu).fromJSON(n));
    } return this;
    }
    }), uu.prototype = Object.assign(Object.create(Si.prototype), { constructor: uu, isLight: !0, copy: function (e) { return Si.prototype.copy.call(this, e), this.color.copy(e.color), this.intensity = e.intensity, this; }, toJSON: function (e) { var t = Si.prototype.toJSON.call(this, e); return t.object.color = this.color.getHex(), t.object.intensity = this.intensity, void 0 !== this.groundColor && (t.object.groundColor = this.groundColor.getHex()), void 0 !== this.distance && (t.object.distance = this.distance), void 0 !== this.angle && (t.object.angle = this.angle), void 0 !== this.decay && (t.object.decay = this.decay), void 0 !== this.penumbra && (t.object.penumbra = this.penumbra), void 0 !== this.shadow && (t.object.shadow = this.shadow.toJSON()), t; } }), hu.prototype = Object.assign(Object.create(uu.prototype), { constructor: hu, isHemisphereLight: !0, copy: function (e) { return uu.prototype.copy.call(this, e), this.groundColor.copy(e.groundColor), this; } }), Object.assign(du.prototype, { _projScreenMatrix: new li, _lightPositionWorld: new Wt, _lookTarget: new Wt, getViewportCount: function () { return this._viewportCount; }, getFrustum: function () { return this._frustum; }, updateMatrices: function (e) { var t = this.camera, i = this.matrix, n = this._projScreenMatrix, r = this._lookTarget, a = this._lightPositionWorld; a.setFromMatrixPosition(e.matrixWorld), t.position.copy(a), r.setFromMatrixPosition(e.target.matrixWorld), t.lookAt(r), t.updateMatrixWorld(), n.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), this._frustum.setFromMatrix(n), i.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), i.multiply(t.projectionMatrix), i.multiply(t.matrixWorldInverse); }, getViewport: function (e) { return this._viewports[e]; }, getFrameExtents: function () { return this._frameExtents; }, copy: function (e) { return this.camera = e.camera.clone(), this.bias = e.bias, this.radius = e.radius, this.mapSize.copy(e.mapSize), this; }, clone: function () { return (new this.constructor).copy(this); }, toJSON: function () { var e = {}; return 0 !== this.bias && (e.bias = this.bias), 1 !== this.radius && (e.radius = this.radius), 512 === this.mapSize.x && 512 === this.mapSize.y || (e.mapSize = this.mapSize.toArray()), e.camera = this.camera.toJSON(!1).object, delete e.camera.matrix, e; } }), pu.prototype = Object.assign(Object.create(du.prototype), { constructor: pu, isSpotLightShadow: !0, updateMatrices: function (e) { var t = this.camera, i = 2 * Ht.RAD2DEG * e.angle, n = this.mapSize.width / this.mapSize.height, r = e.distance || t.far; i === t.fov && n === t.aspect && r === t.far || (t.fov = i, t.aspect = n, t.far = r, t.updateProjectionMatrix()), du.prototype.updateMatrices.call(this, e); } }), fu.prototype = Object.assign(Object.create(uu.prototype), { constructor: fu, isSpotLight: !0, copy: function (e) { return uu.prototype.copy.call(this, e), this.distance = e.distance, this.angle = e.angle, this.penumbra = e.penumbra, this.decay = e.decay, this.target = e.target.clone(), this.shadow = e.shadow.clone(), this; } }), mu.prototype = Object.assign(Object.create(du.prototype), { constructor: mu, isPointLightShadow: !0, updateMatrices: function (e, t) { void 0 === t && (t = 0); var i = this.camera, n = this.matrix, r = this._lightPositionWorld, a = this._lookTarget, o = this._projScreenMatrix; r.setFromMatrixPosition(e.matrixWorld), i.position.copy(r), a.copy(i.position), a.add(this._cubeDirections[t]), i.up.copy(this._cubeUps[t]), i.lookAt(a), i.updateMatrixWorld(), n.makeTranslation(-r.x, -r.y, -r.z), o.multiplyMatrices(i.projectionMatrix, i.matrixWorldInverse), this._frustum.setFromMatrix(o); } }), vu.prototype = Object.assign(Object.create(uu.prototype), { constructor: vu, isPointLight: !0, copy: function (e) { return uu.prototype.copy.call(this, e), this.distance = e.distance, this.decay = e.decay, this.shadow = e.shadow.clone(), this; } }), gu.prototype = Object.assign(Object.create(Mr.prototype), {
    constructor: gu, isOrthographicCamera: !0, copy: function (e, t) { return Mr.prototype.copy.call(this, e, t), this.left = e.left, this.right = e.right, this.top = e.top, this.bottom = e.bottom, this.near = e.near, this.far = e.far, this.zoom = e.zoom, this.view = null === e.view ? null : Object.assign({}, e.view), this; }, setViewOffset: function (e, t, i, n, r, a) { null === this.view && (this.view = { enabled: !0, fullWidth: 1, fullHeight: 1, offsetX: 0, offsetY: 0, width: 1, height: 1 }), this.view.enabled = !0, this.view.fullWidth = e, this.view.fullHeight = t, this.view.offsetX = i, this.view.offsetY = n, this.view.width = r, this.view.height = a, this.updateProjectionMatrix(); }, clearViewOffset: function () { null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix(); }, updateProjectionMatrix: function () {
    var e = (this.right - this.left) / (2 * this.zoom), t = (this.top - this.bottom) / (2 * this.zoom), i = (this.right + this.left) / 2, n = (this.top + this.bottom) / 2, r = i - e, a = i + e, o = n + t, s = n - t; if (null !== this.view && this.view.enabled) {
        var l = this.zoom / (this.view.width / this.view.fullWidth), c = this.zoom / (this.view.height / this.view.fullHeight), u = (this.right - this.left) / this.view.width, h = (this.top - this.bottom) / this.view.height;
        a = (r += u * (this.view.offsetX / l)) + u * (this.view.width / l), s = (o -= h * (this.view.offsetY / c)) - h * (this.view.height / c);
    } this.projectionMatrix.makeOrthographic(r, a, o, s, this.near, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix);
    }, toJSON: function (e) { var t = Si.prototype.toJSON.call(this, e); return t.object.zoom = this.zoom, t.object.left = this.left, t.object.right = this.right, t.object.top = this.top, t.object.bottom = this.bottom, t.object.near = this.near, t.object.far = this.far, null !== this.view && (t.object.view = Object.assign({}, this.view)), t; }
    }), yu.prototype = Object.assign(Object.create(du.prototype), { constructor: yu, isDirectionalLightShadow: !0, updateMatrices: function (e) { du.prototype.updateMatrices.call(this, e); } }), bu.prototype = Object.assign(Object.create(uu.prototype), { constructor: bu, isDirectionalLight: !0, copy: function (e) { return uu.prototype.copy.call(this, e), this.target = e.target.clone(), this.shadow = e.shadow.clone(), this; } }), xu.prototype = Object.assign(Object.create(uu.prototype), { constructor: xu, isAmbientLight: !0 }), _u.prototype = Object.assign(Object.create(uu.prototype), { constructor: _u, isRectAreaLight: !0, copy: function (e) { return uu.prototype.copy.call(this, e), this.width = e.width, this.height = e.height, this; }, toJSON: function (e) { var t = uu.prototype.toJSON.call(this, e); return t.object.width = this.width, t.object.height = this.height, t; } }), wu.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: wu, load: function (e, t, i, n) { var r = this, a = new Dc(r.manager); a.setPath(r.path), a.load(e, (function (e) { t(r.parse(JSON.parse(e))); }), i, n); }, parse: function (e) {
    var t = this.textures; function i(e) { return void 0 === t[e] && console.warn("THREE.MaterialLoader: Undefined texture", e), t[e]; } var n = new pc[e.type]; if (void 0 !== e.uuid && (n.uuid = e.uuid), void 0 !== e.name && (n.name = e.name), void 0 !== e.color && n.color.setHex(e.color), void 0 !== e.roughness && (n.roughness = e.roughness), void 0 !== e.metalness && (n.metalness = e.metalness), void 0 !== e.sheen && (n.sheen = (new yn).setHex(e.sheen)), void 0 !== e.emissive && n.emissive.setHex(e.emissive), void 0 !== e.specular && n.specular.setHex(e.specular), void 0 !== e.shininess && (n.shininess = e.shininess), void 0 !== e.clearcoat && (n.clearcoat = e.clearcoat), void 0 !== e.clearcoatRoughness && (n.clearcoatRoughness = e.clearcoatRoughness), void 0 !== e.vertexColors && (n.vertexColors = e.vertexColors), void 0 !== e.fog && (n.fog = e.fog), void 0 !== e.flatShading && (n.flatShading = e.flatShading), void 0 !== e.blending && (n.blending = e.blending), void 0 !== e.combine && (n.combine = e.combine), void 0 !== e.side && (n.side = e.side), void 0 !== e.opacity && (n.opacity = e.opacity), void 0 !== e.transparent && (n.transparent = e.transparent), void 0 !== e.alphaTest && (n.alphaTest = e.alphaTest), void 0 !== e.depthTest && (n.depthTest = e.depthTest), void 0 !== e.depthWrite && (n.depthWrite = e.depthWrite), void 0 !== e.colorWrite && (n.colorWrite = e.colorWrite), void 0 !== e.stencilWrite && (n.stencilWrite = e.stencilWrite), void 0 !== e.stencilWriteMask && (n.stencilWriteMask = e.stencilWriteMask), void 0 !== e.stencilFunc && (n.stencilFunc = e.stencilFunc), void 0 !== e.stencilRef && (n.stencilRef = e.stencilRef), void 0 !== e.stencilFuncMask && (n.stencilFuncMask = e.stencilFuncMask), void 0 !== e.stencilFail && (n.stencilFail = e.stencilFail), void 0 !== e.stencilZFail && (n.stencilZFail = e.stencilZFail), void 0 !== e.stencilZPass && (n.stencilZPass = e.stencilZPass), void 0 !== e.wireframe && (n.wireframe = e.wireframe), void 0 !== e.wireframeLinewidth && (n.wireframeLinewidth = e.wireframeLinewidth), void 0 !== e.wireframeLinecap && (n.wireframeLinecap = e.wireframeLinecap), void 0 !== e.wireframeLinejoin && (n.wireframeLinejoin = e.wireframeLinejoin), void 0 !== e.rotation && (n.rotation = e.rotation), 1 !== e.linewidth && (n.linewidth = e.linewidth), void 0 !== e.dashSize && (n.dashSize = e.dashSize), void 0 !== e.gapSize && (n.gapSize = e.gapSize), void 0 !== e.scale && (n.scale = e.scale), void 0 !== e.polygonOffset && (n.polygonOffset = e.polygonOffset), void 0 !== e.polygonOffsetFactor && (n.polygonOffsetFactor = e.polygonOffsetFactor), void 0 !== e.polygonOffsetUnits && (n.polygonOffsetUnits = e.polygonOffsetUnits), void 0 !== e.skinning && (n.skinning = e.skinning), void 0 !== e.morphTargets && (n.morphTargets = e.morphTargets), void 0 !== e.morphNormals && (n.morphNormals = e.morphNormals), void 0 !== e.dithering && (n.dithering = e.dithering), void 0 !== e.visible && (n.visible = e.visible), void 0 !== e.toneMapped && (n.toneMapped = e.toneMapped), void 0 !== e.userData && (n.userData = e.userData), void 0 !== e.uniforms)
        for (var r in e.uniforms) {
            var a = e.uniforms[r];
            switch (n.uniforms[r] = {}, a.type) {
                case "t":
                    n.uniforms[r].value = i(a.value);
                    break;
                case "c":
                    n.uniforms[r].value = (new yn).setHex(a.value);
                    break;
                case "v2":
                    n.uniforms[r].value = (new Ut).fromArray(a.value);
                    break;
                case "v3":
                    n.uniforms[r].value = (new Wt).fromArray(a.value);
                    break;
                case "v4":
                    n.uniforms[r].value = (new Kt).fromArray(a.value);
                    break;
                case "m3": n.uniforms[r].value = (new Qt).fromArray(a.value);
                case "m4":
                    n.uniforms[r].value = (new li).fromArray(a.value);
                    break;
                default: n.uniforms[r].value = a.value;
            }
        } if (void 0 !== e.defines && (n.defines = e.defines), void 0 !== e.vertexShader && (n.vertexShader = e.vertexShader), void 0 !== e.fragmentShader && (n.fragmentShader = e.fragmentShader), void 0 !== e.extensions)
            for (var o in e.extensions)
                n.extensions[o] = e.extensions[o]; if (void 0 !== e.shading && (n.flatShading = 1 === e.shading), void 0 !== e.size && (n.size = e.size), void 0 !== e.sizeAttenuation && (n.sizeAttenuation = e.sizeAttenuation), void 0 !== e.map && (n.map = i(e.map)), void 0 !== e.matcap && (n.matcap = i(e.matcap)), void 0 !== e.alphaMap && (n.alphaMap = i(e.alphaMap), n.transparent = !0), void 0 !== e.bumpMap && (n.bumpMap = i(e.bumpMap)), void 0 !== e.bumpScale && (n.bumpScale = e.bumpScale), void 0 !== e.normalMap && (n.normalMap = i(e.normalMap)), void 0 !== e.normalMapType && (n.normalMapType = e.normalMapType), void 0 !== e.normalScale) {
                    var s = e.normalScale;
                    !1 === Array.isArray(s) && (s = [s, s]), n.normalScale = (new Ut).fromArray(s);
                } return void 0 !== e.displacementMap && (n.displacementMap = i(e.displacementMap)), void 0 !== e.displacementScale && (n.displacementScale = e.displacementScale), void 0 !== e.displacementBias && (n.displacementBias = e.displacementBias), void 0 !== e.roughnessMap && (n.roughnessMap = i(e.roughnessMap)), void 0 !== e.metalnessMap && (n.metalnessMap = i(e.metalnessMap)), void 0 !== e.emissiveMap && (n.emissiveMap = i(e.emissiveMap)), void 0 !== e.emissiveIntensity && (n.emissiveIntensity = e.emissiveIntensity), void 0 !== e.specularMap && (n.specularMap = i(e.specularMap)), void 0 !== e.envMap && (n.envMap = i(e.envMap)), void 0 !== e.envMapIntensity && (n.envMapIntensity = e.envMapIntensity), void 0 !== e.reflectivity && (n.reflectivity = e.reflectivity), void 0 !== e.refractionRatio && (n.refractionRatio = e.refractionRatio), void 0 !== e.lightMap && (n.lightMap = i(e.lightMap)), void 0 !== e.lightMapIntensity && (n.lightMapIntensity = e.lightMapIntensity), void 0 !== e.aoMap && (n.aoMap = i(e.aoMap)), void 0 !== e.aoMapIntensity && (n.aoMapIntensity = e.aoMapIntensity), void 0 !== e.gradientMap && (n.gradientMap = i(e.gradientMap)), void 0 !== e.clearcoatNormalMap && (n.clearcoatNormalMap = i(e.clearcoatNormalMap)), void 0 !== e.clearcoatNormalScale && (n.clearcoatNormalScale = (new Ut).fromArray(e.clearcoatNormalScale)), n;
    }, setTextures: function (e) { return this.textures = e, this; }
    });
    var Tu = {
    decodeText: function (e) {
    if ("undefined" != typeof TextDecoder)
        return (new TextDecoder).decode(e); for (var t = "", i = 0, n = e.length; i < n; i++)
            t += String.fromCharCode(e[i]); try {
                return decodeURIComponent(escape(t));
            }
        catch (e) {
            return t;
        }
    }, extractUrlBase: function (e) { var t = e.lastIndexOf("/"); return -1 === t ? "./" : e.substr(0, t + 1); }
    };
    function Mu() { Wn.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0; }
    function Au(e, t, i, n) { "number" == typeof i && (n = i, i = !1, console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")), Sn.call(this, e, t, i), this.meshPerAttribute = n || 1; }
    function Su(e) { Ic.call(this, e); }
    Mu.prototype = Object.assign(Object.create(Wn.prototype), { constructor: Mu, isInstancedBufferGeometry: !0, copy: function (e) { return Wn.prototype.copy.call(this, e), this.maxInstancedCount = e.maxInstancedCount, this; }, clone: function () { return (new this.constructor).copy(this); }, toJSON: function () { var e = Wn.prototype.toJSON.call(this); return e.maxInstancedCount = this.maxInstancedCount, e.isInstancedBufferGeometry = !0, e; } }), Au.prototype = Object.assign(Object.create(Sn.prototype), { constructor: Au, isInstancedBufferAttribute: !0, copy: function (e) { return Sn.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this; }, toJSON: function () { var e = Sn.prototype.toJSON.call(this); return e.meshPerAttribute = this.meshPerAttribute, e.isInstancedBufferAttribute = !0, e; } }), Su.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Su, load: function (e, t, i, n) { var r = this, a = new Dc(r.manager); a.setPath(r.path), a.load(e, (function (e) { t(r.parse(JSON.parse(e))); }), i, n); }, parse: function (e) {
    var t = e.isInstancedBufferGeometry ? new Mu : new Wn, i = e.data.index; if (void 0 !== i) {
        var n = new Eu[i.type](i.array);
        t.setIndex(new Sn(n, 1));
    } var r = e.data.attributes; for (var a in r) {
        var o = r[a], s = (n = new Eu[o.type](o.array), new (o.isInstancedBufferAttribute ? Au : Sn)(n, o.itemSize, o.normalized));
        void 0 !== o.name && (s.name = o.name), t.setAttribute(a, s);
    } var l = e.data.morphAttributes; if (l)
            for (var a in l) {
                for (var c = l[a], u = [], h = 0, d = c.length; h < d; h++) {
                    o = c[h], s = new Sn(n = new Eu[o.type](o.array), o.itemSize, o.normalized);
                    void 0 !== o.name && (s.name = o.name), u.push(s);
                }
                t.morphAttributes[a] = u;
            } e.data.morphTargetsRelative && (t.morphTargetsRelative = !0); var p = e.data.groups || e.data.drawcalls || e.data.offsets; if (void 0 !== p) {
                h = 0;
                for (var f = p.length; h !== f; ++h) {
                    var m = p[h];
                    t.addGroup(m.start, m.count, m.materialIndex);
                }
            } var v = e.data.boundingSphere; if (void 0 !== v) {
                var g = new Wt;
                void 0 !== v.center && g.fromArray(v.center), t.boundingSphere = new ji(g, v.radius);
            } return e.name && (t.name = e.name), e.userData && (t.userData = e.userData), t;
    }
    });
    var Eu = { Int8Array: Int8Array, Uint8Array: Uint8Array, Uint8ClampedArray: "undefined" != typeof Uint8ClampedArray ? Uint8ClampedArray : Uint8Array, Int16Array: Int16Array, Uint16Array: Uint16Array, Int32Array: Int32Array, Uint32Array: Uint32Array, Float32Array: Float32Array, Float64Array: Float64Array };
    function Pu(e) { Ic.call(this, e); }
    Pu.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Pu, load: function (e, t, i, n) {
    var r = this, a = "" === this.path ? Tu.extractUrlBase(e) : this.path; this.resourcePath = this.resourcePath || a; var o = new Dc(r.manager); o.setPath(this.path), o.load(e, (function (i) {
    var a = null; try {
        a = JSON.parse(i);
    }
        catch (t) {
            return void 0 !== n && n(t), void console.error("THREE:ObjectLoader: Can't parse " + e + ".", t.message);
        } var o = a.metadata; void 0 !== o && void 0 !== o.type && "geometry" !== o.type.toLowerCase() ? r.parse(a, t) : console.error("THREE.ObjectLoader: Can't load " + e);
    }), i, n);
    }, parse: function (e, t) { var i = this.parseShape(e.shapes), n = this.parseGeometries(e.geometries, i), r = this.parseImages(e.images, (function () { void 0 !== t && t(s); })), a = this.parseTextures(e.textures, r), o = this.parseMaterials(e.materials, a), s = this.parseObject(e.object, n, o); return e.animations && (s.animations = this.parseAnimations(e.animations)), void 0 !== e.images && 0 !== e.images.length || void 0 !== t && t(s), s; }, parseShape: function (e) {
    var t = {}; if (void 0 !== e)
        for (var i = 0, n = e.length; i < n; i++) {
            var r = (new cu).fromJSON(e[i]);
            t[r.uuid] = r;
        } return t;
    }, parseGeometries: function (e, t) {
    var i = {}; if (void 0 !== e)
        for (var n = new Su, r = 0, a = e.length; r < a; r++) {
            var o, s = e[r];
            switch (s.type) {
                case "PlaneGeometry":
                case "PlaneBufferGeometry":
                    o = new ic[s.type](s.width, s.height, s.widthSegments, s.heightSegments);
                    break;
                case "BoxGeometry":
                case "BoxBufferGeometry":
                case "CubeGeometry":
                    o = new ic[s.type](s.width, s.height, s.depth, s.widthSegments, s.heightSegments, s.depthSegments);
                    break;
                case "CircleGeometry":
                case "CircleBufferGeometry":
                    o = new ic[s.type](s.radius, s.segments, s.thetaStart, s.thetaLength);
                    break;
                case "CylinderGeometry":
                case "CylinderBufferGeometry":
                    o = new ic[s.type](s.radiusTop, s.radiusBottom, s.height, s.radialSegments, s.heightSegments, s.openEnded, s.thetaStart, s.thetaLength);
                    break;
                case "ConeGeometry":
                case "ConeBufferGeometry":
                    o = new ic[s.type](s.radius, s.height, s.radialSegments, s.heightSegments, s.openEnded, s.thetaStart, s.thetaLength);
                    break;
                case "SphereGeometry":
                case "SphereBufferGeometry":
                    o = new ic[s.type](s.radius, s.widthSegments, s.heightSegments, s.phiStart, s.phiLength, s.thetaStart, s.thetaLength);
                    break;
                case "DodecahedronGeometry":
                case "DodecahedronBufferGeometry":
                case "IcosahedronGeometry":
                case "IcosahedronBufferGeometry":
                case "OctahedronGeometry":
                case "OctahedronBufferGeometry":
                case "TetrahedronGeometry":
                case "TetrahedronBufferGeometry":
                    o = new ic[s.type](s.radius, s.detail);
                    break;
                case "RingGeometry":
                case "RingBufferGeometry":
                    o = new ic[s.type](s.innerRadius, s.outerRadius, s.thetaSegments, s.phiSegments, s.thetaStart, s.thetaLength);
                    break;
                case "TorusGeometry":
                case "TorusBufferGeometry":
                    o = new ic[s.type](s.radius, s.tube, s.radialSegments, s.tubularSegments, s.arc);
                    break;
                case "TorusKnotGeometry":
                case "TorusKnotBufferGeometry":
                    o = new ic[s.type](s.radius, s.tube, s.tubularSegments, s.radialSegments, s.p, s.q);
                    break;
                case "TubeGeometry":
                case "TubeBufferGeometry":
                    o = new ic[s.type]((new ou[s.path.type]).fromJSON(s.path), s.tubularSegments, s.radius, s.radialSegments, s.closed);
                    break;
                case "LatheGeometry":
                case "LatheBufferGeometry":
                    o = new ic[s.type](s.points, s.segments, s.phiStart, s.phiLength);
                    break;
                case "PolyhedronGeometry":
                case "PolyhedronBufferGeometry":
                    o = new ic[s.type](s.vertices, s.indices, s.radius, s.details);
                    break;
                case "ShapeGeometry":
                case "ShapeBufferGeometry":
                    for (var l = [], c = 0, u = s.shapes.length; c < u; c++) {
                        var h = t[s.shapes[c]];
                        l.push(h);
                    }
                    o = new ic[s.type](l, s.curveSegments);
                    break;
                case "ExtrudeGeometry":
                case "ExtrudeBufferGeometry":
                    for (l = [], c = 0, u = s.shapes.length; c < u; c++) {
                        h = t[s.shapes[c]];
                        l.push(h);
                    }
                    var d = s.options.extrudePath;
                    void 0 !== d && (s.options.extrudePath = (new ou[d.type]).fromJSON(d)), o = new ic[s.type](l, s.options);
                    break;
                case "BufferGeometry":
                case "InstancedBufferGeometry":
                    o = n.parse(s);
                    break;
                case "Geometry":
                    if ("THREE" in window && "LegacyJSONLoader" in THREE)
                        o = (new THREE.LegacyJSONLoader).parse(s, this.resourcePath).geometry;
                    else
                        console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');
                    break;
                default:
                    console.warn('THREE.ObjectLoader: Unsupported geometry type "' + s.type + '"');
                    continue;
            }
            o.uuid = s.uuid, void 0 !== s.name && (o.name = s.name), !0 === o.isBufferGeometry && void 0 !== s.userData && (o.userData = s.userData), i[s.uuid] = o;
        } return i;
    }, parseMaterials: function (e, t) {
    var i = {}, n = {}; if (void 0 !== e) {
        var r = new wu;
        r.setTextures(t);
        for (var a = 0, o = e.length; a < o; a++) {
            var s = e[a];
            if ("MultiMaterial" === s.type) {
                for (var l = [], c = 0; c < s.materials.length; c++) {
                    var u = s.materials[c];
                    void 0 === i[u.uuid] && (i[u.uuid] = r.parse(u)), l.push(i[u.uuid]);
                }
                n[s.uuid] = l;
            }
            else
                void 0 === i[s.uuid] && (i[s.uuid] = r.parse(s)), n[s.uuid] = i[s.uuid];
        }
    } return n;
    }, parseAnimations: function (e) {
    for (var t = [], i = 0; i < e.length; i++) {
        var n = e[i], r = Ec.parse(n);
        void 0 !== n.uuid && (r.uuid = n.uuid), t.push(r);
    } return t;
    }, parseImages: function (e, t) {
    var i = this, n = {}; function r(e) { return i.manager.itemStart(e), a.load(e, (function () { i.manager.itemEnd(e); }), void 0, (function () { i.manager.itemError(e), i.manager.itemEnd(e); })); } if (void 0 !== e && e.length > 0) {
        var a = new Bc(new Lc(t));
        a.setCrossOrigin(this.crossOrigin);
        for (var o = 0, s = e.length; o < s; o++) {
            var l = e[o], c = l.url;
            if (Array.isArray(c)) {
                n[l.uuid] = [];
                for (var u = 0, h = c.length; u < h; u++) {
                    var d = c[u], p = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(d) ? d : i.resourcePath + d;
                    n[l.uuid].push(r(p));
                }
            }
            else {
                p = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url) ? l.url : i.resourcePath + l.url;
                n[l.uuid] = r(p);
            }
        }
    } return n;
    }, parseTextures: function (e, t) {
    function i(e, t) { return "number" == typeof e ? e : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", e), t[e]); } var n = {}; if (void 0 !== e)
        for (var r = 0, a = e.length; r < a; r++) {
            var o, s = e[r];
            void 0 === s.image && console.warn('THREE.ObjectLoader: No "image" specified for', s.uuid), void 0 === t[s.image] && console.warn("THREE.ObjectLoader: Undefined image", s.image), (o = Array.isArray(t[s.image]) ? new Kr(t[s.image]) : new Zt(t[s.image])).needsUpdate = !0, o.uuid = s.uuid, void 0 !== s.name && (o.name = s.name), void 0 !== s.mapping && (o.mapping = i(s.mapping, Lu)), void 0 !== s.offset && o.offset.fromArray(s.offset), void 0 !== s.repeat && o.repeat.fromArray(s.repeat), void 0 !== s.center && o.center.fromArray(s.center), void 0 !== s.rotation && (o.rotation = s.rotation), void 0 !== s.wrap && (o.wrapS = i(s.wrap[0], Ru), o.wrapT = i(s.wrap[1], Ru)), void 0 !== s.format && (o.format = s.format), void 0 !== s.type && (o.type = s.type), void 0 !== s.encoding && (o.encoding = s.encoding), void 0 !== s.minFilter && (o.minFilter = i(s.minFilter, Iu)), void 0 !== s.magFilter && (o.magFilter = i(s.magFilter, Iu)), void 0 !== s.anisotropy && (o.anisotropy = s.anisotropy), void 0 !== s.flipY && (o.flipY = s.flipY), void 0 !== s.premultiplyAlpha && (o.premultiplyAlpha = s.premultiplyAlpha), void 0 !== s.unpackAlignment && (o.unpackAlignment = s.unpackAlignment), n[s.uuid] = o;
        } return n;
    }, parseObject: function (e, t, i) {
    var n; function r(e) { return void 0 === t[e] && console.warn("THREE.ObjectLoader: Undefined geometry", e), t[e]; } function a(e) {
    if (void 0 !== e) {
        if (Array.isArray(e)) {
            for (var t = [], n = 0, r = e.length; n < r; n++) {
                var a = e[n];
                void 0 === i[a] && console.warn("THREE.ObjectLoader: Undefined material", a), t.push(i[a]);
            }
            return t;
        }
        return void 0 === i[e] && console.warn("THREE.ObjectLoader: Undefined material", e), i[e];
    }
    } switch (e.type) {
        case "Scene":
            n = new Ei, void 0 !== e.background && Number.isInteger(e.background) && (n.background = new yn(e.background)), void 0 !== e.fog && ("Fog" === e.fog.type ? n.fog = new Wo(e.fog.color, e.fog.near, e.fog.far) : "FogExp2" === e.fog.type && (n.fog = new jo(e.fog.color, e.fog.density)));
            break;
        case "PerspectiveCamera":
            n = new Ar(e.fov, e.aspect, e.near, e.far), void 0 !== e.focus && (n.focus = e.focus), void 0 !== e.zoom && (n.zoom = e.zoom), void 0 !== e.filmGauge && (n.filmGauge = e.filmGauge), void 0 !== e.filmOffset && (n.filmOffset = e.filmOffset), void 0 !== e.view && (n.view = Object.assign({}, e.view));
            break;
        case "OrthographicCamera":
            n = new gu(e.left, e.right, e.top, e.bottom, e.near, e.far), void 0 !== e.zoom && (n.zoom = e.zoom), void 0 !== e.view && (n.view = Object.assign({}, e.view));
            break;
        case "AmbientLight":
            n = new xu(e.color, e.intensity);
            break;
        case "DirectionalLight":
            n = new bu(e.color, e.intensity);
            break;
        case "PointLight":
            n = new vu(e.color, e.intensity, e.distance, e.decay);
            break;
        case "RectAreaLight":
            n = new _u(e.color, e.intensity, e.width, e.height);
            break;
        case "SpotLight":
            n = new fu(e.color, e.intensity, e.distance, e.angle, e.penumbra, e.decay);
            break;
        case "HemisphereLight":
            n = new hu(e.color, e.groundColor, e.intensity);
            break;
        case "SkinnedMesh": console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");
        case "Mesh":
            var o = r(e.geometry), s = a(e.material);
            n = o.bones && o.bones.length > 0 ? new ds(o, s) : new cr(o, s);
            break;
        case "InstancedMesh":
            o = r(e.geometry), s = a(e.material);
            var l = e.count, c = e.instanceMatrix;
            (n = new _s(o, s, l)).instanceMatrix = new Sn(new Float32Array(c.array), 16);
            break;
        case "LOD":
            n = new hs;
            break;
        case "Line":
            n = new Ps(r(e.geometry), a(e.material), e.mode);
            break;
        case "LineLoop":
            n = new Is(r(e.geometry), a(e.material));
            break;
        case "LineSegments":
            n = new Rs(r(e.geometry), a(e.material));
            break;
        case "PointCloud":
        case "Points":
            n = new Bs(r(e.geometry), a(e.material));
            break;
        case "Sprite":
            n = new ss(a(e.material));
            break;
        case "Group":
            n = new Fo;
            break;
        default: n = new Si;
    } if (n.uuid = e.uuid, void 0 !== e.name && (n.name = e.name), void 0 !== e.matrix ? (n.matrix.fromArray(e.matrix), void 0 !== e.matrixAutoUpdate && (n.matrixAutoUpdate = e.matrixAutoUpdate), n.matrixAutoUpdate && n.matrix.decompose(n.position, n.quaternion, n.scale)) : (void 0 !== e.position && n.position.fromArray(e.position), void 0 !== e.rotation && n.rotation.fromArray(e.rotation), void 0 !== e.quaternion && n.quaternion.fromArray(e.quaternion), void 0 !== e.scale && n.scale.fromArray(e.scale)), void 0 !== e.castShadow && (n.castShadow = e.castShadow), void 0 !== e.receiveShadow && (n.receiveShadow = e.receiveShadow), e.shadow && (void 0 !== e.shadow.bias && (n.shadow.bias = e.shadow.bias), void 0 !== e.shadow.radius && (n.shadow.radius = e.shadow.radius), void 0 !== e.shadow.mapSize && n.shadow.mapSize.fromArray(e.shadow.mapSize), void 0 !== e.shadow.camera && (n.shadow.camera = this.parseObject(e.shadow.camera))), void 0 !== e.visible && (n.visible = e.visible), void 0 !== e.frustumCulled && (n.frustumCulled = e.frustumCulled), void 0 !== e.renderOrder && (n.renderOrder = e.renderOrder), void 0 !== e.userData && (n.userData = e.userData), void 0 !== e.layers && (n.layers.mask = e.layers), void 0 !== e.drawMode && n.setDrawMode(e.drawMode), void 0 !== e.children)
            for (var u = e.children, h = 0; h < u.length; h++)
                n.add(this.parseObject(u[h], t, i)); if ("LOD" === e.type) {
                    void 0 !== e.autoUpdate && (n.autoUpdate = e.autoUpdate);
                    for (var d = e.levels, p = 0; p < d.length; p++) {
                        var f = d[p], m = n.getObjectByProperty("uuid", f.object);
                        void 0 !== m && n.addLevel(m, f.distance);
                    }
                } return n;
    }
    });
    var Cu, Lu = { UVMapping: 300, CubeReflectionMapping: de, CubeRefractionMapping: pe, EquirectangularReflectionMapping: fe, EquirectangularRefractionMapping: me, SphericalReflectionMapping: ve, CubeUVReflectionMapping: ge, CubeUVRefractionMapping: ye }, Ru = { RepeatWrapping: be, ClampToEdgeWrapping: xe, MirroredRepeatWrapping: _e }, Iu = { NearestFilter: we, NearestMipmapNearestFilter: Te, NearestMipmapLinearFilter: Me, LinearFilter: Ae, LinearMipmapNearestFilter: Se, LinearMipmapLinearFilter: Ee };
    function Ou(e) { "undefined" == typeof createImageBitmap && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), "undefined" == typeof fetch && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), Ic.call(this, e), this.options = void 0; }
    function Du() { this.type = "ShapePath", this.color = new yn, this.subPaths = [], this.currentPath = null; }
    function Fu(e) { this.type = "Font", this.data = e; }
    function ku(e, t, i, n, r) {
    var a = r.glyphs[e] || r.glyphs["?"]; if (a) {
        var o, s, l, c, u, h, d, p, f = new Du;
        if (a.o)
            for (var m = a._cachedOutline || (a._cachedOutline = a.o.split(" ")), v = 0, g = m.length; v < g;) {
                switch (m[v++]) {
                    case "m":
                        o = m[v++] * t + i, s = m[v++] * t + n, f.moveTo(o, s);
                        break;
                    case "l":
                        o = m[v++] * t + i, s = m[v++] * t + n, f.lineTo(o, s);
                        break;
                    case "q":
                        l = m[v++] * t + i, c = m[v++] * t + n, u = m[v++] * t + i, h = m[v++] * t + n, f.quadraticCurveTo(u, h, l, c);
                        break;
                    case "b": l = m[v++] * t + i, c = m[v++] * t + n, u = m[v++] * t + i, h = m[v++] * t + n, d = m[v++] * t + i, p = m[v++] * t + n, f.bezierCurveTo(u, h, d, p, l, c);
                }
            }
        return { offsetX: a.ha * t, path: f };
    } console.error('THREE.Font: character "' + e + '" does not exists in font family ' + r.familyName + ".");
    }
    function Nu(e) { Ic.call(this, e); }
    Ou.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Ou, setOptions: function (e) { return this.options = e, this; }, load: function (e, t, i, n) {
    void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e); var r = this, a = Cc.get(e); if (void 0 !== a)
        return r.manager.itemStart(e), setTimeout((function () { t && t(a), r.manager.itemEnd(e); }), 0), a; fetch(e).then((function (e) { return e.blob(); })).then((function (e) { return void 0 === r.options ? createImageBitmap(e) : createImageBitmap(e, r.options); })).then((function (i) { Cc.add(e, i), t && t(i), r.manager.itemEnd(e); })).catch((function (t) { n && n(t), r.manager.itemError(e), r.manager.itemEnd(e); })), r.manager.itemStart(e);
    }
    }), Object.assign(Du.prototype, {
    moveTo: function (e, t) { return this.currentPath = new lu, this.subPaths.push(this.currentPath), this.currentPath.moveTo(e, t), this; }, lineTo: function (e, t) { return this.currentPath.lineTo(e, t), this; }, quadraticCurveTo: function (e, t, i, n) { return this.currentPath.quadraticCurveTo(e, t, i, n), this; }, bezierCurveTo: function (e, t, i, n, r, a) { return this.currentPath.bezierCurveTo(e, t, i, n, r, a), this; }, splineThru: function (e) { return this.currentPath.splineThru(e), this; }, toShapes: function (e, t) {
    function i(e) {
    for (var t = [], i = 0, n = e.length; i < n; i++) {
        var r = e[i], a = new cu;
        a.curves = r.curves, t.push(a);
    } return t;
    } function n(e, t) {
    for (var i = t.length, n = !1, r = i - 1, a = 0; a < i; r = a++) {
        var o = t[r], s = t[a], l = s.x - o.x, c = s.y - o.y;
        if (Math.abs(c) > Number.EPSILON) {
            if (c < 0 && (o = t[a], l = -l, s = t[r], c = -c), e.y < o.y || e.y > s.y)
                continue;
            if (e.y === o.y) {
                if (e.x === o.x)
                    return !0;
            }
            else {
                var u = c * (e.x - o.x) - l * (e.y - o.y);
                if (0 === u)
                    return !0;
                if (u < 0)
                    continue;
                n = !n;
            }
        }
        else {
            if (e.y !== o.y)
                continue;
            if (s.x <= e.x && e.x <= o.x || o.x <= e.x && e.x <= s.x)
                return !0;
        }
    } return n;
    } var r = Rl.isClockWise, a = this.subPaths; if (0 === a.length)
            return []; if (!0 === t)
            return i(a); var o, s, l, c = []; if (1 === a.length)
            return s = a[0], (l = new cu).curves = s.curves, c.push(l), c; var u = !r(a[0].getPoints()); u = e ? !u : u; var h, d, p = [], f = [], m = [], v = 0; f[v] = void 0, m[v] = []; for (var g = 0, y = a.length; g < y; g++)
            o = r(h = (s = a[g]).getPoints()), (o = e ? !o : o) ? (!u && f[v] && v++ , f[v] = { s: new cu, p: h }, f[v].s.curves = s.curves, u && v++ , m[v] = []) : m[v].push({ h: s, p: h[0] }); if (!f[0])
            return i(a); if (f.length > 1) {
                for (var b = !1, x = [], _ = 0, w = f.length; _ < w; _++)
                    p[_] = [];
                for (_ = 0, w = f.length; _ < w; _++)
                    for (var T = m[_], M = 0; M < T.length; M++) {
                        for (var A = T[M], S = !0, E = 0; E < f.length; E++)
                            n(A.p, f[E].p) && (_ !== E && x.push({ froms: _, tos: E, hole: M }), S ? (S = !1, p[E].push(A)) : b = !0);
                        S && p[_].push(A);
                    }
                x.length > 0 && (b || (m = p));
            } g = 0; for (var P = f.length; g < P; g++) {
                l = f[g].s, c.push(l);
                for (var C = 0, L = (d = m[g]).length; C < L; C++)
                    l.holes.push(d[C].h);
            } return c;
    }
    }), Object.assign(Fu.prototype, {
    isFont: !0, generateShapes: function (e, t) {
    void 0 === t && (t = 100); for (var i = [], n = function (e, t, i) {
    for (var n = Array.from ? Array.from(e) : String(e).split(""), r = t / i.resolution, a = (i.boundingBox.yMax - i.boundingBox.yMin + i.underlineThickness) * r, o = [], s = 0, l = 0, c = 0; c < n.length; c++) {
        var u = n[c];
        if ("\n" === u)
            s = 0, l -= a;
        else {
            var h = ku(u, r, s, l, i);
            s += h.offsetX, o.push(h.path);
        }
    } return o;
    } (e, t, this.data), r = 0, a = n.length; r < a; r++)
        Array.prototype.push.apply(i, n[r].toShapes()); return i;
    }
    }), Nu.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Nu, load: function (e, t, i, n) {
    var r = this, a = new Dc(this.manager); a.setPath(this.path), a.load(e, (function (e) {
    var i; try {
        i = JSON.parse(e);
    }
        catch (t) {
            console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."), i = JSON.parse(e.substring(65, e.length - 2));
        } var n = r.parse(i); t && t(n);
    }), i, n);
    }, parse: function (e) { return new Fu(e); }
    });
    var Bu = { getContext: function () { return void 0 === Cu && (Cu = new (window.AudioContext || window.webkitAudioContext)), Cu; }, setContext: function (e) { Cu = e; } };
    function Gu(e) { Ic.call(this, e); }
    function Hu() {
    this.coefficients = []; for (var e = 0; e < 9; e++)
        this.coefficients.push(new Wt);
    }
    function Uu(e, t) { uu.call(this, void 0, t), this.sh = void 0 !== e ? e : new Hu; }
    function zu(e, t, i) { Uu.call(this, void 0, i); var n = (new yn).set(e), r = (new yn).set(t), a = new Wt(n.r, n.g, n.b), o = new Wt(r.r, r.g, r.b), s = Math.sqrt(Math.PI), l = s * Math.sqrt(.75); this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s), this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l); }
    function Vu(e, t) { Uu.call(this, void 0, t); var i = (new yn).set(e); this.sh.coefficients[0].set(i.r, i.g, i.b).multiplyScalar(2 * Math.sqrt(Math.PI)); }
    Gu.prototype = Object.assign(Object.create(Ic.prototype), { constructor: Gu, load: function (e, t, i, n) { var r = new Dc(this.manager); r.setResponseType("arraybuffer"), r.setPath(this.path), r.load(e, (function (e) { var i = e.slice(0); Bu.getContext().decodeAudioData(i, (function (e) { t(e); })); }), i, n); } }), Object.assign(Hu.prototype, {
    isSphericalHarmonics3: !0, set: function (e) {
    for (var t = 0; t < 9; t++)
        this.coefficients[t].copy(e[t]); return this;
    }, zero: function () {
    for (var e = 0; e < 9; e++)
        this.coefficients[e].set(0, 0, 0); return this;
    }, getAt: function (e, t) { var i = e.x, n = e.y, r = e.z, a = this.coefficients; return t.copy(a[0]).multiplyScalar(.282095), t.addScale(a[1], .488603 * n), t.addScale(a[2], .488603 * r), t.addScale(a[3], .488603 * i), t.addScale(a[4], i * n * 1.092548), t.addScale(a[5], n * r * 1.092548), t.addScale(a[6], .315392 * (3 * r * r - 1)), t.addScale(a[7], i * r * 1.092548), t.addScale(a[8], .546274 * (i * i - n * n)), t; }, getIrradianceAt: function (e, t) { var i = e.x, n = e.y, r = e.z, a = this.coefficients; return t.copy(a[0]).multiplyScalar(.886227), t.addScale(a[1], 1.023328 * n), t.addScale(a[2], 1.023328 * r), t.addScale(a[3], 1.023328 * i), t.addScale(a[4], .858086 * i * n), t.addScale(a[5], .858086 * n * r), t.addScale(a[6], .743125 * r * r - .247708), t.addScale(a[7], .858086 * i * r), t.addScale(a[8], .429043 * (i * i - n * n)), t; }, add: function (e) {
    for (var t = 0; t < 9; t++)
        this.coefficients[t].add(e.coefficients[t]); return this;
    }, scale: function (e) {
    for (var t = 0; t < 9; t++)
        this.coefficients[t].multiplyScalar(e); return this;
    }, lerp: function (e, t) {
    for (var i = 0; i < 9; i++)
        this.coefficients[i].lerp(e.coefficients[i], t); return this;
    }, equals: function (e) {
    for (var t = 0; t < 9; t++)
        if (!this.coefficients[t].equals(e.coefficients[t]))
            return !1; return !0;
    }, copy: function (e) { return this.set(e.coefficients); }, clone: function () { return (new this.constructor).copy(this); }, fromArray: function (e, t) {
    void 0 === t && (t = 0); for (var i = this.coefficients, n = 0; n < 9; n++)
        i[n].fromArray(e, t + 3 * n); return this;
    }, toArray: function (e, t) {
    void 0 === e && (e = []), void 0 === t && (t = 0); for (var i = this.coefficients, n = 0; n < 9; n++)
        i[n].toArray(e, t + 3 * n); return e;
    }
    }), Object.assign(Hu, { getBasisAt: function (e, t) { var i = e.x, n = e.y, r = e.z; t[0] = .282095, t[1] = .488603 * n, t[2] = .488603 * r, t[3] = .488603 * i, t[4] = 1.092548 * i * n, t[5] = 1.092548 * n * r, t[6] = .315392 * (3 * r * r - 1), t[7] = 1.092548 * i * r, t[8] = .546274 * (i * i - n * n); } }), Uu.prototype = Object.assign(Object.create(uu.prototype), { constructor: Uu, isLightProbe: !0, copy: function (e) { return uu.prototype.copy.call(this, e), this.sh.copy(e.sh), this.intensity = e.intensity, this; }, toJSON: function (e) { return uu.prototype.toJSON.call(this, e); } }), zu.prototype = Object.assign(Object.create(Uu.prototype), { constructor: zu, isHemisphereLightProbe: !0, copy: function (e) { return Uu.prototype.copy.call(this, e), this; }, toJSON: function (e) { return Uu.prototype.toJSON.call(this, e); } }), Vu.prototype = Object.assign(Object.create(Uu.prototype), { constructor: Vu, isAmbientLightProbe: !0, copy: function (e) { return Uu.prototype.copy.call(this, e), this; }, toJSON: function (e) { return Uu.prototype.toJSON.call(this, e); } });
    var ju = new li, Wu = new li;
    function Xu(e) { this.autoStart = void 0 === e || e, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1; }
    Object.assign(function () { this.type = "StereoCamera", this.aspect = 1, this.eyeSep = .064, this.cameraL = new Ar, this.cameraL.layers.enable(1), this.cameraL.matrixAutoUpdate = !1, this.cameraR = new Ar, this.cameraR.layers.enable(2), this.cameraR.matrixAutoUpdate = !1, this._cache = { focus: null, fov: null, aspect: null, near: null, far: null, zoom: null, eyeSep: null }; }.prototype, {
    update: function (e) {
    var t = this._cache; if (t.focus !== e.focus || t.fov !== e.fov || t.aspect !== e.aspect * this.aspect || t.near !== e.near || t.far !== e.far || t.zoom !== e.zoom || t.eyeSep !== this.eyeSep) {
        t.focus = e.focus, t.fov = e.fov, t.aspect = e.aspect * this.aspect, t.near = e.near, t.far = e.far, t.zoom = e.zoom, t.eyeSep = this.eyeSep;
        var i, n, r = e.projectionMatrix.clone(), a = t.eyeSep / 2, o = a * t.near / t.focus, s = t.near * Math.tan(Ht.DEG2RAD * t.fov * .5) / t.zoom;
        Wu.elements[12] = -a, ju.elements[12] = a, i = -s * t.aspect + o, n = s * t.aspect + o, r.elements[0] = 2 * t.near / (n - i), r.elements[8] = (n + i) / (n - i), this.cameraL.projectionMatrix.copy(r), i = -s * t.aspect - o, n = s * t.aspect - o, r.elements[0] = 2 * t.near / (n - i), r.elements[8] = (n + i) / (n - i), this.cameraR.projectionMatrix.copy(r);
    } this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Wu), this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ju);
    }
    }), Object.assign(Xu.prototype, {
    start: function () { this.startTime = ("undefined" == typeof performance ? Date : performance).now(), this.oldTime = this.startTime, this.elapsedTime = 0, this.running = !0; }, stop: function () { this.getElapsedTime(), this.running = !1, this.autoStart = !1; }, getElapsedTime: function () { return this.getDelta(), this.elapsedTime; }, getDelta: function () {
    var e = 0; if (this.autoStart && !this.running)
        return this.start(), 0; if (this.running) {
            var t = ("undefined" == typeof performance ? Date : performance).now();
            e = (t - this.oldTime) / 1e3, this.oldTime = t, this.elapsedTime += e;
        } return e;
    }
    });
    var Yu = new Wt, Qu = new zt, qu = new Wt, $u = new Wt;
    function Zu() { Si.call(this), this.type = "AudioListener", this.context = Bu.getContext(), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.filter = null, this.timeDelta = 0, this._clock = new Xu; }
    function Ku(e) { Si.call(this), this.type = "Audio", this.listener = e, this.context = e.context, this.gain = this.context.createGain(), this.gain.connect(e.getInput()), this.autoplay = !1, this.buffer = null, this.detune = 0, this.loop = !1, this.loopStart = 0, this.loopEnd = 0, this.offset = 0, this.duration = void 0, this.playbackRate = 1, this.isPlaying = !1, this.hasPlaybackControl = !0, this.sourceType = "empty", this._startedAt = 0, this._pausedAt = 0, this.filters = []; }
    Zu.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: Zu, getInput: function () { return this.gain; }, removeFilter: function () { return null !== this.filter && (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination), this.gain.connect(this.context.destination), this.filter = null), this; }, getFilter: function () { return this.filter; }, setFilter: function (e) { return null !== this.filter ? (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination), this.filter = e, this.gain.connect(this.filter), this.filter.connect(this.context.destination), this; }, getMasterVolume: function () { return this.gain.gain.value; }, setMasterVolume: function (e) { return this.gain.gain.setTargetAtTime(e, this.context.currentTime, .01), this; }, updateMatrixWorld: function (e) {
    Si.prototype.updateMatrixWorld.call(this, e); var t = this.context.listener, i = this.up; if (this.timeDelta = this._clock.getDelta(), this.matrixWorld.decompose(Yu, Qu, qu), $u.set(0, 0, -1).applyQuaternion(Qu), t.positionX) {
        var n = this.context.currentTime + this.timeDelta;
        t.positionX.linearRampToValueAtTime(Yu.x, n), t.positionY.linearRampToValueAtTime(Yu.y, n), t.positionZ.linearRampToValueAtTime(Yu.z, n), t.forwardX.linearRampToValueAtTime($u.x, n), t.forwardY.linearRampToValueAtTime($u.y, n), t.forwardZ.linearRampToValueAtTime($u.z, n), t.upX.linearRampToValueAtTime(i.x, n), t.upY.linearRampToValueAtTime(i.y, n), t.upZ.linearRampToValueAtTime(i.z, n);
    }
    else
        t.setPosition(Yu.x, Yu.y, Yu.z), t.setOrientation($u.x, $u.y, $u.z, i.x, i.y, i.z);
    }
    }), Ku.prototype = Object.assign(Object.create(Si.prototype), {
    constructor: Ku, getOutput: function () { return this.gain; }, setNodeSource: function (e) { return this.hasPlaybackControl = !1, this.sourceType = "audioNode", this.source = e, this.connect(), this; }, setMediaElementSource: function (e) { return this.hasPlaybackControl = !1, this.sourceType = "mediaNode", this.source = this.context.createMediaElementSource(e), this.connect(), this; }, setMediaStreamSource: function (e) { return this.hasPlaybackControl = !1, this.sourceType = "mediaStreamNode", this.source = this.context.createMediaStreamSource(e), this.connect(), this; }, setBuffer: function (e) { return this.buffer = e, this.sourceType = "buffer", this.autoplay && this.play(), this; }, play: function (e) {
    if (void 0 === e && (e = 0), !0 !== this.isPlaying) {
        if (!1 !== this.hasPlaybackControl) {
            this._startedAt = this.context.currentTime + e;
            var t = this.context.createBufferSource();
            return t.buffer = this.buffer, t.loop = this.loop, t.loopStart = this.loopStart, t.loopEnd = this.loopEnd, t.onended = this.onEnded.bind(this), t.start(this._startedAt, this._pausedAt + this.offset, this.duration), this.isPlaying = !0, this.source = t, this.setDetune(this.detune), this.setPlaybackRate(this.playbackRate), this.connect();
        }
        console.warn("THREE.Audio: this Audio has no playback control.");
    }
    else
        console.warn("THREE.Audio: Audio is already playing.");
    }, pause: function () {
    if (!1 !== this.hasPlaybackControl)
        return !0 === this.isPlaying && (this._pausedAt = (this.context.currentTime - this._startedAt) * this.playbackRate, this.source.stop(), this.source.onended = null, this.isPlaying = !1), this; console.warn("THREE.Audio: this Audio has no playback control.");
    }, stop: function () {
    if (!1 !== this.hasPlaybackControl)
        return this._pausedAt = 0, this.source.stop(), this.source.onended = null, this.isPlaying = !1, this; console.warn("THREE.Audio: this Audio has no playback control.");
    }, connect: function () {
    if (this.filters.length > 0) {
        this.source.connect(this.filters[0]);
        for (var e = 1, t = this.filters.length; e < t; e++)
            this.filters[e - 1].connect(this.filters[e]);
        this.filters[this.filters.length - 1].connect(this.getOutput());
    }
    else
        this.source.connect(this.getOutput()); return this;
    }, disconnect: function () {
    if (this.filters.length > 0) {
        this.source.disconnect(this.filters[0]);
        for (var e = 1, t = this.filters.length; e < t; e++)
            this.filters[e - 1].disconnect(this.filters[e]);
        this.filters[this.filters.length - 1].disconnect(this.getOutput());
    }
    else
        this.source.disconnect(this.getOutput()); return this;
    }, getFilters: function () { return this.filters; }, setFilters: function (e) { return e || (e = []), !0 === this.isPlaying ? (this.disconnect(), this.filters = e, this.connect()) : this.filters = e, this; }, setDetune: function (e) {
    if (this.detune = e, void 0 !== this.source.detune)
        return !0 === this.isPlaying && this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, .01), this;
    }, getDetune: function () { return this.detune; }, getFilter: function () { return this.getFilters()[0]; }, setFilter: function (e) { return this.setFilters(e ? [e] : []); }, setPlaybackRate: function (e) {
    if (!1 !== this.hasPlaybackControl)
        return this.playbackRate = e, !0 === this.isPlaying && this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, .01), this; console.warn("THREE.Audio: this Audio has no playback control.");
    }, getPlaybackRate: function () { return this.playbackRate; }, onEnded: function () { this.isPlaying = !1; }, getLoop: function () { return !1 === this.hasPlaybackControl ? (console.warn("THREE.Audio: this Audio has no playback control."), !1) : this.loop; }, setLoop: function (e) {
    if (!1 !== this.hasPlaybackControl)
        return this.loop = e, !0 === this.isPlaying && (this.source.loop = this.loop), this; console.warn("THREE.Audio: this Audio has no playback control.");
    }, setLoopStart: function (e) { return this.loopStart = e, this; }, setLoopEnd: function (e) { return this.loopEnd = e, this; }, getVolume: function () { return this.gain.gain.value; }, setVolume: function (e) { return this.gain.gain.setTargetAtTime(e, this.context.currentTime, .01), this; }
    });
    var Ju = new Wt, eh = new zt, th = new Wt, ih = new Wt;
    function nh(e) { Ku.call(this, e), this.panner = this.context.createPanner(), this.panner.panningModel = "HRTF", this.panner.connect(this.gain); }
    function rh(e, t) { this.analyser = e.context.createAnalyser(), this.analyser.fftSize = void 0 !== t ? t : 2048, this.data = new Uint8Array(this.analyser.frequencyBinCount), e.getOutput().connect(this.analyser); }
    function ah(e, t, i) {
    this.binding = e, this.valueSize = i; var n, r = Float64Array; switch (t) {
        case "quaternion":
            n = this._slerp;
            break;
        case "string":
        case "bool":
            r = Array, n = this._select;
            break;
        default: n = this._lerp;
    } this.buffer = new r(4 * i), this._mixBufferRegion = n, this.cumulativeWeight = 0, this.useCount = 0, this.referenceCount = 0;
    }
    nh.prototype = Object.assign(Object.create(Ku.prototype), {
    constructor: nh, getOutput: function () { return this.panner; }, getRefDistance: function () { return this.panner.refDistance; }, setRefDistance: function (e) { return this.panner.refDistance = e, this; }, getRolloffFactor: function () { return this.panner.rolloffFactor; }, setRolloffFactor: function (e) { return this.panner.rolloffFactor = e, this; }, getDistanceModel: function () { return this.panner.distanceModel; }, setDistanceModel: function (e) { return this.panner.distanceModel = e, this; }, getMaxDistance: function () { return this.panner.maxDistance; }, setMaxDistance: function (e) { return this.panner.maxDistance = e, this; }, setDirectionalCone: function (e, t, i) { return this.panner.coneInnerAngle = e, this.panner.coneOuterAngle = t, this.panner.coneOuterGain = i, this; }, updateMatrixWorld: function (e) {
    if (Si.prototype.updateMatrixWorld.call(this, e), !0 !== this.hasPlaybackControl || !1 !== this.isPlaying) {
        this.matrixWorld.decompose(Ju, eh, th), ih.set(0, 0, 1).applyQuaternion(eh);
        var t = this.panner;
        if (t.positionX) {
            var i = this.context.currentTime + this.listener.timeDelta;
            t.positionX.linearRampToValueAtTime(Ju.x, i), t.positionY.linearRampToValueAtTime(Ju.y, i), t.positionZ.linearRampToValueAtTime(Ju.z, i), t.orientationX.linearRampToValueAtTime(ih.x, i), t.orientationY.linearRampToValueAtTime(ih.y, i), t.orientationZ.linearRampToValueAtTime(ih.z, i);
        }
        else
            t.setPosition(Ju.x, Ju.y, Ju.z), t.setOrientation(ih.x, ih.y, ih.z);
    }
    }
    }), Object.assign(rh.prototype, {
    getFrequencyData: function () { return this.analyser.getByteFrequencyData(this.data), this.data; }, getAverageFrequency: function () {
    for (var e = 0, t = this.getFrequencyData(), i = 0; i < t.length; i++)
        e += t[i]; return e / t.length;
    }
    }), Object.assign(ah.prototype, {
    accumulate: function (e, t) {
    var i = this.buffer, n = this.valueSize, r = e * n + n, a = this.cumulativeWeight; if (0 === a) {
        for (var o = 0; o !== n; ++o)
            i[r + o] = i[o];
        a = t;
    }
    else {
        var s = t / (a += t);
        this._mixBufferRegion(i, r, 0, s, n);
    } this.cumulativeWeight = a;
    }, apply: function (e) {
    var t = this.valueSize, i = this.buffer, n = e * t + t, r = this.cumulativeWeight, a = this.binding; if (this.cumulativeWeight = 0, r < 1) {
        var o = 3 * t;
        this._mixBufferRegion(i, n, o, 1 - r, t);
    } for (var s = t, l = t + t; s !== l; ++s)
            if (i[s] !== i[s + t]) {
                a.setValue(i, n);
                break;
            }
    }, saveOriginalState: function () {
    var e = this.binding, t = this.buffer, i = this.valueSize, n = 3 * i; e.getValue(t, n); for (var r = i, a = n; r !== a; ++r)
        t[r] = t[n + r % i]; this.cumulativeWeight = 0;
    }, restoreOriginalState: function () { var e = 3 * this.valueSize; this.binding.setValue(this.buffer, e); }, _select: function (e, t, i, n, r) {
    if (n >= .5)
        for (var a = 0; a !== r; ++a)
            e[t + a] = e[i + a];
    }, _slerp: function (e, t, i, n) { zt.slerpFlat(e, t, e, t, e, i, n); }, _lerp: function (e, t, i, n, r) {
    for (var a = 1 - n, o = 0; o !== r; ++o) {
        var s = t + o;
        e[s] = e[s] * a + e[i + o] * n;
    }
    }
    });
    var oh = new RegExp("[\\[\\]\\.:\\/]", "g"), sh = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]", lh = /((?:WC+[\/:])*)/.source.replace("WC", "[^\\[\\]\\.:\\/]"), ch = /(WCOD+)?/.source.replace("WCOD", sh), uh = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", "[^\\[\\]\\.:\\/]"), hh = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", "[^\\[\\]\\.:\\/]"), dh = new RegExp("^" + lh + ch + uh + hh + "$"), ph = ["material", "materials", "bones"];
    function fh(e, t, i) { var n = i || mh.parseTrackName(t); this._targetGroup = e, this._bindings = e.subscribe_(t, n); }
    function mh(e, t, i) { this.path = t, this.parsedPath = i || mh.parseTrackName(t), this.node = mh.findNode(e, this.parsedPath.nodeName) || e, this.rootNode = e; }
    function vh(e, t, i) {
    this._mixer = e, this._clip = t, this._localRoot = i || null; for (var n = t.tracks, r = n.length, a = new Array(r), o = { endingStart: yt, endingEnd: yt }, s = 0; s !== r; ++s) {
        var l = n[s].createInterpolant(null);
        a[s] = l, l.settings = o;
    } this._interpolantSettings = o, this._interpolants = a, this._propertyBindings = new Array(r), this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, this._weightInterpolant = null, this.loop = gt, this._loopCount = -1, this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = !1, this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, this.zeroSlopeAtEnd = !0;
    }
    function gh(e) { this._root = e, this._initMemoryManager(), this._accuIndex = 0, this.time = 0, this.timeScale = 1; }
    function yh(e) { "string" == typeof e && (console.warn("THREE.Uniform: Type parameter is no longer needed."), e = arguments[1]), this.value = e; }
    function bh(e, t, i) { Xo.call(this, e, t), this.meshPerAttribute = i || 1; }
    function xh(e, t, i, n) { this.ray = new Ki(e, t), this.near = i || 0, this.far = n || 1 / 0, this.camera = null, this.params = { Mesh: {}, Line: {}, LOD: {}, Points: { threshold: 1 }, Sprite: {} }, Object.defineProperties(this.params, { PointCloud: { get: function () { return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), this.Points; } } }); }
    function _h(e, t) { return e.distance - t.distance; }
    function wh(e, t, i, n) {
    if (!1 !== e.visible && (e.raycast(t, i), !0 === n))
        for (var r = e.children, a = 0, o = r.length; a < o; a++)
            wh(r[a], t, i, !0);
    }
    function Th(e, t, i) { return this.radius = void 0 !== e ? e : 1, this.phi = void 0 !== t ? t : 0, this.theta = void 0 !== i ? i : 0, this; }
    Object.assign(fh.prototype, {
    getValue: function (e, t) { this.bind(); var i = this._targetGroup.nCachedObjects_, n = this._bindings[i]; void 0 !== n && n.getValue(e, t); }, setValue: function (e, t) {
    for (var i = this._bindings, n = this._targetGroup.nCachedObjects_, r = i.length; n !== r; ++n)
        i[n].setValue(e, t);
    }, bind: function () {
    for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, i = e.length; t !== i; ++t)
        e[t].bind();
    }, unbind: function () {
    for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, i = e.length; t !== i; ++t)
        e[t].unbind();
    }
    }), Object.assign(mh, {
    Composite: fh, create: function (e, t, i) { return e && e.isAnimationObjectGroup ? new mh.Composite(e, t, i) : new mh(e, t, i); }, sanitizeNodeName: function (e) { return e.replace(/\s/g, "_").replace(oh, ""); }, parseTrackName: function (e) {
    var t = dh.exec(e); if (!t)
        throw new Error("PropertyBinding: Cannot parse trackName: " + e); var i = { nodeName: t[2], objectName: t[3], objectIndex: t[4], propertyName: t[5], propertyIndex: t[6] }, n = i.nodeName && i.nodeName.lastIndexOf("."); if (void 0 !== n && -1 !== n) {
            var r = i.nodeName.substring(n + 1);
            -1 !== ph.indexOf(r) && (i.nodeName = i.nodeName.substring(0, n), i.objectName = r);
        } if (null === i.propertyName || 0 === i.propertyName.length)
            throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e); return i;
    }, findNode: function (e, t) {
    if (!t || "" === t || "root" === t || "." === t || -1 === t || t === e.name || t === e.uuid)
        return e; if (e.skeleton) {
            var i = e.skeleton.getBoneByName(t);
            if (void 0 !== i)
                return i;
        } if (e.children) {
            var n = function (e) {
            for (var i = 0; i < e.length; i++) {
                var r = e[i];
                if (r.name === t || r.uuid === t)
                    return r;
                var a = n(r.children);
                if (a)
                    return a;
            } return null;
            }, r = n(e.children);
            if (r)
                return r;
        } return null;
    }
    }), Object.assign(mh.prototype, {
    _getValue_unavailable: function () { }, _setValue_unavailable: function () { }, BindingType: { Direct: 0, EntireArray: 1, ArrayElement: 2, HasFromToArray: 3 }, Versioning: { None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2 }, GetterByBindingType: [function (e, t) { e[t] = this.node[this.propertyName]; }, function (e, t) {
    for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)
        e[t++] = i[n];
    }, function (e, t) { e[t] = this.resolvedProperty[this.propertyIndex]; }, function (e, t) { this.resolvedProperty.toArray(e, t); } ], SetterByBindingTypeAndVersioning: [[function (e, t) { this.targetObject[this.propertyName] = e[t]; }, function (e, t) { this.targetObject[this.propertyName] = e[t], this.targetObject.needsUpdate = !0; }, function (e, t) { this.targetObject[this.propertyName] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0; } ], [function (e, t) {
    for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)
        i[n] = e[t++];
    }, function (e, t) {
    for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)
        i[n] = e[t++]; this.targetObject.needsUpdate = !0;
    }, function (e, t) {
    for (var i = this.resolvedProperty, n = 0, r = i.length; n !== r; ++n)
        i[n] = e[t++]; this.targetObject.matrixWorldNeedsUpdate = !0;
    } ], [function (e, t) { this.resolvedProperty[this.propertyIndex] = e[t]; }, function (e, t) { this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.needsUpdate = !0; }, function (e, t) { this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0; } ], [function (e, t) { this.resolvedProperty.fromArray(e, t); }, function (e, t) { this.resolvedProperty.fromArray(e, t), this.targetObject.needsUpdate = !0; }, function (e, t) { this.resolvedProperty.fromArray(e, t), this.targetObject.matrixWorldNeedsUpdate = !0; } ]], getValue: function (e, t) { this.bind(), this.getValue(e, t); }, setValue: function (e, t) { this.bind(), this.setValue(e, t); }, bind: function () {
    var e = this.node, t = this.parsedPath, i = t.objectName, n = t.propertyName, r = t.propertyIndex; if (e || (e = mh.findNode(this.rootNode, t.nodeName) || this.rootNode, this.node = e), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, e) {
        if (i) {
            var a = t.objectIndex;
            switch (i) {
                case "materials":
                    if (!e.material)
                        return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
                    if (!e.material.materials)
                        return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
                    e = e.material.materials;
                    break;
                case "bones":
                    if (!e.skeleton)
                        return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
                    e = e.skeleton.bones;
                    for (var o = 0; o < e.length; o++)
                        if (e[o].name === a) {
                            a = o;
                            break;
                        }
                    break;
                default:
                    if (void 0 === e[i])
                        return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
                    e = e[i];
            }
            if (void 0 !== a) {
                if (void 0 === e[a])
                    return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e);
                e = e[a];
            }
        }
        var s = e[n];
        if (void 0 !== s) {
            var l = this.Versioning.None;
            this.targetObject = e, void 0 !== e.needsUpdate ? l = this.Versioning.NeedsUpdate : void 0 !== e.matrixWorldNeedsUpdate && (l = this.Versioning.MatrixWorldNeedsUpdate);
            var c = this.BindingType.Direct;
            if (void 0 !== r) {
                if ("morphTargetInfluences" === n) {
                    if (!e.geometry)
                        return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
                    if (e.geometry.isBufferGeometry) {
                        if (!e.geometry.morphAttributes)
                            return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
                        for (o = 0; o < this.node.geometry.morphAttributes.position.length; o++)
                            if (e.geometry.morphAttributes.position[o].name === r) {
                                r = o;
                                break;
                            }
                    }
                    else {
                        if (!e.geometry.morphTargets)
                            return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.", this);
                        for (o = 0; o < this.node.geometry.morphTargets.length; o++)
                            if (e.geometry.morphTargets[o].name === r) {
                                r = o;
                                break;
                            }
                    }
                }
                c = this.BindingType.ArrayElement, this.resolvedProperty = s, this.propertyIndex = r;
            }
            else
                void 0 !== s.fromArray && void 0 !== s.toArray ? (c = this.BindingType.HasFromToArray, this.resolvedProperty = s) : Array.isArray(s) ? (c = this.BindingType.EntireArray, this.resolvedProperty = s) : this.propertyName = n;
            this.getValue = this.GetterByBindingType[c], this.setValue = this.SetterByBindingTypeAndVersioning[c][l];
        }
        else {
            var u = t.nodeName;
            console.error("THREE.PropertyBinding: Trying to update property for track: " + u + "." + n + " but it wasn't found.", e);
        }
    }
    else
        console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.");
    }, unbind: function () { this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound; }
    }), Object.assign(mh.prototype, { _getValue_unbound: mh.prototype.getValue, _setValue_unbound: mh.prototype.setValue }), Object.assign(function () {
    this.uuid = Ht.generateUUID(), this._objects = Array.prototype.slice.call(arguments), this.nCachedObjects_ = 0; var e = {}; this._indicesByUUID = e; for (var t = 0, i = arguments.length; t !== i; ++t)
        e[arguments[t].uuid] = t; this._paths = [], this._parsedPaths = [], this._bindings = [], this._bindingsIndicesByPath = {}; var n = this; this.stats = { objects: { get total() { return n._objects.length; }, get inUse() { return this.total - n.nCachedObjects_; } }, get bindingsPerObject() { return n._bindings.length; } };
    }.prototype, {
    isAnimationObjectGroup: !0, add: function () {
    for (var e = this._objects, t = e.length, i = this.nCachedObjects_, n = this._indicesByUUID, r = this._paths, a = this._parsedPaths, o = this._bindings, s = o.length, l = void 0, c = 0, u = arguments.length; c !== u; ++c) {
        var h = arguments[c], d = h.uuid, p = n[d];
        if (void 0 === p) {
            p = t++ , n[d] = p, e.push(h);
            for (var f = 0, m = s; f !== m; ++f)
                o[f].push(new mh(h, r[f], a[f]));
        }
        else if (p < i) {
            l = e[p];
            var v = --i, g = e[v];
            n[g.uuid] = p, e[p] = g, n[d] = v, e[v] = h;
            for (f = 0, m = s; f !== m; ++f) {
                var y = o[f], b = y[v], x = y[p];
                y[p] = b, void 0 === x && (x = new mh(h, r[f], a[f])), y[v] = x;
            }
        }
        else
            e[p] !== l && console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.");
    } this.nCachedObjects_ = i;
    }, remove: function () {
    for (var e = this._objects, t = this.nCachedObjects_, i = this._indicesByUUID, n = this._bindings, r = n.length, a = 0, o = arguments.length; a !== o; ++a) {
        var s = arguments[a], l = s.uuid, c = i[l];
        if (void 0 !== c && c >= t) {
            var u = t++, h = e[u];
            i[h.uuid] = c, e[c] = h, i[l] = u, e[u] = s;
            for (var d = 0, p = r; d !== p; ++d) {
                var f = n[d], m = f[u], v = f[c];
                f[c] = m, f[u] = v;
            }
        }
    } this.nCachedObjects_ = t;
    }, uncache: function () {
    for (var e = this._objects, t = e.length, i = this.nCachedObjects_, n = this._indicesByUUID, r = this._bindings, a = r.length, o = 0, s = arguments.length; o !== s; ++o) {
        var l = arguments[o], c = l.uuid, u = n[c];
        if (void 0 !== u)
            if (delete n[c], u < i) {
                var h = --i, d = e[h], p = e[y = --t];
                n[d.uuid] = u, e[u] = d, n[p.uuid] = h, e[h] = p, e.pop();
                for (var f = 0, m = a; f !== m; ++f) {
                    var v = (b = r[f])[h], g = b[y];
                    b[u] = v, b[h] = g, b.pop();
                }
            }
            else {
                var y;
                n[(p = e[y = --t]).uuid] = u, e[u] = p, e.pop();
                for (f = 0, m = a; f !== m; ++f) {
                    var b;
                    (b = r[f])[u] = b[y], b.pop();
                }
            }
    } this.nCachedObjects_ = i;
    }, subscribe_: function (e, t) {
    var i = this._bindingsIndicesByPath, n = i[e], r = this._bindings; if (void 0 !== n)
        return r[n]; var a = this._paths, o = this._parsedPaths, s = this._objects, l = s.length, c = this.nCachedObjects_, u = new Array(l); n = r.length, i[e] = n, a.push(e), o.push(t), r.push(u); for (var h = c, d = s.length; h !== d; ++h) {
            var p = s[h];
            u[h] = new mh(p, e, t);
        } return u;
    }, unsubscribe_: function (e) {
    var t = this._bindingsIndicesByPath, i = t[e]; if (void 0 !== i) {
        var n = this._paths, r = this._parsedPaths, a = this._bindings, o = a.length - 1, s = a[o];
        t[e[o]] = i, a[i] = s, a.pop(), r[i] = r[o], r.pop(), n[i] = n[o], n.pop();
    }
    }
    }), Object.assign(vh.prototype, {
    play: function () { return this._mixer._activateAction(this), this; }, stop: function () { return this._mixer._deactivateAction(this), this.reset(); }, reset: function () { return this.paused = !1, this.enabled = !0, this.time = 0, this._loopCount = -1, this._startTime = null, this.stopFading().stopWarping(); }, isRunning: function () { return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this); }, isScheduled: function () { return this._mixer._isActiveAction(this); }, startAt: function (e) { return this._startTime = e, this; }, setLoop: function (e, t) { return this.loop = e, this.repetitions = t, this; }, setEffectiveWeight: function (e) { return this.weight = e, this._effectiveWeight = this.enabled ? e : 0, this.stopFading(); }, getEffectiveWeight: function () { return this._effectiveWeight; }, fadeIn: function (e) { return this._scheduleFading(e, 0, 1); }, fadeOut: function (e) { return this._scheduleFading(e, 1, 0); }, crossFadeFrom: function (e, t, i) {
    if (e.fadeOut(t), this.fadeIn(t), i) {
        var n = this._clip.duration, r = e._clip.duration, a = r / n, o = n / r;
        e.warp(1, a, t), this.warp(o, 1, t);
    } return this;
    }, crossFadeTo: function (e, t, i) { return e.crossFadeFrom(this, t, i); }, stopFading: function () { var e = this._weightInterpolant; return null !== e && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this; }, setEffectiveTimeScale: function (e) { return this.timeScale = e, this._effectiveTimeScale = this.paused ? 0 : e, this.stopWarping(); }, getEffectiveTimeScale: function () { return this._effectiveTimeScale; }, setDuration: function (e) { return this.timeScale = this._clip.duration / e, this.stopWarping(); }, syncWith: function (e) { return this.time = e.time, this.timeScale = e.timeScale, this.stopWarping(); }, halt: function (e) { return this.warp(this._effectiveTimeScale, 0, e); }, warp: function (e, t, i) { var n = this._mixer, r = n.time, a = this._timeScaleInterpolant, o = this.timeScale; null === a && (a = n._lendControlInterpolant(), this._timeScaleInterpolant = a); var s = a.parameterPositions, l = a.sampleValues; return s[0] = r, s[1] = r + i, l[0] = e / o, l[1] = t / o, this; }, stopWarping: function () { var e = this._timeScaleInterpolant; return null !== e && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this; }, getMixer: function () { return this._mixer; }, getClip: function () { return this._clip; }, getRoot: function () { return this._localRoot || this._mixer._root; }, _update: function (e, t, i, n) {
    if (this.enabled) {
        var r = this._startTime;
        if (null !== r) {
            var a = (e - r) * i;
            if (a < 0 || 0 === i)
                return;
            this._startTime = null, t = i * a;
        }
        t *= this._updateTimeScale(e);
        var o = this._updateTime(t), s = this._updateWeight(e);
        if (s > 0)
            for (var l = this._interpolants, c = this._propertyBindings, u = 0, h = l.length; u !== h; ++u)
                l[u].evaluate(o), c[u].accumulate(n, s);
    }
    else
        this._updateWeight(e);
    }, _updateWeight: function (e) {
    var t = 0; if (this.enabled) {
        t = this.weight;
        var i = this._weightInterpolant;
        if (null !== i) {
            var n = i.evaluate(e)[0];
            t *= n, e > i.parameterPositions[1] && (this.stopFading(), 0 === n && (this.enabled = !1));
        }
    } return this._effectiveWeight = t, t;
    }, _updateTimeScale: function (e) {
    var t = 0; if (!this.paused) {
        t = this.timeScale;
        var i = this._timeScaleInterpolant;
        if (null !== i)
            t *= i.evaluate(e)[0], e > i.parameterPositions[1] && (this.stopWarping(), 0 === t ? this.paused = !0 : this.timeScale = t);
    } return this._effectiveTimeScale = t, t;
    }, _updateTime: function (e) {
    var t = this.time + e, i = this._clip.duration, n = this.loop, r = this._loopCount, a = 2202 === n; if (0 === e)
        return -1 === r ? t : a && 1 == (1 & r) ? i - t : t; if (2200 === n) {
            -1 === r && (this._loopCount = 0, this._setEndings(!0, !0, !1));
            e: {
                if (t >= i)
                    t = i;
                else {
                    if (!(t < 0)) {
                        this.time = t;
                        break e;
                    }
                    t = 0;
                }
                this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, this.time = t, this._mixer.dispatchEvent({ type: "finished", action: this, direction: e < 0 ? -1 : 1 });
            }
        }
        else {
            if (-1 === r && (e >= 0 ? (r = 0, this._setEndings(!0, 0 === this.repetitions, a)) : this._setEndings(0 === this.repetitions, !0, a)), t >= i || t < 0) {
                var o = Math.floor(t / i);
                t -= i * o, r += Math.abs(o);
                var s = this.repetitions - r;
                if (s <= 0)
                    this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, t = e > 0 ? i : 0, this.time = t, this._mixer.dispatchEvent({ type: "finished", action: this, direction: e > 0 ? 1 : -1 });
                else {
                    if (1 === s) {
                        var l = e < 0;
                        this._setEndings(l, !l, a);
                    }
                    else
                        this._setEndings(!1, !1, a);
                    this._loopCount = r, this.time = t, this._mixer.dispatchEvent({ type: "loop", action: this, loopDelta: o });
                }
            }
            else
                this.time = t;
            if (a && 1 == (1 & r))
                return i - t;
        } return t;
    }, _setEndings: function (e, t, i) { var n = this._interpolantSettings; i ? (n.endingStart = 2401, n.endingEnd = 2401) : (n.endingStart = e ? this.zeroSlopeAtStart ? 2401 : yt : 2402, n.endingEnd = t ? this.zeroSlopeAtEnd ? 2401 : yt : 2402); }, _scheduleFading: function (e, t, i) { var n = this._mixer, r = n.time, a = this._weightInterpolant; null === a && (a = n._lendControlInterpolant(), this._weightInterpolant = a); var o = a.parameterPositions, s = a.sampleValues; return o[0] = r, s[0] = t, o[1] = r + e, s[1] = i, this; }
    }), gh.prototype = Object.assign(Object.create(Nt.prototype), {
    constructor: gh, _bindAction: function (e, t) {
    var i = e._localRoot || this._root, n = e._clip.tracks, r = n.length, a = e._propertyBindings, o = e._interpolants, s = i.uuid, l = this._bindingsByRootAndName, c = l[s]; void 0 === c && (c = {}, l[s] = c); for (var u = 0; u !== r; ++u) {
        var h = n[u], d = h.name, p = c[d];
        if (void 0 !== p)
            a[u] = p;
        else {
            if (void 0 !== (p = a[u])) {
                null === p._cacheIndex && (++p.referenceCount, this._addInactiveBinding(p, s, d));
                continue;
            }
            var f = t && t._propertyBindings[u].binding.parsedPath;
            ++(p = new ah(mh.create(i, d, f), h.ValueTypeName, h.getValueSize())).referenceCount, this._addInactiveBinding(p, s, d), a[u] = p;
        }
        o[u].resultBuffer = p.buffer;
    }
    }, _activateAction: function (e) {
    if (!this._isActiveAction(e)) {
        if (null === e._cacheIndex) {
            var t = (e._localRoot || this._root).uuid, i = e._clip.uuid, n = this._actionsByClip[i];
            this._bindAction(e, n && n.knownActions[0]), this._addInactiveAction(e, i, t);
        }
        for (var r = e._propertyBindings, a = 0, o = r.length; a !== o; ++a) {
            var s = r[a];
            0 == s.useCount++ && (this._lendBinding(s), s.saveOriginalState());
        }
        this._lendAction(e);
    }
    }, _deactivateAction: function (e) {
    if (this._isActiveAction(e)) {
        for (var t = e._propertyBindings, i = 0, n = t.length; i !== n; ++i) {
            var r = t[i];
            0 == --r.useCount && (r.restoreOriginalState(), this._takeBackBinding(r));
        }
        this._takeBackAction(e);
    }
    }, _initMemoryManager: function () { this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], this._nActiveControlInterpolants = 0; var e = this; this.stats = { actions: { get total() { return e._actions.length; }, get inUse() { return e._nActiveActions; } }, bindings: { get total() { return e._bindings.length; }, get inUse() { return e._nActiveBindings; } }, controlInterpolants: { get total() { return e._controlInterpolants.length; }, get inUse() { return e._nActiveControlInterpolants; } } }; }, _isActiveAction: function (e) { var t = e._cacheIndex; return null !== t && t < this._nActiveActions; }, _addInactiveAction: function (e, t, i) {
    var n = this._actions, r = this._actionsByClip, a = r[t]; if (void 0 === a)
        a = { knownActions: [e], actionByRoot: {} }, e._byClipCacheIndex = 0, r[t] = a;
    else {
        var o = a.knownActions;
        e._byClipCacheIndex = o.length, o.push(e);
    } e._cacheIndex = n.length, n.push(e), a.actionByRoot[i] = e;
    }, _removeInactiveAction: function (e) { var t = this._actions, i = t[t.length - 1], n = e._cacheIndex; i._cacheIndex = n, t[n] = i, t.pop(), e._cacheIndex = null; var r = e._clip.uuid, a = this._actionsByClip, o = a[r], s = o.knownActions, l = s[s.length - 1], c = e._byClipCacheIndex; l._byClipCacheIndex = c, s[c] = l, s.pop(), e._byClipCacheIndex = null, delete o.actionByRoot[(e._localRoot || this._root).uuid], 0 === s.length && delete a[r], this._removeInactiveBindingsForAction(e); }, _removeInactiveBindingsForAction: function (e) {
    for (var t = e._propertyBindings, i = 0, n = t.length; i !== n; ++i) {
        var r = t[i];
        0 == --r.referenceCount && this._removeInactiveBinding(r);
    }
    }, _lendAction: function (e) { var t = this._actions, i = e._cacheIndex, n = this._nActiveActions++, r = t[n]; e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r; }, _takeBackAction: function (e) { var t = this._actions, i = e._cacheIndex, n = --this._nActiveActions, r = t[n]; e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r; }, _addInactiveBinding: function (e, t, i) { var n = this._bindingsByRootAndName, r = n[t], a = this._bindings; void 0 === r && (r = {}, n[t] = r), r[i] = e, e._cacheIndex = a.length, a.push(e); }, _removeInactiveBinding: function (e) { var t = this._bindings, i = e.binding, n = i.rootNode.uuid, r = i.path, a = this._bindingsByRootAndName, o = a[n], s = t[t.length - 1], l = e._cacheIndex; s._cacheIndex = l, t[l] = s, t.pop(), delete o[r], 0 === Object.keys(o).length && delete a[n]; }, _lendBinding: function (e) { var t = this._bindings, i = e._cacheIndex, n = this._nActiveBindings++, r = t[n]; e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r; }, _takeBackBinding: function (e) { var t = this._bindings, i = e._cacheIndex, n = --this._nActiveBindings, r = t[n]; e._cacheIndex = n, t[n] = e, r._cacheIndex = i, t[i] = r; }, _lendControlInterpolant: function () { var e = this._controlInterpolants, t = this._nActiveControlInterpolants++, i = e[t]; return void 0 === i && ((i = new gc(new Float32Array(2), new Float32Array(2), 1, this._controlInterpolantsResultBuffer)).__cacheIndex = t, e[t] = i), i; }, _takeBackControlInterpolant: function (e) { var t = this._controlInterpolants, i = e.__cacheIndex, n = --this._nActiveControlInterpolants, r = t[n]; e.__cacheIndex = n, t[n] = e, r.__cacheIndex = i, t[i] = r; }, _controlInterpolantsResultBuffer: new Float32Array(1), clipAction: function (e, t) {
    var i = t || this._root, n = i.uuid, r = "string" == typeof e ? Ec.findByName(i, e) : e, a = null !== r ? r.uuid : e, o = this._actionsByClip[a], s = null; if (void 0 !== o) {
        var l = o.actionByRoot[n];
        if (void 0 !== l)
            return l;
        s = o.knownActions[0], null === r && (r = s._clip);
    } if (null === r)
            return null; var c = new vh(this, r, t); return this._bindAction(c, s), this._addInactiveAction(c, a, n), c;
    }, existingAction: function (e, t) { var i = t || this._root, n = i.uuid, r = "string" == typeof e ? Ec.findByName(i, e) : e, a = r ? r.uuid : e, o = this._actionsByClip[a]; return void 0 !== o && o.actionByRoot[n] || null; }, stopAllAction: function () {
    var e = this._actions, t = this._nActiveActions, i = this._bindings, n = this._nActiveBindings; this._nActiveActions = 0, this._nActiveBindings = 0; for (var r = 0; r !== t; ++r)
        e[r].reset(); for (r = 0; r !== n; ++r)
            i[r].useCount = 0; return this;
    }, update: function (e) {
    e *= this.timeScale; for (var t = this._actions, i = this._nActiveActions, n = this.time += e, r = Math.sign(e), a = this._accuIndex ^= 1, o = 0; o !== i; ++o) {
        t[o]._update(n, e, r, a);
    } var s = this._bindings, l = this._nActiveBindings; for (o = 0; o !== l; ++o)
            s[o].apply(a); return this;
    }, setTime: function (e) {
    this.time = 0; for (var t = 0; t < this._actions.length; t++)
        this._actions[t].time = 0; return this.update(e);
    }, getRoot: function () { return this._root; }, uncacheClip: function (e) {
    var t = this._actions, i = e.uuid, n = this._actionsByClip, r = n[i]; if (void 0 !== r) {
        for (var a = r.knownActions, o = 0, s = a.length; o !== s; ++o) {
            var l = a[o];
            this._deactivateAction(l);
            var c = l._cacheIndex, u = t[t.length - 1];
            l._cacheIndex = null, l._byClipCacheIndex = null, u._cacheIndex = c, t[c] = u, t.pop(), this._removeInactiveBindingsForAction(l);
        }
        delete n[i];
    }
    }, uncacheRoot: function (e) {
    var t = e.uuid, i = this._actionsByClip; for (var n in i) {
        var r = i[n].actionByRoot[t];
        void 0 !== r && (this._deactivateAction(r), this._removeInactiveAction(r));
    } var a = this._bindingsByRootAndName[t]; if (void 0 !== a)
            for (var o in a) {
                var s = a[o];
                s.restoreOriginalState(), this._removeInactiveBinding(s);
            }
    }, uncacheAction: function (e, t) { var i = this.existingAction(e, t); null !== i && (this._deactivateAction(i), this._removeInactiveAction(i)); }
    }), yh.prototype.clone = function () { return new yh(void 0 === this.value.clone ? this.value : this.value.clone()); }, bh.prototype = Object.assign(Object.create(Xo.prototype), { constructor: bh, isInstancedInterleavedBuffer: !0, copy: function (e) { return Xo.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this; } }), Object.assign(xh.prototype, {
    linePrecision: 1, set: function (e, t) { this.ray.set(e, t); }, setFromCamera: function (e, t) { t && t.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld), this.ray.direction.set(e.x, e.y, .5).unproject(t).sub(this.ray.origin).normalize(), this.camera = t) : t && t.isOrthographicCamera ? (this.ray.origin.set(e.x, e.y, (t.near + t.far) / (t.near - t.far)).unproject(t), this.ray.direction.set(0, 0, -1).transformDirection(t.matrixWorld), this.camera = t) : console.error("THREE.Raycaster: Unsupported camera type."); }, intersectObject: function (e, t, i) { var n = i || []; return wh(e, this, n, t), n.sort(_h), n; }, intersectObjects: function (e, t, i) {
    var n = i || []; if (!1 === Array.isArray(e))
        return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), n; for (var r = 0, a = e.length; r < a; r++)
            wh(e[r], this, n, t); return n.sort(_h), n;
    }
    }), Object.assign(Th.prototype, { set: function (e, t, i) { return this.radius = e, this.phi = t, this.theta = i, this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.radius = e.radius, this.phi = e.phi, this.theta = e.theta, this; }, makeSafe: function () { return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this; }, setFromVector3: function (e) { return this.setFromCartesianCoords(e.x, e.y, e.z); }, setFromCartesianCoords: function (e, t, i) { return this.radius = Math.sqrt(e * e + t * t + i * i), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e, i), this.phi = Math.acos(Ht.clamp(t / this.radius, -1, 1))), this; } }), Object.assign(function (e, t, i) { return this.radius = void 0 !== e ? e : 1, this.theta = void 0 !== t ? t : 0, this.y = void 0 !== i ? i : 0, this; }.prototype, { set: function (e, t, i) { return this.radius = e, this.theta = t, this.y = i, this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.radius = e.radius, this.theta = e.theta, this.y = e.y, this; }, setFromVector3: function (e) { return this.setFromCartesianCoords(e.x, e.y, e.z); }, setFromCartesianCoords: function (e, t, i) { return this.radius = Math.sqrt(e * e + i * i), this.theta = Math.atan2(e, i), this.y = t, this; } });
    var Mh = new Ut;
    function Ah(e, t) { this.min = void 0 !== e ? e : new Ut(1 / 0, 1 / 0), this.max = void 0 !== t ? t : new Ut(-1 / 0, -1 / 0); }
    Object.assign(Ah.prototype, {
    set: function (e, t) { return this.min.copy(e), this.max.copy(t), this; }, setFromPoints: function (e) {
    this.makeEmpty(); for (var t = 0, i = e.length; t < i; t++)
        this.expandByPoint(e[t]); return this;
    }, setFromCenterAndSize: function (e, t) { var i = Mh.copy(t).multiplyScalar(.5); return this.min.copy(e).sub(i), this.max.copy(e).add(i), this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.min.copy(e.min), this.max.copy(e.max), this; }, makeEmpty: function () { return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this; }, isEmpty: function () { return this.max.x < this.min.x || this.max.y < this.min.y; }, getCenter: function (e) { return void 0 === e && (console.warn("THREE.Box2: .getCenter() target is now required"), e = new Ut), this.isEmpty() ? e.set(0, 0) : e.addVectors(this.min, this.max).multiplyScalar(.5); }, getSize: function (e) { return void 0 === e && (console.warn("THREE.Box2: .getSize() target is now required"), e = new Ut), this.isEmpty() ? e.set(0, 0) : e.subVectors(this.max, this.min); }, expandByPoint: function (e) { return this.min.min(e), this.max.max(e), this; }, expandByVector: function (e) { return this.min.sub(e), this.max.add(e), this; }, expandByScalar: function (e) { return this.min.addScalar(-e), this.max.addScalar(e), this; }, containsPoint: function (e) { return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y); }, containsBox: function (e) { return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y; }, getParameter: function (e, t) { return void 0 === t && (console.warn("THREE.Box2: .getParameter() target is now required"), t = new Ut), t.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y)); }, intersectsBox: function (e) { return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y); }, clampPoint: function (e, t) { return void 0 === t && (console.warn("THREE.Box2: .clampPoint() target is now required"), t = new Ut), t.copy(e).clamp(this.min, this.max); }, distanceToPoint: function (e) { return Mh.copy(e).clamp(this.min, this.max).sub(e).length(); }, intersect: function (e) { return this.min.max(e.min), this.max.min(e.max), this; }, union: function (e) { return this.min.min(e.min), this.max.max(e.max), this; }, translate: function (e) { return this.min.add(e), this.max.add(e), this; }, equals: function (e) { return e.min.equals(this.min) && e.max.equals(this.max); }
    });
    var Sh = new Wt, Eh = new Wt;
    function Ph(e, t) { this.start = void 0 !== e ? e : new Wt, this.end = void 0 !== t ? t : new Wt; }
    function Ch(e) { Si.call(this), this.material = e, this.render = function () { }; }
    Object.assign(Ph.prototype, { set: function (e, t) { return this.start.copy(e), this.end.copy(t), this; }, clone: function () { return (new this.constructor).copy(this); }, copy: function (e) { return this.start.copy(e.start), this.end.copy(e.end), this; }, getCenter: function (e) { return void 0 === e && (console.warn("THREE.Line3: .getCenter() target is now required"), e = new Wt), e.addVectors(this.start, this.end).multiplyScalar(.5); }, delta: function (e) { return void 0 === e && (console.warn("THREE.Line3: .delta() target is now required"), e = new Wt), e.subVectors(this.end, this.start); }, distanceSq: function () { return this.start.distanceToSquared(this.end); }, distance: function () { return this.start.distanceTo(this.end); }, at: function (e, t) { return void 0 === t && (console.warn("THREE.Line3: .at() target is now required"), t = new Wt), this.delta(t).multiplyScalar(e).add(this.start); }, closestPointToPointParameter: function (e, t) { Sh.subVectors(e, this.start), Eh.subVectors(this.end, this.start); var i = Eh.dot(Eh), n = Eh.dot(Sh) / i; return t && (n = Ht.clamp(n, 0, 1)), n; }, closestPointToPoint: function (e, t, i) { var n = this.closestPointToPointParameter(e, t); return void 0 === i && (console.warn("THREE.Line3: .closestPointToPoint() target is now required"), i = new Wt), this.delta(i).multiplyScalar(n).add(this.start); }, applyMatrix4: function (e) { return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this; }, equals: function (e) { return e.start.equals(this.start) && e.end.equals(this.end); } }), Ch.prototype = Object.create(Si.prototype), Ch.prototype.constructor = Ch, Ch.prototype.isImmediateRenderObject = !0;
    var Lh = new Wt, Rh = new Wt, Ih = new Qt, Oh = ["a", "b", "c"];
    function Dh(e, t, i, n) { this.object = e, this.size = void 0 !== t ? t : 1; var r = void 0 !== i ? i : 16711680, a = void 0 !== n ? n : 1, o = 0, s = this.object.geometry; s && s.isGeometry ? o = 3 * s.faces.length : s && s.isBufferGeometry && (o = s.attributes.normal.count); var l = new Wn, c = new Dn(2 * o * 3, 3); l.setAttribute("position", c), Rs.call(this, l, new ws({ color: r, linewidth: a })), this.matrixAutoUpdate = !1, this.update(); }
    Dh.prototype = Object.create(Rs.prototype), Dh.prototype.constructor = Dh, Dh.prototype.update = function () {
    this.object.updateMatrixWorld(!0), Ih.getNormalMatrix(this.object.matrixWorld); var e = this.object.matrixWorld, t = this.geometry.attributes.position, i = this.object.geometry; if (i && i.isGeometry)
        for (var n = i.vertices, r = i.faces, a = 0, o = 0, s = r.length; o < s; o++)
            for (var l = r[o], c = 0, u = l.vertexNormals.length; c < u; c++) {
                var h = n[l[Oh[c]]], d = l.vertexNormals[c];
                Lh.copy(h).applyMatrix4(e), Rh.copy(d).applyMatrix3(Ih).normalize().multiplyScalar(this.size).add(Lh), t.setXYZ(a, Lh.x, Lh.y, Lh.z), a += 1, t.setXYZ(a, Rh.x, Rh.y, Rh.z), a += 1;
            }
    else if (i && i.isBufferGeometry) {
        var p = i.attributes.position, f = i.attributes.normal;
        for (a = 0, c = 0, u = p.count; c < u; c++)
            Lh.set(p.getX(c), p.getY(c), p.getZ(c)).applyMatrix4(e), Rh.set(f.getX(c), f.getY(c), f.getZ(c)), Rh.applyMatrix3(Ih).normalize().multiplyScalar(this.size).add(Lh), t.setXYZ(a, Lh.x, Lh.y, Lh.z), a += 1, t.setXYZ(a, Rh.x, Rh.y, Rh.z), a += 1;
    } t.needsUpdate = !0;
    };
    var Fh = new Wt;
    function kh(e, t) {
    Si.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.color = t; for (var i = new Wn, n = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1], r = 0, a = 1; r < 32; r++ , a++) {
        var o = r / 32 * Math.PI * 2, s = a / 32 * Math.PI * 2;
        n.push(Math.cos(o), Math.sin(o), 1, Math.cos(s), Math.sin(s), 1);
    } i.setAttribute("position", new Dn(n, 3)); var l = new ws({ fog: !1 }); this.cone = new Rs(i, l), this.add(this.cone), this.update();
    }
    kh.prototype = Object.create(Si.prototype), kh.prototype.constructor = kh, kh.prototype.dispose = function () { this.cone.geometry.dispose(), this.cone.material.dispose(); }, kh.prototype.update = function () { this.light.updateMatrixWorld(); var e = this.light.distance ? this.light.distance : 1e3, t = e * Math.tan(this.light.angle); this.cone.scale.set(t, t, e), Fh.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(Fh), void 0 !== this.color ? this.cone.material.color.set(this.color) : this.cone.material.color.copy(this.light.color); };
    var Nh = new Wt, Bh = new li, Gh = new li;
    function Hh(e) {
    for (var t = function e(t) {
    var i = []; t && t.isBone && i.push(t); for (var n = 0; n < t.children.length; n++)
        i.push.apply(i, e(t.children[n])); return i;
    } (e), i = new Wn, n = [], r = [], a = new yn(0, 0, 1), o = new yn(0, 1, 0), s = 0; s < t.length; s++) {
        var l = t[s];
        l.parent && l.parent.isBone && (n.push(0, 0, 0), n.push(0, 0, 0), r.push(a.r, a.g, a.b), r.push(o.r, o.g, o.b));
    } i.setAttribute("position", new Dn(n, 3)), i.setAttribute("color", new Dn(r, 3)); var c = new ws({ vertexColors: S, depthTest: !1, depthWrite: !1, transparent: !0 }); Rs.call(this, i, c), this.root = e, this.bones = t, this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1;
    }
    function Uh(e, t, i) { this.light = e, this.light.updateMatrixWorld(), this.color = i; var n = new Ul(t, 4, 2), r = new An({ wireframe: !0, fog: !1 }); cr.call(this, n, r), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1, this.update(); }
    function zh(e, t) { this.type = "RectAreaLightHelper", this.light = e, this.color = t; var i = new Wn; i.setAttribute("position", new Dn([1, 1, 0, -1, 1, 0, -1, -1, 0, 1, -1, 0, 1, 1, 0], 3)), i.computeBoundingSphere(); var n = new ws({ fog: !1 }); Ps.call(this, i, n); var r = new Wn; r.setAttribute("position", new Dn([1, 1, 0, -1, 1, 0, -1, -1, 0, 1, 1, 0, -1, -1, 0, 1, -1, 0], 3)), r.computeBoundingSphere(), this.add(new cr(r, new An({ side: w, fog: !1 }))), this.update(); }
    Hh.prototype = Object.create(Rs.prototype), Hh.prototype.constructor = Hh, Hh.prototype.updateMatrixWorld = function (e) {
    var t = this.bones, i = this.geometry, n = i.getAttribute("position"); Gh.getInverse(this.root.matrixWorld); for (var r = 0, a = 0; r < t.length; r++) {
        var o = t[r];
        o.parent && o.parent.isBone && (Bh.multiplyMatrices(Gh, o.matrixWorld), Nh.setFromMatrixPosition(Bh), n.setXYZ(a, Nh.x, Nh.y, Nh.z), Bh.multiplyMatrices(Gh, o.parent.matrixWorld), Nh.setFromMatrixPosition(Bh), n.setXYZ(a + 1, Nh.x, Nh.y, Nh.z), a += 2);
    } i.getAttribute("position").needsUpdate = !0, Si.prototype.updateMatrixWorld.call(this, e);
    }, Uh.prototype = Object.create(cr.prototype), Uh.prototype.constructor = Uh, Uh.prototype.dispose = function () { this.geometry.dispose(), this.material.dispose(); }, Uh.prototype.update = function () { void 0 !== this.color ? this.material.color.set(this.color) : this.material.color.copy(this.light.color); }, zh.prototype = Object.create(Ps.prototype), zh.prototype.constructor = zh, zh.prototype.update = function () {
    if (this.scale.set(.5 * this.light.width, .5 * this.light.height, 1), void 0 !== this.color)
        this.material.color.set(this.color), this.children[0].material.color.set(this.color);
    else {
        this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);
        var e = this.material.color, t = Math.max(e.r, e.g, e.b);
        t > 1 && e.multiplyScalar(1 / t), this.children[0].material.color.copy(this.material.color);
    }
    }, zh.prototype.dispose = function () { this.geometry.dispose(), this.material.dispose(), this.children[0].geometry.dispose(), this.children[0].material.dispose(); };
    var Vh = new Wt, jh = new yn, Wh = new yn;
    function Xh(e, t, i) { Si.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.color = i; var n = new Ks(t); n.rotateY(.5 * Math.PI), this.material = new An({ wireframe: !0, fog: !1 }), void 0 === this.color && (this.material.vertexColors = S); var r = n.getAttribute("position"), a = new Float32Array(3 * r.count); n.setAttribute("color", new Sn(a, 3)), this.add(new cr(n, this.material)), this.update(); }
    function Yh(e, t) { this.lightProbe = e, this.size = t; var i = { GAMMA_OUTPUT: "" }, n = new Tr({ defines: i, uniforms: { sh: { value: this.lightProbe.sh.coefficients }, intensity: { value: this.lightProbe.intensity } }, vertexShader: ["varying vec3 vNormal;", "void main() {", "\tvNormal = normalize( normalMatrix * normal );", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["#define RECIPROCAL_PI 0.318309886", "vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {", "\t// matrix is assumed to be orthogonal", "\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );", "}", "vec3 linearToOutput( in vec3 a ) {", "\t#ifdef GAMMA_OUTPUT", "\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );", "\t#else", "\t\treturn a;", "\t#endif", "}", "// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf", "vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {", "\t// normal is assumed to have unit length", "\tfloat x = normal.x, y = normal.y, z = normal.z;", "\t// band 0", "\tvec3 result = shCoefficients[ 0 ] * 0.886227;", "\t// band 1", "\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;", "\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;", "\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;", "\t// band 2", "\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;", "\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;", "\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );", "\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;", "\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );", "\treturn result;", "}", "uniform vec3 sh[ 9 ]; // sh coefficients", "uniform float intensity; // light probe intensity", "varying vec3 vNormal;", "void main() {", "\tvec3 normal = normalize( vNormal );", "\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );", "\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );", "\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;", "\toutgoingLight = linearToOutput( outgoingLight );", "\tgl_FragColor = vec4( outgoingLight, 1.0 );", "}"].join("\n") }), r = new Ul(1, 32, 16); cr.call(this, r, n), this.onBeforeRender(); }
    function Qh(e, t, i, n) {
    e = e || 10, t = t || 10, i = new yn(void 0 !== i ? i : 4473924), n = new yn(void 0 !== n ? n : 8947848); for (var r = t / 2, a = e / t, o = e / 2, s = [], l = [], c = 0, u = 0, h = -o; c <= t; c++ , h += a) {
        s.push(-o, 0, h, o, 0, h), s.push(h, 0, -o, h, 0, o);
        var d = c === r ? i : n;
        d.toArray(l, u), u += 3, d.toArray(l, u), u += 3, d.toArray(l, u), u += 3, d.toArray(l, u), u += 3;
    } var p = new Wn; p.setAttribute("position", new Dn(s, 3)), p.setAttribute("color", new Dn(l, 3)); var f = new ws({ vertexColors: S }); Rs.call(this, p, f);
    }
    function qh(e, t, i, n, r, a) {
    e = e || 10, t = t || 16, i = i || 8, n = n || 64, r = new yn(void 0 !== r ? r : 4473924), a = new yn(void 0 !== a ? a : 8947848); var o, s, l, c, u, h, d, p = [], f = []; for (c = 0; c <= t; c++)
        l = c / t * (2 * Math.PI), o = Math.sin(l) * e, s = Math.cos(l) * e, p.push(0, 0, 0), p.push(o, 0, s), d = 1 & c ? r : a, f.push(d.r, d.g, d.b), f.push(d.r, d.g, d.b); for (c = 0; c <= i; c++)
            for (d = 1 & c ? r : a, h = e - e / i * c, u = 0; u < n; u++)
                l = u / n * (2 * Math.PI), o = Math.sin(l) * h, s = Math.cos(l) * h, p.push(o, 0, s), f.push(d.r, d.g, d.b), l = (u + 1) / n * (2 * Math.PI), o = Math.sin(l) * h, s = Math.cos(l) * h, p.push(o, 0, s), f.push(d.r, d.g, d.b); var m = new Wn; m.setAttribute("position", new Dn(p, 3)), m.setAttribute("color", new Dn(f, 3)); var v = new ws({ vertexColors: S }); Rs.call(this, m, v);
    }
    function $h(e, t, i, n) { this.audio = e, this.range = t || 1, this.divisionsInnerAngle = i || 16, this.divisionsOuterAngle = n || 2; var r = new Wn, a = this.divisionsInnerAngle + 2 * this.divisionsOuterAngle, o = new Float32Array(3 * (3 * a + 3)); r.setAttribute("position", new Sn(o, 3)); var s = new ws({ color: 65280 }), l = new ws({ color: 16776960 }); Ps.call(this, r, [l, s]), this.update(); }
    Xh.prototype = Object.create(Si.prototype), Xh.prototype.constructor = Xh, Xh.prototype.dispose = function () { this.children[0].geometry.dispose(), this.children[0].material.dispose(); }, Xh.prototype.update = function () {
    var e = this.children[0]; if (void 0 !== this.color)
        this.material.color.set(this.color);
    else {
        var t = e.geometry.getAttribute("color");
        jh.copy(this.light.color), Wh.copy(this.light.groundColor);
        for (var i = 0, n = t.count; i < n; i++) {
            var r = i < n / 2 ? jh : Wh;
            t.setXYZ(i, r.r, r.g, r.b);
        }
        t.needsUpdate = !0;
    } e.lookAt(Vh.setFromMatrixPosition(this.light.matrixWorld).negate());
    }, Yh.prototype = Object.create(cr.prototype), Yh.prototype.constructor = Yh, Yh.prototype.dispose = function () { this.geometry.dispose(), this.material.dispose(); }, Yh.prototype.onBeforeRender = function () { this.position.copy(this.lightProbe.position), this.scale.set(1, 1, 1).multiplyScalar(this.size), this.material.uniforms.intensity.value = this.lightProbe.intensity; }, Qh.prototype = Object.assign(Object.create(Rs.prototype), { constructor: Qh, copy: function (e) { return Rs.prototype.copy.call(this, e), this.geometry.copy(e.geometry), this.material.copy(e.material), this; }, clone: function () { return (new this.constructor).copy(this); } }), qh.prototype = Object.create(Rs.prototype), qh.prototype.constructor = qh, $h.prototype = Object.create(Ps.prototype), $h.prototype.constructor = $h, $h.prototype.update = function () {
    var e, t, i = this.audio, n = this.range, r = this.divisionsInnerAngle, a = this.divisionsOuterAngle, o = Ht.degToRad(i.panner.coneInnerAngle), s = Ht.degToRad(i.panner.coneOuterAngle), l = o / 2, c = s / 2, u = 0, h = 0, d = this.geometry, p = d.attributes.position; function f(i, r, a, o) {
    var s = (r - i) / a; for (p.setXYZ(u, 0, 0, 0), h++ , e = i; e < r; e += s)
        t = u + h, p.setXYZ(t, Math.sin(e) * n, 0, Math.cos(e) * n), p.setXYZ(t + 1, Math.sin(Math.min(e + s, r)) * n, 0, Math.cos(Math.min(e + s, r)) * n), p.setXYZ(t + 2, 0, 0, 0), h += 3; d.addGroup(u, h, o), u += h, h = 0;
    } d.clearGroups(), f(-c, -l, a, 0), f(-l, l, r, 1), f(l, c, a, 0), p.needsUpdate = !0, o === s && (this.material[0].visible = !1);
    }, $h.prototype.dispose = function () { this.geometry.dispose(), this.material[0].dispose(), this.material[1].dispose(); };
    var Zh = new Wt, Kh = new Wt, Jh = new Qt;
    function ed(e, t, i, n) { this.object = e, this.size = void 0 !== t ? t : 1; var r = void 0 !== i ? i : 16776960, a = void 0 !== n ? n : 1, o = 0, s = this.object.geometry; s && s.isGeometry ? o = s.faces.length : console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."); var l = new Wn, c = new Dn(2 * o * 3, 3); l.setAttribute("position", c), Rs.call(this, l, new ws({ color: r, linewidth: a })), this.matrixAutoUpdate = !1, this.update(); }
    ed.prototype = Object.create(Rs.prototype), ed.prototype.constructor = ed, ed.prototype.update = function () {
    this.object.updateMatrixWorld(!0), Jh.getNormalMatrix(this.object.matrixWorld); for (var e = this.object.matrixWorld, t = this.geometry.attributes.position, i = this.object.geometry, n = i.vertices, r = i.faces, a = 0, o = 0, s = r.length; o < s; o++) {
        var l = r[o], c = l.normal;
        Zh.copy(n[l.a]).add(n[l.b]).add(n[l.c]).divideScalar(3).applyMatrix4(e), Kh.copy(c).applyMatrix3(Jh).normalize().multiplyScalar(this.size).add(Zh), t.setXYZ(a, Zh.x, Zh.y, Zh.z), a += 1, t.setXYZ(a, Kh.x, Kh.y, Kh.z), a += 1;
    } t.needsUpdate = !0;
    };
    var td = new Wt, id = new Wt, nd = new Wt;
    function rd(e, t, i) { Si.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.color = i, void 0 === t && (t = 1); var n = new Wn; n.setAttribute("position", new Dn([-t, t, 0, t, t, 0, t, -t, 0, -t, -t, 0, -t, t, 0], 3)); var r = new ws({ fog: !1 }); this.lightPlane = new Ps(n, r), this.add(this.lightPlane), (n = new Wn).setAttribute("position", new Dn([0, 0, 0, 0, 0, 1], 3)), this.targetLine = new Ps(n, r), this.add(this.targetLine), this.update(); }
    rd.prototype = Object.create(Si.prototype), rd.prototype.constructor = rd, rd.prototype.dispose = function () { this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose(); }, rd.prototype.update = function () { td.setFromMatrixPosition(this.light.matrixWorld), id.setFromMatrixPosition(this.light.target.matrixWorld), nd.subVectors(id, td), this.lightPlane.lookAt(id), void 0 !== this.color ? (this.lightPlane.material.color.set(this.color), this.targetLine.material.color.set(this.color)) : (this.lightPlane.material.color.copy(this.light.color), this.targetLine.material.color.copy(this.light.color)), this.targetLine.lookAt(id), this.targetLine.scale.z = nd.length(); };
    var ad = new Wt, od = new Mr;
    function sd(e) { var t = new Wn, i = new ws({ color: 16777215, vertexColors: A }), n = [], r = [], a = {}, o = new yn(16755200), s = new yn(16711680), l = new yn(43775), c = new yn(16777215), u = new yn(3355443); function h(e, t, i) { d(e, i), d(t, i); } function d(e, t) { n.push(0, 0, 0), r.push(t.r, t.g, t.b), void 0 === a[e] && (a[e] = []), a[e].push(n.length / 3 - 1); } h("n1", "n2", o), h("n2", "n4", o), h("n4", "n3", o), h("n3", "n1", o), h("f1", "f2", o), h("f2", "f4", o), h("f4", "f3", o), h("f3", "f1", o), h("n1", "f1", o), h("n2", "f2", o), h("n3", "f3", o), h("n4", "f4", o), h("p", "n1", s), h("p", "n2", s), h("p", "n3", s), h("p", "n4", s), h("u1", "u2", l), h("u2", "u3", l), h("u3", "u1", l), h("c", "t", c), h("p", "c", u), h("cn1", "cn2", u), h("cn3", "cn4", u), h("cf1", "cf2", u), h("cf3", "cf4", u), t.setAttribute("position", new Dn(n, 3)), t.setAttribute("color", new Dn(r, 3)), Rs.call(this, t, i), this.camera = e, this.camera.updateProjectionMatrix && this.camera.updateProjectionMatrix(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = a, this.update(); }
    function ld(e, t, i, n, r, a, o) {
    ad.set(r, a, o).unproject(n); var s = t[e]; if (void 0 !== s)
        for (var l = i.getAttribute("position"), c = 0, u = s.length; c < u; c++)
            l.setXYZ(s[c], ad.x, ad.y, ad.z);
    }
    sd.prototype = Object.create(Rs.prototype), sd.prototype.constructor = sd, sd.prototype.update = function () { var e = this.geometry, t = this.pointMap; od.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse), ld("c", t, e, od, 0, 0, -1), ld("t", t, e, od, 0, 0, 1), ld("n1", t, e, od, -1, -1, -1), ld("n2", t, e, od, 1, -1, -1), ld("n3", t, e, od, -1, 1, -1), ld("n4", t, e, od, 1, 1, -1), ld("f1", t, e, od, -1, -1, 1), ld("f2", t, e, od, 1, -1, 1), ld("f3", t, e, od, -1, 1, 1), ld("f4", t, e, od, 1, 1, 1), ld("u1", t, e, od, .7, 1.1, -1), ld("u2", t, e, od, -.7, 1.1, -1), ld("u3", t, e, od, 0, 2, -1), ld("cf1", t, e, od, -1, 0, 1), ld("cf2", t, e, od, 1, 0, 1), ld("cf3", t, e, od, 0, -1, 1), ld("cf4", t, e, od, 0, 1, 1), ld("cn1", t, e, od, -1, 0, -1), ld("cn2", t, e, od, 1, 0, -1), ld("cn3", t, e, od, 0, -1, -1), ld("cn4", t, e, od, 0, 1, -1), e.getAttribute("position").needsUpdate = !0; };
    var cd = new Ui;
    function ud(e, t) { this.object = e, void 0 === t && (t = 16776960); var i = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), n = new Float32Array(24), r = new Wn; r.setIndex(new Sn(i, 1)), r.setAttribute("position", new Sn(n, 3)), Rs.call(this, r, new ws({ color: t })), this.matrixAutoUpdate = !1, this.update(); }
    function hd(e, t) { this.type = "Box3Helper", this.box = e, t = t || 16776960; var i = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]), n = new Wn; n.setIndex(new Sn(i, 1)), n.setAttribute("position", new Dn([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1], 3)), Rs.call(this, n, new ws({ color: t })), this.geometry.computeBoundingSphere(); }
    function dd(e, t, i) { this.type = "PlaneHelper", this.plane = e, this.size = void 0 === t ? 1 : t; var n = void 0 !== i ? i : 16776960, r = new Wn; r.setAttribute("position", new Dn([1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0], 3)), r.computeBoundingSphere(), Ps.call(this, r, new ws({ color: n })); var a = new Wn; a.setAttribute("position", new Dn([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1], 3)), a.computeBoundingSphere(), this.add(new cr(a, new An({ color: n, opacity: .2, transparent: !0, depthWrite: !1 }))); }
    ud.prototype = Object.create(Rs.prototype), ud.prototype.constructor = ud, ud.prototype.update = function (e) {
    if (void 0 !== e && console.warn("THREE.BoxHelper: .update() has no longer arguments."), void 0 !== this.object && cd.setFromObject(this.object), !cd.isEmpty()) {
        var t = cd.min, i = cd.max, n = this.geometry.attributes.position, r = n.array;
        r[0] = i.x, r[1] = i.y, r[2] = i.z, r[3] = t.x, r[4] = i.y, r[5] = i.z, r[6] = t.x, r[7] = t.y, r[8] = i.z, r[9] = i.x, r[10] = t.y, r[11] = i.z, r[12] = i.x, r[13] = i.y, r[14] = t.z, r[15] = t.x, r[16] = i.y, r[17] = t.z, r[18] = t.x, r[19] = t.y, r[20] = t.z, r[21] = i.x, r[22] = t.y, r[23] = t.z, n.needsUpdate = !0, this.geometry.computeBoundingSphere();
    }
    }, ud.prototype.setFromObject = function (e) { return this.object = e, this.update(), this; }, ud.prototype.copy = function (e) { return Rs.prototype.copy.call(this, e), this.object = e.object, this; }, ud.prototype.clone = function () { return (new this.constructor).copy(this); }, hd.prototype = Object.create(Rs.prototype), hd.prototype.constructor = hd, hd.prototype.updateMatrixWorld = function (e) { var t = this.box; t.isEmpty() || (t.getCenter(this.position), t.getSize(this.scale), this.scale.multiplyScalar(.5), Si.prototype.updateMatrixWorld.call(this, e)); }, dd.prototype = Object.create(Ps.prototype), dd.prototype.constructor = dd, dd.prototype.updateMatrixWorld = function (e) { var t = -this.plane.constant; Math.abs(t) < 1e-8 && (t = 1e-8), this.scale.set(.5 * this.size, .5 * this.size, t), this.children[0].material.side = t < 0 ? w : _, this.lookAt(this.plane.normal), Si.prototype.updateMatrixWorld.call(this, e); };
    var pd, fd, md = new Wt;
    function vd(e, t, i, n, r, a) { Si.call(this), void 0 === e && (e = new Wt(0, 0, 1)), void 0 === t && (t = new Wt(0, 0, 0)), void 0 === i && (i = 1), void 0 === n && (n = 16776960), void 0 === r && (r = .2 * i), void 0 === a && (a = .2 * r), void 0 === pd && ((pd = new Wn).setAttribute("position", new Dn([0, 0, 0, 0, 1, 0], 3)), (fd = new Zl(0, .5, 1, 5, 1)).translate(0, -.5, 0)), this.position.copy(t), this.line = new Ps(pd, new ws({ color: n })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new cr(fd, new An({ color: n })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(e), this.setLength(i, r, a); }
    function gd(e) { var t = [0, 0, 0, e = e || 1, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e], i = new Wn; i.setAttribute("position", new Dn(t, 3)), i.setAttribute("color", new Dn([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1], 3)); var n = new ws({ vertexColors: S }); Rs.call(this, i, n); }
    vd.prototype = Object.create(Si.prototype), vd.prototype.constructor = vd, vd.prototype.setDirection = function (e) {
    if (e.y > .99999)
        this.quaternion.set(0, 0, 0, 1);
    else if (e.y < -.99999)
        this.quaternion.set(1, 0, 0, 0);
    else {
        md.set(e.z, 0, -e.x).normalize();
        var t = Math.acos(e.y);
        this.quaternion.setFromAxisAngle(md, t);
    }
    }, vd.prototype.setLength = function (e, t, i) { void 0 === t && (t = .2 * e), void 0 === i && (i = .2 * t), this.line.scale.set(1, Math.max(1e-4, e - t), 1), this.line.updateMatrix(), this.cone.scale.set(i, t, i), this.cone.position.y = e, this.cone.updateMatrix(); }, vd.prototype.setColor = function (e) { this.line.material.color.set(e), this.cone.material.color.set(e); }, vd.prototype.copy = function (e) { return Si.prototype.copy.call(this, e, !1), this.line.copy(e.line), this.cone.copy(e.cone), this; }, vd.prototype.clone = function () { return (new this.constructor).copy(this); }, gd.prototype = Object.create(Rs.prototype), gd.prototype.constructor = gd;
    function yd(e) { console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."), qc.call(this, e), this.type = "catmullrom"; }
    Uc.create = function (e, t) { return console.log("THREE.Curve.create() has been deprecated"), e.prototype = Object.create(Uc.prototype), e.prototype.constructor = e, e.prototype.getPoint = t, e; }, Object.assign(su.prototype, {
    createPointsGeometry: function (e) { console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."); var t = this.getPoints(e); return this.createGeometry(t); }, createSpacedPointsGeometry: function (e) { console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."); var t = this.getSpacedPoints(e); return this.createGeometry(t); }, createGeometry: function (e) {
    console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."); for (var t = new vr, i = 0, n = e.length; i < n; i++) {
        var r = e[i];
        t.vertices.push(new Wt(r.x, r.y, r.z || 0));
    } return t;
    }
    }), Object.assign(lu.prototype, { fromPoints: function (e) { return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."), this.setFromPoints(e); } }), Object.create(qc.prototype), Object.create(qc.prototype), yd.prototype = Object.create(qc.prototype), Object.assign(yd.prototype, { initFromArray: function () { console.error("THREE.Spline: .initFromArray() has been removed."); }, getControlPointsArray: function () { console.error("THREE.Spline: .getControlPointsArray() has been removed."); }, reparametrizeByArcLength: function () { console.error("THREE.Spline: .reparametrizeByArcLength() has been removed."); } }), Qh.prototype.setColors = function () { console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead."); }, Hh.prototype.update = function () { console.error("THREE.SkeletonHelper: update() no longer needs to be called."); }, Object.assign(Ic.prototype, { extractUrlBase: function (e) { return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."), Tu.extractUrlBase(e); } }), Ic.Handlers = { add: function () { console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead."); }, get: function () { console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead."); } }, Object.assign(Pu.prototype, { setTexturePath: function (e) { return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."), this.setResourcePath(e); } }), Object.assign(Ah.prototype, { center: function (e) { return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."), this.getCenter(e); }, empty: function () { return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."), this.isEmpty(); }, isIntersectionBox: function (e) { return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e); }, size: function (e) { return console.warn("THREE.Box2: .size() has been renamed to .getSize()."), this.getSize(e); } }), Object.assign(Ui.prototype, { center: function (e) { return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."), this.getCenter(e); }, empty: function () { return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."), this.isEmpty(); }, isIntersectionBox: function (e) { return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e); }, isIntersectionSphere: function (e) { return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(e); }, size: function (e) { return console.warn("THREE.Box3: .size() has been renamed to .getSize()."), this.getSize(e); } }), Ph.prototype.center = function (e) { return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."), this.getCenter(e); }, Object.assign(Ht, { random16: function () { return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."), Math.random(); }, nearestPowerOfTwo: function (e) { return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."), Ht.floorPowerOfTwo(e); }, nextPowerOfTwo: function (e) { return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."), Ht.ceilPowerOfTwo(e); } }), Object.assign(Qt.prototype, { flattenToArrayOffset: function (e, t) { return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."), this.toArray(e, t); }, multiplyVector3: function (e) { return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), e.applyMatrix3(this); }, multiplyVector3Array: function () { console.error("THREE.Matrix3: .multiplyVector3Array() has been removed."); }, applyToBuffer: function (e) { return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."), this.applyToBufferAttribute(e); }, applyToVector3Array: function () { console.error("THREE.Matrix3: .applyToVector3Array() has been removed."); } }), Object.assign(li.prototype, { extractPosition: function (e) { return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(e); }, flattenToArrayOffset: function (e, t) { return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."), this.toArray(e, t); }, getPosition: function () { return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."), (new Wt).setFromMatrixColumn(this, 3); }, setRotationFromQuaternion: function (e) { return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(e); }, multiplyToArray: function () { console.warn("THREE.Matrix4: .multiplyToArray() has been removed."); }, multiplyVector3: function (e) { return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this); }, multiplyVector4: function (e) { return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this); }, multiplyVector3Array: function () { console.error("THREE.Matrix4: .multiplyVector3Array() has been removed."); }, rotateAxis: function (e) { console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), e.transformDirection(this); }, crossVector: function (e) { return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this); }, translate: function () { console.error("THREE.Matrix4: .translate() has been removed."); }, rotateX: function () { console.error("THREE.Matrix4: .rotateX() has been removed."); }, rotateY: function () { console.error("THREE.Matrix4: .rotateY() has been removed."); }, rotateZ: function () { console.error("THREE.Matrix4: .rotateZ() has been removed."); }, rotateByAxis: function () { console.error("THREE.Matrix4: .rotateByAxis() has been removed."); }, applyToBuffer: function (e) { return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."), this.applyToBufferAttribute(e); }, applyToVector3Array: function () { console.error("THREE.Matrix4: .applyToVector3Array() has been removed."); }, makeFrustum: function (e, t, i, n, r, a) { return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."), this.makePerspective(e, t, n, i, r, a); } }), nn.prototype.isIntersectionLine = function (e) { return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."), this.intersectsLine(e); }, zt.prototype.multiplyVector3 = function (e) { return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), e.applyQuaternion(this); }, Object.assign(Ki.prototype, { isIntersectionBox: function (e) { return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e); }, isIntersectionPlane: function (e) { return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."), this.intersectsPlane(e); }, isIntersectionSphere: function (e) { return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(e); } }), Object.assign(fn.prototype, { area: function () { return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."), this.getArea(); }, barycoordFromPoint: function (e, t) { return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."), this.getBarycoord(e, t); }, midpoint: function (e) { return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."), this.getMidpoint(e); }, normal: function (e) { return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."), this.getNormal(e); }, plane: function (e) { return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."), this.getPlane(e); } }), Object.assign(fn, { barycoordFromPoint: function (e, t, i, n, r) { return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."), fn.getBarycoord(e, t, i, n, r); }, normal: function (e, t, i, n) { return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."), fn.getNormal(e, t, i, n); } }), Object.assign(cu.prototype, { extractAllPoints: function (e) { return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."), this.extractPoints(e); }, extrude: function (e) { return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."), new Dl(this, e); }, makeGeometry: function (e) { return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."), new Xl(this, e); } }), Object.assign(Ut.prototype, { fromAttribute: function (e, t, i) { return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(e, t, i); }, distanceToManhattan: function (e) { return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."), this.manhattanDistanceTo(e); }, lengthManhattan: function () { return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength(); } }), Object.assign(Wt.prototype, { setEulerFromRotationMatrix: function () { console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead."); }, setEulerFromQuaternion: function () { console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead."); }, getPositionFromMatrix: function (e) { return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(e); }, getScaleFromMatrix: function (e) { return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(e); }, getColumnFromMatrix: function (e, t) { return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(t, e); }, applyProjection: function (e) { return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."), this.applyMatrix4(e); }, fromAttribute: function (e, t, i) { return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(e, t, i); }, distanceToManhattan: function (e) { return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."), this.manhattanDistanceTo(e); }, lengthManhattan: function () { return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength(); } }), Object.assign(Kt.prototype, { fromAttribute: function (e, t, i) { return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(e, t, i); }, lengthManhattan: function () { return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength(); } }), Object.assign(vr.prototype, { computeTangents: function () { console.error("THREE.Geometry: .computeTangents() has been removed."); }, computeLineDistances: function () { console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead."); } }), Object.assign(Si.prototype, { getChildByName: function (e) { return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(e); }, renderDepth: function () { console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead."); }, translate: function (e, t) { return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(t, e); }, getWorldRotation: function () { console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead."); } }), Object.defineProperties(Si.prototype, { eulerOrder: { get: function () { return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order; }, set: function (e) { console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order = e; } }, useQuaternion: { get: function () { console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."); }, set: function () { console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."); } } }), Object.defineProperties(hs.prototype, { objects: { get: function () { return console.warn("THREE.LOD: .objects has been renamed to .levels."), this.levels; } } }), Object.defineProperty(ms.prototype, "useVertexTexture", { get: function () { console.warn("THREE.Skeleton: useVertexTexture has been removed."); }, set: function () { console.warn("THREE.Skeleton: useVertexTexture has been removed."); } }), ds.prototype.initBones = function () { console.error("THREE.SkinnedMesh: initBones() has been removed."); }, Object.defineProperty(Uc.prototype, "__arcLengthDivisions", { get: function () { return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."), this.arcLengthDivisions; }, set: function (e) { console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."), this.arcLengthDivisions = e; } }), Ar.prototype.setLens = function (e, t) { console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."), void 0 !== t && (this.filmGauge = t), this.setFocalLength(e); }, Object.defineProperties(uu.prototype, { onlyShadow: { set: function () { console.warn("THREE.Light: .onlyShadow has been removed."); } }, shadowCameraFov: { set: function (e) { console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."), this.shadow.camera.fov = e; } }, shadowCameraLeft: { set: function (e) { console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."), this.shadow.camera.left = e; } }, shadowCameraRight: { set: function (e) { console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."), this.shadow.camera.right = e; } }, shadowCameraTop: { set: function (e) { console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."), this.shadow.camera.top = e; } }, shadowCameraBottom: { set: function (e) { console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."), this.shadow.camera.bottom = e; } }, shadowCameraNear: { set: function (e) { console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."), this.shadow.camera.near = e; } }, shadowCameraFar: { set: function (e) { console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."), this.shadow.camera.far = e; } }, shadowCameraVisible: { set: function () { console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead."); } }, shadowBias: { set: function (e) { console.warn("THREE.Light: .shadowBias is now .shadow.bias."), this.shadow.bias = e; } }, shadowDarkness: { set: function () { console.warn("THREE.Light: .shadowDarkness has been removed."); } }, shadowMapWidth: { set: function (e) { console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."), this.shadow.mapSize.width = e; } }, shadowMapHeight: { set: function (e) { console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."), this.shadow.mapSize.height = e; } } }), Object.defineProperties(Sn.prototype, { length: { get: function () { return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."), this.array.length; } }, dynamic: { get: function () { return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."), 35048 === this.usage; }, set: function () { console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."), this.setUsage(35048); } } }), Object.assign(Sn.prototype, { setDynamic: function (e) { return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."), this.setUsage(!0 === e ? 35048 : kt), this; }, copyIndicesArray: function () { console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed."); }, setArray: function () { console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers"); } }), Object.assign(Wn.prototype, { addIndex: function (e) { console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."), this.setIndex(e); }, addAttribute: function (e, t) { return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."), t && t.isBufferAttribute || t && t.isInterleavedBufferAttribute ? "index" === e ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."), this.setIndex(t), this) : this.setAttribute(e, t) : (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), this.setAttribute(e, new Sn(arguments[1], arguments[2]))); }, addDrawCall: function (e, t, i) { void 0 !== i && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."), console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."), this.addGroup(e, t); }, clearDrawCalls: function () { console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."), this.clearGroups(); }, computeTangents: function () { console.warn("THREE.BufferGeometry: .computeTangents() has been removed."); }, computeOffsets: function () { console.warn("THREE.BufferGeometry: .computeOffsets() has been removed."); }, removeAttribute: function (e) { return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."), this.deleteAttribute(e); } }), Object.defineProperties(Wn.prototype, { drawcalls: { get: function () { return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."), this.groups; } }, offsets: { get: function () { return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."), this.groups; } } }), Object.defineProperties(Xo.prototype, { dynamic: { get: function () { return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."), 35048 === this.usage; }, set: function (e) { console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."), this.setUsage(e); } } }), Object.assign(Xo.prototype, { setDynamic: function (e) { return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."), this.setUsage(!0 === e ? 35048 : kt), this; }, setArray: function () { console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers"); } }), Object.assign(Fl.prototype, { getArrays: function () { console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed."); }, addShapeList: function () { console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed."); }, addShape: function () { console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed."); } }), Object.defineProperties(yh.prototype, { dynamic: { set: function () { console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead."); } }, onUpdate: { value: function () { return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."), this; } } }), Object.defineProperties(Mn.prototype, { wrapAround: { get: function () { console.warn("THREE.Material: .wrapAround has been removed."); }, set: function () { console.warn("THREE.Material: .wrapAround has been removed."); } }, overdraw: { get: function () { console.warn("THREE.Material: .overdraw has been removed."); }, set: function () { console.warn("THREE.Material: .overdraw has been removed."); } }, wrapRGB: { get: function () { return console.warn("THREE.Material: .wrapRGB has been removed."), new yn; } }, shading: { get: function () { console.error("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."); }, set: function (e) { console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = 1 === e; } }, stencilMask: { get: function () { return console.warn("THREE." + this.type + ": .stencilMask has been removed. Use .stencilFuncMask instead."), this.stencilFuncMask; }, set: function (e) { console.warn("THREE." + this.type + ": .stencilMask has been removed. Use .stencilFuncMask instead."), this.stencilFuncMask = e; } } }), Object.defineProperties(sc.prototype, { metal: { get: function () { return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."), !1; }, set: function () { console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead"); } } }), Object.defineProperties(Tr.prototype, { derivatives: { get: function () { return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives; }, set: function (e) { console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives = e; } } }), Object.assign(Vo.prototype, { clearTarget: function (e, t, i, n) { console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."), this.setRenderTarget(e), this.clear(t, i, n); }, animate: function (e) { console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."), this.setAnimationLoop(e); }, getCurrentRenderTarget: function () { return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."), this.getRenderTarget(); }, getMaxAnisotropy: function () { return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."), this.capabilities.getMaxAnisotropy(); }, getPrecision: function () { return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."), this.capabilities.precision; }, resetGLState: function () { return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."), this.state.reset(); }, supportsFloatTextures: function () { return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."), this.extensions.get("OES_texture_float"); }, supportsHalfFloatTextures: function () { return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."), this.extensions.get("OES_texture_half_float"); }, supportsStandardDerivatives: function () { return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."), this.extensions.get("OES_standard_derivatives"); }, supportsCompressedTextureS3TC: function () { return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."), this.extensions.get("WEBGL_compressed_texture_s3tc"); }, supportsCompressedTexturePVRTC: function () { return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."), this.extensions.get("WEBGL_compressed_texture_pvrtc"); }, supportsBlendMinMax: function () { return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."), this.extensions.get("EXT_blend_minmax"); }, supportsVertexTextures: function () { return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."), this.capabilities.vertexTextures; }, supportsInstancedArrays: function () { return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."), this.extensions.get("ANGLE_instanced_arrays"); }, enableScissorTest: function (e) { console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."), this.setScissorTest(e); }, initMaterial: function () { console.warn("THREE.WebGLRenderer: .initMaterial() has been removed."); }, addPrePlugin: function () { console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed."); }, addPostPlugin: function () { console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed."); }, updateShadowMap: function () { console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed."); }, setFaceCulling: function () { console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed."); }, allocTextureUnit: function () { console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed."); }, setTexture: function () { console.warn("THREE.WebGLRenderer: .setTexture() has been removed."); }, setTexture2D: function () { console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed."); }, setTextureCube: function () { console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed."); }, getActiveMipMapLevel: function () { return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."), this.getActiveMipmapLevel(); } }), Object.defineProperties(Vo.prototype, { shadowMapEnabled: { get: function () { return this.shadowMap.enabled; }, set: function (e) { console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."), this.shadowMap.enabled = e; } }, shadowMapType: { get: function () { return this.shadowMap.type; }, set: function (e) { console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."), this.shadowMap.type = e; } }, shadowMapCullFace: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead."); }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead."); } }, context: { get: function () { return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."), this.getContext(); } } }), Object.defineProperties(Co.prototype, { cullFace: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead."); }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead."); } }, renderReverseSided: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead."); }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead."); } }, renderSingleSided: { get: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead."); }, set: function () { console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead."); } } }), Object.defineProperties(Cr.prototype, { activeCubeFace: { set: function () { console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget()."); } }, activeMipMapLevel: { set: function () { console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget()."); } } }), Object.defineProperties(Jt.prototype, { wrapS: { get: function () { return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS = e; } }, wrapT: { get: function () { return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT = e; } }, magFilter: { get: function () { return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter = e; } }, minFilter: { get: function () { return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter = e; } }, anisotropy: { get: function () { return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy = e; } }, offset: { get: function () { return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset = e; } }, repeat: { get: function () { return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat = e; } }, format: { get: function () { return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format = e; } }, type: { get: function () { return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type = e; } }, generateMipmaps: { get: function () { return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps; }, set: function (e) { console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps = e; } } }), Object.defineProperties(Uo.prototype, { standing: { set: function () { console.warn("THREE.WebVRManager: .standing has been removed."); } }, userHeight: { set: function () { console.warn("THREE.WebVRManager: .userHeight has been removed."); } } }), Object.defineProperties(Ku.prototype, { load: { value: function (e) { console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead."); var t = this; return (new Gu).load(e, (function (e) { t.setBuffer(e); })), this; } }, startTime: { set: function () { console.warn("THREE.Audio: .startTime is now .play( delay )."); } } }), rh.prototype.getData = function () { return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."), this.getFrequencyData(); }, Pr.prototype.updateCubeMap = function (e, t) { return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."), this.update(e, t); };
    qt.crossOrigin = void 0, qt.loadTexture = function (e, t, i, n) { console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead."); var r = new Hc; r.setCrossOrigin(this.crossOrigin); var a = r.load(e, i, void 0, n); return t && (a.mapping = t), a; }, qt.loadTextureCube = function (e, t, i, n) { console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead."); var r = new Gc; r.setCrossOrigin(this.crossOrigin); var a = r.load(e, i, void 0, n); return t && (a.mapping = t), a; }, qt.loadCompressedTexture = function () { console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead."); }, qt.loadCompressedTextureCube = function () { console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead."); };
    "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: { revision: "111" } })), Object.defineProperty(Bc.prototype, "crossOrigin", { get: function () { return "anonymous"; }, set: function () { } });
    var bd = function () {
    function e() { c()(this, e); } return h()(e, null, [{ key: "throttle", value: function (e, t, i) { var n, r; return t || (t = 250), function () { var a = i || this, o = +new Date, s = arguments; n && o < n + t ? (clearTimeout(r), r = setTimeout((function () { n = o, e.apply(a, s); }), t)) : (n = o, e.apply(a, s)); }; } }, { key: "debounce", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 250, i = null; return function () { var n = this, r = arguments; clearTimeout(i), i = setTimeout((function () { e.apply(n, r); }), t); }; } }, {
    key: "logProgress", value: function () {
    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return function (t) {
    if (t.lengthComputable) {
        var i = Math.round(t.loaded / t.total * 100, 2);
        console.log("".concat(e).concat(i, "% downloaded"));
    }
    };
    }
    }, { key: "logError", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return function (t) { console.error("".concat(e).concat(t)); }; } }, { key: "handleColorChange", value: function (e) { return function (t) { "string" == typeof t && (t = t.replace("#", "0x")), e.setHex(t); }; } }, { key: "update", value: function (e) { this.needsUpdate(e.material, e.geometry); } }, { key: "needsUpdate", value: function (e, t) { return function () { e.shading = +e.shading, e.vertexColors = +e.vertexColors, e.side = +e.side, e.needsUpdate = !0, t.verticesNeedUpdate = !0, t.normalsNeedUpdate = !0, t.colorsNeedUpdate = !0; }; } }, { key: "updateTexture", value: function (e, t, i) { return function (n) { e[t] = i[n], e.needsUpdate = !0; }; } }, { key: "walkObjectsTree", value: function (e, t) { var i = this, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; e && (e.children.map((function (e, n) { return i.walkObjectsTree(e, t, n, r + 1); })), t({ object: e, index: n, level: r })); } }, {
    key: "walkMaterialsTree", value: function (e, t) {
    var i = this, n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; if (e)
        return e.isMultiMaterial ? e.materials.forEach((function (e, n) { return i.walkMaterialsTree(e, t, n, r + 1); })) : void t({ material: e, index: n, level: r });
    }
    }, { key: "nodeIsObject", value: function (e) { return "Mesh" === e.type || "Group" === e.type; } }, {
    key: "supportsWebp", value: function () {
    var e; return s.a.async((function (t) {
    for (; ;)
        switch (t.prev = t.next) {
            case 0: return "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=", t.next = 3, s.a.awrap(fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((function (e) { return e.blob(); })));
            case 3: return e = t.sent, t.abrupt("return", "undefined" != typeof createImageBitmap && createImageBitmap(e).then((function () { return !0; }), (function () { return !1; })));
            case 5:
            case "end": return t.stop();
        }
    }));
    }
    }, { key: "isMobile", value: function () { return void 0 !== window.orientation; } }, { key: "getPixelRatio", value: function () { return this.isMobile() ? Math.min(3, window.devicePixelRatio) : 1; } }, { key: "getNestedProp", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, n = t.split("."); return n.reduce((function (e, t) { return e && e[t]; }), e) || i; } }, { key: "convertPrice", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "en", i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return new Intl.NumberFormat(t, { minimumFractionDigits: i }).format(e); } }, { key: "hexToRgb", value: function (e) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e), i = { r: (parseInt(t[1], 16) / 255).toFixed(2), g: (parseInt(t[2], 16) / 255).toFixed(2), b: (parseInt(t[3], 16) / 255).toFixed(2) }; return t ? i : { r: 0, g: 0, b: 0 }; } }]), e;
    } (), xd = function () { function e(t) { var i = this; c()(this, e), this.config = t.config, this.renderer = t.renderer.threeRenderer, this.events = t.events, this.$container = t.$container, this.touchObserver = t.touchObserver, this.timeout = null, this.clock = new Xu(!1), this.renderer.domElement.addEventListener("mousemove", (function (e) { return bd.throttle(i.onMouseMove(e), 250); }), !1), this.renderer.domElement.addEventListener("mouseleave", (function (e) { return i.onMouseLeave(e); }), !1), this.renderer.domElement.addEventListener("mouseover", (function (e) { return i.onMouseOver(e); }), !1), this.renderer.domElement.addEventListener("mousedown", this.onMouseDown.bind(this), !1), this.renderer.domElement.addEventListener("mouseup", this.onMouseUp.bind(this), !1), this.fullscreenchangeHandler = this.onFullScreenChange.bind(this), this.$container.addEventListener("fullscreenchange", this.fullscreenchangeHandler, !1), this.$container.addEventListener("mozfullscreenchange", this.fullscreenchangeHandler, !1), this.$container.addEventListener("webkitfullscreenchange", this.fullscreenchangeHandler, !1), this.$container.addEventListener("msfullscreenchange", this.fullscreenchangeHandler, !1); } return h()(e, [{ key: "onMouseOver", value: function (e) { e.preventDefault(), this.config.isMouseOver = !0; } }, { key: "onMouseLeave", value: function (e) { e.preventDefault(), this.config.isMouseOver = !1; } }, { key: "onMouseDown", value: function () { event.preventDefault(), this.clock.start(), this.config.isMouseDown = !0; } }, { key: "onMouseUp", value: function () { event.preventDefault(), this.config.mouseDownTime = this.clock.getElapsedTime(), this.clock.stop(), this.config.isMouseDown = !1; } }, { key: "onMouseMove", value: function (e) { var t = this; e.preventDefault(), clearTimeout(this.timeout), this.timeout = setTimeout((function () { t.config.isMouseMoving = !1; }), 200), this.config.mouse.x = e.layerX / this.$container.offsetWidth * 2 - 1, this.config.mouse.y = -e.layerY / this.$container.offsetHeight * 2 + 1, this.config.isMouseMoving = !0; } }, { key: "onFullScreenChange", value: function (e) { e.preventDefault(), this.events.emit("mode:full-screen", !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)); } }]), e; } (), _d = function () {
    function e() { c()(this, e), this._events = {}; } return h()(e, [{ key: "on", value: function (e, t) { this._events[e] = this._events[e] || [], this._events[e].push(t); } }, { key: "off", value: function (e, t) { t || (this._events[e] = []), this._events[e] = this._events[e] || [], this._events[e] = this._events[e].filter((function (e) { return e !== t; })); } }, {
    key: "emit", value: function (e) {
    for (var t = arguments.length, i = new Array(t > 1 ? t - 1 : 0), n = 1; n < t; n++)
        i[n - 1] = arguments[n]; this._events[e] = this._events[e] || [], this._events[e].forEach((function (e) { return e.apply(void 0, i); }));
    }
    }, { key: "offAll", value: function () { var e = this; Object.keys(this._events).forEach((function (t) { return e._events[t].forEach((function (i) { return e.off(t, i); })); })); } }]), e;
    } (), wd = i(26), Td = i(33), Md = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { staticClass: "intvr-ui-layout", style: { "position: absolute": e.isPreloading } }, [i("link-pop-up", { ref: "linkPopUp" }), e._v(" "), i("StyleSelect", { attrs: { show: e.showStyleSelectWindow, styles: e.styleItems, "active-style": e.style, "is-mobile": e.isMobile, "company-logo": e.companyData.logo, "company-name": e.companyData.name, "font-color-mode": e.fontColorMode, width: e.width }, on: { "style-select": e._onSelectStyle } }), e._v(" "), i("preloader", { ref: "preloader", attrs: { "is-active": e.isPreloading, state: e.preloadingState, "custom-background": e.preloadingCustomBackground, "with-snapshot": e.preloadingWithSnapshot } }), e._v(" "), e.companyData.enabled ? i("div", { staticClass: "intvr-ui-layout__top-left-block" }, [i("div", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._showModal, expression: "_showModal", arg: "tap" }], staticClass: "intvr-ui-layout__top-left-block-logo", on: { click: e._showModal } }, [i("img", { attrs: { src: e.companyData.logo } })]), e._v(" "), e.isMobile ? e._e() : i("div", { staticClass: "intvr-ui-layout__top-left-block-text", domProps: { textContent: e._s(e.companyData.name) } }), e._v(" "), e.isMobile ? e._e() : i("tooltip", { staticClass: "intvr-ui-layout__top-left-block-tooltip", attrs: { visible: e.helpIsVisible, message: "Learn more about this tour", "arrow-direction": "top", "arrow-offset": "10px" } })], 1) : e._e(), e._v(" "), i("div", { staticClass: "intvr-ui-layout__top-right-block", class: { "intvr-ui-layout__top-right-block--open": e.changeBlockPosition } }, [e.showLinkButton ? i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickSceneStateButton, expression: "_onClickSceneStateButton", arg: "tap" }], staticClass: "intvr-ui-layout__top-right-block-button", attrs: { "svg-icon": e.svgIcons.link } }) : e._e(), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickHelpButton, expression: "_onClickHelpButton", arg: "tap" }], staticClass: "intvr-ui-layout__top-right-block-button", attrs: { "svg-icon": e.svgIcons.help, active: e.helpIsVisible } }), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickFullScreen, expression: "_onClickFullScreen", arg: "tap" }], staticClass: "intvr-ui-layout__top-right-block-button", attrs: { active: e.fullScreenIsActive, "svg-icon": e.svgIcons.fullSize } }), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onPlayerClose, expression: "_onPlayerClose", arg: "tap" }], staticClass: "intvr-ui-layout__top-right-block-button", attrs: { "svg-icon": e.svgIcons.close } }), e._v(" "), e.isMobile ? e._e() : i("tooltip", { staticClass: "intvr-ui-layout__top-right-block-tooltip", attrs: { visible: e.helpIsVisible, message: "Full Screen", "arrow-direction": "top", "arrow-offset": "60px" } })], 1), e._v(" "), i("help-block", { class: e.helpBlockClass, attrs: { visible: e.helpIsVisible, "is-mobile": e.isMobile } }), e._v(" "), e.isMobile ? i("div", { staticClass: "intvr-ui-layout__slider" }, [i("swiper", { attrs: { options: e.swiperOptions } }, [i("swiper-slide", { staticClass: "intvr-ui-layout__slider-slide" }, [i("div", { staticClass: "intvr-ui-layout__bottom-left-block", class: { "intvr-ui-layout__bottom-left-block--mobile": e.isMobile } }, [i("div", { staticClass: "intvr-ui-layout__bottom-left-block-buttons" }, [i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickCameraPlanModeButton, expression: "_onClickCameraPlanModeButton", arg: "tap" }], staticClass: "intvr-ui-layout__bottom-left-block-button", attrs: { active: e.cameraPlanModeIsActive, "svg-icon": e.svgIcons.cameraPlanMode, theme: "transparent-white-stroke" } }), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickCameraPreviewModeButton, expression: "_onClickCameraPreviewModeButton", arg: "tap" }], staticClass: "intvr-ui-layout__bottom-left-block-button", attrs: { active: e.cameraPreviewModeIsActive, "svg-icon": e.svgIcons.cameraPreviewMode, theme: "transparent-white-stroke" } }), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickCameraPanoramaModeButton, expression: "_onClickCameraPanoramaModeButton", arg: "tap" }], staticClass: "intvr-ui-layout__bottom-left-block-button", attrs: { active: e.cameraPanoramaModeIsActive, "svg-icon": e.svgIcons.cameraPanoramaMode, theme: "transparent-white-fill" } })], 1), e._v(" "), i("tooltip", { staticClass: "intvr-ui-layout__bottom-left-block-tooltip", attrs: { visible: e.helpIsVisible, message: "Switch between Walking,<br>3D and Floor Plan modes", "arrow-direction": "bottom", "arrow-offset": "30px" } })], 1)]), e._v(" "), e.styleSelectIsVisible ? i("swiper-slide", { staticClass: "intvr-ui-layout__slider-slide" }, [i("dropdown", { staticClass: "intvr-ui-layout__bottom-right-block-dropdown", class: { "intvr-ui-layout__bottom-right-block-dropdown--mobile": e.isMobile }, attrs: { placeholder: " ", data: e.styleItems }, on: { input: e._onChangeCustomStyle }, model: { value: e.style, callback: function (t) { e.style = t; }, expression: "style" } })], 1) : e._e(), e._v(" "), e.lifeScenarioSelectIsVisible ? i("swiper-slide", { staticClass: "intvr-ui-layout__slider-slide" }, [i("dropdown", { staticClass: "intvr-ui-layout__bottom-right-block-dropdown", class: { "intvr-ui-layout__bottom-right-block-dropdown--mobile": e.isMobile }, attrs: { placeholder: " ", data: e.lifeScenarioItems }, model: { value: e.lifeScenario, callback: function (t) { e.lifeScenario = t; }, expression: "lifeScenario" } })], 1) : e._e()], 1)], 1) : i("div", [i("div", { staticClass: "intvr-ui-layout__bottom-left-block" }, [i("div", { staticClass: "intvr-ui-layout__bottom-left-block-buttons" }, [i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickCameraPlanModeButton, expression: "_onClickCameraPlanModeButton", arg: "tap" }], staticClass: "intvr-ui-layout__bottom-left-block-button", attrs: { active: e.cameraPlanModeIsActive, "svg-icon": e.svgIcons.cameraPlanMode, theme: "transparent-white-stroke" } }), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickCameraPreviewModeButton, expression: "_onClickCameraPreviewModeButton", arg: "tap" }], staticClass: "intvr-ui-layout__bottom-left-block-button", attrs: { active: e.cameraPreviewModeIsActive, "svg-icon": e.svgIcons.cameraPreviewMode, theme: "transparent-white-stroke" } }), e._v(" "), i("button-icon", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._onClickCameraPanoramaModeButton, expression: "_onClickCameraPanoramaModeButton", arg: "tap" }], staticClass: "intvr-ui-layout__bottom-left-block-button", attrs: { active: e.cameraPanoramaModeIsActive, "svg-icon": e.svgIcons.cameraPanoramaMode, theme: "transparent-white-fill" } })], 1), e._v(" "), i("tooltip", { staticClass: "intvr-ui-layout__bottom-left-block-tooltip", attrs: { visible: e.helpIsVisible, message: "Switch between Walking,<br>3D and Floor Plan modes", "arrow-direction": "bottom", "arrow-offset": "30px" } }), e._v(" "), i("div", { staticClass: "intvr-ui-layout__bottom-left-block-logo", domProps: { innerHTML: e._s(e.svgIcons.poweredBy) } })], 1), e._v(" "), e.isMobile ? e._e() : i("div", { staticClass: "intvr-ui-layout__bottom-right-block" }, [e.styleSelectIsVisible ? i("dropdown", { staticClass: "intvr-ui-layout__bottom-right-block-dropdown", attrs: { placeholder: "", data: e.styleItems }, on: { input: e._onChangeCustomStyle }, model: { value: e.style, callback: function (t) { e.style = t; }, expression: "style" } }) : e._e(), e._v(" "), e.lifeScenarioSelectIsVisible ? i("dropdown", { staticClass: "intvr-ui-layout__bottom-right-block-dropdown", attrs: { placeholder: "", data: e.lifeScenarioItems }, model: { value: e.lifeScenario, callback: function (t) { e.lifeScenario = t; }, expression: "lifeScenario" } }) : e._e()], 1)]), e._v(" "), i("modal", { attrs: { info: e.apartmentInfo, show: e.showModal, "is-mobile": e.isMobile }, on: { "close-modal": e._hideModal } })], 1); };
    Md._withStripped = !0;
    var Ad = i(3), Sd = i.n(Ad), Ed = function () { var e, t = this.$createElement; return (this._self._c || t)("div", { staticClass: "intvr-ui-button-icon", class: (e = {}, e["intvr-ui-button-icon--theme_" + this.theme] = !0, e["intvr-ui-button-icon--active"] = this.active, e), domProps: { innerHTML: this._s(this.svgIcon) } }); };
    Ed._withStripped = !0;
    var Pd = { props: { active: { type: Boolean, default: !1 }, svgIcon: { type: String, default: "" }, theme: { type: String, default: "gray-white-fill" } }, data: function () { return {}; }, methods: {} };
    i(85);
    function Cd(e, t, i, n, r, a, o, s) {
    var l, c = "function" == typeof e ? e.options : e; if (t && (c.render = t, c.staticRenderFns = i, c._compiled = !0), n && (c.functional = !0), a && (c._scopeId = "data-v-" + a), o ? (l = function (e) { (e = e || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) || "undefined" == typeof __VUE_SSR_CONTEXT__ || (e = __VUE_SSR_CONTEXT__), r && r.call(this, e), e && e._registeredComponents && e._registeredComponents.add(o); }, c._ssrRegister = l) : r && (l = s ? function () { r.call(this, this.$root.$options.shadowRoot); } : r), l)
        if (c.functional) {
            c._injectStyles = l;
            var u = c.render;
            c.render = function (e, t) { return l.call(t), u(e, t); };
        }
        else {
            var h = c.beforeCreate;
            c.beforeCreate = h ? [].concat(h, l) : [l];
        } return { exports: e, options: c };
    }
    var Ld = Cd(Pd, Ed, [], !1, null, null, null);
    Ld.options.__file = "src/js/ui/components/ButtonIcon.vue";
    var Rd = Ld.exports, Id = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { staticClass: "intvr-ui-dropdown" }, [i("transition", { attrs: { name: "fade" } }, [e.isOpened ? i("div", { staticClass: "intvr-ui-dropdown__items-list" }, e._l(e.data, (function (t, n) { return i("div", { key: n, staticClass: "intvr-ui-dropdown__item", class: { "intvr-ui-dropdown__item--active": t.value === e.value }, on: { click: function (i) { return e._onItemSelect(t.value); } } }, [e._v("\n        " + e._s(t.title) + "\n      ")]); })), 0) : e._e()]), e._v(" "), i("div", { staticClass: "intvr-ui-dropdown__field", on: { click: e._clickField } }, [i("div", { staticClass: "intvr-ui-dropdown__field-text" }, [e._v("\n      " + e._s(e.value ? e.activeItemTitle : e.placeholder) + "\n    ")]), e._v(" "), i("div", { staticClass: "intvr-ui-dropdown__field-arrow", class: { "intvr-ui-dropdown__field-arrow--opened": e.isOpened }, domProps: { innerHTML: e._s(e.dropdownArrowSvgIcon) } })])], 1); };
    Id._withStripped = !0;
    var Od = i(34), Dd = i.n(Od), Fd = { props: { value: { type: [Number, String] }, data: { type: Array, default: function () { return []; } }, placeholder: { type: String } }, data: function () { return { dropdownArrowSvgIcon: Dd.a, isOpened: !1 }; }, computed: { activeItem: function () { var e = this; return this.value && this.data.find((function (t) { return t.value === e.value; })) || null; }, activeItemTitle: function () { return this.activeItem ? this.activeItem.title : ""; } }, methods: { closeSelect: function () { this.isOpened = !1; }, _clickField: function () { this.isOpened = !this.isOpened; }, _onItemSelect: function (e) { this.value !== e && (this.$emit("input", e), this.isOpened = !1); }, _clickOutOfElementListener: function (e) { this.$el.contains(e.target) || (this.isOpened = !1); } }, created: function () { window.addEventListener("mousedown", this._clickOutOfElementListener), window.addEventListener("touchstart", this._clickOutOfElementListener); }, destroyed: function () { window.removeEventListener("mousedown", this._clickOutOfElementListener), window.removeEventListener("touchstart", this._clickOutOfElementListener); } }, kd = (i(86), Cd(Fd, Id, [], !1, null, null, null));
    kd.options.__file = "src/js/ui/components/Dropdown.vue";
    var Nd = kd.exports, Bd = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { staticClass: "intvr-ui-help-block" }, [i("transition", { attrs: { name: "fade" } }, [e.visible ? i("div", { class: e.wrapperClass }, [i("div", { staticClass: "intvr-ui-help-block__item" }, [i("div", { staticClass: "intvr-ui-help-block__item-icon", domProps: { innerHTML: e._s(e.leftMouseClickIcon) } }), e._v(" "), i("div", { staticClass: "intvr-ui-help-block__item-text" }, [e._v("\n          Left mouse"), i("br"), e._v("\n          drag to rotate\n        ")])]), e._v(" "), i("div", { staticClass: "intvr-ui-help-block__item" }, [i("div", { staticClass: "intvr-ui-help-block__item-icon", domProps: { innerHTML: e._s(e.insideMouseClick) } }), e._v(" "), i("div", { staticClass: "intvr-ui-help-block__item-text" }, [e._v("\n          Click to"), i("br"), e._v("\n          jump inside\n        ")])]), e._v(" "), i("div", { staticClass: "intvr-ui-help-block__item" }, [i("div", { staticClass: "intvr-ui-help-block__item-icon", domProps: { innerHTML: e._s(e.rightMouseClick) } }), e._v(" "), i("div", { staticClass: "intvr-ui-help-block__item-text" }, [e._v("\n          Right mouse"), i("br"), e._v("\n          drag to pan\n        ")])])]) : e._e()])], 1); };
    Bd._withStripped = !0;
    var Gd = i(35), Hd = i.n(Gd), Ud = i(36), zd = i.n(Ud), Vd = i(37), jd = i.n(Vd), Wd = { props: { visible: { type: Boolean, default: !1 }, isMobile: { type: Boolean, default: !1 } }, data: function () { return { leftMouseClickIcon: Hd.a, insideMouseClick: zd.a, rightMouseClick: jd.a }; }, computed: { wrapperClass: function () { return this.isMobile ? "intvr-ui-help-block__wrapper-mobile" : "intvr-ui-help-block__wrapper"; } }, methods: {} }, Xd = (i(87), Cd(Wd, Bd, [], !1, null, null, null));
    Xd.options.__file = "src/js/ui/components/HelpBlock.vue";
    var Yd = Xd.exports, Qd = function () { var e = this.$createElement, t = this._self._c || e; return t("div", { staticClass: "intvr-ui-tooltip" }, [t("transition", { attrs: { name: "fade" } }, [this.visible ? t("div", { staticClass: "intvr-ui-tooltip__wrapper" }, [t("div", { staticClass: "intvr-ui-tooltip__message", domProps: { innerHTML: this._s(this.message) } }), this._v(" "), t("div", { staticClass: "intvr-ui-tooltip__arrow", class: ["intvr-ui-tooltip__arrow--direction_" + this.arrowDirection], style: { left: this.arrowOffset } })]) : this._e()])], 1); };
    Qd._withStripped = !0;
    var qd = { props: { visible: { type: Boolean, default: !1 }, message: { type: String, default: "" }, arrowDirection: { type: String, default: "top" }, arrowOffset: { type: String, default: 0 } }, data: function () { return {}; }, methods: {} }, $d = (i(88), Cd(qd, Qd, [], !1, null, null, null));
    $d.options.__file = "src/js/ui/components/Tooltip.vue";
    var Zd = $d.exports, Kd = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("div", { staticClass: "intvr-ui-layout-preloader", class: { "intvr-ui-layout-preloader--reload_active": e.withSnapshot } }, [i("transition", { attrs: { name: "preloader-fade", duration: 500 } }, [e.showLoader ? i("div", { staticClass: "intvr-ui-layout-preloader__wrapper", style: "background: url(" + e.loaderImageUrlPath + ")no-repeat center/cover #000000" }, [i("div", { staticClass: "intvr-ui-layout-preloader__bar" }, [i("div", { staticClass: "intvr-ui-layout-preloader__state" }, [i("div", { staticClass: "intvr-ui-layout-preloader__state-track", style: "transform: translateY(" + e.trackOffset + "px)" }, e._l(e.activeState, (function (t, n) { return i("div", { key: t + "_" + n, staticClass: "intvr-ui-layout-preloader__state-track-item" }, [e._v("\n              " + e._s(t) + "\n            ")]); })), 0), e._v("\n          %\n        ")])])]) : e._e()])], 1); };
    Kd._withStripped = !0;
    var Jd = { props: { isActive: { type: Boolean, default: !1 }, state: { type: Number, default: 1 }, customBackground: { type: String }, withSnapshot: { type: Boolean, default: !1 } }, data: function () { return { activeState: [0], animation: null, trackOffset: 0, lastPercentReceived: !1, loadingIsFinished: !1 }; }, computed: { loaderImageUrlPath: function () { return this.customBackground || a.preloaderImagePath; }, showLoader: function () { return this.isActive; } }, mounted: function () { this.isActive && this.$nextTick((function () { })); }, methods: { restartAnimation: function () { this.activeState = [0], this.animation = null, this.trackOffset = 0, this.lastPercentReceived = !1, this.loadingIsFinished = !1; }, _updatePercentage: function (e) { e >= 100 && (this.lastPercentReceived = !0), this.animation || (this.activeState.push(e), this._runAnimation(e >= 100)); }, _runAnimation: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], i = { trackOffset: this.trackOffset }, n = { trackOffset: this.trackOffset - 64 }, a = this; this.animation = !0, new r.a.Tween(i).to(n, 500).onUpdate((function () { a.trackOffset = this.trackOffset; })).onComplete((function () { a.animation = !1, !t && e.lastPercentReceived && (e.activeState.push(100), e._runAnimation(!0)), t && a.$nextTick((function () { e.loadingIsFinished = !0; })); })).start(); } }, watch: { state: function (e) { 0 !== e && this._updatePercentage(e); } } }, ep = (i(89), Cd(Jd, Kd, [], !1, null, null, null));
    ep.options.__file = "src/js/ui/components/Preloader.vue";
    var tp = ep.exports, ip = function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("transition", { attrs: { name: "fade" } }, [e.show ? i("div", { staticClass: "intvr-ui-modal", class: { "intvr-ui-modal--mobile": e.isMobile } }, [i("div", { staticClass: "intvr-ui-modal__wrapper" }, [i("div", { staticClass: "intvr-ui-modal__header" }, [i("div", { staticClass: "intvr-ui-modal__head" }, [i("strong", [e._v(e._s([e.info.building, e.info.street, e.info.apartment].filter(Boolean).join(" ")))]), i("br"), e._v("\n          " + e._s([e.info.city, e.info.post_code].filter(Boolean).join(", ")) + "\n        ")]), e._v(" "), i("div", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e._closeModal, expression: "_closeModal", arg: "tap" }], staticClass: "intvr-ui-modal__close-icon", domProps: { innerHTML: e._s(e.close) }, on: { click: function (t) { return t.preventDefault(), e._closeModal(t); } } })]), e._v(" "), i("div", { staticClass: "intvr-ui-modal__content" }, [e.info.price ? i("div", { staticClass: "intvr-ui-modal__price" }, [e._v("\n          " + e._s(e.info.currency) + e._s(e._f("convertPrice")(e.info.price)) + "\n        ")]) : e._e(), e._v(" "), e.info.properties ? i("div", { staticClass: "intvr-ui-modal__properties" }, [e._l(e.info.properties, (function (t) { var n = t.key, r = t.value; return [i("div", { key: n, staticClass: "intvr-ui-modal__property" }, [i("div", { staticClass: "intvr-ui-modal__property-count" }, [e._v(e._s(r || "0"))]), e._v(" "), i("div", { staticClass: "intvr-ui-modal__property-info" }, [e._v(e._s(n || "?"))])])]; }))], 2) : e._e(), e._v(" "), e.info.description ? i("div", { staticClass: "intvr-ui-modal__info" }, [e._v("\n          " + e._s(e.info.description) + "\n        ")]) : e._e(), e._v(" "), e.info.contacts ? i("div", { staticClass: "intvr-ui-modal__contacts-block" }, [i("div", { staticClass: "intvr-ui-modal__contacts-person" }, [e._v("\n            " + e._s(e.info.contacts.name) + "\n            "), e.info.contacts.img ? i("div", { staticClass: "intvr-ui-modal__contacts-photo" }, [i("img", { attrs: { src: e.info.contacts.img } })]) : e._e()]), e._v(" "), i("div", { staticClass: "intvr-ui-modal__contacts" }, [e.info.contacts.phone ? i("div", { staticClass: "intvr-ui-modal__contact" }, [i("div", { staticClass: "intvr-ui-modal__contact-icon", domProps: { innerHTML: e._s(e.phone) } }), e._v(" "), i("div", { staticClass: "intvr-ui-modal__contact-text" }, [e._v(e._s(e.info.contacts.phone))])]) : e._e(), e._v(" "), e.info.contacts.email ? i("div", { staticClass: "intvr-ui-modal__contact" }, [i("div", { staticClass: "intvr-ui-modal__contact-icon", domProps: { innerHTML: e._s(e.mail) } }), e._v(" "), i("div", { staticClass: "intvr-ui-modal__contact-text" }, [e._v(e._s(e.info.contacts.email))])]) : e._e(), e._v(" "), e.info.contacts.site ? i("div", { staticClass: "intvr-ui-modal__contact" }, [i("div", { staticClass: "intvr-ui-modal__contact-icon", domProps: { innerHTML: e._s(e.web) } }), e._v(" "), i("div", { staticClass: "intvr-ui-modal__contact-text" }, [e._v(e._s(e.info.contacts.site))])]) : e._e()]), e._v(" "), e.info.company ? i("div", { staticClass: "intvr-ui-modal__company" }, [e.info.company.img ? i("img", { attrs: { src: e.info.company.img } }) : e._e(), e._v(" "), i("div", { staticClass: "intvr-ui-modal__company-name" }, [e._v(e._s(e.info.company.name))]), e._v(" "), e.info.company.site ? i("div", { staticClass: "intvr-ui-modal__contact" }, [i("div", { staticClass: "intvr-ui-modal__contact-icon", domProps: { innerHTML: e._s(e.web) } }), e._v(" "), i("div", { staticClass: "intvr-ui-modal__contact-text" }, [e._v(e._s(e.info.company.site))])]) : e._e()]) : e._e()]) : e._e()])])]) : e._e()]); };
    ip._withStripped = !0;
    var np = i(38), rp = i.n(np), ap = i(39), op = i.n(ap), sp = i(40), lp = i.n(sp), cp = i(41), up = i.n(cp), hp = { name: "Modal", filters: { convertPrice: bd.convertPrice }, props: { info: { type: Object, default: function () { } }, show: { type: Boolean, default: !1 }, isMobile: { type: Boolean, default: !1 } }, methods: { _closeModal: function () { this.$emit("close-modal"); } }, data: function () { return { close: rp.a, web: op.a, phone: lp.a, mail: up.a }; }, created: function () { var e = this; window.addEventListener("mousedown", (function (t) { e.$el.contains(t.target) || e._closeModal(); })), window.addEventListener("touchstart", (function (t) { e.$el.contains(t.target) || e._closeModal(); })); } }, dp = (i(90), Cd(hp, ip, [], !1, null, null, null));
    dp.options.__file = "src/js/ui/components/Modal.vue";
    var pp = dp.exports, fp = i(42), mp = i.n(fp), vp = i(43), gp = i.n(vp), yp = i(44), bp = i.n(yp), xp = i(45), _p = i.n(xp), wp = i(46), Tp = i.n(wp), Mp = i(47), Ap = i.n(Mp), Sp = i(48), Ep = i.n(Sp), Pp = i(49), Cp = i.n(Pp), Lp = i(50), Rp = i.n(Lp), Ip = { help: mp.a, close: gp.a, fullSize: bp.a, cameraPlanMode: _p.a, cameraPreviewMode: Tp.a, cameraPanoramaMode: Ap.a, poweredBy: Ep.a, check: Cp.a, link: Rp.a }, Op = function () { var e = this, t = e.$createElement, i = e._self._c || t; return e.show ? i("div", { staticClass: "intvr-ui-style-choose" }, [i("div", { staticClass: "intvr-ui-style-choose__wrapper", style: "background:" + e.styleBackground }, [i("div", { staticClass: "intvr-ui-style-choose__top-left-block", class: { "intvr-ui-style-choose__top-left-block--mobile": e.isMobile } }, [i("div", { staticClass: "intvr-ui-layout__top-left-block-logo" }, [i("img", { attrs: { src: e.companyLogo } })]), e._v(" "), i("div", { staticClass: "intvr-ui-style-choose__logo-text", class: "intvr-ui-style-choose__logo-text--" + e.fontColorMode }, [e._v(e._s(e.companyName))])]), e._v(" "), i("div", { staticClass: "intvr-ui-style-choose__choose-block", class: { "intvr-ui-style-choose__choose-block--mobile": e.isMobile } }, [i("div", { staticClass: "intvr-ui-style-choose__header", class: [{ "intvr-ui-style-choose__header--mobile": e.isMobile }, "intvr-ui-style-choose__header--" + e.fontColorMode] }, [e._v("\n        Select style\n      ")]), e._v(" "), i("div", { staticClass: "intvr-ui-style-choose__slider-wrapper" }, [i("swiper", { staticClass: "intvr-ui-style-choose__slider", attrs: { options: e.swiperOptions } }, e._l(e.styles, (function (t, n) { return i("swiper-slide", { key: n }, [i("div", { staticClass: "intvr-ui-style-choose__slider-slide", class: { "intvr-ui-style-choose__slider-slide--mobile": e.isMobile }, on: { click: function (i) { return e._onStyleSelect(t); } } }, [i("div", { staticClass: "intvr-ui-style-choose__slide-image", class: { "intvr-ui-style-choose__slide-image--mobile": e.isMobile }, style: "background: url(" + t.image + ")no-repeat center/cover #000000" }), e._v(" "), i("div", { staticClass: "intvr-ui-style-choose__slide-style-check", domProps: { innerHTML: e._s(e.svgIcons.check) } }), e._v(" "), i("div", { staticClass: "intvr-ui-style-choose__slide-style-name" }, [e._v("\n                " + e._s(t.title) + "\n              ")])])]); })), 1)], 1)]), e._v(" "), i("div", { staticClass: "intvr-ui-style-choose__bottom-left-block", class: { "intvr-ui-style-choose__bottom-left-block--mobile": e.isMobile } }, [i("div", { staticClass: "intvr-ui-layout__bottom-left-block-logo intvr-ui-style-choose__bottom-left-block-logo", class: "intvr-ui-style-choose__bottom-left-block-logo--" + e.fontColorMode, domProps: { innerHTML: e._s(e.svgIcons.poweredBy) } })])])]) : e._e(); };
    Op._withStripped = !0;
    var Dp = i(9), Fp = { components: { swiper: Dp.swiper, swiperSlide: Dp.swiperSlide }, name: "StyleSelect", props: { show: { type: Boolean, default: !1 }, fontColorMode: { type: String, default: "light" }, styles: { type: Array, default: function () { return []; } }, activeStyle: { type: String, default: "" }, width: { type: Number, default: window.innerWidth }, isMobile: { type: Boolean, default: !1 }, companyLogo: { type: String }, companyName: { type: String } }, data: function () { return { svgIcons: Ip }; }, computed: { swiperOptions: function () { var e, t = window.innerWidth / this.width; return { slidesPerView: 5, spaceBetween: 30, freeMode: !0, wrapperClass: "intvr-ui-style-choose__swiper-wrapper", breakpoints: (e = {}, Sd()(e, 1600 * t, { slidesPerView: 4, spaceBetween: 40 }), Sd()(e, 1200 * t, { slidesPerView: 3, spaceBetween: 30 }), Sd()(e, 668 * t, { slidesPerView: 2, spaceBetween: 20 }), Sd()(e, 375 * t, { slidesPerView: 1.4 }), e) }; }, styleBackground: function () { return a.materialConfig.BackgroundColor; } }, methods: { _onStyleSelect: function (e) { this.$emit("style-select", e); } } }, kp = (i(92), Cd(Fp, Op, [], !1, null, null, null));
    kp.options.__file = "src/js/ui/components/StyleSelect.vue";
    var Np = kp.exports, Bp = (i(93), function () { var e = this, t = e.$createElement, i = e._self._c || t; return i("transition", { attrs: { name: "fade" } }, [e.showPopUp ? i("div", { staticClass: "intvr-ui-link-popup intvr-ui-link-popup__wrapper" }, [i("div", { staticClass: "intvr-ui-link-popup__field" }, [i("input", { staticClass: "intvr-ui-link-popup__input", attrs: { readonly: "" }, domProps: { value: e.link }, on: { click: e._onLinkClick } })]), e._v(" "), i("div", { directives: [{ name: "hammer", rawName: "v-hammer:tap", value: e.closePopUp, expression: "closePopUp", arg: "tap" }], staticClass: "intvr-ui-link-popup__close", domProps: { innerHTML: e._s(e.svgIcons.close) }, on: { click: e.closePopUp } })]) : e._e()]); });
    Bp._withStripped = !0;
    var Gp = {
    name: "LinkPopUp", data: function () { return { showPopUp: !1, link: "", svgIcons: Ip, windowCloseTimer: void 0, windowCloseTimeout: 2e4 }; }, methods: {
    closePopUp: function () { clearTimeout(this.windowCloseTimer), this.showPopUp = !1; }, openPopUp: function (e) { this.link = e, this.showPopUp = !0, this._onLinkClick(), this._startWindowCloseTimer(); }, _onLinkClick: function (e) {
    e && e.target.select(); try {
        window.navigator.clipboard.writeText(this.link).catch((function (e) { return console.log("error:", e); }));
    }
        catch (e) {
            console.log("error:", e);
        }
    }, _startWindowCloseTimer: function () { var e = this; this.windowCloseTimer = setTimeout((function () { e.closePopUp(), clearTimeout(e.windowCloseTimer); }), this.windowCloseTimeout); }
    }
    }, Hp = (i(94), Cd(Gp, Bp, [], !1, null, null, null));
    Hp.options.__file = "src/js/ui/components/LinkPopUp.vue";
    var Up = Hp.exports;
    function zp(e, t) {
    var i = Object.keys(e); if (Object.getOwnPropertySymbols) {
        var n = Object.getOwnPropertySymbols(e);
        t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable; }))), i.push.apply(i, n);
    } return i;
    }
    function Vp(e) {
    for (var t = 1; t < arguments.length; t++) {
        var i = null != arguments[t] ? arguments[t] : {};
        t % 2 ? zp(Object(i), !0).forEach((function (t) { Sd()(e, t, i[t]); })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : zp(Object(i)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t)); }));
    } return e;
    }
    var jp = { svgIcons: Ip, helpIsVisible: !1, fullScreenIsActive: !1, cameraPlanModeIsActive: !1, cameraPreviewModeIsActive: !0, cameraPanoramaModeIsActive: !1, isPreloading: !1, preloadingState: 0, preloadingCustomBackground: null, preloadingWithSnapshot: !1, style: void 0, lifeScenario: void 0, styleItems: [], lifeScenarioItems: [] }, Wp = { components: { LinkPopUp: Up, ButtonIcon: Rd, Dropdown: Nd, HelpBlock: Yd, Tooltip: Zd, Preloader: tp, Modal: pp, StyleSelect: Np, swiper: Dp.swiper, swiperSlide: Dp.swiperSlide }, props: { events: { type: Object }, usePreloader: { type: Boolean, default: !1 }, styles: { type: Array, default: function () { return []; } }, apartmentInfo: { type: Object, default: function () { } }, activeStyle: { type: String, default: "" } }, data: function () { return Vp({ svgIcons: Ip, isMobile: !1, slidePage: 0 }, jp, { showModal: !1, showLinkButton: !1, showStyleSelectWindow: !0, swiperOptions: { slidesPerView: "auto", freeMode: !0 }, width: 0 }); }, computed: { helpBlockClass: function () { return this.isMobile ? "intvr-ui-layout__help-block-mobile" : "intvr-ui-layout__help-block"; }, changeBlockPosition: function () { return this.calculateWidth(), this.helpIsVisible && (this.width < 920 || this.isMobile); }, styleSelectIsVisible: function () { return this.styleItems.length > 1; }, lifeScenarioSelectIsVisible: function () { return this.lifeScenarioItems.length > 1; }, companyData: function () { return (this.apartmentInfo || {}).company || {}; }, fontColorMode: function () { return a.materialConfig.BackgroundMode || "light"; } }, methods: { calculateWidth: function () { this.width = (this.$el || {}).offsetWidth; }, setFullScreen: function (e) { this.fullScreenIsActive = e; }, setCameraPlanMode: function () { this.cameraPlanModeIsActive = !0, this.cameraPreviewModeIsActive = !1, this.cameraPanoramaModeIsActive = !1; }, setCameraPreviewMode: function () { this.cameraPlanModeIsActive = !1, this.cameraPreviewModeIsActive = !0, this.cameraPanoramaModeIsActive = !1; }, setCameraPanoramaMode: function () { this.cameraPlanModeIsActive = !1, this.cameraPreviewModeIsActive = !1, this.cameraPanoramaModeIsActive = !0; }, setIsMobile: function (e) { this.isMobile = e, this.calculateWidth(); }, updatePreloadingState: function (e) { this.preloadingState = e; }, resetData: function (e) { var t = e ? this.$options.data.call(this) : Vp({}, this.$options.data.call(this), { isPreloading: this.isPreloading, preloadingState: this.preloadingState, showLinkButton: this.showLinkButton, preloadingCustomBackground: this.preloadingCustomBackground, preloadingWithSnapshot: this.preloadingWithSnapshot, isMobile: this.isMobile }); Object.assign(this.$data, t); }, finishPreloading: function () { this.isPreloading = !1; }, setDeepLinkPopUp: function (e) { this.$refs.linkPopUp.openPopUp(e); }, startPreloading: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.preloadingCustomBackground = e, this.$refs.preloader.restartAnimation(), this.isPreloading = !0, this.preloadingWithSnapshot = t; }, setCustomStyles: function (e, t) { this.styleItems = e.map((function (e) { return { title: e.name, value: e.name, image: (t.assetsDomain || "") + e.preloaderImagePath, imageHi: (t.assetsDomain || "") + e.preloaderImageHiPath }; })); }, setActiveStyle: function (e) { this.style = e; }, showStyleSelect: function () { this.showStyleSelectWindow = !0; }, showGenerateLinkButton: function () { this.showLinkButton = !0; }, hideStyleSelect: function () { this.showStyleSelectWindow = !1; }, _showModal: function () { (this.apartmentInfo || {}).enabled && (this.showModal = !0); }, _hideModal: function () { this.showModal = !1; }, _onClickHelpButton: function () { this.helpIsVisible = !this.helpIsVisible; }, _onClickFullScreen: function () { this.events.emit("mode:full-screen", !this.fullScreenIsActive); }, _onPlayerClose: function () { this.events.emit("player:destroy"); }, _onClickSceneStateButton: function () { this.events.emit("scene:generate-state-link"); }, _onClickCameraPlanModeButton: function () { this.events.emit("camera-mode:plan"); }, _onClickCameraPreviewModeButton: function () { this.events.emit("camera-mode:preview"); }, _onClickCameraPanoramaModeButton: function () { this.events.emit("camera-mode:panorama"); }, _onSelectStyle: function (e) { this.events.emit("style-select", { name: e.value, image: e.imageHi }); }, _onChangeCustomStyle: function (e) { this.events.emit("change-custom-style", e); }, _onSlidePageChange: function (e) { this.slidePage = e; } }, created: function () { this.usePreloader && (this.isPreloading = !0), this.showLinkButton = a.showDeepLinkButton || !1; } }, Xp = (i(95), Cd(Wp, Md, [], !1, null, null, null));
    Xp.options.__file = "src/js/ui/components/Layout.vue";
    var Yp = Xp.exports;
    wd.a.use(Td.VueHammer);
    var Qp = function () { function e(t, i, n, r, a, o) { c()(this, e), this._$container = t, this._$document = r, this._eventEmitter = i, this._isNarrowScreen = n, this._rootVm = void 0, this._apartmentInfo = o, this._params = a; } return h()(e, [{ key: "init", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, i = t.usePreloader, n = t.showStyleSelect; this._rootVm = new wd.a({ el: this._makeUIDomElement(), render: function (t) { return t(Yp, { props: { events: e.events, apartmentInfo: e._apartmentInfo, usePreloader: i } }); } }), this.layoutVm.setCustomStyles(this._params.styles, this._params), this.layoutVm.setActiveStyle(this._params.activeStyle), this.setIsNarrowScreen(this._isNarrowScreen), n ? this.showStyleSelectWindow() : this.hideStyleSelectWindow(); } }, { key: "reinit", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; this._eventEmitter.offAll(), this.layoutVm.resetData(e), e && this.startPreloading(), this.hideStyleSelectWindow(), this.layoutVm.setCustomStyles(this._params.styles, this._params), this.layoutVm.setActiveStyle(this._params.activeStyle); } }, { key: "destroy", value: function () { this._rootVm.$destroy(), this._$container.removeChild(this._$container.getElementsByTagName("div")[0]); } }, { key: "showStyleSelectWindow", value: function () { this.layoutVm.showStyleSelect(); } }, { key: "hideStyleSelectWindow", value: function () { this.layoutVm.hideStyleSelect(); } }, { key: "startPreloading", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.layoutVm.startPreloading(e, t); } }, { key: "updatePreloadingState", value: function (e) { this.layoutVm.updatePreloadingState(e); } }, { key: "finishPreloading", value: function () { this.layoutVm.finishPreloading(); } }, { key: "showGenerateLinkButton", value: function () { this.layoutVm.showGenerateLinkButton(); } }, { key: "setDeepLink", value: function (e) { this.layoutVm.setDeepLinkPopUp(e); } }, { key: "setIsNarrowScreen", value: function (e) { this.layoutVm.setIsMobile(e); } }, { key: "_makeUIDomElement", value: function () { return this._$container.appendChild(this._$document.createElement("div")); } }, { key: "events", get: function () { return this._eventEmitter; } }, { key: "layoutVm", get: function () { return this._rootVm.$children[0]; } }]), e; } (), qp = function () { function e() { c()(this, e); } return h()(e, [{ key: "processExternal", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; return this._mergeExternalConfig(e, t, i), this._addDomainForResources(e, e.resourcesDomain), this._addDomainForAssets(e, e.assetsDomain), e; } }, { key: "_mergeExternalConfig", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; i = i || t.activeStyle; var n = t.styles.find((function (e) { return e.name === i; })); n || (n = t.styles[0]), Object.assign(e, { activeStyle: n.name, assetsDomain: t.assetsDomain || "", resourcesDomain: t.resourcesDomain || "", restoreStateParams: t.restoreStateParams || "", isShowingStats: t.isShowingStats, gui: t.gui, name: n.name, modelPath: n.modelPath, lowModelPath: n.lowModelPath, collisionModelPath: n.collisionModelPath, panoramas: n.panoramas, preloaderImagePath: n.preloaderImageHiPath || n.preloaderImagePath, postEffects: t.postEffects, showStyleChooseWindow: t.showStyleChooseWindow, styles: t.styles, materialConfig: t.materialConfig || e.materialConfig, showDeepLinkButton: t.showDeepLinkButton || !1 }), Object.assign(e.mirrorsConfig, { texturesPath: n.mirrorsConfig.texturesPath, mirrors: n.mirrorsConfig.mirrors }), Object.assign(e.modelConfig, { texturesPath: n.modelConfig.texturesPath, texturesPathWebp: n.modelConfig.texturesPathWebp }), Object.assign(e.panoramasConfig, { texturesPath: n.panoramasConfig.texturesPath }), Object.assign(e.plan, { texturePath: n.plan.texturePath, modelPath: n.plan.modelPath }), t.blurredConfig ? Object.assign(e.blurredConfig, { enable: t.blurredConfig.enable, enableBlurEffect: t.blurredConfig.enableBlurEffect, opacity: t.blurredConfig.opacity, modelPath: t.blurredConfig.modelPath, labels: t.blurredConfig.labels, labelMinWidth: t.blurredConfig.labelMinWidth }) : Object.assign(e.blurredConfig, { modelPath: void 0, enable: !1 }); } }, { key: "_addDomainForResources", value: function (e, t) { this._addDomain(e, ["backgroundPath", "basePath", "cursorPath"], t), this._addDomain(e.modelConfig, ["decoderPath"], t), this._addDomain(e.blurredConfig, ["texturePath"], t); } }, { key: "_addDomainForAssets", value: function (e, t) { this._addDomain(e, ["modelPath", "lowModelPath", "collisionModelPath", "preloaderImagePath"], t), this._addDomain(e.plan, ["modelPath", "texturePath"], t), this._addDomain(e.blurredConfig, ["modelPath"], t), this._addDomain(e.modelConfig.texturesPath, ["high", "medium", "low"], t), this._addDomain(e.modelConfig.texturesPathWebp, ["high", "medium", "low"], t), this._addDomain(e.panoramasConfig.texturesPath, ["high", "medium", "low"], t), this._addDomain(e.mirrorsConfig.texturesPath, ["low"], t); } }, { key: "_addDomain", value: function (e, t, i) { return t.forEach((function (t) { return e[t] = void 0 === e[t] || null === e[t] || e[t].includes(i) ? e[t] : i + e[t].replace(/^\/+/, ""); })), e; } }]), e; } (), $p = function () {
    function e(e) { Ic.call(this, e), this.dracoLoader = null, this.ddsLoader = null; } function t() { var e = {}; return { get: function (t) { return e[t]; }, add: function (t, i) { e[t] = i; }, remove: function (t) { delete e[t]; }, removeAll: function () { e = {}; } }; } e.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: e, load: function (e, t, i, n) {
    var r, a = this; r = "" !== this.resourcePath ? this.resourcePath : "" !== this.path ? this.path : Tu.extractUrlBase(e), a.manager.itemStart(e); var o = function (t) { n ? n(t) : console.error(t), a.manager.itemError(e), a.manager.itemEnd(e); }, s = new Dc(a.manager); s.setPath(this.path), s.setResponseType("arraybuffer"), "use-credentials" === a.crossOrigin && s.setWithCredentials(!0), s.load(e, (function (i) {
    try {
        a.parse(i, r, (function (i) { t(i), a.manager.itemEnd(e); }), o);
    }
        catch (e) {
            o(e);
        }
    }), i, o);
    }, setDRACOLoader: function (e) { return this.dracoLoader = e, this; }, setDDSLoader: function (e) { return this.ddsLoader = e, this; }, parse: function (e, t, s, l) {
    var f, m = {}; if ("string" == typeof e)
        f = e;
    else if (Tu.decodeText(new Uint8Array(e, 0, 4)) === o) {
        try {
            m[i.KHR_BINARY_GLTF] = new c(e);
        }
        catch (e) {
            return void (l && l(e));
        }
        f = m[i.KHR_BINARY_GLTF].content;
    }
    else
        f = Tu.decodeText(new Uint8Array(e)); var v = JSON.parse(f); if (void 0 === v.asset || v.asset.version[0] < 2)
            l && l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
        else {
            if (v.extensionsUsed)
                for (var g = 0; g < v.extensionsUsed.length; ++g) {
                    var y = v.extensionsUsed[g], b = v.extensionsRequired || [];
                    switch (y) {
                        case i.KHR_LIGHTS_PUNCTUAL:
                            m[y] = new r(v);
                            break;
                        case i.KHR_MATERIALS_UNLIT:
                            m[y] = new a;
                            break;
                        case i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
                            m[y] = new d;
                            break;
                        case i.KHR_DRACO_MESH_COMPRESSION:
                            m[y] = new u(v, this.dracoLoader);
                            break;
                        case i.MSFT_TEXTURE_DDS:
                            m[y] = new n(this.ddsLoader);
                            break;
                        case i.KHR_TEXTURE_TRANSFORM:
                            m[y] = new h;
                            break;
                        case i.KHR_MESH_QUANTIZATION:
                            m[y] = new p;
                            break;
                        default: b.indexOf(y) >= 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + y + '".');
                    }
                }
            new z(v, m, { path: t || this.resourcePath || "", crossOrigin: this.crossOrigin, manager: this.manager }).parse(s, l);
        }
    }
    }); var i = { KHR_BINARY_GLTF: "KHR_binary_glTF", KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression", KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual", KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: "KHR_materials_pbrSpecularGlossiness", KHR_MATERIALS_UNLIT: "KHR_materials_unlit", KHR_TEXTURE_TRANSFORM: "KHR_texture_transform", KHR_MESH_QUANTIZATION: "KHR_mesh_quantization", MSFT_TEXTURE_DDS: "MSFT_texture_dds" }; function n(e) {
    if (!e)
        throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader"); this.name = i.MSFT_TEXTURE_DDS, this.ddsLoader = e;
    } function r(e) { this.name = i.KHR_LIGHTS_PUNCTUAL; var t = e.extensions && e.extensions[i.KHR_LIGHTS_PUNCTUAL] || {}; this.lightDefs = t.lights || []; } function a() { this.name = i.KHR_MATERIALS_UNLIT; } r.prototype.loadLight = function (e) {
    var t, i = this.lightDefs[e], n = new yn(16777215); void 0 !== i.color && n.fromArray(i.color); var r = void 0 !== i.range ? i.range : 0; switch (i.type) {
        case "directional":
            (t = new bu(n)).target.position.set(0, 0, -1), t.add(t.target);
            break;
        case "point":
            (t = new vu(n)).distance = r;
            break;
        case "spot":
            (t = new fu(n)).distance = r, i.spot = i.spot || {}, i.spot.innerConeAngle = void 0 !== i.spot.innerConeAngle ? i.spot.innerConeAngle : 0, i.spot.outerConeAngle = void 0 !== i.spot.outerConeAngle ? i.spot.outerConeAngle : Math.PI / 4, t.angle = i.spot.outerConeAngle, t.penumbra = 1 - i.spot.innerConeAngle / i.spot.outerConeAngle, t.target.position.set(0, 0, -1), t.add(t.target);
            break;
        default: throw new Error('THREE.GLTFLoader: Unexpected light type, "' + i.type + '".');
    } return t.position.set(0, 0, 0), t.decay = 2, void 0 !== i.intensity && (t.intensity = i.intensity), t.name = i.name || "light_" + e, Promise.resolve(t);
    }, a.prototype.getMaterialType = function () { return An; }, a.prototype.extendParams = function (e, t, i) {
    var n = []; e.color = new yn(1, 1, 1), e.opacity = 1; var r = t.pbrMetallicRoughness; if (r) {
        if (Array.isArray(r.baseColorFactor)) {
            var a = r.baseColorFactor;
            e.color.fromArray(a), e.opacity = a[3];
        }
        void 0 !== r.baseColorTexture && n.push(i.assignTexture(e, "map", r.baseColorTexture));
    } return Promise.all(n);
    }; var o = "glTF", s = 12, l = { JSON: 1313821514, BIN: 5130562 }; function c(e) {
    this.name = i.KHR_BINARY_GLTF, this.content = null, this.body = null; var t = new DataView(e, 0, s); if (this.header = { magic: Tu.decodeText(new Uint8Array(e.slice(0, 4))), version: t.getUint32(4, !0), length: t.getUint32(8, !0) }, this.header.magic !== o)
        throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header."); if (this.header.version < 2)
            throw new Error("THREE.GLTFLoader: Legacy binary file detected."); for (var n = new DataView(e, s), r = 0; r < n.byteLength;) {
                var a = n.getUint32(r, !0);
                r += 4;
                var c = n.getUint32(r, !0);
                if (r += 4, c === l.JSON) {
                    var u = new Uint8Array(e, s + r, a);
                    this.content = Tu.decodeText(u);
                }
                else if (c === l.BIN) {
                    var h = s + r;
                    this.body = e.slice(h, h + a);
                }
                r += a;
            } if (null === this.content)
            throw new Error("THREE.GLTFLoader: JSON content not found.");
    } function u(e, t) {
    if (!t)
        throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided."); this.name = i.KHR_DRACO_MESH_COMPRESSION, this.json = e, this.dracoLoader = t;
    } function h() { this.name = i.KHR_TEXTURE_TRANSFORM; } function d() {
    return {
    name: i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS, specularGlossinessParams: ["color", "map", "lightMap", "lightMapIntensity", "aoMap", "aoMapIntensity", "emissive", "emissiveIntensity", "emissiveMap", "bumpMap", "bumpScale", "normalMap", "displacementMap", "displacementScale", "displacementBias", "specularMap", "specular", "glossinessMap", "glossiness", "alphaMap", "envMap", "envMapIntensity", "refractionRatio"], getMaterialType: function () { return Tr; }, extendParams: function (e, t, i) {
    var n = t.extensions[this.name], r = kr.standard, a = xr.clone(r.uniforms), o = ["#ifdef USE_SPECULARMAP", "\tuniform sampler2D specularMap;", "#endif"].join("\n"), s = ["#ifdef USE_GLOSSINESSMAP", "\tuniform sampler2D glossinessMap;", "#endif"].join("\n"), l = ["vec3 specularFactor = specular;", "#ifdef USE_SPECULARMAP", "\tvec4 texelSpecular = texture2D( specularMap, vUv );", "\ttexelSpecular = sRGBToLinear( texelSpecular );", "\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture", "\tspecularFactor *= texelSpecular.rgb;", "#endif"].join("\n"), c = ["float glossinessFactor = glossiness;", "#ifdef USE_GLOSSINESSMAP", "\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );", "\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture", "\tglossinessFactor *= texelGlossiness.a;", "#endif"].join("\n"), u = ["PhysicalMaterial material;", "material.diffuseColor = diffuseColor.rgb;", "material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );", "material.specularColor = specularFactor.rgb;"].join("\n"), h = r.fragmentShader.replace("uniform float roughness;", "uniform vec3 specular;").replace("uniform float metalness;", "uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>", o).replace("#include <metalnessmap_pars_fragment>", s).replace("#include <roughnessmap_fragment>", l).replace("#include <metalnessmap_fragment>", c).replace("#include <lights_physical_fragment>", u); delete a.roughness, delete a.metalness, delete a.roughnessMap, delete a.metalnessMap, a.specular = { value: (new yn).setHex(1118481) }, a.glossiness = { value: .5 }, a.specularMap = { value: null }, a.glossinessMap = { value: null }, e.vertexShader = r.vertexShader, e.fragmentShader = h, e.uniforms = a, e.defines = { STANDARD: "" }, e.color = new yn(1, 1, 1), e.opacity = 1; var d = []; if (Array.isArray(n.diffuseFactor)) {
        var p = n.diffuseFactor;
        e.color.fromArray(p), e.opacity = p[3];
    } if (void 0 !== n.diffuseTexture && d.push(i.assignTexture(e, "map", n.diffuseTexture)), e.emissive = new yn(0, 0, 0), e.glossiness = void 0 !== n.glossinessFactor ? n.glossinessFactor : 1, e.specular = new yn(1, 1, 1), Array.isArray(n.specularFactor) && e.specular.fromArray(n.specularFactor), void 0 !== n.specularGlossinessTexture) {
        var f = n.specularGlossinessTexture;
        d.push(i.assignTexture(e, "glossinessMap", f)), d.push(i.assignTexture(e, "specularMap", f));
    } return Promise.all(d);
    }, createMaterial: function (e) { var t = new Tr({ defines: e.defines, vertexShader: e.vertexShader, fragmentShader: e.fragmentShader, uniforms: e.uniforms, fog: !0, lights: !0, opacity: e.opacity, transparent: e.transparent }); return t.isGLTFSpecularGlossinessMaterial = !0, t.color = e.color, t.map = void 0 === e.map ? null : e.map, t.lightMap = null, t.lightMapIntensity = 1, t.aoMap = void 0 === e.aoMap ? null : e.aoMap, t.aoMapIntensity = 1, t.emissive = e.emissive, t.emissiveIntensity = 1, t.emissiveMap = void 0 === e.emissiveMap ? null : e.emissiveMap, t.bumpMap = void 0 === e.bumpMap ? null : e.bumpMap, t.bumpScale = 1, t.normalMap = void 0 === e.normalMap ? null : e.normalMap, e.normalScale && (t.normalScale = e.normalScale), t.displacementMap = null, t.displacementScale = 1, t.displacementBias = 0, t.specularMap = void 0 === e.specularMap ? null : e.specularMap, t.specular = e.specular, t.glossinessMap = void 0 === e.glossinessMap ? null : e.glossinessMap, t.glossiness = e.glossiness, t.alphaMap = null, t.envMap = void 0 === e.envMap ? null : e.envMap, t.envMapIntensity = 1, t.refractionRatio = .98, t.extensions.derivatives = !0, t; }, cloneMaterial: function (e) {
    var t = e.clone(); t.isGLTFSpecularGlossinessMaterial = !0; for (var i = this.specularGlossinessParams, n = 0, r = i.length; n < r; n++) {
        var a = e[i[n]];
        t[i[n]] = a && a.isColor ? a.clone() : a;
    } return t;
    }, refreshUniforms: function (e, t, i, n, r) {
    if (!0 === r.isGLTFSpecularGlossinessMaterial) {
        var a, o = r.uniforms, s = r.defines;
        o.opacity.value = r.opacity, o.diffuse.value.copy(r.color), o.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity), o.map.value = r.map, o.specularMap.value = r.specularMap, o.alphaMap.value = r.alphaMap, o.lightMap.value = r.lightMap, o.lightMapIntensity.value = r.lightMapIntensity, o.aoMap.value = r.aoMap, o.aoMapIntensity.value = r.aoMapIntensity, r.map ? a = r.map : r.specularMap ? a = r.specularMap : r.displacementMap ? a = r.displacementMap : r.normalMap ? a = r.normalMap : r.bumpMap ? a = r.bumpMap : r.glossinessMap ? a = r.glossinessMap : r.alphaMap ? a = r.alphaMap : r.emissiveMap && (a = r.emissiveMap), void 0 !== a && (a.isWebGLRenderTarget && (a = a.texture), !0 === a.matrixAutoUpdate && a.updateMatrix(), o.uvTransform.value.copy(a.matrix)), r.envMap && (o.envMap.value = r.envMap, o.envMapIntensity.value = r.envMapIntensity, o.flipEnvMap.value = r.envMap.isCubeTexture ? -1 : 1, o.reflectivity.value = r.reflectivity, o.refractionRatio.value = r.refractionRatio, o.maxMipLevel.value = e.properties.get(r.envMap).__maxMipLevel), o.specular.value.copy(r.specular), o.glossiness.value = r.glossiness, o.glossinessMap.value = r.glossinessMap, o.emissiveMap.value = r.emissiveMap, o.bumpMap.value = r.bumpMap, o.normalMap.value = r.normalMap, o.displacementMap.value = r.displacementMap, o.displacementScale.value = r.displacementScale, o.displacementBias.value = r.displacementBias, null !== o.glossinessMap.value && void 0 === s.USE_GLOSSINESSMAP && (s.USE_GLOSSINESSMAP = "", s.USE_ROUGHNESSMAP = ""), null === o.glossinessMap.value && void 0 !== s.USE_GLOSSINESSMAP && (delete s.USE_GLOSSINESSMAP, delete s.USE_ROUGHNESSMAP);
    }
    }
    };
    } function p() { this.name = i.KHR_MESH_QUANTIZATION; } function f(e, t, i, n) { mc.call(this, e, t, i, n); } u.prototype.decodePrimitive = function (e, t) {
    var i = this.json, n = this.dracoLoader, r = e.extensions[this.name].bufferView, a = e.extensions[this.name].attributes, o = {}, s = {}, l = {}; for (var c in a) {
        var u = L[c] || c.toLowerCase();
        o[u] = a[c];
    } for (c in e.attributes) {
        u = L[c] || c.toLowerCase();
        if (void 0 !== a[c]) {
            var h = i.accessors[e.attributes[c]], d = A[h.componentType];
            l[u] = d, s[u] = !0 === h.normalized;
        }
    } return t.getDependency("bufferView", r).then((function (e) {
    return new Promise((function (t) {
    n.decodeDracoFile(e, (function (e) {
    for (var i in e.attributes) {
        var n = e.attributes[i], r = s[i];
        void 0 !== r && (n.normalized = r);
    } t(e);
    }), o, l);
    }));
    }));
    }, h.prototype.extendTexture = function (e, t) { return e = e.clone(), void 0 !== t.offset && e.offset.fromArray(t.offset), void 0 !== t.rotation && (e.rotation = t.rotation), void 0 !== t.scale && e.repeat.fromArray(t.scale), void 0 !== t.texCoord && console.warn('THREE.GLTFLoader: Custom UV sets in "' + this.name + '" extension not yet supported.'), e.needsUpdate = !0, e; }, f.prototype = Object.create(mc.prototype), f.prototype.constructor = f, f.prototype.copySampleValue_ = function (e) {
    for (var t = this.resultBuffer, i = this.sampleValues, n = this.valueSize, r = e * n * 3 + n, a = 0; a !== n; a++)
        t[a] = i[r + a]; return t;
    }, f.prototype.beforeStart_ = f.prototype.copySampleValue_, f.prototype.afterEnd_ = f.prototype.copySampleValue_, f.prototype.interpolate_ = function (e, t, i, n) {
    for (var r = this.resultBuffer, a = this.sampleValues, o = this.valueSize, s = 2 * o, l = 3 * o, c = n - t, u = (i - t) / c, h = u * u, d = h * u, p = e * l, f = p - l, m = -2 * d + 3 * h, v = d - h, g = 1 - m, y = v - h + u, b = 0; b !== o; b++) {
        var x = a[f + b + o], _ = a[f + b + s] * c, w = a[p + b + o], T = a[p + b] * c;
        r[b] = g * x + y * _ + m * w + v * T;
    } return r;
    }; var m, v = 0, g = 1, y = 2, b = 3, x = 4, w = 5, M = 6, A = { 5120: Int8Array, 5121: Uint8Array, 5122: Int16Array, 5123: Uint16Array, 5125: Uint32Array, 5126: Float32Array }, E = { 9728: we, 9729: Ae, 9984: Te, 9985: Se, 9986: Me, 9987: Ee }, P = { 33071: xe, 33648: _e, 10497: be }, C = { SCALAR: 1, VEC2: 2, VEC3: 3, VEC4: 4, MAT2: 4, MAT3: 9, MAT4: 16 }, L = { POSITION: "position", NORMAL: "normal", TANGENT: "tangent", TEXCOORD_0: "uv", TEXCOORD_1: "uv2", COLOR_0: "color", WEIGHTS_0: "skinWeight", JOINTS_0: "skinIndex" }, R = { scale: "scale", translation: "position", rotation: "quaternion", weights: "morphTargetInfluences" }, I = { CUBICSPLINE: void 0, LINEAR: 2301, STEP: 2300 }, O = "OPAQUE", D = "MASK", F = "BLEND", k = { "image/png": ze, "image/jpeg": Ue }; function N(e, t) { return "string" != typeof e || "" === e ? "" : (/^https?:\/\//i.test(t) && /^\//.test(e) && (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e) ? e : /^data:.*,.*$/i.test(e) ? e : /^blob:.*$/i.test(e) ? e : t + e); } function B(e, t, i) {
    for (var n in i.extensions)
        void 0 === e[n] && (t.userData.gltfExtensions = t.userData.gltfExtensions || {}, t.userData.gltfExtensions[n] = i.extensions[n]);
    } function G(e, t) { void 0 !== t.extras && ("object" == typeof t.extras ? Object.assign(e.userData, t.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + t.extras)); } function H(e, t) {
    if (e.updateMorphTargets(), void 0 !== t.weights)
        for (var i = 0, n = t.weights.length; i < n; i++)
            e.morphTargetInfluences[i] = t.weights[i]; if (t.extras && Array.isArray(t.extras.targetNames)) {
                var r = t.extras.targetNames;
                if (e.morphTargetInfluences.length === r.length) {
                    e.morphTargetDictionary = {};
                    for (i = 0, n = r.length; i < n; i++)
                        e.morphTargetDictionary[r[i]] = i;
                }
                else
                    console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
            }
    } function U(e) {
    for (var t = "", i = Object.keys(e).sort(), n = 0, r = i.length; n < r; n++)
        t += i[n] + ":" + e[i[n]] + ";"; return t;
    } function z(e, i, n) { this.json = e || {}, this.extensions = i || {}, this.options = n || {}, this.cache = new t, this.primitiveCache = {}, this.textureLoader = new Hc(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.fileLoader = new Dc(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), "use-credentials" === this.options.crossOrigin && this.fileLoader.setWithCredentials(!0); } function V(e, t, i) {
    var n = t.attributes, r = []; function a(t, n) { return i.getDependency("accessor", t).then((function (t) { e.setAttribute(n, t); })); } for (var o in n) {
        var s = L[o] || o.toLowerCase();
        s in e.attributes || r.push(a(n[o], s));
    } if (void 0 !== t.indices && !e.index) {
        var l = i.getDependency("accessor", t.indices).then((function (t) { e.setIndex(t); }));
        r.push(l);
    } return G(e, t), function (e, t, i) {
    var n = t.attributes, r = new Ui; if (void 0 !== n.POSITION) {
        var a = (d = i.json.accessors[n.POSITION]).min, o = d.max;
        r.set(new Wt(a[0], a[1], a[2]), new Wt(o[0], o[1], o[2]));
        var s = t.targets;
        if (void 0 !== s)
            for (var l = new Wt, c = 0, u = s.length; c < u; c++) {
                var h = s[c];
                if (void 0 !== h.POSITION) {
                    var d;
                    a = (d = i.json.accessors[h.POSITION]).min, o = d.max;
                    l.setX(Math.max(Math.abs(a[0]), Math.abs(o[0]))), l.setY(Math.max(Math.abs(a[1]), Math.abs(o[1]))), l.setZ(Math.max(Math.abs(a[2]), Math.abs(o[2]))), r.expandByVector(l);
                }
            }
        e.boundingBox = r;
        var p = new ji;
        r.getCenter(p.center), p.radius = r.min.distanceTo(r.max) / 2, e.boundingSphere = p;
    }
    } (e, t, i), Promise.all(r).then((function () {
    return void 0 !== t.targets ? function (e, t, i) {
    for (var n = !1, r = !1, a = 0, o = t.length; a < o; a++) {
        if (void 0 !== (c = t[a]).POSITION && (n = !0), void 0 !== c.NORMAL && (r = !0), n && r)
            break;
    } if (!n && !r)
            return Promise.resolve(e); var s = [], l = []; for (a = 0, o = t.length; a < o; a++) {
                var c = t[a];
                if (n) {
                    var u = void 0 !== c.POSITION ? i.getDependency("accessor", c.POSITION) : e.attributes.position;
                    s.push(u);
                }
                if (r) {
                    u = void 0 !== c.NORMAL ? i.getDependency("accessor", c.NORMAL) : e.attributes.normal;
                    l.push(u);
                }
            } return Promise.all([Promise.all(s), Promise.all(l)]).then((function (t) { var i = t[0], a = t[1]; return n && (e.morphAttributes.position = i), r && (e.morphAttributes.normal = a), e.morphTargetsRelative = !0, e; }));
    } (e, t.targets, i) : e;
    }));
    } return z.prototype.parse = function (e, t) { var i = this, n = this.json, r = this.extensions; this.cache.removeAll(), this.markDefs(), Promise.all([this.getDependencies("scene"), this.getDependencies("animation"), this.getDependencies("camera")]).then((function (t) { var a = { scene: t[0][n.scene || 0], scenes: t[0], animations: t[1], cameras: t[2], asset: n.asset, parser: i, userData: {} }; B(r, a, n), G(a, n), e(a); })).catch(t); }, z.prototype.markDefs = function () {
    for (var e = this.json.nodes || [], t = this.json.skins || [], i = this.json.meshes || [], n = {}, r = {}, a = 0, o = t.length; a < o; a++)
        for (var s = t[a].joints, l = 0, c = s.length; l < c; l++)
            e[s[l]].isBone = !0; for (var u = 0, h = e.length; u < h; u++) {
                var d = e[u];
                void 0 !== d.mesh && (void 0 === n[d.mesh] && (n[d.mesh] = r[d.mesh] = 0), n[d.mesh]++ , void 0 !== d.skin && (i[d.mesh].isSkinnedMesh = !0));
            } this.json.meshReferences = n, this.json.meshUses = r;
    }, z.prototype.getDependency = function (e, t) {
    var n = e + ":" + t, r = this.cache.get(n); if (!r) {
        switch (e) {
            case "scene":
                r = this.loadScene(t);
                break;
            case "node":
                r = this.loadNode(t);
                break;
            case "mesh":
                r = this.loadMesh(t);
                break;
            case "accessor":
                r = this.loadAccessor(t);
                break;
            case "bufferView":
                r = this.loadBufferView(t);
                break;
            case "buffer":
                r = this.loadBuffer(t);
                break;
            case "material":
                r = this.loadMaterial(t);
                break;
            case "texture":
                r = this.loadTexture(t);
                break;
            case "skin":
                r = this.loadSkin(t);
                break;
            case "animation":
                r = this.loadAnimation(t);
                break;
            case "camera":
                r = this.loadCamera(t);
                break;
            case "light":
                r = this.extensions[i.KHR_LIGHTS_PUNCTUAL].loadLight(t);
                break;
            default: throw new Error("Unknown type: " + e);
        }
        this.cache.add(n, r);
    } return r;
    }, z.prototype.getDependencies = function (e) {
    var t = this.cache.get(e); if (!t) {
        var i = this, n = this.json[e + ("mesh" === e ? "es" : "s")] || [];
        t = Promise.all(n.map((function (t, n) { return i.getDependency(e, n); }))), this.cache.add(e, t);
    } return t;
    }, z.prototype.loadBuffer = function (e) {
    var t = this.json.buffers[e], n = this.fileLoader; if (t.type && "arraybuffer" !== t.type)
        throw new Error("THREE.GLTFLoader: " + t.type + " buffer type is not supported."); if (void 0 === t.uri && 0 === e)
            return Promise.resolve(this.extensions[i.KHR_BINARY_GLTF].body); var r = this.options; return new Promise((function (e, i) { n.load(N(t.uri, r.path), e, void 0, (function () { i(new Error('THREE.GLTFLoader: Failed to load buffer "' + t.uri + '".')); })); }));
    }, z.prototype.loadBufferView = function (e) { var t = this.json.bufferViews[e]; return this.getDependency("buffer", t.buffer).then((function (e) { var i = t.byteLength || 0, n = t.byteOffset || 0; return e.slice(n, n + i); })); }, z.prototype.loadAccessor = function (e) {
    var t = this, i = this.json, n = this.json.accessors[e]; if (void 0 === n.bufferView && void 0 === n.sparse)
        return Promise.resolve(null); var r = []; return void 0 !== n.bufferView ? r.push(this.getDependency("bufferView", n.bufferView)) : r.push(null), void 0 !== n.sparse && (r.push(this.getDependency("bufferView", n.sparse.indices.bufferView)), r.push(this.getDependency("bufferView", n.sparse.values.bufferView))), Promise.all(r).then((function (e) {
        var r, a = e[0], o = C[n.type], s = A[n.componentType], l = s.BYTES_PER_ELEMENT, c = l * o, u = n.byteOffset || 0, h = void 0 !== n.bufferView ? i.bufferViews[n.bufferView].byteStride : void 0, d = !0 === n.normalized; if (h && h !== c) {
            var p = Math.floor(u / h), f = "InterleavedBuffer:" + n.bufferView + ":" + n.componentType + ":" + p + ":" + n.count, m = t.cache.get(f);
            m || (m = new Xo(new s(a, p * h, n.count * h / l), h / l), t.cache.add(f, m)), r = new Yo(m, o, u % h / l, d);
        }
        else
            r = new Sn(null === a ? new s(n.count * o) : new s(a, u, n.count * o), o, d); if (void 0 !== n.sparse) {
                var v = C.SCALAR, g = A[n.sparse.indices.componentType], y = n.sparse.indices.byteOffset || 0, b = n.sparse.values.byteOffset || 0, x = new g(e[1], y, n.sparse.count * v), _ = new s(e[2], b, n.sparse.count * o);
                null !== a && (r = new Sn(r.array.slice(), r.itemSize, r.normalized));
                for (var w = 0, T = x.length; w < T; w++) {
                    var M = x[w];
                    if (r.setX(M, _[w * o]), o >= 2 && r.setY(M, _[w * o + 1]), o >= 3 && r.setZ(M, _[w * o + 2]), o >= 4 && r.setW(M, _[w * o + 3]), o >= 5)
                        throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
                }
            } return r;
        }));
    }, z.prototype.loadTexture = function (e) { var t, n = this, r = this.json, a = this.options, o = this.textureLoader, s = window.URL || window.webkitURL, l = r.textures[e], c = l.extensions || {}, u = (t = c[i.MSFT_TEXTURE_DDS] ? r.images[c[i.MSFT_TEXTURE_DDS].source] : r.images[l.source]).uri, h = !1; return void 0 !== t.bufferView && (u = n.getDependency("bufferView", t.bufferView).then((function (e) { h = !0; var i = new Blob([e], { type: t.mimeType }); return u = s.createObjectURL(i); }))), Promise.resolve(u).then((function (e) { var t = a.manager.getHandler(e); return t || (t = c[i.MSFT_TEXTURE_DDS] ? n.extensions[i.MSFT_TEXTURE_DDS].ddsLoader : o), new Promise((function (i, n) { t.load(N(e, a.path), i, void 0, n); })); })).then((function (e) { !0 === h && s.revokeObjectURL(u), e.flipY = !1, void 0 !== l.name && (e.name = l.name), t.mimeType in k && (e.format = k[t.mimeType]); var i = (r.samplers || {})[l.sampler] || {}; return e.magFilter = E[i.magFilter] || Ae, e.minFilter = E[i.minFilter] || Ee, e.wrapS = P[i.wrapS] || be, e.wrapT = P[i.wrapT] || be, e; })); }, z.prototype.assignTexture = function (e, t, n) {
    var r = this; return this.getDependency("texture", n.index).then((function (a) {
    if (!a.isCompressedTexture)
        switch (t) {
            case "aoMap":
            case "emissiveMap":
            case "metalnessMap":
            case "normalMap":
            case "roughnessMap": a.format = Ue;
        } if (r.extensions[i.KHR_TEXTURE_TRANSFORM]) {
            var o = void 0 !== n.extensions ? n.extensions[i.KHR_TEXTURE_TRANSFORM] : void 0;
            o && (a = r.extensions[i.KHR_TEXTURE_TRANSFORM].extendTexture(a, o));
        } e[t] = a;
    }));
    }, z.prototype.assignFinalMaterial = function (e) {
    var t = e.geometry, n = e.material, r = this.extensions, a = void 0 !== t.attributes.tangent, o = void 0 !== t.attributes.color, s = void 0 === t.attributes.normal, l = !0 === e.isSkinnedMesh, c = Object.keys(t.morphAttributes).length > 0, u = c && void 0 !== t.morphAttributes.normal; if (e.isPoints) {
        var h = "PointsMaterial:" + n.uuid, d = this.cache.get(h);
        d || (d = new Os, Mn.prototype.copy.call(d, n), d.color.copy(n.color), d.map = n.map, d.sizeAttenuation = !1, this.cache.add(h, d)), n = d;
    }
    else if (e.isLine) {
        h = "LineBasicMaterial:" + n.uuid;
        var p = this.cache.get(h);
        p || (p = new ws, Mn.prototype.copy.call(p, n), p.color.copy(n.color), this.cache.add(h, p)), n = p;
    } if (a || o || s || l || c) {
        h = "ClonedMaterial:" + n.uuid + ":";
        n.isGLTFSpecularGlossinessMaterial && (h += "specular-glossiness:"), l && (h += "skinning:"), a && (h += "vertex-tangents:"), o && (h += "vertex-colors:"), s && (h += "flat-shading:"), c && (h += "morph-targets:"), u && (h += "morph-normals:");
        var f = this.cache.get(h);
        f || (f = n.isGLTFSpecularGlossinessMaterial ? r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n) : n.clone(), l && (f.skinning = !0), a && (f.vertexTangents = !0), o && (f.vertexColors = S), s && (f.flatShading = !0), c && (f.morphTargets = !0), u && (f.morphNormals = !0), this.cache.add(h, f)), n = f;
    } n.aoMap && void 0 === t.attributes.uv2 && void 0 !== t.attributes.uv && (console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."), t.setAttribute("uv2", new Sn(t.attributes.uv.array, 2))), n.isGLTFSpecularGlossinessMaterial && (e.onBeforeRender = r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms), e.material = n;
    }, z.prototype.loadMaterial = function (e) {
    var t, n = this.json, r = this.extensions, a = n.materials[e], o = {}, s = a.extensions || {}, l = []; if (s[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {
        var c = r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];
        t = c.getMaterialType(), l.push(c.extendParams(o, a, this));
    }
    else if (s[i.KHR_MATERIALS_UNLIT]) {
        var u = r[i.KHR_MATERIALS_UNLIT];
        t = u.getMaterialType(), l.push(u.extendParams(o, a, this));
    }
    else {
        t = ac;
        var h = a.pbrMetallicRoughness || {};
        if (o.color = new yn(1, 1, 1), o.opacity = 1, Array.isArray(h.baseColorFactor)) {
            var d = h.baseColorFactor;
            o.color.fromArray(d), o.opacity = d[3];
        }
        void 0 !== h.baseColorTexture && l.push(this.assignTexture(o, "map", h.baseColorTexture)), o.metalness = void 0 !== h.metallicFactor ? h.metallicFactor : 1, o.roughness = void 0 !== h.roughnessFactor ? h.roughnessFactor : 1, void 0 !== h.metallicRoughnessTexture && (l.push(this.assignTexture(o, "metalnessMap", h.metallicRoughnessTexture)), l.push(this.assignTexture(o, "roughnessMap", h.metallicRoughnessTexture)));
    } !0 === a.doubleSided && (o.side = T); var p = a.alphaMode || O; return p === F ? o.transparent = !0 : (o.transparent = !1, p === D && (o.alphaTest = void 0 !== a.alphaCutoff ? a.alphaCutoff : .5)), void 0 !== a.normalTexture && t !== An && (l.push(this.assignTexture(o, "normalMap", a.normalTexture)), o.normalScale = new Ut(1, 1), void 0 !== a.normalTexture.scale && o.normalScale.set(a.normalTexture.scale, a.normalTexture.scale)), void 0 !== a.occlusionTexture && t !== An && (l.push(this.assignTexture(o, "aoMap", a.occlusionTexture)), void 0 !== a.occlusionTexture.strength && (o.aoMapIntensity = a.occlusionTexture.strength)), void 0 !== a.emissiveFactor && t !== An && (o.emissive = (new yn).fromArray(a.emissiveFactor)), void 0 !== a.emissiveTexture && t !== An && l.push(this.assignTexture(o, "emissiveMap", a.emissiveTexture)), Promise.all(l).then((function () { var e; return e = t === Tr ? r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o) : new t(o), void 0 !== a.name && (e.name = a.name), e.map && (e.map.encoding = Tt), e.emissiveMap && (e.emissiveMap.encoding = Tt), e.specularMap && (e.specularMap.encoding = Tt), G(e, a), a.extensions && B(r, e, a), e; }));
    }, z.prototype.loadGeometries = function (e) {
    var t = this, n = this.extensions, r = this.primitiveCache; function a(e) { return n[i.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e, t).then((function (i) { return V(i, e, t); })); } for (var o, s, l = [], c = 0, u = e.length; c < u; c++) {
        var h, d = e[c], p = (s = void 0, (s = (o = d).extensions && o.extensions[i.KHR_DRACO_MESH_COMPRESSION]) ? "draco:" + s.bufferView + ":" + s.indices + ":" + U(s.attributes) : o.indices + ":" + U(o.attributes) + ":" + o.mode), f = r[p];
        if (f)
            l.push(f.promise);
        else
            h = d.extensions && d.extensions[i.KHR_DRACO_MESH_COMPRESSION] ? a(d) : V(new Wn, d, t), r[p] = { primitive: d, promise: h }, l.push(h);
    } return Promise.all(l);
    }, z.prototype.loadMesh = function (e) {
    for (var t = this, i = this.json.meshes[e], n = i.primitives, r = [], a = 0, o = n.length; a < o; a++) {
        var s = void 0 === n[a].material ? m = m || new ac({ color: 16777215, emissive: 0, metalness: 1, roughness: 1, transparent: !1, depthTest: !0, side: _ }) : this.getDependency("material", n[a].material);
        r.push(s);
    } return Promise.all(r).then((function (r) {
    return t.loadGeometries(n).then((function (a) {
    for (var o = [], s = 0, l = a.length; s < l; s++) {
        var c, u = a[s], h = n[s], d = r[s];
        if (h.mode === x || h.mode === w || h.mode === M || void 0 === h.mode)
            !0 !== (c = !0 === i.isSkinnedMesh ? new ds(u, d) : new cr(u, d)).isSkinnedMesh || c.geometry.attributes.skinWeight.normalized || c.normalizeSkinWeights(), h.mode === w ? c.drawMode = xt : h.mode === M && (c.drawMode = _t);
        else if (h.mode === g)
            c = new Rs(u, d);
        else if (h.mode === b)
            c = new Ps(u, d);
        else if (h.mode === y)
            c = new Is(u, d);
        else {
            if (h.mode !== v)
                throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + h.mode);
            c = new Bs(u, d);
        }
        Object.keys(c.geometry.morphAttributes).length > 0 && H(c, i), c.name = i.name || "mesh_" + e, a.length > 1 && (c.name += "_" + s), G(c, i), t.assignFinalMaterial(c), o.push(c);
    } if (1 === o.length)
            return o[0]; var p = new Fo; for (s = 0, l = o.length; s < l; s++)
            p.add(o[s]); return p;
    }));
    }));
    }, z.prototype.loadCamera = function (e) {
    var t, i = this.json.cameras[e], n = i[i.type]; if (n)
        return "perspective" === i.type ? t = new Ar(Ht.radToDeg(n.yfov), n.aspectRatio || 1, n.znear || 1, n.zfar || 2e6) : "orthographic" === i.type && (t = new gu(n.xmag / -2, n.xmag / 2, n.ymag / 2, n.ymag / -2, n.znear, n.zfar)), void 0 !== i.name && (t.name = i.name), G(t, i), Promise.resolve(t); console.warn("THREE.GLTFLoader: Missing camera parameters.");
    }, z.prototype.loadSkin = function (e) { var t = this.json.skins[e], i = { joints: t.joints }; return void 0 === t.inverseBindMatrices ? Promise.resolve(i) : this.getDependency("accessor", t.inverseBindMatrices).then((function (e) { return i.inverseBindMatrices = e, i; })); }, z.prototype.loadAnimation = function (e) {
    for (var t = this.json.animations[e], i = [], n = [], r = [], a = [], o = [], s = 0, l = t.channels.length; s < l; s++) {
        var c = t.channels[s], u = t.samplers[c.sampler], h = c.target, d = void 0 !== h.node ? h.node : h.id, p = void 0 !== t.parameters ? t.parameters[u.input] : u.input, m = void 0 !== t.parameters ? t.parameters[u.output] : u.output;
        i.push(this.getDependency("node", d)), n.push(this.getDependency("accessor", p)), r.push(this.getDependency("accessor", m)), a.push(u), o.push(h);
    } return Promise.all([Promise.all(i), Promise.all(n), Promise.all(r), Promise.all(a), Promise.all(o)]).then((function (i) {
    for (var n = i[0], r = i[1], a = i[2], o = i[3], s = i[4], l = [], c = 0, u = n.length; c < u; c++) {
        var h = n[c], d = r[c], p = a[c], m = o[c], v = s[c];
        if (void 0 !== h) {
            var g;
            switch (h.updateMatrix(), h.matrixAutoUpdate = !0, R[v.path]) {
                case R.weights:
                    g = wc;
                    break;
                case R.rotation:
                    g = Mc;
                    break;
                case R.position:
                case R.scale:
                default: g = Sc;
            }
            var y = h.name ? h.name : h.uuid, b = void 0 !== m.interpolation ? I[m.interpolation] : 2301, x = [];
            R[v.path] === R.weights ? h.traverse((function (e) { !0 === e.isMesh && e.morphTargetInfluences && x.push(e.name ? e.name : e.uuid); })) : x.push(y);
            var _ = p.array;
            if (p.normalized) {
                var w;
                if (_.constructor === Int8Array)
                    w = 1 / 127;
                else if (_.constructor === Uint8Array)
                    w = 1 / 255;
                else if (_.constructor == Int16Array)
                    w = 1 / 32767;
                else {
                    if (_.constructor !== Uint16Array)
                        throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");
                    w = 1 / 65535;
                }
                for (var T = new Float32Array(_.length), M = 0, A = _.length; M < A; M++)
                    T[M] = _[M] * w;
                _ = T;
            }
            for (M = 0, A = x.length; M < A; M++) {
                var S = new g(x[M] + "." + R[v.path], d.array, _, b);
                "CUBICSPLINE" === m.interpolation && (S.createInterpolant = function (e) { return new f(this.times, this.values, this.getValueSize() / 3, e); }, S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0), l.push(S);
            }
        }
    } return new Ec(void 0 !== t.name ? t.name : "animation_" + e, void 0, l);
    }));
    }, z.prototype.loadNode = function (e) {
    var t, n = this.json, r = this.extensions, a = this, o = n.meshReferences, s = n.meshUses, l = n.nodes[e]; return (t = [], void 0 !== l.mesh && t.push(a.getDependency("mesh", l.mesh).then((function (e) {
    var t; if (o[l.mesh] > 1) {
        var i = s[l.mesh]++;
        (t = e.clone()).name += "_instance_" + i, t.onBeforeRender = e.onBeforeRender;
        for (var n = 0, r = t.children.length; n < r; n++)
            t.children[n].name += "_instance_" + i, t.children[n].onBeforeRender = e.children[n].onBeforeRender;
    }
    else
        t = e; return void 0 !== l.weights && t.traverse((function (e) {
        if (e.isMesh)
            for (var t = 0, i = l.weights.length; t < i; t++)
                e.morphTargetInfluences[t] = l.weights[t];
        })), t;
    }))), void 0 !== l.camera && t.push(a.getDependency("camera", l.camera)), l.extensions && l.extensions[i.KHR_LIGHTS_PUNCTUAL] && void 0 !== l.extensions[i.KHR_LIGHTS_PUNCTUAL].light && t.push(a.getDependency("light", l.extensions[i.KHR_LIGHTS_PUNCTUAL].light)), Promise.all(t)).then((function (e) {
    var t; if ((t = !0 === l.isBone ? new vs : e.length > 1 ? new Fo : 1 === e.length ? e[0] : new Si) !== e[0])
        for (var i = 0, n = e.length; i < n; i++)
            t.add(e[i]); if (void 0 !== l.name && (t.userData.name = l.name, t.name = mh.sanitizeNodeName(l.name)), G(t, l), l.extensions && B(r, t, l), void 0 !== l.matrix) {
                var a = new li;
                a.fromArray(l.matrix), t.applyMatrix(a);
            }
        else
            void 0 !== l.translation && t.position.fromArray(l.translation), void 0 !== l.rotation && t.quaternion.fromArray(l.rotation), void 0 !== l.scale && t.scale.fromArray(l.scale); return t;
    }));
    }, z.prototype.loadScene = function () {
    function e(t, i, n, r) {
    var a = n.nodes[t]; return r.getDependency("node", t).then((function (e) {
    return void 0 === a.skin ? e : r.getDependency("skin", a.skin).then((function (e) {
    for (var i = [], n = 0, a = (t = e).joints.length; n < a; n++)
        i.push(r.getDependency("node", t.joints[n])); return Promise.all(i);
    })).then((function (i) {
    return e.traverse((function (e) {
    if (e.isMesh) {
        for (var n = [], r = [], a = 0, o = i.length; a < o; a++) {
            var s = i[a];
            if (s) {
                n.push(s);
                var l = new li;
                void 0 !== t.inverseBindMatrices && l.fromArray(t.inverseBindMatrices.array, 16 * a), r.push(l);
            }
            else
                console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t.joints[a]);
        }
        e.bind(new ms(n, r), e.matrixWorld);
    }
    })), e;
    })); var t;
    })).then((function (t) {
    i.add(t); var o = []; if (a.children)
        for (var s = a.children, l = 0, c = s.length; l < c; l++) {
            var u = s[l];
            o.push(e(u, t, n, r));
        } return Promise.all(o);
    }));
    } return function (t) {
    var i = this.json, n = this.extensions, r = this.json.scenes[t], a = new Ei; void 0 !== r.name && (a.name = r.name), G(a, r), r.extensions && B(n, a, r); for (var o = r.nodes || [], s = [], l = 0, c = o.length; l < c; l++)
        s.push(e(o[l], a, i, this)); return Promise.all(s).then((function () { return a; }));
    };
    } (), e;
    } (), Zp = function (e) { Ic.call(this, e), this.decoderPath = "", this.decoderConfig = {}, this.decoderBinary = null, this.decoderPending = null, this.workerLimit = 4, this.workerPool = [], this.workerNextTaskID = 1, this.workerSourceURL = "", this.defaultAttributeIDs = { position: "POSITION", normal: "NORMAL", color: "COLOR", uv: "TEX_COORD" }, this.defaultAttributeTypes = { position: "Float32Array", normal: "Float32Array", color: "Float32Array", uv: "Float32Array" }; };
    Zp.prototype = Object.assign(Object.create(Ic.prototype), {
    constructor: Zp, setDecoderPath: function (e) { return this.decoderPath = e, this; }, setDecoderConfig: function (e) { return this.decoderConfig = e, this; }, setWorkerLimit: function (e) { return this.workerLimit = e, this; }, setVerbosity: function () { console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed."); }, setDrawMode: function () { console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed."); }, setSkipDequantization: function () { console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed."); }, load: function (e, t, i, n) { var r = new Dc(this.manager); r.setPath(this.path), r.setResponseType("arraybuffer"), "use-credentials" === this.crossOrigin && r.setWithCredentials(!0), r.load(e, e => { var i = { attributeIDs: this.defaultAttributeIDs, attributeTypes: this.defaultAttributeTypes, useUniqueIDs: !1 }; this.decodeGeometry(e, i).then(t).catch(n); }, i, n); }, decodeDracoFile: function (e, t, i, n) { var r = { attributeIDs: i || this.defaultAttributeIDs, attributeTypes: n || this.defaultAttributeTypes, useUniqueIDs: !!i }; this.decodeGeometry(e, r).then(t); }, decodeGeometry: function (e, t) {
    var i, n = this.workerNextTaskID++, r = e.byteLength; for (var a in t.attributeTypes) {
        var o = t.attributeTypes[a];
        void 0 !== o.BYTES_PER_ELEMENT && (t.attributeTypes[a] = o.name);
    } var s = this._getWorker(n, r).then(r => (i = r, new Promise((r, a) => { i._callbacks[n] = { resolve: r, reject: a }, i.postMessage({ type: "decode", id: n, taskConfig: t, buffer: e }, [e]); }))).then(e => this._createGeometry(e.geometry)); return s.finally(() => { i && n && this._releaseTask(i, n); }), s;
    }, _createGeometry: function (e) {
    var t = new Wn; e.index && t.setIndex(new Sn(e.index.array, 1)); for (var i = 0; i < e.attributes.length; i++) {
        var n = e.attributes[i], r = n.name, a = n.array, o = n.itemSize;
        t.setAttribute(r, new Sn(a, o));
    } return t;
    }, _loadLibrary: function (e, t) { var i = new Dc(this.manager); return i.setPath(this.decoderPath), i.setResponseType(t), new Promise((t, n) => { i.load(e, t, void 0, n); }); }, preload: function () { return this._initDecoder(), this; }, _initDecoder: function () {
    if (this.decoderPending)
        return this.decoderPending; var e = "object" != typeof WebAssembly || "js" === this.decoderConfig.type, t = []; return e ? t.push(this._loadLibrary("draco_decoder.js", "text")) : (t.push(this._loadLibrary("draco_wasm_wrapper.js", "text")), t.push(this._loadLibrary("draco_decoder.wasm", "arraybuffer"))), this.decoderPending = Promise.all(t).then(t => { var i = t[0]; e || (this.decoderConfig.wasmBinary = t[1]); var n = Zp.DRACOWorker.toString(), r = ["/* draco decoder */", i, "", "/* worker */", n.substring(n.indexOf("{") + 1, n.lastIndexOf("}"))].join("\n"); this.workerSourceURL = URL.createObjectURL(new Blob([r])); }), this.decoderPending;
    }, _getWorker: function (e, t) {
    return this._initDecoder().then(() => {
    var i; this.workerPool.length < this.workerLimit ? ((i = new Worker(this.workerSourceURL))._callbacks = {}, i._taskCosts = {}, i._taskLoad = 0, i.postMessage({ type: "init", decoderConfig: this.decoderConfig }), i.onmessage = function (e) {
    var t = e.data; switch (t.type) {
        case "decode":
            i._callbacks[t.id].resolve(t);
            break;
        case "error":
            i._callbacks[t.id].reject(t);
            break;
        default: console.error('THREE.DRACOLoader: Unexpected message, "' + t.type + '"');
    }
    }, this.workerPool.push(i)) : this.workerPool.sort((function (e, t) { return e._taskLoad > t._taskLoad ? -1 : 1; })); return (i = this.workerPool[this.workerPool.length - 1])._taskCosts[e] = t, i._taskLoad += t, i;
    });
    }, _releaseTask: function (e, t) { e._taskLoad -= e._taskCosts[t], delete e._callbacks[t], delete e._taskCosts[t]; }, debug: function () { console.log("Task load: ", this.workerPool.map(e => e._taskLoad)); }, dispose: function () {
    for (var e = 0; e < this.workerPool.length; ++e)
        this.workerPool[e].terminate(); return this.workerPool.length = 0, this;
    }
    }), Zp.DRACOWorker = function () {
    var e, t; function i(e, t, i, n, r, a) {
    var o, s, l = a.num_components(), c = i.num_points() * l; switch (r) {
        case Float32Array:
            o = new e.DracoFloat32Array, t.GetAttributeFloatForAllPoints(i, a, o), s = new Float32Array(c);
            break;
        case Int8Array:
            o = new e.DracoInt8Array, t.GetAttributeInt8ForAllPoints(i, a, o), s = new Int8Array(c);
            break;
        case Int16Array:
            o = new e.DracoInt16Array, t.GetAttributeInt16ForAllPoints(i, a, o), s = new Int16Array(c);
            break;
        case Int32Array:
            o = new e.DracoInt32Array, t.GetAttributeInt32ForAllPoints(i, a, o), s = new Int32Array(c);
            break;
        case Uint8Array:
            o = new e.DracoUInt8Array, t.GetAttributeUInt8ForAllPoints(i, a, o), s = new Uint8Array(c);
            break;
        case Uint16Array:
            o = new e.DracoUInt16Array, t.GetAttributeUInt16ForAllPoints(i, a, o), s = new Uint16Array(c);
            break;
        case Uint32Array:
            o = new e.DracoUInt32Array, t.GetAttributeUInt32ForAllPoints(i, a, o), s = new Uint32Array(c);
            break;
        default: throw new Error("THREE.DRACOLoader: Unexpected attribute type.");
    } for (var u = 0; u < c; u++)
            s[u] = o.GetValue(u); return e.destroy(o), { name: n, array: s, itemSize: l };
    } onmessage = function (n) {
    var r = n.data; switch (r.type) {
        case "init":
            e = r.decoderConfig, t = new Promise((function (t) { e.onModuleLoaded = function (e) { t({ draco: e }); }, DracoDecoderModule(e); }));
            break;
        case "decode":
            var a = r.buffer, o = r.taskConfig;
            t.then(e => {
            var t = e.draco, n = new t.Decoder, s = new t.DecoderBuffer; s.Init(new Int8Array(a), a.byteLength); try {
                var l = function (e, t, n, r) {
                var a, o, s = r.attributeIDs, l = r.attributeTypes, c = t.GetEncodedGeometryType(n); if (c === e.TRIANGULAR_MESH)
                    a = new e.Mesh, o = t.DecodeBufferToMesh(n, a);
                else {
                    if (c !== e.POINT_CLOUD)
                        throw new Error("THREE.DRACOLoader: Unexpected geometry type.");
                    a = new e.PointCloud, o = t.DecodeBufferToPointCloud(n, a);
                } if (!o.ok() || 0 === a.ptr)
                        throw new Error("THREE.DRACOLoader: Decoding failed: " + o.error_msg()); var u = { index: null, attributes: [] }; for (var h in s) {
                            var d, p, f = self[l[h]];
                            if (r.useUniqueIDs)
                                p = s[h], d = t.GetAttributeByUniqueId(a, p);
                            else {
                                if (-1 === (p = t.GetAttributeId(a, e[s[h]])))
                                    continue;
                                d = t.GetAttribute(a, p);
                            }
                            u.attributes.push(i(e, t, a, h, f, d));
                        } if (c === e.TRIANGULAR_MESH) {
                            for (var m = a.num_faces(), v = new Uint32Array(3 * m), g = new e.DracoInt32Array, y = 0; y < m; ++y) {
                                t.GetFaceFromMesh(a, y, g);
                                for (var b = 0; b < 3; ++b)
                                    v[3 * y + b] = g.GetValue(b);
                            }
                            u.index = { array: v, itemSize: 1 }, e.destroy(g);
                        } return e.destroy(a), u;
                } (t, n, s, o), c = l.attributes.map(e => e.array.buffer);
                l.index && c.push(l.index.array.buffer), self.postMessage({ type: "decode", id: r.id, geometry: l }, c);
            }
                catch (e) {
                    console.error(e), self.postMessage({ type: "error", id: r.id, error: e.message });
                }
                finally {
                    t.destroy(s), t.destroy(n);
                }
            });
    }
    };
    }, Zp.setDecoderPath = function () { console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods."); }, Zp.setDecoderConfig = function () { console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods."); }, Zp.releaseDecoderModule = function () { console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods."); }, Zp.getDecoderModule = function () { console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods."); };
    var Kp = function () { function e() { c()(this, e); } return h()(e, null, [{ key: "hide", value: function (e) { e && e.traverse((function (e) { e.visible = !1; })); } }, { key: "show", value: function (e) { e && e.traverse((function (e) { e.visible = !0; })); } }, { key: "setVisible", value: function (e, t) { e && e.traverse((function (e) { e.visible = t; })); } }]), e; } (), Jp = function () {
    function e(t, i, n) { c()(this, e), this.scene = t, this.manager = i, this.config = n, this.loader = new $p(this.manager), this.dracoLoader = new Zp(this.manager), this.dracoLoader.setDecoderPath(this.config.modelConfig.decoderPath), this.loader.setDRACOLoader(this.dracoLoader), this.object = null, this.showTween = null, this.hideTween = null, this.visible = !1; } return h()(e, [{ key: "_isObject", value: function (e) { return "Mesh" === e.type || "Group" === e.type; } }, { key: "load", value: function () { var e = this; this.loader.load(this.config.plan.modelPath, (function (t) { t = t.scene || t, e.object = e._isObject(t) ? t : t.children.find((function (t) { return e._isObject(t); })), e.hide(), e._applyMaterials(), e.object.layers.set(1), e.object.children.forEach((function (e) { return e.layers.set(1); })), e.object.position.add(new Wt(0, .1, 0)), e.scene.add(e.object); }), bd.logProgress("Plan object loading progress: "), bd.logError("Plan object loading error: ")); } }, { key: "hide", value: function () { Kp.hide(this.object), this.visible = !1; } }, { key: "show", value: function () { Kp.show(this.object), this.visible = !0; } }, {
    key: "showTransition", value: function () {
    var e = this; if (!this.showTween && !this.visible) {
        var t = this;
        this.showTween = new r.a.Tween({ opacity: 0 }).to({ opacity: this.config.plan.opacity }, this.config.tween.Plan.texture.time).easing(this.config.tween.Plan.texture.easing).onUpdate((function () { t.setOpacity(this.opacity); })).onStart((function () { e.setOpacity(0), e.show(); })).onComplete((function () { e.showTween = null; })).start();
    }
    }
    }, {
    key: "hideTransition", value: function () {
    var e = this; if (!this.hideTween && this.visible) {
        var t = this;
        this.hideTween = new r.a.Tween({ opacity: this.config.plan.opacity }).to({ opacity: 0 }, this.config.tween.Plan.texture.time).easing(this.config.tween.Plan.texture.easing).onUpdate((function () { t.setOpacity(this.opacity); })).onStart((function () { e.setOpacity(e.config.plan.opacity); })).onComplete((function () { e.hide(), e.hideTween = null; })).start();
    }
    }
    }, { key: "setOpacity", value: function (e) { this.object.material.opacity = e; } }, { key: "_applyMaterials", value: function () { return this._loadTexturesForObject(this.object); } }, { key: "_loadTexturesForObject", value: function (e) { var t = this; e.children.length > 0 && e.children.forEach((function (e) { return t._loadTexturesForObject(e); })), e.material = new An({ transparent: !0 }), e.material && this._loadTexturesForMaterial(e.material); } }, {
    key: "_loadTexturesForMaterial", value: function (e) {
    var t = this; if (e.isMultiMaterial && e.materials.length > 0)
        return e.materials.forEach((function (e, i) { return t._loadTexturesForMaterial(e); })); var i = new Hc(this.manager); e.metalness = 0, e.roughness = 1, e.transparent = !0, e.opacity = this.config.plan.opacity, i.load(this.config.plan.texturePath, (function (i) { console.log("PLAN"), t._setUpTexture(i), e.map = i, e.needsUpdate = !0; }));
    }
    }, { key: "_setUpTexture", value: function (e) { e.flipY = !1, e.encoding = Tt, e.wrapS = be, e.wrapT = be; } }]), e;
    } (), ef = function () {
    function e(t, i, n, r, a) { c()(this, e), this.config = t, this._main = i, this._playerUi = n, this._cameraAnimation = r, this._cameraAnimation.setCameraModes(e.CAMERA_MODES), this._window = a, this._cameraMode = e.CAMERA_MODES.PREVIEW, this.targetPanoramaPosition = null, this.chain = [], this._firstPano = !0, this._fullScreenEnabled = !1; } return h()(e, null, [{ key: "CAMERA_MODES", get: function () { return { PREVIEW: 1, PANORAMA: 2, PLAN: 3 }; } }]), h()(e, [{ key: "getCameraMode", value: function () { return this._cameraMode; } }, { key: "initEvents", value: function () { this._initPlayerUiEvents(), this._initMainEvents(); } }, { key: "offEvents", value: function () { this._offPlayerUiEvents(), this._offMainEvents(); } }, {
    key: "setFullScreen", value: function (e) {
    if (this._fullScreenEnabled !== e) {
        this._fullScreenEnabled = e;
        var t = this._main.$container, i = this._window.document, n = t.requestFullscreen || t.webkitRequestFullScreen || t.mozRequestFullScreen || t.msRequestFullscreen, r = i.exitFullscreen || i.webkitExitFullscreen || i.mozCancelFullScreen, a = i.fullscreenElement || i.webkitFullscreenElement || i.mozFullScreenElement || i.msFullscreenElement;
        e ? n.call(t) : a && r.call(i), this._main.camera.updateSize(), this._main.renderer.updateSize(), this._playerUi.layoutVm.setFullScreen(e);
    }
    }
    }, { key: "setCameraMode", value: function (t, i) { var n, r = this; return this._cameraAnimation.checkActiveTweenIsExist() ? Promise.resolve() : (n = {}, Sd()(n, e.CAMERA_MODES.PREVIEW, (function () { return r._setCameraPreviewMode(i); })), Sd()(n, e.CAMERA_MODES.PANORAMA, (function (e) { return r._setCameraPanoramaMode(e); })), Sd()(n, e.CAMERA_MODES.PLAN, (function () { return r._setCameraPlanMode(i); })), n)[t](i); } }, { key: "playerDestroy", value: function () { dispatchEvent(new CustomEvent("player:destroy")); } }, {
    key: "_setCameraPanoramaMode", value: function () {
    var t, i = this, n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, r = n.useDefault, a = void 0 !== r && r, o = n.panorama; if (this._cameraMode === e.CAMERA_MODES.PLAN)
        return this.chain.push(this._setCameraPanoramaMode.bind(this, { useDefault: a })), this._setCameraPreviewMode(); if (a ? t = this._main.model.panoCollection.defaultPanorama : o ? t = o : this.config.mouseDownTime < .15 && (t = this._main.model.panoCollection.closestPano), !t || this._main.model.panoCollection.isCurrentPano(t))
            return Promise.resolve(); var s = t.getGlobalPosition().clone(), l = 1; this.targetPanoramaPosition = s, this._tryCachePreviewCameraPosition(), this._main.controls.resetControls(); var c = this._firstPano ? this.config.tween.PreviewPano.camera.firstDelay : this.config.tween.PreviewPano.camera.delay, u = this._firstPano ? this.config.tween.PreviewPano.texture.firstDelay : this.config.tween.PreviewPano.texture.delay; return this._main.plan && this._main.plan.hideTransition(), this._playerUi.layoutVm.setCameraPanoramaMode(), this._cameraMode === e.CAMERA_MODES.PANORAMA ? this._main.model.changeEnv(t, l) : this._main.model.enableEnv(t, u), new Promise((function (n) { return i._cameraAnimation.animateToPanorama(i._main.camera, t, i._main.controls.getTarget(), (function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : i.config.plan.camera.fov; return i._main.camera.calcDistanceFit(i._main.model.collisionModel, e); }), i._cameraMode, l).delay(c).onStart((function () { i._main.blur.enableBlur(); var n = i._cameraMode === e.CAMERA_MODES.PANORAMA; i._main.model.setupCurrentPano(t, n), i._main.model.setupCurrentPano(null); })).onComplete((function () { i._cameraMode !== e.CAMERA_MODES.PANORAMA && i._main.renderer.setPanoAAMethod(), i._main.blur && i._main.blur.onPano(), i._main.controls.resetCamera(), i._main.controls.setPanoramaControls(), i._main.miniMap && (i._main.miniMap.enable = !0), i._cameraAnimation.clearActiveTween(), i._cameraMode = e.CAMERA_MODES.PANORAMA, i._firstPano = !1, i._main.model.panoCollection.setupCurrentPano(t), i._main.model.setupCurrentPano(t), i._main.renderer.enablePostProcessingEffects(), n(); })).start(); }));
    }
    }, {
    key: "_setCameraPreviewMode", value: function () {
    var t = this; if (this._cameraMode === e.CAMERA_MODES.PREVIEW)
        return Promise.resolve(); this._main.controls.resetControls(), this._main.model.setupCurrentPano(null), this._main.model.panoCollection.setupCurrentPano(null); var i = this._cameraAnimation.animateToPreview(this._main.camera, { cameraMode: this._cameraMode, targetPosition: this.targetPanoramaPosition, originalTarget: this._main.controls.getTarget(), cameraDistanceCallback: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : t.config.plan.camera.fov; return t._main.camera.calcDistanceFit(t._main.model.collisionModel, e); } }).onStart((function () { t._main.blur.enableBlur(), t._main.plan && t._main.plan.hideTransition(), t._cameraMode !== e.CAMERA_MODES.PLAN && t._main.model.enableDiffuse(), t._main.miniMap && (t._main.miniMap.enable = !1), t._playerUi.layoutVm.setCameraPreviewMode(), t._main.renderer.disablePostProcessingEffects(); })).onComplete((function () { t._main.controls.resetCamera(), t._main.controls.setPreviewControls(), t._cameraMode === e.CAMERA_MODES.PANORAMA && t.targetPanoramaPosition && t._main.controls.threeControls.target.copy(t.targetPanoramaPosition), t._cameraMode, e.CAMERA_MODES.PLAN, t._main.blur && t._main.blur.onPreview(), t._cameraAnimation.clearActiveTween(), t._cameraMode = e.CAMERA_MODES.PREVIEW; var i = t.chain.pop(); i && i(), t._main.renderer.setAAMethod(); })); this._cameraMode !== e.CAMERA_MODES.PLAN && i.start();
    }
    }, { key: "_setCameraPlanMode", value: function () { var t = this; return this._cameraMode === e.CAMERA_MODES.PLAN ? Promise.resolve() : (this._tryCachePreviewCameraPosition(), this._main.controls.resetControls(), this._main.model.setupCurrentPano(null), this._main.model.panoCollection.setupCurrentPano(null), new Promise((function (i) { return t._cameraAnimation.animateToPlan(t._main.camera, t._main.controls.getTarget(), (function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : t.config.plan.camera.fov; return t._main.camera.calcDistanceFit(t._main.model.collisionModel, e); }), t._cameraMode).onStart((function () { t._main.blur.disableBlur(), t._main.controls.preparePlanCamera(), t._main.plan && t._main.plan.showTransition(), t._cameraMode !== e.CAMERA_MODES.PREVIEW && t._main.model.enableDiffuse(), t._main.miniMap && (t._main.miniMap.enable = !1), t._main.renderer.setAAMethod("NONE"), t._playerUi.layoutVm.setCameraPlanMode(), t._main.renderer.disablePostProcessingEffects(); })).onComplete((function () { t._main.blur && t._main.blur.onPlan(), t._main.controls.setPlanControls(), t._cameraAnimation.clearActiveTween(), t._cameraMode = e.CAMERA_MODES.PLAN, i(); })).start(); }))); } }, { key: "_initPlayerUiEvents", value: function () { this._mainFullScreenCalback = this.setFullScreen.bind(this), this._mainCameraModePreviewCalback = this.setCameraMode.bind(this, e.CAMERA_MODES.PREVIEW), this._mainCameraModePanoramaCalback = this.setCameraMode.bind(this, e.CAMERA_MODES.PANORAMA, { useDefault: !0 }), this._mainCameraModePlanCalback = this.setCameraMode.bind(this, e.CAMERA_MODES.PLAN), this._destroyPlayerCallback = this.playerDestroy.bind(this), this._playerUi.events.on("mode:full-screen", this._mainFullScreenCalback), this._playerUi.events.on("camera-mode:preview", this._mainCameraModePreviewCalback), this._playerUi.events.on("camera-mode:panorama", this._mainCameraModePanoramaCalback), this._playerUi.events.on("camera-mode:plan", this._mainCameraModePlanCalback), this._playerUi.events.on("player:destroy", this._destroyPlayerCallback); } }, { key: "_offPlayerUiEvents", value: function () { this._playerUi.events.off("mode:full-screen", this._mainFullScreenCalback), this._playerUi.events.off("camera-mode:preview", this._mainCameraModePreviewCalback), this._playerUi.events.off("camera-mode:panorama", this._mainCameraModePanoramaCalback), this._playerUi.events.off("camera-mode:plan", this._mainCameraModePlanCalback), this._playerUi.events.off("player:destroy", this._destroyPlayerCallback); } }, { key: "_initMainEvents", value: function () { this._mainCameraModePreviewCallback = this.setCameraMode.bind(this, e.CAMERA_MODES.PREVIEW), this._mainCameraModePanoramaCallback = this.setCameraMode.bind(this, e.CAMERA_MODES.PANORAMA), this._mainCameraModePlanCallback = this.setCameraMode.bind(this, e.CAMERA_MODES.PLAN), this._mainFullScreenCallback = this.setFullScreen.bind(this), this._main.events.on("camera-mode:preview", this._mainCameraModePreviewCallback), this._main.events.on("camera-mode:panorama", this._mainCameraModePanoramaCallback), this._main.events.on("camera-mode:plan", this._mainCameraModePlanCallback), this._main.events.on("mode:full-screen", this._mainFullScreenCallback); } }, { key: "_offMainEvents", value: function () { this._main.events.off("camera-mode:preview", this._mainCameraModePreviewCallback), this._main.events.off("camera-mode:panorama", this._mainCameraModePanoramaCallback), this._main.events.off("camera-mode:plan", this._mainCameraModePlanCallback), this._main.events.off("mode:full-screen", this._mainFullScreenCallback); } }, { key: "_tryCachePreviewCameraPosition", value: function () { this._cameraMode === e.CAMERA_MODES.PREVIEW && this._cameraAnimation.cachePreviewCameraPosition(this._main.camera); } }]), e;
    } (), tf = function () {
    function e(t) { c()(this, e), this.config = t, this._cachedPreviewCameraPosition = null, this._activeTween = void 0, this.cameraMods = null; } return h()(e, [{ key: "setCameraModes", value: function (e) { this.cameraMods = e; } }, {
    key: "animateToPanorama", value: function (e, t, i, n, r, a) {
    var o, s, l = this._getCameraPosition(e), c = this._getPanoramaPosition(t), u = new Wt(c.x, c.y, c.z), h = (o = {}, Sd()(o, this.cameraMods.PREVIEW, this.config.tween.PreviewPano.camera.time), Sd()(o, this.cameraMods.PANORAMA, this.config.tween.PanoPano.camera.time * a), Sd()(o, this.cameraMods.PLAN, this.config.tween.PlanPano.camera.time), o), d = (s = {}, Sd()(s, this.cameraMods.PREVIEW, this.config.tween.PreviewPano.camera.easing), Sd()(s, this.cameraMods.PANORAMA, this.config.tween.PanoPano.camera.easing), Sd()(s, this.cameraMods.PLAN, this.config.tween.PlanPano.camera.easing), s), p = this; return this._makeCameraTween({ from: l, to: c, time: h[r], easing: d[r] }).onUpdate((function (t) {
    if (p.cameraMods.PANORAMA !== r && this.y > n(this.fov) ? e.threeCamera.position.set(this.x, n(this.fov), this.z) : e.threeCamera.position.set(this.x, this.y, this.z), i) {
        var a = new Wt(0, 0, -1).applyQuaternion(e.threeCamera.quaternion).normalize();
        a.setY((1 - t) * a.y).normalize();
        var o = u.clone().add(a.clone().multiplyScalar(10 * t)).multiplyScalar(t).add(i.clone().multiplyScalar(1 - t));
        e.threeCamera.lookAt(o);
    } e.threeCamera.fov = this.fov, e.threeCamera.updateProjectionMatrix();
    }));
    }
    }, {
    key: "animateToPreview", value: function (e) {
    var t, i, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = n.cameraMode, a = n.targetPosition, o = n.originalTarget, s = n.cameraDistanceCallback, l = r === this.cameraMods.PLAN, c = this._getCameraPosition(e), u = l ? { x: this.config.camera.posX, y: this.config.camera.posY, z: this.config.camera.posZ, fov: this.config.camera.fov } : this._cachedPreviewCameraPosition, h = this._cachedPreviewCameraPosition, d = l ? new Wt(0, 0, 0) : a, p = new Wt(0, 0, -1).applyQuaternion(e.threeCamera.quaternion).normalize(), f = o || p.clone().multiplyScalar(10), m = null; if (a) {
        var v = new Wt(h.x, a.y, h.z), g = a.clone().sub(v).length();
        m = a.clone().sub(p.clone().multiplyScalar(g)).setY(h.y);
    } !l && m && Object.assign(u, { x: m.x, y: m.y, z: m.z }); var y = (t = {}, Sd()(t, this.cameraMods.PANORAMA, this.config.tween.PanoPreview.camera.time), Sd()(t, this.cameraMods.PLAN, this.config.tween.PlanPreview.camera.time), t), b = (i = {}, Sd()(i, this.cameraMods.PANORAMA, this.config.tween.PanoPreview.camera.easing), Sd()(i, this.cameraMods.PLAN, this.config.tween.PlanPreview.camera.easing), i), x = function (t) { l && this.y > s(this.fov) ? e.threeCamera.position.set(this.x, s(this.fov), this.z) : e.threeCamera.position.set(this.x, this.y, this.z); var i = d.clone().multiplyScalar(t).add(f.clone().multiplyScalar(1 - t)); e.threeCamera.lookAt(i), e.threeCamera.fov = this.fov, e.threeCamera.updateProjectionMatrix(); }; if (l) {
        var _ = Object.assign({}, c);
        _ = Object.assign(_, { x: 0, y: s(u.fov), z: 0, fov: u.fov });
        var w = this._makeCameraTween({ from: c, to: _, time: 100, easing: b[r] }).onUpdate(x), T = this._makeCameraTween({ from: _, to: u, time: y[r], easing: b[r] }).onUpdate(x);
        return w.chain(T), w.start(), T;
    } return this._makeCameraTween({ from: c, to: u, time: y[r], easing: b[r] }).onUpdate(x);
    }
    }, { key: "animateToPlan", value: function (e, t, i, n) { var r, a, o = this._getCameraPosition(e), s = this._getPlanPosition(i()), l = new Wt(0, 0, 0), c = new Wt(0, 0, -1).applyQuaternion(e.threeCamera.quaternion).normalize(), u = t || c.clone().multiplyScalar(10), h = (r = {}, Sd()(r, this.cameraMods.PANORAMA, this.config.tween.PanoPlan.camera.time), Sd()(r, this.cameraMods.PREVIEW, this.config.tween.PreviewPlan.camera.time), r), d = (a = {}, Sd()(a, this.cameraMods.PANORAMA, this.config.tween.PanoPlan.camera.easing), Sd()(a, this.cameraMods.PREVIEW, this.config.tween.PreviewPlan.camera.easing), a), p = function (t) { this.y > i(this.fov) ? e.threeCamera.position.set(this.x, i(this.fov), this.z) : e.threeCamera.position.set(this.x, this.y, this.z); var n = l.clone().multiplyScalar(t).add(u.clone().multiplyScalar(1 - t)); e.threeCamera.lookAt(n), e.threeCamera.rotation.set(e.threeCamera.rotation.x, e.threeCamera.rotation.y, this.rotationZ), e.threeCamera.fov = this.fov, e.threeCamera.updateProjectionMatrix(); }, f = Object.assign({}, o); f = Object.assign(f, { rotationX: s.rotationX, rotationY: s.rotationY, rotationZ: s.rotationZ, x: 0, y: i(o.fov), z: 0 }); var m = this._makeCameraTween({ from: o, to: f, time: h[n], easing: d[n] }).onUpdate(p), v = this._makeCameraTween({ from: f, to: s, time: 100, easing: d[n] }).onUpdate(p); return m.chain(v), m; } }, { key: "clearActiveTween", value: function () { this._activeTween = void 0; } }, { key: "checkActiveTweenIsExist", value: function () { return void 0 !== this._activeTween; } }, { key: "cachePreviewCameraPosition", value: function (e) { var t; e.threeCamera.rotation.clone(); t = e.threeCamera.rotation.clone(), this._cachedPreviewCameraPosition = Object.assign(this._getCameraPosition(e), { rotationX: t.x, rotationY: t.y, rotationZ: t.z }); } }, { key: "_makeCameraTween", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.from, i = e.to, n = e.time, a = e.easing, o = void 0 === a ? r.a.Easing.Linear.None : a; return this._activeTween = new r.a.Tween(t).to(i, n).easing(o); } }, { key: "_makeCameraFovTween", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.camera, i = e.from, n = e.to, a = e.time; return this._activeTween = new r.a.Tween(i).to(n, .7 * a).easing(r.a.Easing.Quadratic.Out).onUpdate((function () { t.threeCamera.fov = this.fov, t.threeCamera.updateProjectionMatrix(); })); } }, { key: "_getCameraPosition", value: function (e) { return { x: e.threeCamera.position.x, y: e.threeCamera.position.y, z: e.threeCamera.position.z, rotationX: e.threeCamera.rotation.x, rotationY: e.threeCamera.rotation.y, rotationZ: e.threeCamera.rotation.z, fov: e.threeCamera.fov }; } }, { key: "_getPanoramaPosition", value: function (e) { var t = e.getGlobalOriginalPosition(); return { x: t.x, y: t.y, z: t.z, rotationX: 0, rotationY: 0, rotationZ: 0, fov: this.config.camera.panoFov }; } }, { key: "_getPlanPosition", value: function (e) { return { x: 0, y: e, z: 0, rotationX: -Math.PI / 2, rotationY: 0, rotationZ: 0, fov: this.config.plan.camera.fov }; } }]), e;
    } (), nf = function () { function e(t, i) { c()(this, e), this.config = t, this.renderer = i, this.threeCamera = null, this.mapCamera = null, this.resizeHandler = this.updateSize.bind(this), this.cachedDirection = new Wt(-1e3, -1e3, -1e3), this.cachedPosition = new Wt(-1e3, -1e3, -1e3), this._makeMainCamera(), this._makeMapCamera(), this.frustum = new Or, this.updateSize(), this._listenWindowResize(); } return h()(e, [{ key: "destroy", value: function () { this._removeWindowResizeListener(), this.config = null, this.renderer = null, this.threeCamera = null, this.mapCamera = null, this.resizeHandler = null, this.cachedDirection = null, this.cachedPosition = null, this.frustum = null; } }, { key: "updateSize", value: function () { var e = this._getRendererSizes().aspect; this.threeCamera.aspect = e, this.mapCamera.aspect = this.config.map.width / this.config.map.height, this.threeCamera.updateProjectionMatrix(), this.mapCamera.updateProjectionMatrix(); } }, { key: "calcDistanceFit", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1.6, n = this.threeCamera.aspect, r = new Ui; r.setFromObject(e); var a = r.getSize(new Wt), o = a.x, s = o / (2 * Math.atan(Math.PI * t / 360)), l = s / n; return i * l; } }, { key: "checkFrustumContainsPoint", value: function (e) { return this.frustum.setFromMatrix((new li).multiplyMatrices(this.threeCamera.projectionMatrix, this.threeCamera.matrixWorldInverse)), this.frustum.containsPoint(e); } }, { key: "isChanged", value: function () { var e = new Wt(0, 0, -1).applyQuaternion(this.threeCamera.quaternion).normalize(), t = new Wt; return this.threeCamera.getWorldPosition(t), (e.distanceTo(this.cachedDirection) > 1e-4 || t.distanceTo(this.cachedPosition) > 1e-4) && (this.cachedDirection = e, this.cachedPosition = t, !0); } }, { key: "_getRendererSizes", value: function () { var e = this.renderer.domElement.width, t = this.renderer.domElement.height; return { width: e, height: t, aspect: e / t }; } }, { key: "_makeMainCamera", value: function () { var e = this._getRendererSizes(), t = e.width, i = e.height; this.threeCamera = new Ar(this.config.camera.fov, t / i, this.config.camera.near, this.config.camera.far), this.threeCamera.position.set(this.config.camera.posX, this.config.camera.posY, this.config.camera.posZ), this.threeCamera.layers.enable(1); } }, { key: "_makeMapCamera", value: function () { var e = this.config.map.camera; this.mapCamera = new Ar(e.fov, this.config.map.width / this.config.map.height, this.config.camera.near, e.far), this.mapCamera.position.set(e.posX, e.posY, e.posZ), this.mapCamera.layers.enable(2); } }, { key: "_listenWindowResize", value: function () { window.addEventListener("resize", this.resizeHandler, !1); } }, { key: "_removeWindowResizeListener", value: function () { window.removeEventListener("resize", this.resizeHandler); } }]), e; } (), rf = function (e, t) {
    var i, n, r, a, o; this.object = e, this.domElement = void 0 !== t ? t : document, this.enabled = !0, this.target = new Wt, this.minDistance = 0, this.maxDistance = 1 / 0, this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.enableDamping = !1, this.dampingFactor = .25, this.enableZoom = !0, this.zoomSpeed = 1, this.enableRotate = !0, this.rotateSpeed = 1, this.enablePan = !0, this.panSpeed = 1, this.screenSpacePanning = !1, this.keyPanSpeed = 7, this.autoRotate = !1, this.autoRotateSpeed = 2, this.enableKeys = !0, this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 }, this.mouseButtons = { LEFT: f.LEFT, MIDDLE: f.MIDDLE, RIGHT: f.RIGHT }, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom, this.getPolarAngle = function () { return m.phi; }, this.getAzimuthalAngle = function () { return m.theta; }, this.saveState = function () { s.target0.copy(s.target), s.position0.copy(s.object.position), s.zoom0 = s.object.zoom; }, this.reset = function () { s.target.copy(s.target0), s.object.position.copy(s.position0), s.object.zoom = s.zoom0, s.object.updateProjectionMatrix(), s.dispatchEvent(l), s.update(), d = h.NONE; }, this.update = (i = new Wt, n = (new zt).setFromUnitVectors(e.up, new Wt(0, 1, 0)), r = n.clone().inverse(), a = new Wt, o = new zt, function () { var e = s.object.position; return i.copy(e).sub(s.target), i.applyQuaternion(n), m.setFromVector3(i), s.autoRotate && d === h.NONE && L(2 * Math.PI / 60 / 60 * s.autoRotateSpeed), m.theta += v.theta, m.phi += v.phi, m.theta = Math.max(s.minAzimuthAngle, Math.min(s.maxAzimuthAngle, m.theta)), m.phi = Math.max(s.minPolarAngle, Math.min(s.maxPolarAngle, m.phi)), m.makeSafe(), m.radius *= g, m.radius = Math.max(s.minDistance, Math.min(s.maxDistance, m.radius)), s.target.add(y), i.setFromSpherical(m), i.applyQuaternion(r), e.copy(s.target).add(i), s.object.lookAt(s.target), !0 === s.enableDamping ? (v.theta *= 1 - s.dampingFactor, v.phi *= 1 - s.dampingFactor, y.multiplyScalar(1 - s.dampingFactor)) : (v.set(0, 0, 0), y.set(0, 0, 0)), g = 1, !!(b || a.distanceToSquared(s.object.position) > p || 8 * (1 - o.dot(s.object.quaternion)) > p) && (s.dispatchEvent(l), a.copy(s.object.position), o.copy(s.object.quaternion), b = !1, !0); }), this.dispose = function () { s.domElement.removeEventListener("contextmenu", Y, !1), s.domElement.removeEventListener("mousedown", G, !1), s.domElement.removeEventListener("wheel", z, !1), s.domElement.removeEventListener("touchstart", j, !1), s.domElement.removeEventListener("touchend", X, !1), s.domElement.removeEventListener("touchmove", W, !1), document.removeEventListener("mousemove", H, !1), document.removeEventListener("mouseup", U, !1), window.removeEventListener("keydown", V, !1); }; var s = this, l = { type: "change" }, c = { type: "start" }, u = { type: "end" }, h = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 }, d = h.NONE, p = 1e-6, m = new Th, v = new Th, g = 1, y = new Wt, b = !1, x = new Ut, _ = new Ut, w = new Ut, T = new Ut, M = new Ut, A = new Ut, S = new Ut, E = new Ut, P = new Ut; function C() { return Math.pow(.95, s.zoomSpeed); } function L(e) { v.theta -= e; } function R(e) { v.phi -= e; } var I, O = (I = new Wt, function (e, t) { I.setFromMatrixColumn(t, 0), I.multiplyScalar(-e), y.add(I); }), D = function () { var e = new Wt; return function (t, i) { !0 === s.screenSpacePanning ? e.setFromMatrixColumn(i, 1) : (e.setFromMatrixColumn(i, 0), e.crossVectors(s.object.up, e)), e.multiplyScalar(t), y.add(e); }; } (), F = function () {
    var e = new Wt; return function (t, i) {
    var n = s.domElement === document ? s.domElement.body : s.domElement; if (s.object.isPerspectiveCamera) {
        var r = s.object.position;
        e.copy(r).sub(s.target);
        var a = e.length();
        a *= Math.tan(s.object.fov / 2 * Math.PI / 180), O(2 * t * a / n.clientHeight, s.object.matrix), D(2 * i * a / n.clientHeight, s.object.matrix);
    }
    else
        s.object.isOrthographicCamera ? (O(t * (s.object.right - s.object.left) / s.object.zoom / n.clientWidth, s.object.matrix), D(i * (s.object.top - s.object.bottom) / s.object.zoom / n.clientHeight, s.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), s.enablePan = !1);
    };
    } (); function k(e) { s.object.isPerspectiveCamera ? g /= e : s.object.isOrthographicCamera ? (s.object.zoom = Math.max(s.minZoom, Math.min(s.maxZoom, s.object.zoom * e)), s.object.updateProjectionMatrix(), b = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), s.enableZoom = !1); } function N(e) { s.object.isPerspectiveCamera ? g *= e : s.object.isOrthographicCamera ? (s.object.zoom = Math.max(s.minZoom, Math.min(s.maxZoom, s.object.zoom / e)), s.object.updateProjectionMatrix(), b = !0) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), s.enableZoom = !1); } function B(e) { T.set(e.clientX, e.clientY); } function G(e) {
    if (!1 !== s.enabled) {
        switch (e.preventDefault(), s.domElement.focus ? s.domElement.focus() : window.focus(), e.button) {
            case s.mouseButtons.LEFT:
                if (e.ctrlKey || e.metaKey || e.shiftKey) {
                    if (!1 === s.enablePan)
                        return;
                    B(e), d = h.PAN;
                }
                else {
                    if (!1 === s.enableRotate)
                        return;
                    !function (e) { x.set(e.clientX, e.clientY); } (e), d = h.ROTATE;
                }
                break;
            case s.mouseButtons.MIDDLE:
                if (!1 === s.enableZoom)
                    return;
                !function (e) { S.set(e.clientX, e.clientY); } (e), d = h.DOLLY;
                break;
            case s.mouseButtons.RIGHT:
                if (!1 === s.enablePan)
                    return;
                B(e), d = h.PAN;
        }
        d !== h.NONE && (document.addEventListener("mousemove", H, !1), document.addEventListener("mouseup", U, !1), s.dispatchEvent(c));
    }
    } function H(e) {
    if (!1 !== s.enabled)
        switch (e.preventDefault(), d) {
            case h.ROTATE:
                if (!1 === s.enableRotate)
                    return;
                !function (e) { _.set(e.clientX, e.clientY), w.subVectors(_, x).multiplyScalar(s.rotateSpeed); var t = s.domElement === document ? s.domElement.body : s.domElement; L(2 * Math.PI * w.x / t.clientHeight), R(2 * Math.PI * w.y / t.clientHeight), x.copy(_), s.update(); } (e);
                break;
            case h.DOLLY:
                if (!1 === s.enableZoom)
                    return;
                !function (e) { E.set(e.clientX, e.clientY), P.subVectors(E, S), P.y > 0 ? k(C()) : P.y < 0 && N(C()), S.copy(E), s.update(); } (e);
                break;
            case h.PAN:
                if (!1 === s.enablePan)
                    return;
                !function (e) { M.set(e.clientX, e.clientY), A.subVectors(M, T).multiplyScalar(s.panSpeed), F(A.x, A.y), T.copy(M), s.update(); } (e);
        }
    } function U(e) { !1 !== s.enabled && (document.removeEventListener("mousemove", H, !1), document.removeEventListener("mouseup", U, !1), s.dispatchEvent(u), d = h.NONE); } function z(e) { !1 === s.enabled || !1 === s.enableZoom || d !== h.NONE && d !== h.ROTATE || (e.preventDefault(), e.stopPropagation(), s.dispatchEvent(c), function (e) { e.deltaY < 0 ? N(C()) : e.deltaY > 0 && k(C()), s.update(); } (e), s.dispatchEvent(u)); } function V(e) {
    !1 !== s.enabled && !1 !== s.enableKeys && !1 !== s.enablePan && function (e) {
    var t = !1; switch (e.keyCode) {
        case s.keys.UP:
            F(0, s.keyPanSpeed), t = !0;
            break;
        case s.keys.BOTTOM:
            F(0, -s.keyPanSpeed), t = !0;
            break;
        case s.keys.LEFT:
            F(s.keyPanSpeed, 0), t = !0;
            break;
        case s.keys.RIGHT: F(-s.keyPanSpeed, 0), t = !0;
    } t && (e.preventDefault(), s.update());
    } (e);
    } function j(e) {
    if (!1 !== s.enabled) {
        switch (e.preventDefault(), e.touches.length) {
            case 1:
                if (!1 === s.enableRotate)
                    return;
                !function (e) { x.set(e.touches[0].pageX, e.touches[0].pageY); } (e), d = h.TOUCH_ROTATE;
                break;
            case 2:
                if (!1 === s.enableZoom && !1 === s.enablePan)
                    return;
                !function (e) {
                if (s.enableZoom) {
                    var t = e.touches[0].pageX - e.touches[1].pageX, i = e.touches[0].pageY - e.touches[1].pageY, n = Math.sqrt(t * t + i * i);
                    S.set(0, n);
                } if (s.enablePan) {
                    var r = .5 * (e.touches[0].pageX + e.touches[1].pageX), a = .5 * (e.touches[0].pageY + e.touches[1].pageY);
                    T.set(r, a);
                }
                } (e), d = h.TOUCH_DOLLY_PAN;
                break;
            default: d = h.NONE;
        }
        d !== h.NONE && s.dispatchEvent(c);
    }
    } function W(e) {
    if (!1 !== s.enabled)
        switch (e.preventDefault(), e.stopPropagation(), e.touches.length) {
            case 1:
                if (!1 === s.enableRotate)
                    return;
                if (d !== h.TOUCH_ROTATE)
                    return;
                !function (e) { _.set(e.touches[0].pageX, e.touches[0].pageY), w.subVectors(_, x).multiplyScalar(s.rotateSpeed); var t = s.domElement === document ? s.domElement.body : s.domElement; L(2 * Math.PI * w.x / t.clientHeight), R(2 * Math.PI * w.y / t.clientHeight), x.copy(_), s.update(); } (e);
                break;
            case 2:
                if (!1 === s.enableZoom && !1 === s.enablePan)
                    return;
                if (d !== h.TOUCH_DOLLY_PAN)
                    return;
                !function (e) {
                if (s.enableZoom) {
                    var t = e.touches[0].pageX - e.touches[1].pageX, i = e.touches[0].pageY - e.touches[1].pageY, n = Math.sqrt(t * t + i * i);
                    E.set(0, n), P.set(0, Math.pow(E.y / S.y, s.zoomSpeed)), k(P.y), S.copy(E);
                } if (s.enablePan) {
                    var r = .5 * (e.touches[0].pageX + e.touches[1].pageX), a = .5 * (e.touches[0].pageY + e.touches[1].pageY);
                    M.set(r, a), A.subVectors(M, T).multiplyScalar(s.panSpeed), F(A.x, A.y), T.copy(M);
                } s.update();
                } (e);
                break;
            default: d = h.NONE;
        }
    } function X(e) { !1 !== s.enabled && (s.dispatchEvent(u), d = h.NONE); } function Y(e) { !1 !== s.enabled && e.preventDefault(); } s.domElement.addEventListener("contextmenu", Y, !1), s.domElement.addEventListener("mousedown", G, !1), s.domElement.addEventListener("wheel", z, !1), s.domElement.addEventListener("touchstart", j, !1), s.domElement.addEventListener("touchend", X, !1), s.domElement.addEventListener("touchmove", W, !1), window.addEventListener("keydown", V, !1), this.update();
    };
    (rf.prototype = Object.create(Nt.prototype)).constructor = rf, Object.defineProperties(rf.prototype, { center: { get: function () { return console.warn("THREE.OrbitControls: .center has been renamed to .target"), this.target; } }, noZoom: { get: function () { return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."), !this.enableZoom; }, set: function (e) { console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."), this.enableZoom = !e; } }, noRotate: { get: function () { return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."), !this.enableRotate; }, set: function (e) { console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."), this.enableRotate = !e; } }, noPan: { get: function () { return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."), !this.enablePan; }, set: function (e) { console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."), this.enablePan = !e; } }, noKeys: { get: function () { return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."), !this.enableKeys; }, set: function (e) { console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."), this.enableKeys = !e; } }, staticMoving: { get: function () { return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."), !this.enableDamping; }, set: function (e) { console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."), this.enableDamping = !e; } }, dynamicDampingFactor: { get: function () { return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."), this.dampingFactor; }, set: function (e) { console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."), this.dampingFactor = e; } } });
    var af = i(6), of = i.n(af), sf = i(8), lf = i.n(sf), cf = i(4), uf = i.n(cf), hf = i(51), df = i.n(hf), pf = i(7), ff = i.n(pf), mf = function (e, t, i, n) { var r = Math.exp(-i / n); return e * r + (1 - r) * t; };
    function vf(e, t) {
    var i = this, n = { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 }; this.object = e, this.domElement = void 0 !== t ? t : document, this.enabled = !0, this.screen = { left: 0, top: 0, width: 0, height: 0 }, this.enableDamping = !0, this.enableRotate = !0, this.rotateSpeed = .9, this.rotateSpeedTouch = .75, this.rotateInertia = .05, this.rotateInertiaTouch = .05, this.enableZoom = !0, this.zoomSpeed = 150, this.zoomSpeedKey = .5, this.zoomSpeedTouch = 20, this.zoomInertia = .05, this.zoomInertiaTouch = .05, this.enablePan = !0, this.panSpeed = 20, this.panSpeedKey = .15, this.panSpeedTouch = 15, this.panInertia = .05, this.panInertiaTouch = .05, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.mouseButtons = { ROTATE: f.LEFT, ZOOM: f.MIDDLE, PAN: f.RIGHT }; var r = new Xu, a = new Wt, o = new Wt, s = new Wt, l = new Ut, c = new Wt, u = new zt, h = n.NONE, d = new Wt, p = new Th, m = new Th, v = new Ut, g = 1, y = 1, b = new Ut, x = new Ut, _ = 0, w = 0, T = 1, M = 1, A = 0, S = 0, E = new Ut, P = new Ut, C = 1, L = 1, R = new Ut, I = new Ut, O = !1, D = function () { }, F = new Wt, k = new Wt, N = new Wt, B = new Wt, G = 0, H = new Xu, U = { type: "change" }, z = { type: "start" }, V = { type: "end" }; this.handleResize = function () {
    if (this.domElement === document)
        this.screen.left = 0, this.screen.top = 0, this.screen.width = window.innerWidth, this.screen.height = window.innerHeight;
    else {
        var e = this.domElement.getBoundingClientRect(), t = this.domElement.ownerDocument.documentElement;
        this.screen.left = e.left + window.pageXOffset - t.clientLeft, this.screen.top = e.top + window.pageYOffset - t.clientTop, this.screen.width = e.width, this.screen.height = e.height;
    }
    }, this.handleEvent = function (e) { "function" == typeof this[e.type] && this[e.type](e); }; var j, W, X = (j = new Ut, function (e, t) { return j.set((e - i.screen.left) / i.screen.width, (t - i.screen.top) / i.screen.height), j; }), Y = function () { var e = new Ut; return function (t, n) { return e.set((t - .5 * i.screen.width - i.screen.left) / (.5 * i.screen.width), (i.screen.height + 2 * (i.screen.top - n)) / i.screen.width), e; }; } (); function Q(e) {
    if (!1 !== i.enabled) {
        switch (e.preventDefault(), e.button) {
            case i.mouseButtons.ROTATE:
                if (!1 === i.enableRotate)
                    return;
                x.copy(Y(e.pageX, e.pageY).negate()), b.copy(x), h = n.ROTATE;
                break;
            case i.mouseButtons.ZOOM:
            case i.mouseButtons.PAN:
                if (!1 === i.enablePan)
                    return;
                R.copy(X(e.pageX, e.pageY)), I.copy(R), h = e.button == i.mouseButtons.PAN ? n.PAN : n.ZOOM;
        }
        document.addEventListener("mousemove", q, !1), document.addEventListener("mouseup", $, !1), document.addEventListener("mouseleave", $, !1), i.dispatchEvent(z);
    }
    } function q(e) {
    if (!1 !== i.enabled)
        if (e.preventDefault(), h === n.ROTATE) {
            if (!1 === i.enableRotate)
                return;
            x.copy(Y(e.pageX, e.pageY).negate()), v.add(x).sub(b), b.copy(x), g = i.rotateSpeed, y = i.rotateInertia;
        }
        else if (h === n.PAN || h === n.ZOOM) {
            if (!1 === i.enablePan)
                return;
            I.copy(X(e.pageX, e.pageY)), P.add(I).sub(R), R.copy(I), C = i.panSpeed, L = i.panInertia;
        }
    } function $(e) { !1 !== i.enabled && (e.preventDefault(), h = n.NONE, document.removeEventListener("mousemove", q), document.removeEventListener("mouseup", $), document.removeEventListener("mouseleave", $), i.dispatchEvent(V)); } function Z(e) {
    if (!1 !== i.enabled) {
        switch (e.preventDefault(), e.stopPropagation(), e.deltaMode) {
            case 2:
                if (!1 === i.enableZoom)
                    return;
                w -= .025 * e.deltaY, T = i.zoomSpeed, M = i.zoomInertia;
                break;
            case 1:
                if (!1 === i.enableZoom)
                    return;
                w -= .01 * e.deltaY, T = i.zoomSpeed, M = i.zoomInertia;
                break;
            default:
                if (!1 === i.enableZoom)
                    return;
                w -= 25e-5 * e.deltaY, T = i.zoomSpeed, M = i.zoomInertia;
        }
        i.dispatchEvent(z), i.dispatchEvent(V);
    }
    } function K(e) {
    if (!1 !== i.enabled) {
        var t = e.touches[0], r = e.touches[1];
        switch (e.touches.length) {
            case 1:
                if (!1 === i.enableRotate)
                    return;
                h = n.TOUCH_ROTATE, x.copy(Y(t.pageX, t.pageY).negate()), b.copy(x);
                break;
            default:
                if (!1 === i.enableZoom && !1 === i.enablePan)
                    return;
                if (h = n.TOUCH_ZOOM_PAN, i.enableZoom) {
                    var a = X(t.pageX - r.pageX, t.pageY - r.pageY);
                    A = S = a.length();
                }
                if (i.enablePan) {
                    var o = X((t.pageX + r.pageX) / 2, (t.pageY + r.pageY) / 2);
                    R.copy(o), I.copy(R);
                }
        }
        i.dispatchEvent(z);
    }
    } function J(e) {
    if (!1 !== i.enabled) {
        e.preventDefault(), e.stopPropagation();
        var t = e.touches[0], n = e.touches[1];
        switch (e.touches.length) {
            case 1:
                if (!1 === i.enableRotate)
                    return;
                x.copy(Y(t.pageX, t.pageY).negate()), v.add(x).sub(b), b.copy(x), g = i.rotateSpeedTouch, y = i.rotateInertiaTouch;
                break;
            default:
                if (!1 === i.enableZoom && !1 === i.enablePan)
                    return;
                var r = X(t.pageX - n.pageX, t.pageY - n.pageY), a = (S = r.length()) - A;
                A = S;
                var o = X((t.pageX + n.pageX) / 2, (t.pageY + n.pageY) / 2);
                I.copy(o);
                var s = l.subVectors(I, R), c = s.length();
                R.copy(I), i.enableZoom && Math.abs(a) > Math.abs(c) && (w += a, T = i.zoomSpeedTouch, M = i.zoomInertiaTouch), i.enablePan && Math.abs(a) <= Math.abs(c) && (P.add(s), C = i.panSpeedTouch, L = i.panInertiaTouch);
        }
    }
    } function ee(e) {
    if (!1 !== i.enabled) {
        switch (e.touches.length) {
            case 0:
                h = n.NONE;
                break;
            case 1:
                if (!1 === i.enableRotate)
                    return;
                h = n.TOUCH_ROTATE, x.copy(Y(e.touches[0].pageX, e.touches[0].pageY).negate()), b.copy(x);
        }
        i.dispatchEvent(V);
    }
    } function te(e) { !1 !== i.enabled && e.preventDefault(); } this.update = (W = new Wt, function () {
    if (O) {
        var e = H.getElapsedTime() / G;
        e = Ht.smootherstep(e, 0, 1), i.object.position.lerpVectors(F, N, e), i.object.lookAt(W.lerpVectors(k, B, e)), e >= 1 && (O = !1, D(), m.set(0, 0, 0), v.set(0, 0), _ = 0, w = 0, E.set(0, 0), P.set(0, 0), r.getDelta());
    }
    else
        i.object.isCamera || i.object.isLight ? d.set(0, 0, -1) : d.set(0, 0, 1), d.applyQuaternion(i.object.quaternion).normalize(), p.setFromVector3(d), p.theta += m.theta * g, p.phi += m.phi * g, p.theta = Math.max(i.minAzimuthAngle, Math.min(i.maxAzimuthAngle, p.theta)), p.phi = Math.max(i.minPolarAngle, Math.min(i.maxPolarAngle, p.phi)), p.makeSafe(), d.setFromSpherical(p), a.copy(d).add(i.object.position), i.object.lookAt(a), i.object.isPerspectiveCamera ? i.object.position.addScaledVector(d, _) : i.object.isOrthographicCamera && (i.object.zoom *= 1 + .15 * _, i.object.updateProjectionMatrix()), o.copy(d).cross(i.object.up).setLength(-E.x), o.add(s.copy(i.object.up).setLength(E.y)), i.object.position.add(o), r.getDelta(), m.set(m.radius, v.y, v.x), v.x = i.enableDamping ? mf(v.x, 0, 1 / 35, y) : 0, v.y = i.enableDamping ? mf(v.y, 0, 1 / 35, y) : 0, m.set(m.radius, m.phi - v.y, m.theta - v.x), E.copy(P), P.x = i.enableDamping ? mf(P.x, 0, 1 / 35, L) : 0, P.y = i.enableDamping ? mf(P.y, 0, 1 / 35, L) : 0, E.sub(P), E.multiplyScalar(C), _ = w, w = i.enableDamping ? mf(w, 0, 1 / 35, M) : 0, _ -= w, _ *= T; var t = !1; c.distanceToSquared(i.object.position) > 1e-6 && (c.copy(i.object.position), t = !0), u.dot(i.object.quaternion) < 1 - 1e-6 && (u.copy(i.object.quaternion), t = !0), t && i.dispatchEvent(U);
    }), this.dispose = function () { this.domElement.removeEventListener("contextmenu", te, !1), this.domElement.removeEventListener("mousedown", Q, !1), this.domElement.removeEventListener("wheel", Z, !1), this.domElement.removeEventListener("touchstart", K, !1), this.domElement.removeEventListener("touchend", ee, !1), this.domElement.removeEventListener("touchmove", J, !1), document.removeEventListener("mousemove", q, !1), document.removeEventListener("mouseup", $, !1), document.removeEventListener("mouseleave", $, !1); }, this.tween = function (e, t, n, r) { var a = new Wt, o = new Wt, s = new Wt; return function (e, t, n, r) { i.object.parent && (e = a.copy(e), i.object.parent.worldToLocal(e)); var l = i.object.getWorldPosition(o), c = s.subVectors(t, l).length(), u = i.object.getWorldDirection(s).multiplyScalar(c).add(l), h = e.manhattanDistanceTo(i.object.position), d = t.manhattanDistanceTo(u); h < 1e-5 && d < 1e-5 || (O = !0, D = "function" == typeof r ? r : function () { }, F.copy(i.object.position), k.copy(u), N.copy(e), B.copy(t), G = n, H.start()); }; } (), this.domElement.addEventListener("contextmenu", te, !1), this.domElement.addEventListener("mousedown", Q, !1), this.domElement.addEventListener("wheel", Z, !1), this.domElement.addEventListener("touchstart", K, !1), this.domElement.addEventListener("touchend", ee, !1), this.domElement.addEventListener("touchmove", J, !1), this.handleResize(), this.update();
    }
    Object.assign(vf.prototype, Nt.prototype);
    var gf, yf, bf, xf = function (e) {
    function t(e, i) { var n; return c()(this, t), n = of()(this, uf()(t).call(this, e, i)), window.f = lf()(n), n.startEvent = { type: "start" }, n.endEvent = { type: "end" }, n.domElement.addEventListener("wheel", n._onMouseWheel = n.onMouseWheel.bind(lf()(n)), !1), n.domElement.addEventListener("touchstart", n._onTouchStart = n.onTouchStart.bind(lf()(n)), !1), n.domElement.addEventListener("touchend", n._onTouchEnd = n.onTouchEnd.bind(lf()(n)), !1), n.domElement.addEventListener("touchmove", n._onTouchMove = n.onTouchMove.bind(lf()(n)), !1), n._touchZoomDistanceEnd = null, n._touchZoomDistanceStart = null, n; } return ff()(t, e), h()(t, [{ key: "dispose", value: function () { df()(uf()(t.prototype), "dispose", this).call(this), this.domElement.removeEventListener("wheel", this._onMouseWheel, !1), this.domElement.removeEventListener("touchstart", this._onTouchStart, !1), this.domElement.removeEventListener("touchend", this._onTouchEnd, !1), this.domElement.removeEventListener("touchmove", this._onTouchMove, !1); } }, { key: "onMouseWheel", value: function (e) { !1 !== this.enabled && !1 !== this.enableFovZoom && (e.preventDefault(), e.stopPropagation(), this.dispatchEvent(this.startEvent), this.handleMouseWheel(e), this.dispatchEvent(this.endEvent)); } }, {
    key: "onTouchStart", value: function (e) {
    if (!1 !== this.enabled)
        switch (e.preventDefault(), e.touches.length) {
            case 2:
                if (!1 === this.enableFovZoom)
                    return;
                var t = e.touches[0].pageX - e.touches[1].pageX, i = e.touches[0].pageY - e.touches[1].pageY, n = Math.sqrt(t * t + i * i);
                this._touchZoomDistanceEnd = this._touchZoomDistanceStart = n;
        }
    }
    }, { key: "onTouchEnd", value: function (e) { !1 !== this.enabled && !1 !== this.enableFovZoom && (e.preventDefault(), e.stopPropagation(), e.touches.length); } }, {
    key: "onTouchMove", value: function (e) {
    if (!1 !== this.enabled && !1 !== this.enableFovZoom)
        switch (e.preventDefault(), e.stopPropagation(), e.touches.length) {
            case 1: break;
            default:
                var t = e.touches[0].pageX - e.touches[1].pageX, i = e.touches[0].pageY - e.touches[1].pageY, n = Math.sqrt(t * t + i * i);
                this._touchZoomDistanceEnd = n;
                var r = this._touchZoomDistanceStart - this._touchZoomDistanceEnd;
                this.object.fov += r * this.fovZoomTouchSpeed, this._setFov(this.object.fov);
        }
    }
    }, { key: "_setFov", value: function (e) { this.object.fov = Math.max(this.fovZoomMin, Math.min(this.fovZoomMax, e)), this.object.updateProjectionMatrix(); } }, { key: "handleMouseWheel", value: function (e) { var t = this.fovZoomSpeed; e.deltaY < 0 ? this.object.fov -= t : e.deltaY > 0 && (this.object.fov += t), this._setFov(this.object.fov), this.update(); } }]), t;
    } (vf), _f = function () {
    function e(t, i, n) { c()(this, e), this.config = t, this.camera = i, this.container = n, this.enabled = !1; } return h()(e, [{ key: "destroy", value: function () { this.config = null, this.camera = null, this.container = null, this.enabled = !1; } }, { key: "preparePlanCamera", value: function () { this.camera.far = this.config.plan.camera.far, this.camera.near = this.config.plan.camera.near; } }, { key: "resetCamera", value: function () { this.camera.far = this.config.camera.far, this.camera.near = this.config.camera.near; } }, { key: "setPreviewControls", value: function () { this.threeControls = new rf(this.camera, this.container), this._setPreviewSettings(), this.enabled = !0; } }, { key: "setPanoramaControls", value: function () { this.threeControls = new xf(this.camera, this.container), window.f = this.threeControls, this._setPanoramaSettings(), this.enabled = !0; } }, { key: "setPlanControls", value: function () { this.threeControls = new rf(this.camera, this.container), this._setPlanOrbitSettings(), this.enabled = !0; } }, { key: "resetControls", value: function () { this.enabled = !1, this.threeControls.enabled = !1, this.threeControls.dispose(); } }, { key: "getTarget", value: function () { return this.threeControls.target ? this.threeControls.target.clone() : null; } }, {
    key: "update", value: function (e) {
    if (this.enabled) {
        var t = this.getTarget(), i = this.config.controls.preview;
        if (this.threeControls.update(e), t) {
            this.threeControls.update(e);
            var n = this.getTarget();
            this._checkTargetCoordsLimits(n, i) && (this.threeControls.target.copy(t), this.threeControls.object.lookAt(t));
        }
    }
    }
    }, { key: "_setPanoramaSettings", value: function () { Object.assign(this.threeControls, this.config.controls.pano); } }, { key: "_setPreviewSettings", value: function () { this.threeControls.target.set(0, 0, 0), Object.assign(this.threeControls, this.config.controls.preview); } }, { key: "_setPlanOrbitSettings", value: function () { this._setPreviewSettings(), Object.assign(this.threeControls, this.config.controls.plan); } }, { key: "_checkTargetCoordsLimits", value: function (e, t) { return e.x >= t.panXLimit[1] || e.x <= t.panXLimit[0] || e.z >= t.panZLimit[1] || e.z <= t.panZLimit[0]; } }]), e;
    } (), wf = i(21), Tf = i.n(wf), Mf = { uniforms: { tDiffuse: { value: null }, opacity: { value: 1 } }, vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "\tvec4 texel = texture2D( tDiffuse, vUv );", "\tgl_FragColor = opacity * texel;", "}"].join("\n") };
    function Af() { this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.renderToScreen = !1; }
    Object.assign(Af.prototype, { setSize: function () { }, render: function () { console.error("THREE.Pass: .render() must be implemented in derived pass."); } }), Af.FullScreenQuad = (gf = new gu(-1, 1, 1, -1, 0, 1), yf = new Hr(2, 2), bf = function (e) { this._mesh = new cr(yf, e); }, Object.defineProperty(bf.prototype, "material", { get: function () { return this._mesh.material; }, set: function (e) { this._mesh.material = e; } }), Object.assign(bf.prototype, { render: function (e) { e.render(this._mesh, gf); } }), bf);
    var Sf = function (e, t) { Af.call(this), this.textureID = void 0 !== t ? t : "tDiffuse", e instanceof Tr ? (this.uniforms = e.uniforms, this.material = e) : e && (this.uniforms = xr.clone(e.uniforms), this.material = new Tr({ defines: Object.assign({}, e.defines), uniforms: this.uniforms, vertexShader: e.vertexShader, fragmentShader: e.fragmentShader })), this.fsQuad = new Af.FullScreenQuad(this.material); };
    Sf.prototype = Object.assign(Object.create(Af.prototype), { constructor: Sf, render: function (e, t, i) { this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = i.texture), this.fsQuad.material = this.material, this.renderToScreen ? (e.setRenderTarget(null), this.fsQuad.render(e)) : (e.setRenderTarget(t), this.clear && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), this.fsQuad.render(e)); } });
    var Ef = function (e, t) { Af.call(this), this.scene = e, this.camera = t, this.clear = !0, this.needsSwap = !1, this.inverse = !1; };
    Ef.prototype = Object.assign(Object.create(Af.prototype), { constructor: Ef, render: function (e, t, i) { var n, r, a = e.getContext(), o = e.state; o.buffers.color.setMask(!1), o.buffers.depth.setMask(!1), o.buffers.color.setLocked(!0), o.buffers.depth.setLocked(!0), this.inverse ? (n = 0, r = 1) : (n = 1, r = 0), o.buffers.stencil.setTest(!0), o.buffers.stencil.setOp(a.REPLACE, a.REPLACE, a.REPLACE), o.buffers.stencil.setFunc(a.ALWAYS, n, 4294967295), o.buffers.stencil.setClear(r), o.buffers.stencil.setLocked(!0), e.setRenderTarget(i), this.clear && e.clear(), e.render(this.scene, this.camera), e.setRenderTarget(t), this.clear && e.clear(), e.render(this.scene, this.camera), o.buffers.color.setLocked(!1), o.buffers.depth.setLocked(!1), o.buffers.stencil.setLocked(!1), o.buffers.stencil.setFunc(a.EQUAL, 1, 4294967295), o.buffers.stencil.setOp(a.KEEP, a.KEEP, a.KEEP), o.buffers.stencil.setLocked(!0); } });
    var Pf = function () { Af.call(this), this.needsSwap = !1; };
    Pf.prototype = Object.create(Af.prototype), Object.assign(Pf.prototype, { render: function (e) { e.state.buffers.stencil.setLocked(!1), e.state.buffers.stencil.setTest(!1); } });
    var Cf = function (e, t) {
    if (this.renderer = e, void 0 === t) {
        var i = { minFilter: Ae, magFilter: Ae, format: ze, stencilBuffer: !1 }, n = e.getSize(new Ut);
        this._pixelRatio = e.getPixelRatio(), this._width = n.width, this._height = n.height, (t = new Jt(this._width * this._pixelRatio, this._height * this._pixelRatio, i)).texture.name = "EffectComposer.rt1";
    }
    else
        this._pixelRatio = 1, this._width = t.width, this._height = t.height; this.renderTarget1 = t, this.renderTarget2 = t.clone(), this.renderTarget2.texture.name = "EffectComposer.rt2", this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2, this.renderToScreen = !0, this.passes = [], void 0 === Mf && console.error("THREE.EffectComposer relies on CopyShader"), void 0 === Sf && console.error("THREE.EffectComposer relies on ShaderPass"), this.copyPass = new Sf(Mf), this.clock = new Xu;
    };
    Object.assign(Cf.prototype, {
    swapBuffers: function () { var e = this.readBuffer; this.readBuffer = this.writeBuffer, this.writeBuffer = e; }, addPass: function (e) { this.passes.push(e), e.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio); }, insertPass: function (e, t) { this.passes.splice(t, 0, e); }, isLastEnabledPass: function (e) {
    for (var t = e + 1; t < this.passes.length; t++)
        if (this.passes[t].enabled)
            return !1; return !0;
    }, render: function (e) {
    void 0 === e && (e = this.clock.getDelta()); var t, i, n = this.renderer.getRenderTarget(), r = !1, a = this.passes.length; for (i = 0; i < a; i++)
        if (!1 !== (t = this.passes[i]).enabled) {
            if (t.renderToScreen = this.renderToScreen && this.isLastEnabledPass(i), t.render(this.renderer, this.writeBuffer, this.readBuffer, e, r), t.needsSwap) {
                if (r) {
                    var o = this.renderer.getContext(), s = this.renderer.state.buffers.stencil;
                    s.setFunc(o.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, e), s.setFunc(o.EQUAL, 1, 4294967295);
                }
                this.swapBuffers();
            }
            void 0 !== Ef && (t instanceof Ef ? r = !0 : t instanceof Pf && (r = !1));
        } this.renderer.setRenderTarget(n);
    }, reset: function (e) {
    if (void 0 === e) {
        var t = this.renderer.getSize(new Ut);
        this._pixelRatio = this.renderer.getPixelRatio(), this._width = t.width, this._height = t.height, (e = this.renderTarget1.clone()).setSize(this._width * this._pixelRatio, this._height * this._pixelRatio);
    } this.renderTarget1.dispose(), this.renderTarget2.dispose(), this.renderTarget1 = e, this.renderTarget2 = e.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2;
    }, setSize: function (e, t) {
    this._width = e, this._height = t; var i = this._width * this._pixelRatio, n = this._height * this._pixelRatio; this.renderTarget1.setSize(i, n), this.renderTarget2.setSize(i, n); for (var r = 0; r < this.passes.length; r++)
        this.passes[r].setSize(i, n);
    }, setPixelRatio: function (e) { this._pixelRatio = e, this.setSize(this._width, this._height); }
    });
    var Lf = function () { this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.renderToScreen = !1; };
    Object.assign(Lf.prototype, { setSize: function () { }, render: function () { console.error("THREE.Pass: .render() must be implemented in derived pass."); } }), Lf.FullScreenQuad = function () { var e = new gu(-1, 1, 1, -1, 0, 1), t = new Hr(2, 2), i = function (e) { this._mesh = new cr(t, e); }; return Object.defineProperty(i.prototype, "material", { get: function () { return this._mesh.material; }, set: function (e) { this._mesh.material = e; } }), Object.assign(i.prototype, { render: function (t) { t.render(this._mesh, e); } }), i; } ();
    var Rf = function (e, t) { Af.call(this), void 0 === Mf && console.error("TexturePass relies on CopyShader"); var i = Mf; this.map = e, this.opacity = void 0 !== t ? t : 1, this.uniforms = xr.clone(i.uniforms), this.material = new Tr({ uniforms: this.uniforms, vertexShader: i.vertexShader, fragmentShader: i.fragmentShader, depthTest: !1, depthWrite: !1 }), this.needsSwap = !1, this.fsQuad = new Af.FullScreenQuad(null); };
    Rf.prototype = Object.assign(Object.create(Af.prototype), { constructor: Rf, render: function (e, t, i) { var n = e.autoClear; e.autoClear = !1, this.fsQuad.material = this.material, this.uniforms.opacity.value = this.opacity, this.uniforms.tDiffuse.value = this.map, this.material.transparent = this.opacity < 1, e.setRenderTarget(this.renderToScreen ? null : i), this.clear && e.clear(), this.fsQuad.render(e), e.autoClear = n; } });
    var If = function (e) { function t() { var e, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : void 0, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return c()(this, t), (e = of()(this, uf()(t).call(this, i, r))).side = n, e.renderToScreen = !1, e; } return ff()(t, e), h()(t, [{ key: "setSide", value: function (e) { this.side = e; } }, { key: "setMap", value: function (e) { this.map = e; } }, { key: "render", value: function (e, t, i, n, r) { var a = e.autoClear; e.autoClear = !1, this.fsQuad.material = this.material, this.uniforms.opacity.value = this.opacity, this.uniforms.tDiffuse.value = this.map, this.material.transparent = this.opacity < 1, e.setRenderTarget(this.renderToScreen ? null : t, this.side), this.clear && e.clear(), this.fsQuad.render(e), e.autoClear = a; } }]), t; } (Rf), Of = i(52), Df = 500, Ff = new (i.n(Of).a)(window.navigator.userAgent), kf = function () { return { isMobile: !!Ff.mobile(), isIOS: "iOS" === Ff.os(), isTablet: !!Ff.tablet() }; }, Nf = function (e) { return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e.navigator.userAgent); }, Bf = function (e) { return function (e) { return e.offsetWidth > e.offsetHeight; } (e) ? e.offsetHeight < Df : e.offsetWidth < Df; }, Gf = function () { return "undefined" != typeof createImageBitmap && "undefined" != typeof fetch && navigator.userAgent.toLowerCase().indexOf("firefox") < 0; }, Hf = function () { function e() { c()(this, e); } return h()(e, null, [{ key: "disposeNode", value: function (t) { t.geometry && (t.geometry.dispose(), t.geometry = null), t.material && (Array.isArray(t.material) ? t.material.forEach((function (i, n) { i && e.disposeMaterial(i), t.material[n] = null; })) : t.material.isMultiMaterial && Array.isArray(t.material.materials) ? t.material.materials.forEach((function (i, n) { i && e.disposeMaterial(i), t.material.materials[n] = null; })) : e.disposeMaterial(t.material), t.material = null), t.userData && e.disposeNode(t.userData); } }, { key: "disposeMaterial", value: function (e) { ["map", "lightMap", "bumpMap", "normalMap", "specularMap", "envMap"].forEach((function (t) { e[t] && (Array.isArray(e[t]) ? e[t].forEach((function (e) { return e && e.dispose && e.dispose(); })) : e[t] && e[t].dispose && e[t].dispose(), e[t] = null); })), e.uniforms && Object.keys(e.uniforms).forEach((function (t) { e.uniforms[t] && e.uniforms[t].value && e.uniforms[t].value.dispose && e.uniforms[t].value.dispose(), e.uniforms[t] = null; })), e.uniforms = null, e.dispose && e.dispose(); } }, { key: "disposeNodeDeep", value: function (t) { t.children && t.children.forEach((function (i, n) { e.disposeNodeDeep(i), e.disposeNode(i), t.children[n] = null; })); } }, { key: "disposeEffectComposer", value: function (e) { } }, { key: "disposeRenderTarget", value: function (e) { e.texture.dispose(), e.dispose(), e.texture = null; } }, { key: "disposeTexture", value: function (e) { e.dispose(), e.image = null; } }]), e; } (), Uf = function (e) {
    function t(e, i, n, r) { var a; return c()(this, t), (a = of()(this, uf()(t).call(this, i))).config = e, a.manager = i, a.renderer = n, a.sideNames = r, a.imageLoader = Gf() ? new Ou(i) : new Bc(i), a.imageLoader.setPath(a.path), a; } return ff()(t, e), h()(t, [{ key: "preloadCubeImages", value: function (e) { var t = this; return this.sideNames.map((function (i, n) { return new Promise((function (i) { return t.imageLoader.load(t._getSliceUrl(e, n, 0), i); })); })); } }, { key: "makeBaseCubeTexture", value: function (e, t) { var i = t.width, n = t.height, r = new Cr(i, n), a = new Cf(this.renderer.threeRenderer, r), o = new If; return a.addPass(o), a.renderToScreen = !1, this._renderBaseSideImages(e, a), this._setupTexture(a.renderTarget1.texture, { width: i, height: n }), Promise.resolve({ texture: a.renderTarget1.texture, composer: a }); } }, { key: "replaceBaseCubeTexture", value: function (e, t) { var i = e.texture.userData.width, n = e.texture.userData.height; return this._renderBaseSideImages(t, e.composer), this._setupTexture(e.texture, { width: i, height: n }), e; } }, { key: "loadSlice", value: function (e, t) { var i = this, n = t.side, r = t.index, a = t.count, o = t.path, s = t.checkNeedToUpdate, l = void 0 === s ? function () { return !0; } : s, c = Math.sqrt(a), u = Math.floor(r / c), h = new Ut(r % c * (e.userData.width / c), u * (e.userData.height / c)); return new Promise((function (t) { return i.imageLoader.load(i._getSliceUrl(o, n, r), (function (r) { return t(l() && i.renderer.copyTextureToCubeTexture(n, h, r, e)); })); })); } }, { key: "_setupTexture", value: function (e, t) { var i = t.width, n = t.height; e.image = [1, 2, 3, 4, 5, 6], e.userData = e.userData || {}, e.userData.width = i, e.userData.height = n, e.flipY = !1, e.encoding = Tt, e.wrapS = be, e.wrapT = be; } }, { key: "_getSliceUrl", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; return "".concat(e).concat(this.sideNames[t]).replace("{i}", i.toString()) + ".jpg"; } }, {
    key: "_renderBaseSideImages", value: function (e, t) {
    for (var i = t.passes[0], n = 0; n < this.sideNames.length; ++n) {
        var r = new zs(e[n][0]);
        r.flipY = !1, i.setSide(n), i.setMap(r), t.render(), Hf.disposeTexture(r);
    }
    }
    }]), t;
    } (Ic), zf = function () {
    function e(t, i) { c()(this, e), this.camera = t, this.scene = i, this.position = new Wt, this.size = 1, this.frustum = new Or, this.points = [], this.sidesCoords = [{ start: new Wt(-.5, .5, .5), i: new Wt(0, -1, 0), j: new Wt(0, 0, -1) }, { start: new Wt(.5, .5, -.5), i: new Wt(0, -1, 0), j: new Wt(0, 0, 1) }, { start: new Wt(.5, .5, -.5), i: new Wt(0, 0, 1), j: new Wt(-1, 0, 0) }, { start: new Wt(.5, -.5, .5), i: new Wt(0, 0, -1), j: new Wt(-1, 0, 0) }, { start: new Wt(.5, .5, .5), i: new Wt(0, -1, 0), j: new Wt(-1, 0, 0) }, { start: new Wt(-.5, .5, -.5), i: new Wt(0, -1, 0), j: new Wt(1, 0, 0) }]; } return h()(e, [{ key: "destroy", value: function () { } }, { key: "setPosition", value: function (e) { this.position = e; } }, { key: "setSize", value: function (e) { this.size = e; } }, {
    key: "getFrustumIndexes", value: function () {
    var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; this.updateFrustum(); var i = [], n = 1 / this.size / 2, r = new ji(new Wt, Math.sqrt(2 * Math.pow(n, 2))), a = null, o = new Wt(0, 0, -1).applyQuaternion(this.camera.threeCamera.quaternion).normalize(), s = new Wt; this.camera.threeCamera.getWorldPosition(s); var l = new Ki(s, o); if (this.points.forEach((function (n, o) {
    n.forEach((function (n, s) {
    if (r.center.set(n.x, n.y, n.z), t || e.frustum.intersectsSphere(r)) {
        var c = new Wt;
        l.intersectSphere(r, c) && (a = { side: o, index: s }), i.push({ side: o, index: s });
    }
    }));
    })), a) {
        var c = this.points[a.side][a.index];
        i.sort((function (t, i) { var n = c.distanceTo(e.points[t.side][t.index]), r = c.distanceTo(e.points[i.side][i.index]); return n < r ? -1 : n === r ? 0 : 1; }));
    } return i;
    }
    }, {
    key: "generatePoints", value: function () {
    var e = this; return this.points = [], this.sidesCoords.forEach((function (t) {
    var i = [], n = e.position.clone(); n.add(t.start), n.add(t.i.clone().multiplyScalar(1 / e.size / 2)), n.add(t.j.clone().multiplyScalar(1 / e.size / 2)); for (var r = 0; r < e.size; ++r) {
        var a = n.clone();
        a.add(t.i.clone().multiplyScalar(r / e.size));
        for (var o = 0; o < e.size; ++o) {
            var s = a.clone();
            s.add(t.j.clone().multiplyScalar(o / e.size)), i.push(s);
        }
    } e.points.push(i);
    })), this.points;
    }
    }, { key: "_drawPoints", value: function () { var e = new vr; this.points.forEach((function (t) { var i; return (i = e.vertices).push.apply(i, Tf()(t)); })); var t = new Os({ size: 10, sizeAttenuation: !1 }), i = new Bs(e, t); this.scene.add(i); } }, { key: "updateFrustum", value: function () { this.frustum.setFromMatrix((new li).multiplyMatrices(this.camera.threeCamera.projectionMatrix, this.camera.threeCamera.matrixWorldInverse)); } }]), e;
    } (), Vf = function () {
    function e(t, i, n, r, a, o, s, l) { c()(this, e), this.config = t, this.envConfig = i, this.loadingManager = n, this.events = r, this.renderer = a, this.images = {}, this.group = null, this.showTween = null, this.hideTween = null, this.markerHasOpacity = !0, this.baseTexturePreset = e.TEXTURES_PRESETS.LOW, this.qualityTexturePreset = l ? e.TEXTURES_PRESETS.MEDIUM : e.TEXTURES_PRESETS.HIGH, this.frustum = new zf(o, s), this.sliceCache = {}, this.sliceCallbacksQuery = [], this.sliceCallbacksQueryMaxLength = 24, this.position = new Wt(this.config.position[0] / 100, this.config.position[2] / 100, this.config.position[1] / 100), this.originalPosition = this.position.clone(), this.slicedCubemapTextureLoader = new Uf(i, n, a, ["back_{i}", "left_{i}", "top_{i}", "bot_{i}", "front_{i}", "right_{i}"]), this.placeMarkerTexture = null, this.placeMarkerMaterial = null, this.placeMarkerGeometry = null, this.placeMarkerGroup = null, this.placeMakerMesh = null, this.textGeometry = null, this.textMaterials = null, this.textMesh = null, this.position.setY(.03), this.isActive = !1; } return h()(e, null, [{ key: "TEXTURES_PRESETS", get: function () { return { HIGH: "high", MEDIUM: "medium", LOW: "low" }; } }]), h()(e, [{ key: "destroy", value: function () { var e = this; this.showTween && this.showTween.stop(), this.showTween = null, this.hideTween && this.hideTween.stop(), this.hideTween = null, this.frustum && this.frustum.destroy(), this.placeMarkerTexture && this.placeMarkerTexture.dispose(), this.placeMarkerMaterial && this.placeMarkerMaterial.dispose(), this.placeMarkerGeometry && this.placeMarkerGeometry.dispose(), this.textGeometry && this.textGeometry.dispose(), this.textMaterials && this.textMaterials.forEach((function (e) { return e && e.dispose(); })), this.placeMakerMesh && this.placeMarkerGroup.remove(this.placeMakerMesh), this.textMesh && this.placeMarkerGroup.remove(this.textMesh), Object.keys(this.images).forEach((function (t) { return Object.keys(e.images[t]).forEach((function (i) { return Object.keys(e.images[t][i]).forEach((function (n) { e.images[t][i][n].close && e.images[t][i][n].close(), e.images[t][i][n] = null; })); })); })), this.config = null, this.envConfig = null, this.loadingManager = null, this.events = null, this.renderer = null, this.images = null, this.group = null, this.showTween = null, this.hideTween = null, this.markerHasOpacity = null, this.baseTexturePreset = null, this.qualityTexturePreset = null, this.frustum = null, this.sliceCache = null, this.sliceCallbacksQuery = null, this.sliceCallbacksQueryMaxLength = null, this.position = null, this.originalPosition = null, this.slicedCubemapTextureLoader = null, this.placeMarkerTexture = null, this.placeMarkerMaterial = null, this.placeMarkerGeometry = null, this.placeMarkerGroup = null, this.placeMakerMesh = null, this.textGeometry = null, this.textMaterials = null, this.textMesh = null, this.isActive = null; } }, { key: "preloadBaseImages", value: function () { var e = this, t = this.baseTexturePreset, i = this.config.texturesPath[t] + this.config.id + "/"; return Promise.all(this.slicedCubemapTextureLoader.preloadCubeImages(i)).then((function (i) { return i.forEach((function (i, n) { e.images[t] = e.images[t] || {}, e.images[t][n] = e.images[t][n] || {}, e.images[t][n][0] = i; })); })); } }, { key: "isSibling", value: function (e) { return this.config.closest.includes(e.config.id); } }, { key: "setupBaseMode", value: function () { this.frustum.setSize(Math.sqrt(this.envConfig.panoramasConfig.slicedConfig[this.baseTexturePreset].count)), this.frustum.generatePoints(); } }, { key: "setupQualityMode", value: function () { this.frustum.setSize(Math.sqrt(this.envConfig.panoramasConfig.slicedConfig[this.qualityTexturePreset].count)), this.frustum.generatePoints(); } }, { key: "makeBaseCubeTexture", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], i = this.baseTexturePreset, n = this.envConfig.panoramasConfig.slicedConfig[t ? i : this.qualityTexturePreset], r = n.width, a = n.height; return this.slicedCubemapTextureLoader.makeBaseCubeTexture(this.images[i], { width: r, height: a }).then((function (t) { return e._setUpTexture(t.texture), t; })); } }, { key: "updateBaseCubeTexture", value: function (e) { var t = this, i = this.baseTexturePreset, n = this.frustum.getFrustumIndexes(!0), r = this.envConfig.panoramasConfig.slicedConfig[i].count; return n.forEach((function (n) { var a = n.side, o = n.index; t.slicedCubemapTextureLoader.replaceBaseCubeTexture(e, t.images[i], { side: a, index: o, count: r }); })), e; } }, {
    key: "updateQualityCubeTexture", value: function (e) {
    var t = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = i.ignoreLimit, r = void 0 !== n && n; if (r || !(this.sliceCallbacksQuery.length >= this.sliceCallbacksQueryMaxLength)) {
        var a = this.qualityTexturePreset, o = this.frustum.getFrustumIndexes(), s = this.config.texturesPath[a] + this.config.id + "/", l = this.envConfig.panoramasConfig.slicedConfig[a].count;
        o.forEach((function (i) {
        var n = i.side, o = i.index; if ((r || !(t.sliceCallbacksQuery.length >= t.sliceCallbacksQueryMaxLength)) && (t.sliceCache[a] = t.sliceCache[a] || {}, t.sliceCache[a][n] = t.sliceCache[a][n] || {}, !t.sliceCache[a][n][o])) {
            var c = function () { return t.isActive; }, u = function () { return t.slicedCubemapTextureLoader.loadSlice(e, { side: n, index: o, path: s, count: l, checkNeedToUpdate: c }); };
            t.sliceCallbacksQuery.push(u), t.sliceCache[a][n][o] = 1, u().then((function () { return t.sliceCallbacksQuery = t.sliceCallbacksQuery.filter((function (e) { return e !== u; })); }));
        }
        }));
    }
    }
    }, { key: "makePlaceMarker", value: function (e) { this.group = e, this.shape = this._addPlaceMarkerShape(this.envConfig.pointShape.baseOpacity), this.shape.position.copy(this.position), e.add(this.shape), this.frustum.setPosition(this.getGlobalOriginalPosition()); } }, {
    key: "showPlaceMarker", value: function () {
    var e = this; if (!this.showTween && this.markerHasOpacity) {
        var t = this;
        this.showTween = new r.a.Tween({ opacity: this.envConfig.pointShape.baseOpacity }).to({ opacity: 1 }, this.envConfig.tween.Pano.shapeShow.time).easing(this.envConfig.tween.Pano.shapeShow.easing).onUpdate((function () { t.setOpacity(this.opacity); })).onStart((function () { e.setOpacity(e.envConfig.pointShape.baseOpacity); })).onComplete((function () { e.showTween = null, e.markerHasOpacity = !1; })).start();
    }
    }
    }, {
    key: "hidePlaceMarker", value: function () {
    var e = this; if (!this.hideTween && !this.markerHasOpacity) {
        var t = this;
        this.hideTween = new r.a.Tween({ opacity: 1 }).to({ opacity: this.envConfig.pointShape.baseOpacity }, this.envConfig.tween.Pano.shapeShow.time).easing(this.envConfig.tween.Pano.shapeShow.easing).onUpdate((function () { t.setOpacity(this.opacity); })).onStart((function () { e.setOpacity(1); })).onComplete((function () { e.hideTween = null, e.markerHasOpacity = !0; })).start();
    }
    }
    }, { key: "getGlobalPosition", value: function () { var e = new Wt; return this.shape.getWorldPosition(e), e; } }, { key: "getGlobalOriginalPosition", value: function () { return this.originalPosition.clone(); } }, { key: "_setUpTexture", value: function (e) { e.flipY = !1, e.encoding = Tt, e.wrapS = _e, e.wrapT = _e; } }, { key: "_addPlaceMarkerShape", value: function (e) { return this.placeMarkerGroup = new Fo, this.placeMarkerTexture = qt.loadTexture(this.envConfig.basePath), this.placeMarkerMaterial = new uc({ map: this.placeMarkerTexture, color: new yn(16777215), transparent: !0, side: T, opacity: e }), this.placeMarkerGeometry = new Gr(2 * this.envConfig.pointShape.radius, 2 * this.envConfig.pointShape.radius), this.placeMakerMesh = new cr(this.placeMarkerGeometry, this.placeMarkerMaterial), this.placeMakerMesh.renderOrder = 1, this.placeMarkerGroup.rotateX(Ht.degToRad(90)), this.placeMakerMesh.layers.set(1), this.placeMarkerGroup.add(this.placeMakerMesh), this.envConfig.isDev && this._addTextNumber(this.placeMarkerGroup), this.placeMarkerGroup; } }, { key: "setOpacity", value: function (e) { this.placeMakerMesh && (this.placeMakerMesh.material.opacity = e); } }, { key: "_addTextNumber", value: function (e) { var t = this; (new Nu).load(this.envConfig.resourcesDomain + "fonts/helvetiker_regular.typeface.json", (function (i) { t.textGeometry = new Bl(t.config.id + "", { font: i, size: .2, height: .02, curveSegments: 12 }), t.textGeometry.computeVertexNormals(), t.textMaterials = [new sc({ color: 16711680, flatShading: !0 }), new sc({ color: 16711680 })], t.textMesh = new cr(t.textGeometry, t.textMaterials), t.textMesh.layers.set(1), e.add(t.textMesh); })); } }]), e;
    } (), jf = function () {
    function e(t, i, n, r, a, o, s) { c()(this, e), this.config = t, this.loadingManager = i, this.events = n, this.renderer = r, this.camera = a, this.scene = o, this.isMobile = s, this.panoramas = [], this.mirrorPanoramas = [], this.closestPano = null, this.currentPano = null, this.placeMarkersGroup = new Fo, this.raycaster = new xh, this.tasksPull = [], this._inWork = !1, this._initPanoramas(), this._initMirrorPanoramas(), this.defaultPanorama = this.panoramas.length > 0 ? this.panoramas[0] : null; } return h()(e, [{ key: "update", value: function (e) { this._processPlaceMarkersVisibility(e), this._processUpdateTasks(); } }, { key: "preloadBaseImages", value: function () { var e = this.panoramas.map((function (e) { return e.preloadBaseImages(); })); return e.push.apply(e, Tf()(this.mirrorPanoramas.map((function (e) { return e.preloadBaseImages(); })))), Promise.all(e); } }, { key: "destroy", value: function () { this.panoramas.forEach((function (e) { return e.destroy(); })), this.mirrorPanoramas.forEach((function (e) { return e.destroy(); })), this.config = null, this.loadingManager = null, this.events = null, this.renderer = null, this.camera = null, this.scene = null, this.isMobile = null, this.panoramas = null, this.mirrorPanoramas = null, this.closestPano = null, this.currentPano = null, this.placeMarkersGroup = null, this.raycaster = null, this.tasksPull = null, this._inWork = !1; } }, { key: "findMirrorPanoByMaterial", value: function (e) { return this.panoramas.find((function (t) { return t.config.material === e; })); } }, { key: "findPanoById", value: function (e) { return this.panoramas.find((function (t) { return t.config.id === e; })); } }, { key: "addPlaceMarkers", value: function (e) { var t = this; this.panoramas.forEach((function (e) { return e.makePlaceMarker(t.placeMarkersGroup); })), e.add(this.placeMarkersGroup); } }, {
    key: "findClosest", value: function (e, t) {
    var i = this; if (e)
        return this.panoramas.reduce((function (n, r) {
        var a = e.distanceTo(r.getGlobalPosition()); if (n.pano && n.dist < a)
            return n; if (!i.currentPano || !i.currentPano.isSibling(r)) {
                if (!i.camera.checkFrustumContainsPoint(r.position))
                    return n;
                var o = r.getGlobalPosition().sub(i.camera.threeCamera.position).normalize();
                if (i.raycaster.set(i.camera.threeCamera.position, o), !(i.raycaster.intersectObjects([t], !0).length < 2))
                    return n;
            } return { pano: r, dist: a };
        }), { pano: null, dist: 1e10 }).pano;
    }
    }, { key: "setupCurrentPano", value: function (e) { this.currentPano = e; } }, { key: "isCurrentPano", value: function (e) { return this.currentPano === e; } }, {
    key: "_processUpdateTasks", value: function () {
    var e = this; if (!this._inWork) {
        var t = this.tasksPull.shift();
        t && (this._inWork = !0, t().then((function () { return e._inWork = !1; })));
    }
    }
    }, { key: "_processPlaceMarkersVisibility", value: function (e) { var t = this; e && (this.closestPano = e, this.panoramas.forEach((function (e) { return e !== t.closestPano && !e.markerHasOpacity && e.hidePlaceMarker(); })), this.closestPano && this.closestPano.showPlaceMarker()); } }, { key: "_initPanoramas", value: function () { var e = this; this.panoramas = this.config.panoramas.map((function (t) { return new Vf(e._preparePanoConfig(t), e.config, e.loadingManager, e.events, e.renderer, e.camera, e.scene, e.isMobile); })); } }, { key: "_initMirrorPanoramas", value: function () { var e = this; this.mirrorPanoramas = this.config.mirrorsConfig.mirrors.map((function (t) { return new Vf(e._prepareMirrorPanoConfig(t), e.config, e.loadingManager, e.events, e.renderer, e.camera, e.scene, e.isMobile); })); } }, { key: "_preparePanoConfig", value: function (e) { return e.texturesPath = this.config.panoramasConfig.texturesPath, e; } }, { key: "_prepareMirrorPanoConfig", value: function (e) { return { id: e.panorama, texturesPath: this.config.mirrorsConfig.texturesPath, material: e.material, isMirror: !0, position: e.hasOwnProperty("position") ? e.position : this.findPanoById(e.panorama).config.position }; } }]), e;
    } (), Wf = function () {
    function e(t, i) { c()(this, e), this.config = t, this.scene = i, this.defaultLightTypes = ["ambient", "directional", "point", "hemi"], this.ambientLight = null, this.directionalLight = null, this.directionalLightHelper = null, this.pointLight = null, this.hemiLight = null; } return h()(e, [{ key: "init", value: function () { var e = this; this._initAmbientLight(), this._initDirectionalLight(), this._initDirectionalLightHelper(), this._initPointLight(), this._initHemiLight(), this.defaultLightTypes.forEach((function (t) { return e._placeLight(t); })); } }, { key: "destroy", value: function () { this.config = null, this.scene = null, this.defaultLightTypes = null, this.ambientLight = null, this.directionalLight = null, this.directionalLightHelper = null, this.pointLight = null, this.hemiLight = null; } }, { key: "_initAmbientLight", value: function () { this.ambientLight = new xu(this.config.ambientLight.color), this.ambientLight.visible = this.config.ambientLight.enabled; } }, { key: "_initDirectionalLight", value: function () { this.directionalLight = new bu(this.config.directionalLight.color, this.config.directionalLight.intensity), this.directionalLight.position.set(this.config.directionalLight.x, this.config.directionalLight.y, this.config.directionalLight.z), this.directionalLight.visible = this.config.directionalLight.enabled, this.directionalLight.castShadow = this.config.shadow.enabled, this.directionalLight.shadow.bias = this.config.shadow.bias, this.directionalLight.shadow.camera.near = this.config.shadow.near, this.directionalLight.shadow.camera.far = this.config.shadow.far, this.directionalLight.shadow.camera.left = this.config.shadow.left, this.directionalLight.shadow.camera.right = this.config.shadow.right, this.directionalLight.shadow.camera.top = this.config.shadow.top, this.directionalLight.shadow.camera.bottom = this.config.shadow.bottom, this.directionalLight.shadow.mapSize.width = this.config.shadow.mapWidth, this.directionalLight.shadow.mapSize.height = this.config.shadow.mapHeight; } }, { key: "_initDirectionalLightHelper", value: function () { this.directionalLightHelper = new sd(this.directionalLight.shadow.camera), this.directionalLightHelper.visible = this.config.shadow.helperEnabled; } }, { key: "_initPointLight", value: function () { this.pointLight = new vu(this.config.pointLight.color, this.config.pointLight.intensity, this.config.pointLight.distance), this.pointLight.position.set(this.config.pointLight.x, this.config.pointLight.y, this.config.pointLight.z), this.pointLight.visible = this.config.pointLight.enabled; } }, { key: "_initHemiLight", value: function () { this.hemiLight = new hu(this.config.hemiLight.color, this.config.hemiLight.groundColor, this.config.hemiLight.intensity), this.hemiLight.position.set(this.config.hemiLight.x, this.config.hemiLight.y, this.config.hemiLight.z), this.hemiLight.visible = this.config.hemiLight.enabled; } }, {
    key: "_placeLight", value: function (e) {
    switch (e) {
        case "ambient":
            this.scene.add(this.ambientLight);
            break;
        case "directional":
            this.scene.add(this.directionalLight), this.scene.add(this.directionalLightHelper);
            break;
        case "point":
            this.scene.add(this.pointLight);
            break;
        case "hemi": this.scene.add(this.hemiLight);
    }
    }
    }]), e;
    } (), Xf = { uniforms: { tDiffuse: { value: null }, resolution: { value: new Ut(1 / 1024, 1 / 512) } }, vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["precision highp float;", "", "uniform sampler2D tDiffuse;", "", "uniform vec2 resolution;", "", "varying vec2 vUv;", "", "// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)", "", "//----------------------------------------------------------------------------------", "// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag", "// SDK Version: v3.00", "// Email:       gameworks@nvidia.com", "// Site:        http://developer.nvidia.com/", "//", "// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.", "//", "// Redistribution and use in source and binary forms, with or without", "// modification, are permitted provided that the following conditions", "// are met:", "//  * Redistributions of source code must retain the above copyright", "//    notice, this list of conditions and the following disclaimer.", "//  * Redistributions in binary form must reproduce the above copyright", "//    notice, this list of conditions and the following disclaimer in the", "//    documentation and/or other materials provided with the distribution.", "//  * Neither the name of NVIDIA CORPORATION nor the names of its", "//    contributors may be used to endorse or promote products derived", "//    from this software without specific prior written permission.", "//", "// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY", "// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE", "// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR", "// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR", "// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,", "// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,", "// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR", "// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY", "// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT", "// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE", "// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.", "//", "//----------------------------------------------------------------------------------", "", "#define FXAA_PC 1", "#define FXAA_GLSL_100 1", "#define FXAA_QUALITY_PRESET 12", "", "#define FXAA_GREEN_AS_LUMA 1", "", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_PC_CONSOLE", "    //", "    // The console algorithm for PC is included", "    // for developers targeting really low spec machines.", "    // Likely better to just run FXAA_PC, and use a really low preset.", "    //", "    #define FXAA_PC_CONSOLE 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_GLSL_120", "    #define FXAA_GLSL_120 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_GLSL_130", "    #define FXAA_GLSL_130 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_HLSL_3", "    #define FXAA_HLSL_3 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_HLSL_4", "    #define FXAA_HLSL_4 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_HLSL_5", "    #define FXAA_HLSL_5 0", "#endif", "/*==========================================================================*/", "#ifndef FXAA_GREEN_AS_LUMA", "    //", "    // For those using non-linear color,", "    // and either not able to get luma in alpha, or not wanting to,", "    // this enables FXAA to run using green as a proxy for luma.", "    // So with this enabled, no need to pack luma in alpha.", "    //", "    // This will turn off AA on anything which lacks some amount of green.", "    // Pure red and blue or combination of only R and B, will get no AA.", "    //", "    // Might want to lower the settings for both,", "    //    fxaaConsoleEdgeThresholdMin", "    //    fxaaQualityEdgeThresholdMin", "    // In order to insure AA does not get turned off on colors", "    // which contain a minor amount of green.", "    //", "    // 1 = On.", "    // 0 = Off.", "    //", "    #define FXAA_GREEN_AS_LUMA 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_EARLY_EXIT", "    //", "    // Controls algorithm's early exit path.", "    // On PS3 turning this ON adds 2 cycles to the shader.", "    // On 360 turning this OFF adds 10ths of a millisecond to the shader.", "    // Turning this off on console will result in a more blurry image.", "    // So this defaults to on.", "    //", "    // 1 = On.", "    // 0 = Off.", "    //", "    #define FXAA_EARLY_EXIT 1", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_DISCARD", "    //", "    // Only valid for PC OpenGL currently.", "    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.", "    //", "    // 1 = Use discard on pixels which don't need AA.", "    //     For APIs which enable concurrent TEX+ROP from same surface.", "    // 0 = Return unchanged color on pixels which don't need AA.", "    //", "    #define FXAA_DISCARD 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_FAST_PIXEL_OFFSET", "    //", "    // Used for GLSL 120 only.", "    //", "    // 1 = GL API supports fast pixel offsets", "    // 0 = do not use fast pixel offsets", "    //", "    #ifdef GL_EXT_gpu_shader4", "        #define FXAA_FAST_PIXEL_OFFSET 1", "    #endif", "    #ifdef GL_NV_gpu_shader5", "        #define FXAA_FAST_PIXEL_OFFSET 1", "    #endif", "    #ifdef GL_ARB_gpu_shader5", "        #define FXAA_FAST_PIXEL_OFFSET 1", "    #endif", "    #ifndef FXAA_FAST_PIXEL_OFFSET", "        #define FXAA_FAST_PIXEL_OFFSET 0", "    #endif", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_GATHER4_ALPHA", "    //", "    // 1 = API supports gather4 on alpha channel.", "    // 0 = API does not support gather4 on alpha channel.", "    //", "    #if (FXAA_HLSL_5 == 1)", "        #define FXAA_GATHER4_ALPHA 1", "    #endif", "    #ifdef GL_ARB_gpu_shader5", "        #define FXAA_GATHER4_ALPHA 1", "    #endif", "    #ifdef GL_NV_gpu_shader5", "        #define FXAA_GATHER4_ALPHA 1", "    #endif", "    #ifndef FXAA_GATHER4_ALPHA", "        #define FXAA_GATHER4_ALPHA 0", "    #endif", "#endif", "", "", "/*============================================================================", "                        FXAA QUALITY - TUNING KNOBS", "------------------------------------------------------------------------------", "NOTE the other tuning knobs are now in the shader function inputs!", "============================================================================*/", "#ifndef FXAA_QUALITY_PRESET", "    //", "    // Choose the quality preset.", "    // This needs to be compiled into the shader as it effects code.", "    // Best option to include multiple presets is to", "    // in each shader define the preset, then include this file.", "    //", "    // OPTIONS", "    // -----------------------------------------------------------------------", "    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)", "    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)", "    // 39       - no dither, very expensive", "    //", "    // NOTES", "    // -----------------------------------------------------------------------", "    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)", "    // 13 = about same speed as FXAA 3.9 and better than 12", "    // 23 = closest to FXAA 3.9 visually and performance wise", "    //  _ = the lowest digit is directly related to performance", "    // _  = the highest digit is directly related to style", "    //", "    #define FXAA_QUALITY_PRESET 12", "#endif", "", "", "/*============================================================================", "", "                           FXAA QUALITY - PRESETS", "", "============================================================================*/", "", "/*============================================================================", "                     FXAA QUALITY - MEDIUM DITHER PRESETS", "============================================================================*/", "#if (FXAA_QUALITY_PRESET == 10)", "    #define FXAA_QUALITY_PS 3", "    #define FXAA_QUALITY_P0 1.5", "    #define FXAA_QUALITY_P1 3.0", "    #define FXAA_QUALITY_P2 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 11)", "    #define FXAA_QUALITY_PS 4", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 3.0", "    #define FXAA_QUALITY_P3 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 12)", "    #define FXAA_QUALITY_PS 5", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 4.0", "    #define FXAA_QUALITY_P4 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 13)", "    #define FXAA_QUALITY_PS 6", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 4.0", "    #define FXAA_QUALITY_P5 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 14)", "    #define FXAA_QUALITY_PS 7", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 4.0", "    #define FXAA_QUALITY_P6 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 15)", "    #define FXAA_QUALITY_PS 8", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 4.0", "    #define FXAA_QUALITY_P7 12.0", "#endif", "", "/*============================================================================", "                     FXAA QUALITY - LOW DITHER PRESETS", "============================================================================*/", "#if (FXAA_QUALITY_PRESET == 20)", "    #define FXAA_QUALITY_PS 3", "    #define FXAA_QUALITY_P0 1.5", "    #define FXAA_QUALITY_P1 2.0", "    #define FXAA_QUALITY_P2 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 21)", "    #define FXAA_QUALITY_PS 4", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 22)", "    #define FXAA_QUALITY_PS 5", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 23)", "    #define FXAA_QUALITY_PS 6", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 24)", "    #define FXAA_QUALITY_PS 7", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 3.0", "    #define FXAA_QUALITY_P6 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 25)", "    #define FXAA_QUALITY_PS 8", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 4.0", "    #define FXAA_QUALITY_P7 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 26)", "    #define FXAA_QUALITY_PS 9", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 4.0", "    #define FXAA_QUALITY_P8 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 27)", "    #define FXAA_QUALITY_PS 10", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 4.0", "    #define FXAA_QUALITY_P9 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 28)", "    #define FXAA_QUALITY_PS 11", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 2.0", "    #define FXAA_QUALITY_P9 4.0", "    #define FXAA_QUALITY_P10 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 29)", "    #define FXAA_QUALITY_PS 12", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 2.0", "    #define FXAA_QUALITY_P9 2.0", "    #define FXAA_QUALITY_P10 4.0", "    #define FXAA_QUALITY_P11 8.0", "#endif", "", "/*============================================================================", "                     FXAA QUALITY - EXTREME QUALITY", "============================================================================*/", "#if (FXAA_QUALITY_PRESET == 39)", "    #define FXAA_QUALITY_PS 12", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.0", "    #define FXAA_QUALITY_P2 1.0", "    #define FXAA_QUALITY_P3 1.0", "    #define FXAA_QUALITY_P4 1.0", "    #define FXAA_QUALITY_P5 1.5", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 2.0", "    #define FXAA_QUALITY_P9 2.0", "    #define FXAA_QUALITY_P10 4.0", "    #define FXAA_QUALITY_P11 8.0", "#endif", "", "", "", "/*============================================================================", "", "                                API PORTING", "", "============================================================================*/", "#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)", "    #define FxaaBool bool", "    #define FxaaDiscard discard", "    #define FxaaFloat float", "    #define FxaaFloat2 vec2", "    #define FxaaFloat3 vec3", "    #define FxaaFloat4 vec4", "    #define FxaaHalf float", "    #define FxaaHalf2 vec2", "    #define FxaaHalf3 vec3", "    #define FxaaHalf4 vec4", "    #define FxaaInt2 ivec2", "    #define FxaaSat(x) clamp(x, 0.0, 1.0)", "    #define FxaaTex sampler2D", "#else", "    #define FxaaBool bool", "    #define FxaaDiscard clip(-1)", "    #define FxaaFloat float", "    #define FxaaFloat2 float2", "    #define FxaaFloat3 float3", "    #define FxaaFloat4 float4", "    #define FxaaHalf half", "    #define FxaaHalf2 half2", "    #define FxaaHalf3 half3", "    #define FxaaHalf4 half4", "    #define FxaaSat(x) saturate(x)", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_GLSL_100 == 1)", "  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)", "  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_GLSL_120 == 1)", "    // Requires,", "    //  #version 120", "    // And at least,", "    //  #extension GL_EXT_gpu_shader4 : enable", "    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)", "    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)", "    #if (FXAA_FAST_PIXEL_OFFSET == 1)", "        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)", "    #else", "        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)", "    #endif", "    #if (FXAA_GATHER4_ALPHA == 1)", "        // use #extension GL_ARB_gpu_shader5 : enable", "        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)", "        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)", "        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)", "        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)", "    #endif", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_GLSL_130 == 1)", '    // Requires "#version 130" or better', "    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)", "    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)", "    #if (FXAA_GATHER4_ALPHA == 1)", "        // use #extension GL_ARB_gpu_shader5 : enable", "        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)", "        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)", "        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)", "        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)", "    #endif", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_HLSL_3 == 1)", "    #define FxaaInt2 float2", "    #define FxaaTex sampler2D", "    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))", "    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_HLSL_4 == 1)", "    #define FxaaInt2 int2", "    struct FxaaTex { SamplerState smpl; Texture2D tex; };", "    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)", "    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_HLSL_5 == 1)", "    #define FxaaInt2 int2", "    struct FxaaTex { SamplerState smpl; Texture2D tex; };", "    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)", "    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)", "    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)", "    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)", "    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)", "    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)", "#endif", "", "", "/*============================================================================", "                   GREEN AS LUMA OPTION SUPPORT FUNCTION", "============================================================================*/", "#if (FXAA_GREEN_AS_LUMA == 0)", "    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }", "#else", "    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }", "#endif", "", "", "", "", "/*============================================================================", "", "                             FXAA3 QUALITY - PC", "", "============================================================================*/", "#if (FXAA_PC == 1)", "/*--------------------------------------------------------------------------*/", "FxaaFloat4 FxaaPixelShader(", "    //", "    // Use noperspective interpolation here (turn off perspective interpolation).", "    // {xy} = center of pixel", "    FxaaFloat2 pos,", "    //", "    // Used only for FXAA Console, and not used on the 360 version.", "    // Use noperspective interpolation here (turn off perspective interpolation).", "    // {xy_} = upper left of pixel", "    // {_zw} = lower right of pixel", "    FxaaFloat4 fxaaConsolePosPos,", "    //", "    // Input color texture.", "    // {rgb_} = color in linear or perceptual color space", "    // if (FXAA_GREEN_AS_LUMA == 0)", "    //     {__a} = luma in perceptual color space (not linear)", "    FxaaTex tex,", "    //", "    // Only used on the optimized 360 version of FXAA Console.", '    // For everything but 360, just use the same input here as for "tex".', "    // For 360, same texture, just alias with a 2nd sampler.", "    // This sampler needs to have an exponent bias of -1.", "    FxaaTex fxaaConsole360TexExpBiasNegOne,", "    //", "    // Only used on the optimized 360 version of FXAA Console.", '    // For everything but 360, just use the same input here as for "tex".', "    // For 360, same texture, just alias with a 3nd sampler.", "    // This sampler needs to have an exponent bias of -2.", "    FxaaTex fxaaConsole360TexExpBiasNegTwo,", "    //", "    // Only used on FXAA Quality.", "    // This must be from a constant/uniform.", "    // {x_} = 1.0/screenWidthInPixels", "    // {_y} = 1.0/screenHeightInPixels", "    FxaaFloat2 fxaaQualityRcpFrame,", "    //", "    // Only used on FXAA Console.", "    // This must be from a constant/uniform.", "    // This effects sub-pixel AA quality and inversely sharpness.", "    //   Where N ranges between,", "    //     N = 0.50 (default)", "    //     N = 0.33 (sharper)", "    // {x__} = -N/screenWidthInPixels", "    // {_y_} = -N/screenHeightInPixels", "    // {_z_} =  N/screenWidthInPixels", "    // {__w} =  N/screenHeightInPixels", "    FxaaFloat4 fxaaConsoleRcpFrameOpt,", "    //", "    // Only used on FXAA Console.", "    // Not used on 360, but used on PS3 and PC.", "    // This must be from a constant/uniform.", "    // {x__} = -2.0/screenWidthInPixels", "    // {_y_} = -2.0/screenHeightInPixels", "    // {_z_} =  2.0/screenWidthInPixels", "    // {__w} =  2.0/screenHeightInPixels", "    FxaaFloat4 fxaaConsoleRcpFrameOpt2,", "    //", "    // Only used on FXAA Console.", "    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.", "    // This must be from a constant/uniform.", "    // {x__} =  8.0/screenWidthInPixels", "    // {_y_} =  8.0/screenHeightInPixels", "    // {_z_} = -4.0/screenWidthInPixels", "    // {__w} = -4.0/screenHeightInPixels", "    FxaaFloat4 fxaaConsole360RcpFrameOpt2,", "    //", "    // Only used on FXAA Quality.", "    // This used to be the FXAA_QUALITY_SUBPIX define.", "    // It is here now to allow easier tuning.", "    // Choose the amount of sub-pixel aliasing removal.", "    // This can effect sharpness.", "    //   1.00 - upper limit (softer)", "    //   0.75 - default amount of filtering", "    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)", "    //   0.25 - almost off", "    //   0.00 - completely off", "    FxaaFloat fxaaQualitySubpix,", "    //", "    // Only used on FXAA Quality.", "    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.", "    // It is here now to allow easier tuning.", "    // The minimum amount of local contrast required to apply algorithm.", "    //   0.333 - too little (faster)", "    //   0.250 - low quality", "    //   0.166 - default", "    //   0.125 - high quality", "    //   0.063 - overkill (slower)", "    FxaaFloat fxaaQualityEdgeThreshold,", "    //", "    // Only used on FXAA Quality.", "    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.", "    // It is here now to allow easier tuning.", "    // Trims the algorithm from processing darks.", "    //   0.0833 - upper limit (default, the start of visible unfiltered edges)", "    //   0.0625 - high quality (faster)", "    //   0.0312 - visible limit (slower)", "    // Special notes when using FXAA_GREEN_AS_LUMA,", "    //   Likely want to set this to zero.", "    //   As colors that are mostly not-green", "    //   will appear very dark in the green channel!", "    //   Tune by looking at mostly non-green content,", "    //   then start at zero and increase until aliasing is a problem.", "    FxaaFloat fxaaQualityEdgeThresholdMin,", "    //", "    // Only used on FXAA Console.", "    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.", "    // It is here now to allow easier tuning.", "    // This does not effect PS3, as this needs to be compiled in.", "    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.", "    //   Due to the PS3 being ALU bound,", "    //   there are only three safe values here: 2 and 4 and 8.", "    //   These options use the shaders ability to a free *|/ by 2|4|8.", "    // For all other platforms can be a non-power of two.", "    //   8.0 is sharper (default!!!)", "    //   4.0 is softer", "    //   2.0 is really soft (good only for vector graphics inputs)", "    FxaaFloat fxaaConsoleEdgeSharpness,", "    //", "    // Only used on FXAA Console.", "    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.", "    // It is here now to allow easier tuning.", "    // This does not effect PS3, as this needs to be compiled in.", "    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.", "    //   Due to the PS3 being ALU bound,", "    //   there are only two safe values here: 1/4 and 1/8.", "    //   These options use the shaders ability to a free *|/ by 2|4|8.", "    // The console setting has a different mapping than the quality setting.", "    // Other platforms can use other values.", "    //   0.125 leaves less aliasing, but is softer (default!!!)", "    //   0.25 leaves more aliasing, and is sharper", "    FxaaFloat fxaaConsoleEdgeThreshold,", "    //", "    // Only used on FXAA Console.", "    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.", "    // It is here now to allow easier tuning.", "    // Trims the algorithm from processing darks.", "    // The console setting has a different mapping than the quality setting.", "    // This only applies when FXAA_EARLY_EXIT is 1.", "    // This does not apply to PS3,", "    // PS3 was simplified to avoid more shader instructions.", "    //   0.06 - faster but more aliasing in darks", "    //   0.05 - default", "    //   0.04 - slower and less aliasing in darks", "    // Special notes when using FXAA_GREEN_AS_LUMA,", "    //   Likely want to set this to zero.", "    //   As colors that are mostly not-green", "    //   will appear very dark in the green channel!", "    //   Tune by looking at mostly non-green content,", "    //   then start at zero and increase until aliasing is a problem.", "    FxaaFloat fxaaConsoleEdgeThresholdMin,", "    //", "    // Extra constants for 360 FXAA Console only.", "    // Use zeros or anything else for other platforms.", "    // These must be in physical constant registers and NOT immediates.", "    // Immediates will result in compiler un-optimizing.", "    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)", "    FxaaFloat4 fxaaConsole360ConstDir", ") {", "/*--------------------------------------------------------------------------*/", "    FxaaFloat2 posM;", "    posM.x = pos.x;", "    posM.y = pos.y;", "    #if (FXAA_GATHER4_ALPHA == 1)", "        #if (FXAA_DISCARD == 0)", "            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);", "            #if (FXAA_GREEN_AS_LUMA == 0)", "                #define lumaM rgbyM.w", "            #else", "                #define lumaM rgbyM.y", "            #endif", "        #endif", "        #if (FXAA_GREEN_AS_LUMA == 0)", "            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);", "            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));", "        #else", "            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);", "            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));", "        #endif", "        #if (FXAA_DISCARD == 1)", "            #define lumaM luma4A.w", "        #endif", "        #define lumaE luma4A.z", "        #define lumaS luma4A.x", "        #define lumaSE luma4A.y", "        #define lumaNW luma4B.w", "        #define lumaN luma4B.z", "        #define lumaW luma4B.x", "    #else", "        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);", "        #if (FXAA_GREEN_AS_LUMA == 0)", "            #define lumaM rgbyM.w", "        #else", "            #define lumaM rgbyM.y", "        #endif", "        #if (FXAA_GLSL_100 == 1)", "          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));", "        #else", "          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));", "        #endif", "    #endif", "/*--------------------------------------------------------------------------*/", "    FxaaFloat maxSM = max(lumaS, lumaM);", "    FxaaFloat minSM = min(lumaS, lumaM);", "    FxaaFloat maxESM = max(lumaE, maxSM);", "    FxaaFloat minESM = min(lumaE, minSM);", "    FxaaFloat maxWN = max(lumaN, lumaW);", "    FxaaFloat minWN = min(lumaN, lumaW);", "    FxaaFloat rangeMax = max(maxWN, maxESM);", "    FxaaFloat rangeMin = min(minWN, minESM);", "    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;", "    FxaaFloat range = rangeMax - rangeMin;", "    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);", "    FxaaBool earlyExit = range < rangeMaxClamped;", "/*--------------------------------------------------------------------------*/", "    if(earlyExit)", "        #if (FXAA_DISCARD == 1)", "            FxaaDiscard;", "        #else", "            return rgbyM;", "        #endif", "/*--------------------------------------------------------------------------*/", "    #if (FXAA_GATHER4_ALPHA == 0)", "        #if (FXAA_GLSL_100 == 1)", "          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));", "        #else", "          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));", "        #endif", "    #else", "        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));", "        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));", "    #endif", "/*--------------------------------------------------------------------------*/", "    FxaaFloat lumaNS = lumaN + lumaS;", "    FxaaFloat lumaWE = lumaW + lumaE;", "    FxaaFloat subpixRcpRange = 1.0/range;", "    FxaaFloat subpixNSWE = lumaNS + lumaWE;", "    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;", "    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat lumaNESE = lumaNE + lumaSE;", "    FxaaFloat lumaNWNE = lumaNW + lumaNE;", "    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;", "    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat lumaNWSW = lumaNW + lumaSW;", "    FxaaFloat lumaSWSE = lumaSW + lumaSE;", "    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);", "    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);", "    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;", "    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;", "    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;", "    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;", "    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;", "    FxaaBool horzSpan = edgeHorz >= edgeVert;", "    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;", "/*--------------------------------------------------------------------------*/", "    if(!horzSpan) lumaN = lumaW;", "    if(!horzSpan) lumaS = lumaE;", "    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;", "    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat gradientN = lumaN - lumaM;", "    FxaaFloat gradientS = lumaS - lumaM;", "    FxaaFloat lumaNN = lumaN + lumaM;", "    FxaaFloat lumaSS = lumaS + lumaM;", "    FxaaBool pairN = abs(gradientN) >= abs(gradientS);", "    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));", "    if(pairN) lengthSign = -lengthSign;", "    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);", "/*--------------------------------------------------------------------------*/", "    FxaaFloat2 posB;", "    posB.x = posM.x;", "    posB.y = posM.y;", "    FxaaFloat2 offNP;", "    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;", "    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;", "    if(!horzSpan) posB.x += lengthSign * 0.5;", "    if( horzSpan) posB.y += lengthSign * 0.5;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat2 posN;", "    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;", "    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;", "    FxaaFloat2 posP;", "    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;", "    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;", "    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;", "    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));", "    FxaaFloat subpixE = subpixC * subpixC;", "    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));", "/*--------------------------------------------------------------------------*/", "    if(!pairN) lumaNN = lumaSS;", "    FxaaFloat gradientScaled = gradient * 1.0/4.0;", "    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;", "    FxaaFloat subpixF = subpixD * subpixE;", "    FxaaBool lumaMLTZero = lumaMM < 0.0;", "/*--------------------------------------------------------------------------*/", "    lumaEndN -= lumaNN * 0.5;", "    lumaEndP -= lumaNN * 0.5;", "    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;", "    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;", "    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;", "    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;", "    FxaaBool doneNP = (!doneN) || (!doneP);", "    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;", "    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;", "/*--------------------------------------------------------------------------*/", "    if(doneNP) {", "        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "        doneN = abs(lumaEndN) >= gradientScaled;", "        doneP = abs(lumaEndP) >= gradientScaled;", "        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;", "        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;", "        doneNP = (!doneN) || (!doneP);", "        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;", "        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;", "/*--------------------------------------------------------------------------*/", "        #if (FXAA_QUALITY_PS > 3)", "        if(doneNP) {", "            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "            doneN = abs(lumaEndN) >= gradientScaled;", "            doneP = abs(lumaEndP) >= gradientScaled;", "            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;", "            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;", "            doneNP = (!doneN) || (!doneP);", "            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;", "            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;", "/*--------------------------------------------------------------------------*/", "            #if (FXAA_QUALITY_PS > 4)", "            if(doneNP) {", "                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                doneN = abs(lumaEndN) >= gradientScaled;", "                doneP = abs(lumaEndP) >= gradientScaled;", "                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;", "                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;", "                doneNP = (!doneN) || (!doneP);", "                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;", "                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;", "/*--------------------------------------------------------------------------*/", "                #if (FXAA_QUALITY_PS > 5)", "                if(doneNP) {", "                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                    doneN = abs(lumaEndN) >= gradientScaled;", "                    doneP = abs(lumaEndP) >= gradientScaled;", "                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;", "                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;", "                    doneNP = (!doneN) || (!doneP);", "                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;", "                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;", "/*--------------------------------------------------------------------------*/", "                    #if (FXAA_QUALITY_PS > 6)", "                    if(doneNP) {", "                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                        doneN = abs(lumaEndN) >= gradientScaled;", "                        doneP = abs(lumaEndP) >= gradientScaled;", "                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;", "                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;", "                        doneNP = (!doneN) || (!doneP);", "                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;", "                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;", "/*--------------------------------------------------------------------------*/", "                        #if (FXAA_QUALITY_PS > 7)", "                        if(doneNP) {", "                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                            doneN = abs(lumaEndN) >= gradientScaled;", "                            doneP = abs(lumaEndP) >= gradientScaled;", "                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;", "                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;", "                            doneNP = (!doneN) || (!doneP);", "                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;", "                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;", "/*--------------------------------------------------------------------------*/", "    #if (FXAA_QUALITY_PS > 8)", "    if(doneNP) {", "        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "        doneN = abs(lumaEndN) >= gradientScaled;", "        doneP = abs(lumaEndP) >= gradientScaled;", "        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;", "        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;", "        doneNP = (!doneN) || (!doneP);", "        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;", "        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;", "/*--------------------------------------------------------------------------*/", "        #if (FXAA_QUALITY_PS > 9)", "        if(doneNP) {", "            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "            doneN = abs(lumaEndN) >= gradientScaled;", "            doneP = abs(lumaEndP) >= gradientScaled;", "            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;", "            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;", "            doneNP = (!doneN) || (!doneP);", "            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;", "            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;", "/*--------------------------------------------------------------------------*/", "            #if (FXAA_QUALITY_PS > 10)", "            if(doneNP) {", "                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                doneN = abs(lumaEndN) >= gradientScaled;", "                doneP = abs(lumaEndP) >= gradientScaled;", "                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;", "                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;", "                doneNP = (!doneN) || (!doneP);", "                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;", "                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;", "/*--------------------------------------------------------------------------*/", "                #if (FXAA_QUALITY_PS > 11)", "                if(doneNP) {", "                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                    doneN = abs(lumaEndN) >= gradientScaled;", "                    doneP = abs(lumaEndP) >= gradientScaled;", "                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;", "                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;", "                    doneNP = (!doneN) || (!doneP);", "                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;", "                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;", "/*--------------------------------------------------------------------------*/", "                    #if (FXAA_QUALITY_PS > 12)", "                    if(doneNP) {", "                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                        doneN = abs(lumaEndN) >= gradientScaled;", "                        doneP = abs(lumaEndP) >= gradientScaled;", "                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;", "                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;", "                        doneNP = (!doneN) || (!doneP);", "                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;", "                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;", "/*--------------------------------------------------------------------------*/", "                    }", "                    #endif", "/*--------------------------------------------------------------------------*/", "                }", "                #endif", "/*--------------------------------------------------------------------------*/", "            }", "            #endif", "/*--------------------------------------------------------------------------*/", "        }", "        #endif", "/*--------------------------------------------------------------------------*/", "    }", "    #endif", "/*--------------------------------------------------------------------------*/", "                        }", "                        #endif", "/*--------------------------------------------------------------------------*/", "                    }", "                    #endif", "/*--------------------------------------------------------------------------*/", "                }", "                #endif", "/*--------------------------------------------------------------------------*/", "            }", "            #endif", "/*--------------------------------------------------------------------------*/", "        }", "        #endif", "/*--------------------------------------------------------------------------*/", "    }", "/*--------------------------------------------------------------------------*/", "    FxaaFloat dstN = posM.x - posN.x;", "    FxaaFloat dstP = posP.x - posM.x;", "    if(!horzSpan) dstN = posM.y - posN.y;", "    if(!horzSpan) dstP = posP.y - posM.y;", "/*--------------------------------------------------------------------------*/", "    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;", "    FxaaFloat spanLength = (dstP + dstN);", "    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;", "    FxaaFloat spanLengthRcp = 1.0/spanLength;", "/*--------------------------------------------------------------------------*/", "    FxaaBool directionN = dstN < dstP;", "    FxaaFloat dst = min(dstN, dstP);", "    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;", "    FxaaFloat subpixG = subpixF * subpixF;", "    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;", "    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;", "    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);", "    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;", "    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;", "    #if (FXAA_DISCARD == 1)", "        return FxaaTexTop(tex, posM);", "    #else", "        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);", "    #endif", "}", "/*==========================================================================*/", "#endif", "", "void main() {", "  gl_FragColor = FxaaPixelShader(", "    vUv,", "    vec4(0.0),", "    tDiffuse,", "    tDiffuse,", "    tDiffuse,", "    resolution,", "    vec4(0.0),", "    vec4(0.0),", "    vec4(0.0),", "    0.75,", "    0.166,", "    0.0833,", "    0.0,", "    0.0,", "    0.0,", "    vec4(0.0)", "  );", "", "  // TODO avoid querying texture twice for same texel", "  gl_FragColor.a = texture2D(tDiffuse, vUv).a;", "}"].join("\n") }, Yf = function (e, t, i, n, r) { Af.call(this), this.scene = e, this.camera = t, this.overrideMaterial = i, this.clearColor = n, this.clearAlpha = void 0 !== r ? r : 0, this.clear = !0, this.clearDepth = !1, this.needsSwap = !1; };
    Yf.prototype = Object.assign(Object.create(Af.prototype), { constructor: Yf, render: function (e, t, i) { var n, r, a = e.autoClear; e.autoClear = !1, this.scene.overrideMaterial = this.overrideMaterial, this.clearColor && (n = e.getClearColor().getHex(), r = e.getClearAlpha(), e.setClearColor(this.clearColor, this.clearAlpha)), this.clearDepth && e.clearDepth(), e.setRenderTarget(this.renderToScreen ? null : i), this.clear && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), e.render(this.scene, this.camera), this.clearColor && e.setClearColor(n, r), this.scene.overrideMaterial = null, e.autoClear = a; } });
    for (var Qf = function () {
    function e(t, i, n, r) { c()(this, e), this.config = t, this.camera = i, this.scene = n, this.radar = null, this.renderer = r, this.enable = !1, this.defaultAA = "FXAA", this.aaMethod = this.defaultAA, this.composer = null, this.copyPass = null, this.radarTexture = null, this.radarMaterial = null, this.radarGeometry = null; } return h()(e, [{ key: "init", value: function () { this.radar = this._createRadar(), this.enablePostprocessing(); } }, { key: "destroy", value: function () { this.composer && this.composer.reset(), this.radarTexture.dispose(), this.radarMaterial.dispose(), this.radarGeometry.dispose(), this.config = null, this.camera = null, this.scene = null, this.radar = null, this.renderer = null, this.enable = null, this.defaultAA = null, this.aaMethod = null, this.composer = null, this.copyPass = null, this.radarTexture = null, this.radarMaterial = null, this.radarGeometry = null; } }, {
    key: "enablePostprocessing", value: function () {
    var e = { format: ze, stencilBuffer: !1 }, t = new Yf(this.scene, this.camera.mapCamera), i = this._getAASamples(); if (this.renderTargetSimple = new Jt(this.getWidth(), this.getHeight(), e), this.renderer.normalizeMSAASamples(4) && (this.renderTargetMulti = new ei(this.getWidth(), this.getHeight(), e)), i ? (this.renderTarget = this.renderTargetMulti, this.renderTarget.samples = i) : this.renderTarget = this.renderTargetSimple, this.composer = new Cf(this.renderer.threeRenderer, this.renderTarget), this.composer.addPass(t), this.fxaaPass = new Sf(Xf), this.fxaaPass.material.uniforms.resolution.value.x = 1 / this.getWidth(), this.fxaaPass.material.uniforms.resolution.value.y = 1 / this.getHeight(), i || "NONE" === this.aaMethod || this.composer.addPass(this.fxaaPass), 1 === this.composer.passes.length) {
        var n = new Sf(Mf);
        this.composer.passes.push(n), this.copyPass = n;
    }
    }
    }, { key: "updateSize", value: function () { this.composer.setSize(this.renderer.getWidth(), this.renderer.getHeight()), this.fxaaPass && (this.fxaaPass.material.uniforms.resolution.value.x = 1 / this.getWidth(), this.fxaaPass.material.uniforms.resolution.value.y = 1 / this.getHeight()); } }, { key: "scaleFactor", value: function () { return bd.getPixelRatio() * Math.min(1, this.config.map.maxFraction / Math.max(this.config.map.width / this.renderer.threeRenderer.domElement.clientWidth, this.config.map.height / this.renderer.threeRenderer.domElement.clientHeight)); } }, { key: "getWidth", value: function () { return this.config.map.width * this.scaleFactor(); } }, { key: "getHeight", value: function () { return this.config.map.height * this.scaleFactor(); } }, { key: "update", value: function (e) { this.enable && (this._updateCamera(), this._render(e)); } }, {
    key: "_getAASamples", value: function () {
    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.aaMethod, t = 0; switch (e) {
        case "AUTO":
        case "MSAA4":
            t = this.renderer.normalizeMSAASamples(4);
            break;
        case "MSAA8":
            t = this.renderer.normalizeMSAASamples(8);
            break;
        case "MSAA16": t = this.renderer.normalizeMSAASamples(16);
    } return t;
    }
    }, { key: "_render", value: function (e) { var t = this.renderer.threeRenderer, i = bd.getPixelRatio() > 1 ? Math.min(this.renderer.getHeight() > this.renderer.getWidth() ? this.renderer.getHeight() / this.renderer.getWidth() : this.renderer.getWidth() / this.renderer.getHeight(), bd.getPixelRatio()) : 1; t.setViewport(bd.getPixelRatio() * this.config.map.x, bd.getPixelRatio() * this.config.map.y * i, this.getWidth(), this.getHeight()), t.clearDepth(), this.composer ? (this.composer.renderToScreen = !0, this.composer.render(e)) : t.render(this.scene, this.camera.mapCamera); } }, { key: "_createRadar", value: function () { var e = new Fo; this.radarTexture = qt.loadTexture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMvV5TEsXTQBAFZL0nfAAAgAElEQVR42u1dCawlV3Gte/v9P/t4xmPPGA/DsIzBMdiAl6CwKCjGLI4JgUSKbHASBQEhGw5xlERRhFgklhAiE4UEBEiAwhISEYMN2MEsIQKzGRtsZEMMNma8L7Mv///uzq3f3Z77qqtu9//zlzfzzpHu/Hnv9fpe16nl1q1yO24qCQCA8YTHVwAAIAAAAEAAAACAAAAAGAsM8BUcd3BLeC5EkEEAwAgJ+FJbdAXIAQQALK2w+zkSgztKYUztnyU+K0AKIABg/sLu5yjkfY+tCXQXScxnf4scCpACCACohCYWHN9DqJ0heH6e59YEt+y5f3z+Yg6xBw9CAAFAyx8RBGdo2b4mt0sQg/Z/19N6KDqOFe/vjfMXyvvFHAgBZAACOC6FnnoIok9o3bnGBJxhdaTM+EwIfoowCmV/N0c3RrsfkAEI4LgVei8eat8hwC4hMF0+uVeEs9nGKYIuP0v5/fJYXeTgO6wEkAEI4LgVekuoXQ+f3s3BJ4/fyxThlAKb2p//5vPY33J1pHshv6scZAACOBYF3yc0bJdZre3rElqbDG3aR5hLw6VIbZslrAWpzV1HvKDs8Pv9PMkARAACWFZtb/ncvidhaJrVKwLjEjEEzY/va0n0mXVICbijdpDSK0Ks7e87yIASroKHVQACGAVtTx0ugO8gkVKQRkwG3niwfcc1atq6NEz5VBwhPmYxR4LIlHMX8yCDTNk/dR0gAhDAogm+N4SDEmTgEtraUXo60HWQRh9i0Qiry4/vsz8ZQhofs1DiEpIQ+pCBS5BBfE0eRAACWAhIE9wZpNDHAnCKDyzJoyspyIruS4HMjPf77u879i96btcnx0ASQiGO20UGPhEvABGAAI5K47uEdvY9fHrtGL7H+SwiskhJC655Q6C1Kb54/7LH/lbsIfb5Uy5OihDi+yqi4xfK/oXyvRYgAhDAQpn6roeQ+4S5blkPfeIBqf2zhLbtOwU5l/e08xfG+QfUnvsvOvYnEScoKZ0o5RLxgozs9GQQAQjgqATfk57QkvrMiuRrc+kltacBvfDXNU1sCW+p+Pup98o57m8F4aTV5ElPCNLuN+U2yenGwhBup7zWSHnsiWAAwTcF30rUcQmN7xIC7RXh8QoZ+ERwjhLn0MjCskQ0d0LuL4XWG8frSww+4WZYLooko5LS6dQynlIaroEz7hEEMObCb73nesYHNGHpO2PgjGNqabyWWe5FEC3reLi1YFupaN08IdiFcf/WYiTp38v7z8leu+CU4KF0M4oO4ijgFow3AaQEv8unTwXhUlaCNzS3Fg+wCKMRzCx6qLXfcEDD8+8p10Ez8aXZ3BwrJz2fQAbpvLg+qWm130PeT6Fo8VQQsM/UpxYjsAitBAEc3wTgegi+7zDBfUcAT2rRlI+sxQM0wsgSPrYUZp/Q+FJwnaH5rYSb+Fwzih9fkL1YqFRMdcsaKiidFk1GkFGSihUjiK0bN4ayMJYEIIWyS/C9IciadqZIS5PhX1PCD7bOGc/vp9wRmkPgUFoUVvyAjGuJ95cuQkHD0fy83j+2BHLluygN60wLAmpEIF0BSQSa6xITQw4XYDwIoIh85rlo/FhQNG3qEtaGJApvBAnjJJ6BosGtIFnz/iB66DNhORQiTiBN6EKY8NI/LsjOGZDHK5TvsvneC9KnMklxJyxfXmrv1LSp3N8Kcs7AAhgPFPW9O+o3A2AF6EjxtR2lE4FIIZ7YxPcisFca5BELHgkfl8heVFQq904iaCith4FxHRS5AaWIdWhCWQiSKRS3wZp2LAxSlkFK32ERFMp2/N40jeFMwDjPAvBDuzIRF0gFCy1Bt0zXUvm8jARYPtClYXkMEkHNgdDeUtM60vP4nRIAJMVvL0QAMhaWCfG6iFwDL8hJm58vRNyhue9csZQKSqdSl0o8Q7NcJJHliAGMnxUwUz+8Wqprl2Wg7ZMiEKm5SRCAFkgcJIJ4GXXPiw8UoUyl5JbUXc23JH3uP098h3FMwCKDQtHaXhzfSssuBZHkhrYvDVdjalyFYNwTgaZrAkj5+ZrwdmUDavsPDBJwijsh5/OJ2klDXtnWCvjFx+67BLhMkE9pxBTk/qUIFsqFPjMicOqE1ZApQpxal5CK05AQfBcJfwECGE+U9QOwRjGTXUJ4vBGk0jLqBsp37YULoFkbE0JbZSJ+QaTnGXQt4OkqI27lA2iWgBS0UpBCEd17PCOgFSrJxfkL4Y4USqAypdnlTAAZgcTD4ywAWAtQWQF5FBizFt3I4BMp70stLl+XhsDLz0oh9FbgT3MbtBiDJtykCJwWFCyU98iIFxSKZaIJqFNiCfH3NRO5QLmwOnwHaaWSgmQs4SCN+YIgEECFA2FsUATf8vvJ8MOdEdiTEfJ4f6fsT4ZJb61u88oDbvn5Fnzi/VKxAkrqLjkW5wjE5JAbVklsMWjaP3YbYosrE8f1hq8fX08+zr4/CKBtfrI2WE16oQ+fcBHi/w+onaeeKW6EUzR9IX6PLEEcVlKSFXzs6w65hKWgJd+UHccqlLhGfI1xDCCO+Oc0PIsxoOE5+kI5VxzAjAlFzgQ02xzAYw8CiMEEsIqG58KtMt5Sq8fCLrWSS2j5THyumfylcU1dtQZ9T8HuSwySgKxMu9IIuMnrKBPPn1ZgJBNBRRnMtJKstO/zEI1h0g8IoPtB3x+5Ataa/tIw9TPldazVvbAOXOI8JMggZXX4hOkvp/Vkfr0mpKWxv9XIpDCCeZLsCiOwKEmjID1XYIbayTuxOa+5QTE5xYHB/XjcQQAaGs0wQXrEX6b2Dmg4Uy7W+lmk1WNtp1kEWgXdzCADK2XZchc0nz5VwzAVFOvKrycjViAJo0ho/ngGIQ4uDmh4atDT8Jz/DNmrFePfcR+N8bQfCKAbu8PYTOnU31jApUtAiiWgBewsl6BUtptLzwHL3C+FgMlaAaWiyeX+A2pH1Yn0pbqlEgSU9zVjxGMyhXQKw+zXqhpp2xc1wcP3BwEkMV2biOsVocpIn+bTMvsyIcDesAC0BUme9OW+qerE8fm7+vhpRJNK/LGIIic9JVojhHgdvldiGzPGNcvXJbXzDOTvIN2I5t734PEGAfQBPyjraHge3YugXaYIvVcEPFMEVGpv7b1MaGqi7v4EqYadc/2ttZx/q6x4qWhsaSXIOfgm8i+XOsfTfLHpT4pWj62ITBwnp+GkJDb9p/BogwD6gB+YR8I4Sfjw0scnakfytVgBUTsByIotkGI9SO3ujPhBqoOwJsCU8MU1ApDk4KhdQUfrHlQKoXaG6R/HSmS8QRJBQe2ZhEJ8n3GQcDceaxDAXMBuwMY6IDhQBFYmAQ0SwUJt+a/mEjih/a0cAGlZyMq7VlygK2hHCcHVyEEGIQsjLmHV7dPiFLlyfzKOIdcgNEQwI8z+ifr/D9CYrvYDAcwfZf3gPI706T4p+FKQLWtAKwBCCWuBSC8FlqpERGJf1/N+Lc2sFduU5r1cY6BZCFbz01Q7Meu5jWMBOemtxova7N+LxxkEMB8cqh+eTTS8Ys0SZKdo+MzQ/i7h68dpwNr/JRlI4bdWy3VpfK8I3sCwJHJqJ/ZYKwwLspcQO8Oa0EqVScKSS5wnlOu/j9AABARwFLg/jJOFRh8omjozglFEduYfdcQNpP9OSpzAqrSrTRP2gWV6S209UIRRkpSWWKRZBETDi37kOWQiU0btikVUuwBZtB3HcQ7iEQYBHA34wbwnjG00nNgjp/9kgFArjOEVv94KDJIRGNRW/KUaZPTx8fu6RJoWJhrO+Y9TeOPSX9It0AKI8pipRicFtaf7mjhAY8ncg8cXBLAQeDCMLWGsFZpcan25vt8bVoGm7S1h9x0CrzUP0QhAM+9d4rM+JFAaMYGC2jUAYgvAJUhoQO3kHy0mkcqF4GPeS8j3BwEsYEDwzjDOFD58Zvj2LkEQlnvghQWh1RHUBN7qJpQy7zXBy3pYBrLgR6kEA12CUHJq5/PLmYG4w5Fc5Rdfn1adqHHPDtS+PwACWDDsrS2BzaSvAuwr+FoPANfDBbBqE2rtv7JEUE6LG0ih8sb+JdnVkHPSW3hpU4i5EHY5z18Ky6QQJn5cWUgrLvozBP5AAIuBOyIC0FKBtaQgKfgy0DZQzHar7Zhm/lvBQeoh+CmLhzqsALlt1oNstKBgrmh+bdHPjHAR5PGa75c1P5J+QACLAp5TviuM00hfx++pnfijpQV7w3JImfNd/QW6tL9LxAcsP9/KArQq8nYRiKzRF2t1Et9pIY47UAJ/Enyc/8NjCgJYTPw8jMdSFRB0NJyUMlAE1wuXoCC9gYaV+CNrEFgBQLns1dLCVmtxZ/j0mhBbHYW1fbRCIpJE4qm7wiDDXJCAnELMauFHvj8IYFHBD91tYfyyeEil8Fvz+94w7T3Z5cisAKA09z3ZZb9lSyzpNhTUTinWcvq1XoCl4r+7RJBQZhBKwotJQvbz88brAzU5AyCARceDta95aofWj4W+7BD8rmlAMiwFGfwryJ4R0NYdSOtCZuFpy3vl1GScB1AY/n5sPZSK6S6vUVoaJbWbfcRkdguh0AcIYAnxo5oAYs2rLfeVAUJtFaDvCAJ6w8cnRWtrVoEVkCNFW0vLIVfOKTv0Zj00fGnEGeLncIbaJcrjqUPZQqx5zXP+D+CRBAEsJQ7WPucvdQh+V8lwMv52tSmT5v4E6Xn1ROlMQWt719O3Twl2rmhw2QhUIwJZ6VdmBcolvz/E4wgCWA5wLOAJVFUPstJ94+Kgst+AJehavgAlXpfKsUvSk4bICNyl/p+T3nkoLuwhk4NityBeOFSIwJ5W5agJrObUrsAsA4C3Esp8gQCWCfww3hTGrwqB1/x8rQyWNhsgzXYp9FZTUGs2wJFeRtuqJqQRhszzLxPPUVdRURmnIMXX99QuBErCImhq/P0IjyEIYDmxs/ZBT6V0IpA2nWdN/3lFAKVQZ4pJ7gxT3lF6ei4VEyBKZ/qR8M/l8WU77zJBbqViecTVfzMR67gJgT8QwCjgu2G8TAiqNzR8RukCoVJwLaHX8gGk3y5N9T7Lg0vF99Zai8dZfNJqkT0CZ5RrKY195ayCdBWa8zPx3olHDwQwCthTm6LPIHvln1YeXMYApOUg/fxU4xCvCI5WY9BK19VW+WXCAiEaXrQT718opn28QCd+LYkqjvxLd4BEHKEhiG/jsQMBjBLYHD2dqv6C8XLhkvRCIFq13wG1S2ZRwl0oFEG1TH+tlJjW+dhK2iGFYOJrsIqWygVEMs1XVj0qhBWgzQDcTMj3BwGMGNjMvT6MCxQfXy4bdgpBxMKpVQN2QlM6RUPLFYMFpTv4usRnmsBrPQG1WgDOOKZWxqtUNLwkl9hK4OnX7+FxAwGMIm4P4yxqBwS7agJaLoDWDzBOKJJTcmTEDNw878fKH3BCg8eZe9aqQBkbaI6fJ+IAXolPXE8o9AECGGH8TxiXKMIqNbW1SjDeTnMBtDX5Uthl6rGW5af54oViussS4LlwAXJFUFO9/2T9QOrYNp4N4BJfP8YjBgIYZTwUxg/COFuY8JoWJ+qeBbA+J0PgLRIg5XySJAbUzvtPtRbXipCkluuWClE40suMa1WIv4bHCwRwLOCbYZxB1ZJhLervFZeAKF0RSLoNJaVbhpOh/WVAjYTQyZmCODmnNMiDKF0aXFoGckpRHq+g9poADrIi3x8EcEyA16R/PYxfJz0ZyFN3AVCrZJglhFpvQBLbyqagqcxAonY5cFnrr1Q+K6lfOa7CiB0UyjkP1d8nAAI4ZsBTVeeEsZXaWYEyAOiVQFiqaIhT3IuS2gVFSRxP+tbxEl7LIiDFOokDd4VCMEUP4SdqLyGOjxlbEl8jFPpYFHh8BYuKLyYEWRN+H33mleGUbbTUY3ksebyB2D+jI/0P5fEzoSiccW2e9JkKa0jLR15Ps929tfkPwAI45sBFQ24M49xIMK124ZpWT/0tE/ECIn2BjxbE88b/LUuAhLmfUbuTcCHe16AtEZYFSPj1NXiMQADHMr5EVT+BldTO5POk9weQ5r4W/fc9CEBLKrKCbzKApzXypA6yiDv2xn6+zDD0wvWQ5cia7b5PVc4/AAI4ZsEBrOvC+A3F7LVmAFJlwUkhBzkFSIbW1iL0XrESZFcerRKwlhtgEYMkgjiBSJux4O+J27P/Nx4fEMDxgO+E8SyqMgSd4gPHwTutKpBlJZTiNSUsBc0dkG5EaRwnVSSUhOkuZwZIEIKVXSjz/79CKPSx6EAQcGnAD/dnaTi4FccE+gTNtICbDARmNBz001qWy78ykKgVNsmoHVCU10vGNaT2y4zr4fn+b+KxgQVwPIHXrt8QxnmkNwDRsv76tAr3pFcIckZsYK7ERaT3EYyDeDm1E4JkO/Fmv1yxCOQCpCsJrb1AAMchrqJqsdBqstuCy/UBWs6+1ircJeIAVi3AuRKA5tfH1yNX+8UEIBf9yLn+hkh4yu+neFTgAhyP2EfVrIBLmPzOEHDpLriebkNGev5AyrWwtk3lJzjjODFJZIb70sQWpmvtD8ACOG7Bwa1fCeMxZDcRldpcEkJqubDrIPm5WgB91vtr+8liHoVwDQoazork93i2ZA8eEVgAxzP4Qf+00KZWYE5q/L5aPlWTUAvMWU1KvbGfZg3E5JRRO6NPGzHBPVhbRwAsgOMevKadMwTPVgRN6xegBQhLZTstLiA1uRUU1IJ2MWl1tf4mGk7i0c4fFxOVOf+fJlT4BQGMET4VxtPCWGUIP1H/ugBye62piBR0a6mwJuxay/D4Pc3NkOeL349XJTIZcP0E1PcHAcwdJ08QnRTuYm14zCbCYzwdHqv9QY8cKKr3n76a6MkriR43SbQ5bHtCePRWuOrpOxS22RUevzVh3zVZ9VTOhA/2hfcfnCH6xRTR7YeIbjlI9N0DRI8sbCGqXWFcG8bLyZ4J6GogYr3WtLNFEtrnWoReCn0cC5DlyAqFTOIpwHitPwf+PglRBAGY2BiucscKom2TlcCzMD816M0nhfdWHkUUY5Wvji2xNjyqp4TzPI118wlH3v9+IIHr9hB9PojuXQuzOPXzYTw3jC2GAHtDyH2CAMiwDuYb80mVFJMVfArFkoij/HFXn8YFYBJ8CKK4PHA7brLzLXwtfCwo/P+psOmemsPXh59y0tVlWsM/D89U266ut52uty3qbVfU27LWfSSv3uNtG627t6j24fdXhm3PCpr7ueuIzgl/H79i9L64LwUi+Hh4bL++96gP9fQw3kjtUmE+IezasAqBaMKvLfgpDU2v+ffSzJdlvqXLIN9v4gAc+PsrQpHP5bUAnhAEbGvQqpvCqzOCuXx60HxPXFFpQUDHC9ZX438DAfzL/UTf3j/vQ3Hiy801EaRWAVodhIm6OwmXPSwEqwqQbD5aKMf1SrxAW+UnKwB94lgXfrZIt7NlOqjcy8n6m2ClyC7juqxyMbPaPd2XV4p01hWtt21cUVaIvO3AHXFF+TgbsiOW7uF62/umq8+yZtu8clun5pg/6Q4X5awmB44ObA28/Z7qx5wHNofxLqqWDFs+fyoA6BP+vVZgM2Xma8E/rXNQKayC0iAAisz++HMO/L19VH4/FjCOI7HS45jR9qAAt0Qxo0aod+eVRcxuIruIJ42YE83EcPvhoFEOEn0vKKVv7Es/k64skXK9UGCX53O7qjjBrYeIHpie0+4Xh/GbSiBQcwW0GIG2pLfL908V8IxNe8v0jyP52ixBIUig+cvfzF9SVeZ7yfHM4Faes6aKI+0Iwr51otLUxyP4y/5yeB6vDs/lVbtAAEuKOwITXx9Y+Gt7qphBB9jhuoKtStJX6ElTPzMCh1LgXYfAp97TegOUCa1fGP6/tAJ4ZeTH5vu9+iau5I/M5uzJ0/twPOnCE4jOD27biWM6+X1/oN2PP0z04QcqawYEsIRgv+3KR4g+FX6AnxwyN3t2GH9B6ZoAWULYLcFPWQBE3WW7SLgTVrBPswakS8AR/z+hnkU+eebnvDXt6VyJPBz93vCA3xGOemswf288QPSt/ZXQX7yJ6Ckr8Qw2YDeGrQF+HkEAy4DPhi//A/cT3aYTwVupShCy1ul3rQcgwwWwKgFp3X8s4bem/Ujx8XODLN5DHSW+OSh90QaiFwbhPR2Cu6gAASwjPhhMsb+/p5X/ui2MfwxjMkEAXQ1BLAtBsw5I8ek1K6A03rO0vTT/+TVn+/2Naf6sJXrVSUQXrMezAQIYE3DE9i07q2hthNeG8TJq5/vHawBkIZA+GYE+QQRSkLt8f/l+YcQEms94uu8NVBVGGcKZq4JPsIXo1yD4IIBxxTvvqSyCGpz69OEwNpIdDOwzHdinVLhEobxOkYDlAsig4NVhvE+e7PJTiF63Gb8/CACgjz1UWQM1XkBHAoKy+q9VEtyqGmyZ/lo58DJh/kutrgm+9ponoP4gjIPNgdm3f9tjq+AesHxAPYARwqWbgiWw7dGXvDb+x9RO9dWq7shKO1pRUFk/YEDDHYEy8Vo7llU9KCahTCGlj8bC/5ITiP7jNAg/CABo4RUbK81Y4woaXmkng4Ga4EuBjQV9EL3OhNAPlPdkwZGM0kU+JAnwez8J4wvNDV0SSO69249k1wEgAEDgd04kuqxaH8jFMa+ldlUgZwjlINpGE/zUyAQJaEThE+9Jd6NZ/vve5o1XBuF/81b8vogBAL3w5z8nd9Wu2QrCHw9jPXWXEHOGpeCCxnVPWz27rNpvm6SJkyfIr/XkJ8P7QUrzAwXlD83QzN1TRD87TMWPDlF5/7S6kq+gdoAvJ33VHzdHfSffy0s3EL3ncfhNQQBA799md07uoh/PZrjxlOBlit9vEcHs/89YRe789bTqOWtp9TlrZolkMrISNPDDwNN1nKV3IBDB/uv30cEv76Xyq3uGhLug4dTePHrdfM7Jz68MY2/w9ct/3wFzEwQA9P5dGiG9ehe5y34+KzsfDGMHdZfxdhdvohW/vZE2nrWa1tHRF31hQtjzwDTt+q9ddPgTD1Fx19SjGj+n4dmA2BL4pzD+M3NUXnkalU9ZiUYfIABgTsLfCPcf30n+2t2z6cHsT0+QMQPw6pNpxatPos3BvF9L8+8GRAnrgMufPPDJh+nQ+++n8hdTLaFvxu1UTfsVb9pK5as2qdmEAAgAUISfpD//w4OUveIns5r8b8M4PyKA2UDdBetp8MZT6OQdK2cLmC12fJ0fmF3hnweuuI+m//m+R0kg/svuyo3PXkvFR56oVgMCRgRwy0Zc+FnAz1xFExdtmPXfP0TVfPqjUf63bKUT3/d4elIQ/g1LIPzN9W0M/+y4bAudFHx7/9RVQ7MB3wjjVr6+P9vS6hnglugaARDAMW3+y4SdiUs2zRIAF9KY7TL85JWUfeY0OjX4+1uW6Xfkc2555mraGq4j+62Ns9d6uCapyUBYg3PWDCUVWe3LgWUE+gKMluA74dsPap9/8rw1tCJYAiuDO3Ddc9bSS6/YTueekM32FFhubAgXPPmObXTX6avo6q/socObJ2jykk1q4RBZWBRADABIaX6qFgbxYGFfNVPSGQM3myF44nxPducU0c6pqpIzF6rkfgpcJYcLw3KBy3mCqxv8fhi31G7KodoimK5HTkcChogHgAAARfsnhT+MrbWJPaf1c3cH8btmd1XC/Ib9VeMUC1yV9uw1RM9bR/SiE4hOnVtl6PvDuDSMnYIEOK9ghtr5Anj4QABjL/xE7fbfmvBzkI+X057R9+DfCcL+0QeJvrh7/hf44kACv3tSVZarJ7jE+WvC2K1YAjEJwAoAAeD7p+EFNI3wT9bCzwWxVtfjLWG8sK/Gf/c9VYXihQKn8l7+mN4WAS/+4SnLAwoJ5AoJAMsEzAIcGy7ApX2F/zOPEF1428IKP4OPx8fl4/fAS8L4vZrIJurRLC6y+hwCsACg/SPNz2Y/G97bqWqe2dkg7T33Vl2KFhuv30z0xlM6N2ONz41P74wsgZQrAMACGGsiyIT2n6zHa/sI/1vvXhrhZ/B5+Hwd4Gv+I8UK0FYrAiCAsTf9m+y+mABOD+NFfTQ/B/uWEnw+Pm8HLqzvYZKG6wvI5CCQAAhg7ISfqD33n0XakoXm9V2/EfvkS6X5NUugIybA1/6nRhzAQ/BBACCCdvCvsQDOCuNZqZ052v/mnct7A3z+u9M9ELnb0TMSBAA3AAQAF0CJAVzUdQCe6ttfLO9N8Pnf3d3i82U0XHpME36QAAhgrF2AOAbAMwDPTx2Ak3wWeqpvvuDr4OtJ4Pz6njIlDgCAAGABCAvgmWGsS+281EG/LnRcD9/LOXABQACA7v/LQOC5Xb7/0aT3Lgb4ejpiAeeRPgsA4QcBjK0LQNQu7cV/n57a+Zrdo3lTHdd1NrV7CiAGAAKAC0DtRh/bUzvyqr5RRMd1PSFh+kP4QQBwA+r/n9jl/9+wfzRvpuO61tX3Bv8fBAAYFgD/Ho9J7cTFPJZ76s8CXxdfXwKnQvBBAIBeH68RimTLzJ1To31jHde3xjD9QQYgABBCjSQBcBmvUUbH9a02iA8AAQB9MF3i+gAQwPGGWGwOpDacGHF92XF9B5R7BmWAAMZa4GX57CQBnDjihdw7rm8/DRcAAQmAAMaaBOTg+H5yac3WydG+qY7ru5tQDBQEALRIIC6V/TBVTThVcN3+NSP6q/F1JfoK7K3vTZYFBxGAAGAB0HC77TtTO569ZjRvqOO6fpYQfpAACGCsYwCyw+6NqZ2ft240b6rjum6g4cYgBUgABAALYFggmpr530vtyB17RhEd1/Ud0nsCQPBBAGPvAsTCz6k030/FAbg5x4tHjARenG4jtrcmNas9GEgABDCWLoC0AGbqwTX0v5o6ALfrGiV0XM919T3lihUAgABgAQgLgEtrXJXamXv1cbuuUQBfR0fvwCsjcrNcAJABCGCs4wB5JCRMAD8I41upnblX33JPCfL5L0+uX6RvUBXUnIYLAAIAbJ4pmlcAAAUWSURBVBegsQCm68Hr6t5Xf2bGAt60dXlvhM+f8P352t8b3ZNGAAAIAC6AiAE0BHBbGNekDvLyjVWvvuUAn5fPn8Dn63uYioRf6wkIIgABjD0RyBjAVD0+QFVTTRPcqHOpg4J8vo4GoYdrC2ZKWAAw/0EAgHj4CxEHaAiAhegXYXyw62B/d+rSWQJ8Hj5fB/61vvbDMP9BAEB/VyAmgcP1+FgY13YdiDXyu7YtXmCQj8vH79Ea/AthfETR/toMAIhgGeHKEt//cn7/0V/ZIHRFPVbVY0NtUp/RdVCuz8/tuhaycxBP9XG0PxHwa3BzGK8Jg4uE89z/IcMKAAGAAADSOwQNDBLgmP+Hwuhl7HO7Lu7YczRNRDjDj/398/otQOI+xZeGsVMI/xTZU4AACAC/A7VbhVskwBbAP/QlgcYi4KYdXLefS3enqgqzmc+r+nhhz4tO6KXxG9wXxhvCuEXR/NN0JMgJ8x8EACSsAEftTsENCaysSYC98HeEceZ8Tsalu7l6Lxfw5Bp+XMaLK/lwMY/t8ys4wklLl1NVzOSQIvyI/oMAgDm6ArElMFmPmAh48e1fh3HhMl83pyy/LYx9wuRvzH7N7ycQAAgAaBOA5Q5MRCMmAf57cRivqy2DpQSb+RyU/Lda6GPhn46EP17sRND+IABgfiQwiEggtgZ4bKEq8n5Rvd1igoX6s2G8P4x7I6GXJr9l9uOBAwEAPVwBMkhAEkFDBvyXG3D+YRjPp4VvuMEPyldqrf/TSOgbja+Z/BB+EACwgCTgawKQbkFMBvz/J9fWwAVhbDrKa3mIqiSkz9GRvP5Y6GON32h9LdqPBw0EABwFCcR5ApIIBoIM4tdPDePcMJ4RxuOpmj60cgVZeHku/w6qqhJxGa+bI9O+EfZpRfC1en/w+UEAwALGBCQRxGNgjHgb3m9lHTPg1J6mV9/+evBc/iEartwzQ8O1CqTQ52Qn+ED4QQDAApJA7BJIi0CSQaYIvye7PbcsT1YIAc8TQm/5+ni4RhwDfAUjj1KQQSOoLhI2FwmsrwXVC8FPEYDWoagQQp4r75Vkz+9D+EEAwCIRAUWCHxNAI+Q5tYOHThmkCG0phLswBB6CDwIAlpkEYiKQ1oHrEHzNBbBGQXZUH4KPGAAwQvEBIn0GQWp9Z5CLFsRLCTweIFgAwAi6BSmCkCRgtSvv8x4ACwAYUctAE3rrvbLjPTwosACAY9AygOACJlATEABAAAAAgAAAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAAABAAAAAgAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAAABAAAAAgAAEAC+AgAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAABYfvw/x+Py8r23O80AAAAASUVORK5CYII="), this.radarMaterial = new uc({ map: this.radarTexture, color: new yn(16777215), transparent: !0, depthTest: !1, depthWrite: !1, side: T }), this.radarGeometry = new Gr(this.config.map.radarSize, this.config.map.radarSize); var t = new cr(this.radarGeometry, this.radarMaterial); return t.renderOrder = 2, t.layers.set(2), t.position.set(0, 0, 0), t.rotateX(Math.PI / 2), e.add(t), this.scene.add(e), e; } }, { key: "_updateCamera", value: function () { var e = new Wt(0, 0, -1); e.applyQuaternion(this.camera.threeCamera.quaternion), e.setY(0); var t = new Wt; this.camera.threeCamera.getWorldPosition(t), this.radar.position.copy(t), this.radar.rotation.set(0, 0, 0), this.radar.lookAt(e.clone().normalize().multiplyScalar(100)); var i = t.clone().add(e.clone().normalize().multiplyScalar(this.config.map.camera.lookDist)); this.camera.mapCamera.lookAt(i); var n = t.clone().add(e.clone().normalize().multiplyScalar(this.config.map.camera.posDist)), r = new Wt(this.config.map.camera.posX, this.config.map.camera.posY, this.config.map.camera.posZ); n.add(r), this.camera.mapCamera.position.copy(n); } }]), e;
    } (), qf = {
    isWebGLAvailable: function () {
    try {
        var e = document.createElement("canvas");
        return !(!window.WebGLRenderingContext || !e.getContext("webgl") && !e.getContext("experimental-webgl"));
    }
        catch (e) {
            return !1;
        }
    }, isWebGL2Available: function () {
    try {
        var e = document.createElement("canvas");
        return !(!window.WebGL2RenderingContext || !e.getContext("webgl2"));
    }
        catch (e) {
            return !1;
        }
    }, getWebGLErrorMessage: function () { return this.getErrorMessage(1); }, getWebGL2ErrorMessage: function () { return this.getErrorMessage(2); }, getErrorMessage: function (e) { var t = { 1: window.WebGLRenderingContext, 2: window.WebGL2RenderingContext }, i = 'Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>', n = document.createElement("div"); return n.id = "webglmessage", n.style.fontFamily = "monospace", n.style.fontSize = "13px", n.style.fontWeight = "normal", n.style.textAlign = "center", n.style.background = "#fff", n.style.color = "#000", n.style.padding = "1.5em", n.style.width = "400px", n.style.margin = "5em auto 0", i = (i = t[e] ? i.replace("$0", "graphics card") : i.replace("$0", "browser")).replace("$1", { 1: "WebGL", 2: "WebGL 2" }[e]), n.innerHTML = i, n; }
    }, $f = 1e3, Zf = 1001, Kf = 1002, Jf = 1003, em = 1004, tm = 1005, im = 1006, nm = 1007, rm = 1008, am = 1012, om = 1014, sm = 1015, lm = 1016, cm = 1020, um = 1022, hm = 1023, dm = 1026, pm = 1027, fm = [], mm = 0; mm < 256; mm++)
        fm[mm] = (mm < 16 ? "0" : "") + mm.toString(16);
    var vm = { DEG2RAD: Math.PI / 180, RAD2DEG: 180 / Math.PI, generateUUID: function () { var e = 4294967295 * Math.random() | 0, t = 4294967295 * Math.random() | 0, i = 4294967295 * Math.random() | 0, n = 4294967295 * Math.random() | 0; return (fm[255 & e] + fm[e >> 8 & 255] + fm[e >> 16 & 255] + fm[e >> 24 & 255] + "-" + fm[255 & t] + fm[t >> 8 & 255] + "-" + fm[t >> 16 & 15 | 64] + fm[t >> 24 & 255] + "-" + fm[63 & i | 128] + fm[i >> 8 & 255] + "-" + fm[i >> 16 & 255] + fm[i >> 24 & 255] + fm[255 & n] + fm[n >> 8 & 255] + fm[n >> 16 & 255] + fm[n >> 24 & 255]).toUpperCase(); }, clamp: function (e, t, i) { return Math.max(t, Math.min(i, e)); }, euclideanModulo: function (e, t) { return (e % t + t) % t; }, mapLinear: function (e, t, i, n, r) { return n + (e - t) * (r - n) / (i - t); }, lerp: function (e, t, i) { return (1 - i) * e + i * t; }, smoothstep: function (e, t, i) { return e <= t ? 0 : e >= i ? 1 : (e = (e - t) / (i - t)) * e * (3 - 2 * e); }, smootherstep: function (e, t, i) { return e <= t ? 0 : e >= i ? 1 : (e = (e - t) / (i - t)) * e * e * (e * (6 * e - 15) + 10); }, randInt: function (e, t) { return e + Math.floor(Math.random() * (t - e + 1)); }, randFloat: function (e, t) { return e + Math.random() * (t - e); }, randFloatSpread: function (e) { return e * (.5 - Math.random()); }, degToRad: function (e) { return e * vm.DEG2RAD; }, radToDeg: function (e) { return e * vm.RAD2DEG; }, isPowerOfTwo: function (e) { return 0 == (e & e - 1) && 0 !== e; }, ceilPowerOfTwo: function (e) { return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2)); }, floorPowerOfTwo: function (e) { return Math.pow(2, Math.floor(Math.log(e) / Math.LN2)); } };
    function gm(e, t, i, n, r, a, o) {
    var s, l = r.isWebGL2, c = r.maxTextures, u = r.maxCubemapSize, h = r.maxTextureSize, d = r.maxSamples, p = new WeakMap, f = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d"); function m(e, t) { return f ? new OffscreenCanvas(e, t) : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"); } function v(e, t, i, n) {
    var r = 1; if ((e.width > n || e.height > n) && (r = n / Math.max(e.width, e.height)), r < 1 || !0 === t) {
        if ("undefined" != typeof HTMLImageElement && e instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e instanceof ImageBitmap) {
            var a = t ? vm.floorPowerOfTwo : Math.floor, o = a(r * e.width), l = a(r * e.height);
            void 0 === s && (s = m(o, l));
            var c = i ? m(o, l) : s;
            return c.width = o, c.height = l, c.getContext("2d").drawImage(e, 0, 0, o, l), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + e.width + "x" + e.height + ") to (" + o + "x" + l + ")."), c;
        }
        return "data" in e && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + e.width + "x" + e.height + ")."), e;
    } return e;
    } function g(e) { return vm.isPowerOfTwo(e.width) && vm.isPowerOfTwo(e.height); } function y(e, t) { return e.generateMipmaps && t && e.minFilter !== Jf && e.minFilter !== im; } function b(t, i, r, a) { e.generateMipmap(t), n.get(i).__maxMipLevel = Math.log(Math.max(r, a)) * Math.LOG2E; } function x(i, n) {
    if (!1 === l)
        return i; var r = i; return i === e.RED && (n === e.FLOAT && (r = e.R32F), n === e.HALF_FLOAT && (r = e.R16F), n === e.UNSIGNED_BYTE && (r = e.R8)), i === e.RGB && (n === e.FLOAT && (r = e.RGB32F), n === e.HALF_FLOAT && (r = e.RGB16F), n === e.UNSIGNED_BYTE && (r = e.RGB8)), i === e.RGBA && (n === e.FLOAT && (r = e.RGBA32F), n === e.HALF_FLOAT && (r = e.RGBA16F), n === e.UNSIGNED_BYTE && (r = e.RGBA8)), r === e.R16F || r === e.R32F || r === e.RGBA16F || r === e.RGBA32F ? t.get("EXT_color_buffer_float") : r !== e.RGB16F && r !== e.RGB32F || console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."), r;
    } function _(t) { return t === Jf || t === em || t === tm ? e.NEAREST : e.LINEAR; } function w(t) {
    var i = t.target; i.removeEventListener("dispose", w), function (t) {
    var i = n.get(t); if (void 0 === i.__webglInit)
        return; e.deleteTexture(i.__webglTexture), n.remove(t);
    } (i), i.isVideoTexture && p.delete(i), o.memory.textures--;
    } function T(t) {
    var i = t.target; i.removeEventListener("dispose", T), function (t) {
    var i = n.get(t), r = n.get(t.texture); if (!t)
        return; void 0 !== r.__webglTexture && e.deleteTexture(r.__webglTexture); t.depthTexture && t.depthTexture.dispose(); if (t.isWebGLRenderTargetCube)
            for (var a = 0; a < 6; a++)
                e.deleteFramebuffer(i.__webglFramebuffer[a]), i.__webglDepthbuffer && e.deleteRenderbuffer(i.__webglDepthbuffer[a]);
        else
            e.deleteFramebuffer(i.__webglFramebuffer), i.__webglDepthbuffer && e.deleteRenderbuffer(i.__webglDepthbuffer); if (t.isWebGLMultiviewRenderTarget) {
                e.deleteTexture(i.__webglColorTexture), e.deleteTexture(i.__webglDepthStencilTexture), o.memory.textures -= 2;
                a = 0;
                for (var s = i.__webglViewFramebuffers.length; a < s; a++)
                    e.deleteFramebuffer(i.__webglViewFramebuffers[a]);
            } n.remove(t.texture), n.remove(t);
    } (i), o.memory.textures--;
    } var M = 0; function A(t, r) {
    var a = n.get(t); if (t.isVideoTexture && function (e) { var t = o.render.frame; p.get(e) !== t && (p.set(e, t), e.update()); } (t), t.version > 0 && a.__version !== t.version) {
        var s = t.image;
        if (void 0 === s)
            console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
        else {
            if (!1 !== s.complete)
                return void I(a, t, r);
            console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
        }
    } i.activeTexture(e.TEXTURE0 + r), i.bindTexture(e.TEXTURE_2D, a.__webglTexture);
    } function S(t, r) {
    if (6 === t.image.length) {
        var o = n.get(t);
        if (t.version > 0 && o.__version !== t.version) {
            R(o, t), i.activeTexture(e.TEXTURE0 + r), i.bindTexture(e.TEXTURE_CUBE_MAP, o.__webglTexture), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t.flipY);
            for (var s = t && t.isCompressedTexture, c = t.image[0] && t.image[0].isDataTexture, h = [], d = 0; d < 6; d++)
                h[d] = s || c ? c ? t.image[d].image : t.image[d] : v(t.image[d], !1, !0, u);
            var p, f = h[0], m = g(f) || l, _ = a.convert(t.format), w = a.convert(t.type), T = x(_, w);
            if (L(e.TEXTURE_CUBE_MAP, t, m), s) {
                for (d = 0; d < 6; d++) {
                    p = h[d].mipmaps;
                    for (var M = 0; M < p.length; M++) {
                        var A = p[M];
                        t.format !== hm && t.format !== um ? null !== _ ? i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + d, M, T, A.width, A.height, 0, A.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + d, M, T, A.width, A.height, 0, _, w, A.data);
                    }
                }
                o.__maxMipLevel = p.length - 1;
            }
            else {
                p = t.mipmaps;
                for (d = 0; d < 6; d++)
                    if (c) {
                        i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + d, 0, T, h[d].width, h[d].height, 0, _, w, h[d].data);
                        for (M = 0; M < p.length; M++) {
                            var S = (A = p[M]).image[d].image;
                            i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + d, M + 1, T, S.width, S.height, 0, _, w, S.data);
                        }
                    }
                    else {
                        i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + d, 0, T, _, w, h[d]);
                        for (M = 0; M < p.length; M++) {
                            A = p[M];
                            i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + d, M + 1, T, _, w, A.image[d]);
                        }
                    }
                o.__maxMipLevel = p.length;
            }
            y(t, m) && b(e.TEXTURE_CUBE_MAP, t, f.width, f.height), o.__version = t.version, t.onUpdate && t.onUpdate(t);
        }
        else
            i.activeTexture(e.TEXTURE0 + r), i.bindTexture(e.TEXTURE_CUBE_MAP, o.__webglTexture);
    }
    } function E(t, r) { i.activeTexture(e.TEXTURE0 + r), i.bindTexture(e.TEXTURE_CUBE_MAP, n.get(t).__webglTexture); } var P = { [$f]: e.REPEAT, [Zf]: e.CLAMP_TO_EDGE, [Kf]: e.MIRRORED_REPEAT }, C = { [Jf]: e.NEAREST, [em]: e.NEAREST_MIPMAP_NEAREST, [tm]: e.NEAREST_MIPMAP_LINEAR, [im]: e.LINEAR, [nm]: e.LINEAR_MIPMAP_NEAREST, [rm]: e.LINEAR_MIPMAP_LINEAR }; function L(i, a, o) {
    o ? (e.texParameteri(i, e.TEXTURE_WRAP_S, P[a.wrapS]), e.texParameteri(i, e.TEXTURE_WRAP_T, P[a.wrapT]), i !== e.TEXTURE_3D && i !== e.TEXTURE_2D_ARRAY || e.texParameteri(i, e.TEXTURE_WRAP_R, P[a.wrapR]), e.texParameteri(i, e.TEXTURE_MAG_FILTER, C[a.magFilter]), e.texParameteri(i, e.TEXTURE_MIN_FILTER, C[a.minFilter])) : (e.texParameteri(i, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(i, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), i !== e.TEXTURE_3D && i !== e.TEXTURE_2D_ARRAY || e.texParameteri(i, e.TEXTURE_WRAP_R, e.CLAMP_TO_EDGE), a.wrapS === Zf && a.wrapT === Zf || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), e.texParameteri(i, e.TEXTURE_MAG_FILTER, _(a.magFilter)), e.texParameteri(i, e.TEXTURE_MIN_FILTER, _(a.minFilter)), a.minFilter !== Jf && a.minFilter !== im && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")); var s = t.get("EXT_texture_filter_anisotropic"); if (s) {
        if (a.type === sm && null === t.get("OES_texture_float_linear"))
            return;
        if (a.type === lm && null === (l || t.get("OES_texture_half_float_linear")))
            return;
        (a.anisotropy > 1 || n.get(a).__currentAnisotropy) && (e.texParameterf(i, s.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(a.anisotropy, r.getMaxAnisotropy())), n.get(a).__currentAnisotropy = a.anisotropy);
    }
    } function R(t, i) { void 0 === t.__webglInit && (t.__webglInit = !0, i.addEventListener("dispose", w), t.__webglTexture = e.createTexture(), o.memory.textures++); } function I(t, n, r) {
    var o = e.TEXTURE_2D; n.isDataTexture2DArray && (o = e.TEXTURE_2D_ARRAY), n.isDataTexture3D && (o = e.TEXTURE_3D), R(t, n), i.activeTexture(e.TEXTURE0 + r), i.bindTexture(o, t.__webglTexture), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, n.flipY), e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, n.premultiplyAlpha), e.pixelStorei(e.UNPACK_ALIGNMENT, n.unpackAlignment); var s = function (e) { return !l && (e.wrapS !== Zf || e.wrapT !== Zf || e.minFilter !== Jf && e.minFilter !== im); } (n) && !1 === g(n.image), c = v(n.image, s, !1, h), u = g(c) || l, d = a.convert(n.format), p = a.convert(n.type), f = x(d, p); L(o, n, u); var m, _ = n.mipmaps; if (n.isDepthTexture) {
        if (f = e.DEPTH_COMPONENT, n.type === sm) {
            if (!1 === l)
                throw new Error("Float Depth Texture only supported in WebGL2.0");
            f = e.DEPTH_COMPONENT32F;
        }
        else
            l && (f = e.DEPTH_COMPONENT16);
        n.format === dm && f === e.DEPTH_COMPONENT && n.type !== am && n.type !== om && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), n.type = am, p = a.convert(n.type)), n.format === pm && (f = e.DEPTH_STENCIL, n.type !== cm && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), n.type = cm, p = a.convert(n.type))), i.texImage2D(e.TEXTURE_2D, 0, f, c.width, c.height, 0, d, p, null);
    }
    else if (n.isDataTexture)
        if (_.length > 0 && u) {
            for (var w = 0, T = _.length; w < T; w++)
                m = _[w], i.texImage2D(e.TEXTURE_2D, w, f, m.width, m.height, 0, d, p, m.data);
            n.generateMipmaps = !1, t.__maxMipLevel = _.length - 1;
        }
        else
            i.texImage2D(e.TEXTURE_2D, 0, f, c.width, c.height, 0, d, p, c.data), t.__maxMipLevel = 0;
    else if (n.isCompressedTexture) {
        for (w = 0, T = _.length; w < T; w++)
            m = _[w], n.format !== hm && n.format !== um ? null !== d ? i.compressedTexImage2D(e.TEXTURE_2D, w, f, m.width, m.height, 0, m.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : i.texImage2D(e.TEXTURE_2D, w, f, m.width, m.height, 0, d, p, m.data);
        t.__maxMipLevel = _.length - 1;
    }
    else if (n.isDataTexture2DArray)
        i.texImage3D(e.TEXTURE_2D_ARRAY, 0, f, c.width, c.height, c.depth, 0, d, p, c.data), t.__maxMipLevel = 0;
    else if (n.isDataTexture3D)
        i.texImage3D(e.TEXTURE_3D, 0, f, c.width, c.height, c.depth, 0, d, p, c.data), t.__maxMipLevel = 0;
    else if (_.length > 0 && u) {
        for (w = 0, T = _.length; w < T; w++)
            m = _[w], i.texImage2D(e.TEXTURE_2D, w, f, d, p, m);
        n.generateMipmaps = !1, t.__maxMipLevel = _.length - 1;
    }
    else
        i.texImage2D(e.TEXTURE_2D, 0, f, d, p, c), t.__maxMipLevel = 0; y(n, u) && b(e.TEXTURE_2D, n, c.width, c.height), t.__version = n.version, n.onUpdate && n.onUpdate(n);
    } function O(t, r, o, s) { var l = a.convert(r.texture.format), c = a.convert(r.texture.type), u = x(l, c); i.texImage2D(s, 0, u, r.width, r.height, 0, l, c, null), e.bindFramebuffer(e.FRAMEBUFFER, t), e.framebufferTexture2D(e.FRAMEBUFFER, o, s, n.get(r.texture).__webglTexture, 0), e.bindFramebuffer(e.FRAMEBUFFER, null); } function D(t, i, n) {
    if (e.bindRenderbuffer(e.RENDERBUFFER, t), i.depthBuffer && !i.stencilBuffer) {
        if (n) {
            var r = k(i);
            e.renderbufferStorageMultisample(e.RENDERBUFFER, r, e.DEPTH_COMPONENT16, i.width, i.height);
        }
        else
            e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_COMPONENT16, i.width, i.height);
        e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t);
    }
    else if (i.depthBuffer && i.stencilBuffer) {
        if (n) {
            r = k(i);
            e.renderbufferStorageMultisample(e.RENDERBUFFER, r, e.DEPTH24_STENCIL8, i.width, i.height);
        }
        else
            e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, i.width, i.height);
        e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.RENDERBUFFER, t);
    }
    else {
        var o = x(a.convert(i.texture.format), a.convert(i.texture.type));
        if (n) {
            r = k(i);
            e.renderbufferStorageMultisample(e.RENDERBUFFER, r, o, i.width, i.height);
        }
        else
            e.renderbufferStorage(e.RENDERBUFFER, o, i.width, i.height);
    } e.bindRenderbuffer(e.RENDERBUFFER, null);
    } function F(t) {
    var i = n.get(t), r = !0 === t.isWebGLRenderTargetCube; if (t.depthTexture) {
        if (r)
            throw new Error("target.depthTexture not supported in Cube render targets");
        !function (t, i) {
        if (i && i.isWebGLRenderTargetCube)
            throw new Error("Depth Texture with cube render targets is not supported"); if (e.bindFramebuffer(e.FRAMEBUFFER, t), !i.depthTexture || !i.depthTexture.isDepthTexture)
                throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture"); n.get(i.depthTexture).__webglTexture && i.depthTexture.image.width === i.width && i.depthTexture.image.height === i.height || (i.depthTexture.image.width = i.width, i.depthTexture.image.height = i.height, i.depthTexture.needsUpdate = !0), A(i.depthTexture, 0); var r = n.get(i.depthTexture).__webglTexture; if (i.depthTexture.format === dm)
                e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.TEXTURE_2D, r, 0);
            else {
                if (i.depthTexture.format !== pm)
                    throw new Error("Unknown depthTexture format");
                e.framebufferTexture2D(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, e.TEXTURE_2D, r, 0);
            }
        } (i.__webglFramebuffer, t);
    }
    else if (r) {
        i.__webglDepthbuffer = [];
        for (var a = 0; a < 6; a++)
            e.bindFramebuffer(e.FRAMEBUFFER, i.__webglFramebuffer[a]), i.__webglDepthbuffer[a] = e.createRenderbuffer(), D(i.__webglDepthbuffer[a], t);
    }
    else
        e.bindFramebuffer(e.FRAMEBUFFER, i.__webglFramebuffer), i.__webglDepthbuffer = e.createRenderbuffer(), D(i.__webglDepthbuffer, t); e.bindFramebuffer(e.FRAMEBUFFER, null);
    } function k(e) { return l && e.isWebGLMultisampleRenderTarget ? Math.min(d, e.samples) : 0; } var N = !1, B = !1; this.allocateTextureUnit = function () { var e = M; return e >= c && console.warn("THREE.WebGLTextures: Trying to use " + e + " texture units while this GPU supports only " + c), M += 1, e; }, this.resetTextureUnits = function () { M = 0; }, this.setTexture2D = A, this.setTexture2DArray = function (t, r) { var a = n.get(t); t.version > 0 && a.__version !== t.version ? I(a, t, r) : (i.activeTexture(e.TEXTURE0 + r), i.bindTexture(e.TEXTURE_2D_ARRAY, a.__webglTexture)); }, this.setTexture3D = function (t, r) { var a = n.get(t); t.version > 0 && a.__version !== t.version ? I(a, t, r) : (i.activeTexture(e.TEXTURE0 + r), i.bindTexture(e.TEXTURE_3D, a.__webglTexture)); }, this.setTextureCube = S, this.setTextureCubeDynamic = E, this.setupRenderTarget = function (r) {
    var s = n.get(r), c = n.get(r.texture); r.addEventListener("dispose", T), c.__webglTexture = e.createTexture(), o.memory.textures++; var u = !0 === r.isWebGLRenderTargetCube, h = !0 === r.isWebGLMultisampleRenderTarget, d = !0 === r.isWebGLMultiviewRenderTarget, p = g(r) || l; if (u) {
        s.__webglFramebuffer = [];
        for (var f = 0; f < 6; f++)
            s.__webglFramebuffer[f] = e.createFramebuffer();
    }
    else if (s.__webglFramebuffer = e.createFramebuffer(), h)
        if (l) {
            s.__webglMultisampledFramebuffer = e.createFramebuffer(), s.__webglColorRenderbuffer = e.createRenderbuffer(), e.bindRenderbuffer(e.RENDERBUFFER, s.__webglColorRenderbuffer);
            var m = x(a.convert(r.texture.format), a.convert(r.texture.type)), v = k(r);
            e.renderbufferStorageMultisample(e.RENDERBUFFER, v, m, r.width, r.height), e.bindFramebuffer(e.FRAMEBUFFER, s.__webglMultisampledFramebuffer), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.RENDERBUFFER, s.__webglColorRenderbuffer), e.bindRenderbuffer(e.RENDERBUFFER, null), r.depthBuffer && (s.__webglDepthRenderbuffer = e.createRenderbuffer(), D(s.__webglDepthRenderbuffer, r, !0)), e.bindFramebuffer(e.FRAMEBUFFER, null);
        }
        else
            console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
    else if (d) {
        var _ = r.width, w = r.height, M = r.numViews;
        e.bindFramebuffer(e.FRAMEBUFFER, s.__webglFramebuffer);
        var A = t.get("OVR_multiview2");
        o.memory.textures += 2;
        var S = e.createTexture();
        e.bindTexture(e.TEXTURE_2D_ARRAY, S), e.texParameteri(e.TEXTURE_2D_ARRAY, e.TEXTURE_MAG_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D_ARRAY, e.TEXTURE_MIN_FILTER, e.NEAREST), e.texImage3D(e.TEXTURE_2D_ARRAY, 0, e.RGBA8, _, w, M, 0, e.RGBA, e.UNSIGNED_BYTE, null), A.framebufferTextureMultiviewOVR(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, S, 0, 0, M);
        var E = e.createTexture();
        e.bindTexture(e.TEXTURE_2D_ARRAY, E), e.texParameteri(e.TEXTURE_2D_ARRAY, e.TEXTURE_MAG_FILTER, e.NEAREST), e.texParameteri(e.TEXTURE_2D_ARRAY, e.TEXTURE_MIN_FILTER, e.NEAREST), e.texImage3D(e.TEXTURE_2D_ARRAY, 0, e.DEPTH24_STENCIL8, _, w, M, 0, e.DEPTH_STENCIL, e.UNSIGNED_INT_24_8, null), A.framebufferTextureMultiviewOVR(e.FRAMEBUFFER, e.DEPTH_STENCIL_ATTACHMENT, E, 0, 0, M);
        var P = new Array(M);
        for (f = 0; f < M; ++f)
            P[f] = e.createFramebuffer(), e.bindFramebuffer(e.FRAMEBUFFER, P[f]), e.framebufferTextureLayer(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, S, 0, f);
        s.__webglColorTexture = S, s.__webglDepthStencilTexture = E, s.__webglViewFramebuffers = P, e.bindFramebuffer(e.FRAMEBUFFER, null), e.bindTexture(e.TEXTURE_2D_ARRAY, null);
    } if (u) {
        i.bindTexture(e.TEXTURE_CUBE_MAP, c.__webglTexture), L(e.TEXTURE_CUBE_MAP, r.texture, p);
        for (f = 0; f < 6; f++)
            O(s.__webglFramebuffer[f], r, e.COLOR_ATTACHMENT0, e.TEXTURE_CUBE_MAP_POSITIVE_X + f);
        y(r.texture, p) && b(e.TEXTURE_CUBE_MAP, r.texture, r.width, r.height), i.bindTexture(e.TEXTURE_CUBE_MAP, null);
    }
        else
            d || (i.bindTexture(e.TEXTURE_2D, c.__webglTexture), L(e.TEXTURE_2D, r.texture, p), O(s.__webglFramebuffer, r, e.COLOR_ATTACHMENT0, e.TEXTURE_2D), y(r.texture, p) && b(e.TEXTURE_2D, r.texture, r.width, r.height), i.bindTexture(e.TEXTURE_2D, null)); r.depthBuffer && F(r);
    }, this.updateRenderTargetMipmap = function (t) {
    var r = t.texture; if (y(r, g(t) || l)) {
        var a = t.isWebGLRenderTargetCube ? e.TEXTURE_CUBE_MAP : e.TEXTURE_2D, o = n.get(r).__webglTexture;
        i.bindTexture(a, o), b(a, r, t.width, t.height), i.bindTexture(a, null);
    }
    }, this.updateMultisampleRenderTarget = function (t) {
    if (t.isWebGLMultisampleRenderTarget)
        if (l) {
            var i = n.get(t);
            e.bindFramebuffer(e.READ_FRAMEBUFFER, i.__webglMultisampledFramebuffer), e.bindFramebuffer(e.DRAW_FRAMEBUFFER, i.__webglFramebuffer);
            var r = t.width, a = t.height, o = e.COLOR_BUFFER_BIT;
            t.depthBuffer && (o |= e.DEPTH_BUFFER_BIT), t.stencilBuffer && (o |= e.STENCIL_BUFFER_BIT), e.blitFramebuffer(0, 0, r, a, 0, 0, r, a, o, e.NEAREST);
        }
        else
            console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
    }, this.safeSetTexture2D = function (e, t) { e && e.isWebGLRenderTarget && (!1 === N && (console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."), N = !0), e = e.texture), A(e, t); }, this.safeSetTextureCube = function (e, t) { e && e.isWebGLRenderTargetCube && (!1 === B && (console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."), B = !0), e = e.texture), e && e.isCubeTexture || Array.isArray(e.image) && 6 === e.image.length ? S(e, t) : E(e, t); };
    }
    function ym(e, t) {
    var i = e.__state.conversionName.toString(), n = Math.round(e.r), r = Math.round(e.g), a = Math.round(e.b), o = e.a, s = Math.round(e.h), l = e.s.toFixed(1), c = e.v.toFixed(1); if (t || "THREE_CHAR_HEX" === i || "SIX_CHAR_HEX" === i) {
        for (var u = e.hex.toString(16); u.length < 6;)
            u = "0" + u;
        return "#" + u;
    } return "CSS_RGB" === i ? "rgb(" + n + "," + r + "," + a + ")" : "CSS_RGBA" === i ? "rgba(" + n + "," + r + "," + a + "," + o + ")" : "HEX" === i ? "0x" + e.hex.toString(16) : "RGB_ARRAY" === i ? "[" + n + "," + r + "," + a + "]" : "RGBA_ARRAY" === i ? "[" + n + "," + r + "," + a + "," + o + "]" : "RGB_OBJ" === i ? "{r:" + n + ",g:" + r + ",b:" + a + "}" : "RGBA_OBJ" === i ? "{r:" + n + ",g:" + r + ",b:" + a + ",a:" + o + "}" : "HSV_OBJ" === i ? "{h:" + s + ",s:" + l + ",v:" + c + "}" : "HSVA_OBJ" === i ? "{h:" + s + ",s:" + l + ",v:" + c + ",a:" + o + "}" : "unknown format";
    }
    var bm = Array.prototype.forEach, xm = Array.prototype.slice, _m = {
    BREAK: {}, extend: function (e) { return this.each(xm.call(arguments, 1), (function (t) { (this.isObject(t) ? Object.keys(t) : []).forEach(function (i) { this.isUndefined(t[i]) || (e[i] = t[i]); }.bind(this)); }), this), e; }, defaults: function (e) { return this.each(xm.call(arguments, 1), (function (t) { (this.isObject(t) ? Object.keys(t) : []).forEach(function (i) { this.isUndefined(e[i]) && (e[i] = t[i]); }.bind(this)); }), this), e; }, compose: function () {
    var e = xm.call(arguments); return function () {
    for (var t = xm.call(arguments), i = e.length - 1; i >= 0; i--)
        t = [e[i].apply(this, t)]; return t[0];
    };
    }, each: function (e, t, i) {
    if (e)
        if (bm && e.forEach && e.forEach === bm)
            e.forEach(t, i);
        else if (e.length === e.length + 0) {
            var n, r = void 0;
            for (r = 0, n = e.length; r < n; r++)
                if (r in e && t.call(i, e[r], r) === this.BREAK)
                    return;
        }
        else
            for (var a in e)
                if (t.call(i, e[a], a) === this.BREAK)
                    return;
    }, defer: function (e) { setTimeout(e, 0); }, debounce: function (e, t, i) { var n = void 0; return function () { var r = this, a = arguments; function o() { n = null, i || e.apply(r, a); } var s = i || !n; clearTimeout(n), n = setTimeout(o, t), s && e.apply(r, a); }; }, toArray: function (e) { return e.toArray ? e.toArray() : xm.call(e); }, isUndefined: function (e) { return void 0 === e; }, isNull: function (e) { return null === e; }, isNaN: function (e) { function t(t) { return e.apply(this, arguments); } return t.toString = function () { return e.toString(); }, t; } ((function (e) { return isNaN(e); })), isArray: Array.isArray || function (e) { return e.constructor === Array; }, isObject: function (e) { return e === Object(e); }, isNumber: function (e) { return e === e + 0; }, isString: function (e) { return e === e + ""; }, isBoolean: function (e) { return !1 === e || !0 === e; }, isFunction: function (e) { return "[object Function]" === Object.prototype.toString.call(e); }
    }, wm = [{ litmus: _m.isString, conversions: { THREE_CHAR_HEX: { read: function (e) { var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i); return null !== t && { space: "HEX", hex: parseInt("0x" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString(), 0) }; }, write: ym }, SIX_CHAR_HEX: { read: function (e) { var t = e.match(/^#([A-F0-9]{6})$/i); return null !== t && { space: "HEX", hex: parseInt("0x" + t[1].toString(), 0) }; }, write: ym }, CSS_RGB: { read: function (e) { var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/); return null !== t && { space: "RGB", r: parseFloat(t[1]), g: parseFloat(t[2]), b: parseFloat(t[3]) }; }, write: ym }, CSS_RGBA: { read: function (e) { var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/); return null !== t && { space: "RGB", r: parseFloat(t[1]), g: parseFloat(t[2]), b: parseFloat(t[3]), a: parseFloat(t[4]) }; }, write: ym } } }, { litmus: _m.isNumber, conversions: { HEX: { read: function (e) { return { space: "HEX", hex: e, conversionName: "HEX" }; }, write: function (e) { return e.hex; } } } }, { litmus: _m.isArray, conversions: { RGB_ARRAY: { read: function (e) { return 3 === e.length && { space: "RGB", r: e[0], g: e[1], b: e[2] }; }, write: function (e) { return [e.r, e.g, e.b]; } }, RGBA_ARRAY: { read: function (e) { return 4 === e.length && { space: "RGB", r: e[0], g: e[1], b: e[2], a: e[3] }; }, write: function (e) { return [e.r, e.g, e.b, e.a]; } } } }, { litmus: _m.isObject, conversions: { RGBA_OBJ: { read: function (e) { return !!(_m.isNumber(e.r) && _m.isNumber(e.g) && _m.isNumber(e.b) && _m.isNumber(e.a)) && { space: "RGB", r: e.r, g: e.g, b: e.b, a: e.a }; }, write: function (e) { return { r: e.r, g: e.g, b: e.b, a: e.a }; } }, RGB_OBJ: { read: function (e) { return !!(_m.isNumber(e.r) && _m.isNumber(e.g) && _m.isNumber(e.b)) && { space: "RGB", r: e.r, g: e.g, b: e.b }; }, write: function (e) { return { r: e.r, g: e.g, b: e.b }; } }, HSVA_OBJ: { read: function (e) { return !!(_m.isNumber(e.h) && _m.isNumber(e.s) && _m.isNumber(e.v) && _m.isNumber(e.a)) && { space: "HSV", h: e.h, s: e.s, v: e.v, a: e.a }; }, write: function (e) { return { h: e.h, s: e.s, v: e.v, a: e.a }; } }, HSV_OBJ: { read: function (e) { return !!(_m.isNumber(e.h) && _m.isNumber(e.s) && _m.isNumber(e.v)) && { space: "HSV", h: e.h, s: e.s, v: e.v }; }, write: function (e) { return { h: e.h, s: e.s, v: e.v }; } } } }], Tm = void 0, Mm = void 0, Am = function () {
    Mm = !1; var e = arguments.length > 1 ? _m.toArray(arguments) : arguments[0]; return _m.each(wm, (function (t) {
    if (t.litmus(e))
        return _m.each(t.conversions, (function (t, i) {
        if (Tm = t.read(e), !1 === Mm && !1 !== Tm)
            return Mm = Tm, Tm.conversionName = i, Tm.conversion = t, _m.BREAK;
        })), _m.BREAK;
    })), Mm;
    }, Sm = void 0, Em = { hsv_to_rgb: function (e, t, i) { var n = Math.floor(e / 60) % 6, r = e / 60 - Math.floor(e / 60), a = i * (1 - t), o = i * (1 - r * t), s = i * (1 - (1 - r) * t), l = [[i, s, a], [o, i, a], [a, i, s], [a, o, i], [s, a, i], [i, a, o]][n]; return { r: 255 * l[0], g: 255 * l[1], b: 255 * l[2] }; }, rgb_to_hsv: function (e, t, i) { var n = Math.min(e, t, i), r = Math.max(e, t, i), a = r - n, o = void 0; return 0 === r ? { h: NaN, s: 0, v: 0 } : (o = e === r ? (t - i) / a : t === r ? 2 + (i - e) / a : 4 + (e - t) / a, (o /= 6) < 0 && (o += 1), { h: 360 * o, s: a / r, v: r / 255 }); }, rgb_to_hex: function (e, t, i) { var n = this.hex_with_component(0, 2, e); return n = this.hex_with_component(n, 1, t), n = this.hex_with_component(n, 0, i); }, component_from_hex: function (e, t) { return e >> 8 * t & 255; }, hex_with_component: function (e, t, i) { return i << (Sm = 8 * t) | e & ~(255 << Sm); } }, Pm = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e; } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e; }, Cm = function (e, t) {
    if (!(e instanceof t))
        throw new TypeError("Cannot call a class as a function");
    }, Lm = function () {
    function e(e, t) {
    for (var i = 0; i < t.length; i++) {
        var n = t[i];
        n.enumerable = n.enumerable || !1, n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
    }
    } return function (t, i, n) { return i && e(t.prototype, i), n && e(t, n), t; };
    } (), Rm = function e(t, i, n) {
    null === t && (t = Function.prototype); var r = Object.getOwnPropertyDescriptor(t, i); if (void 0 === r) {
        var a = Object.getPrototypeOf(t);
        return null === a ? void 0 : e(a, i, n);
    } if ("value" in r)
            return r.value; var o = r.get; return void 0 !== o ? o.call(n) : void 0;
    }, Im = function (e, t) {
    if ("function" != typeof t && null !== t)
        throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }, Om = function (e, t) {
    if (!e)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t;
    }, Dm = function () {
    function e() {
    if (Cm(this, e), this.__state = Am.apply(this, arguments), !1 === this.__state)
        throw new Error("Failed to interpret color arguments"); this.__state.a = this.__state.a || 1;
    } return Lm(e, [{ key: "toString", value: function () { return ym(this); } }, { key: "toHexString", value: function () { return ym(this, !0); } }, { key: "toOriginal", value: function () { return this.__state.conversion.write(this); } }]), e;
    } ();
    function Fm(e, t, i) { Object.defineProperty(e, t, { get: function () { return "RGB" === this.__state.space ? this.__state[t] : (Dm.recalculateRGB(this, t, i), this.__state[t]); }, set: function (e) { "RGB" !== this.__state.space && (Dm.recalculateRGB(this, t, i), this.__state.space = "RGB"), this.__state[t] = e; } }); }
    function km(e, t) { Object.defineProperty(e, t, { get: function () { return "HSV" === this.__state.space ? this.__state[t] : (Dm.recalculateHSV(this), this.__state[t]); }, set: function (e) { "HSV" !== this.__state.space && (Dm.recalculateHSV(this), this.__state.space = "HSV"), this.__state[t] = e; } }); }
    Dm.recalculateRGB = function (e, t, i) {
    if ("HEX" === e.__state.space)
        e.__state[t] = Em.component_from_hex(e.__state.hex, i);
    else {
        if ("HSV" !== e.__state.space)
            throw new Error("Corrupted color state");
        _m.extend(e.__state, Em.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v));
    }
    }, Dm.recalculateHSV = function (e) { var t = Em.rgb_to_hsv(e.r, e.g, e.b); _m.extend(e.__state, { s: t.s, v: t.v }), _m.isNaN(t.h) ? _m.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = t.h; }, Dm.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], Fm(Dm.prototype, "r", 2), Fm(Dm.prototype, "g", 1), Fm(Dm.prototype, "b", 0), km(Dm.prototype, "h"), km(Dm.prototype, "s"), km(Dm.prototype, "v"), Object.defineProperty(Dm.prototype, "a", { get: function () { return this.__state.a; }, set: function (e) { this.__state.a = e; } }), Object.defineProperty(Dm.prototype, "hex", { get: function () { return "HEX" !== !this.__state.space && (this.__state.hex = Em.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex; }, set: function (e) { this.__state.space = "HEX", this.__state.hex = e; } });
    var Nm = function () { function e(t, i) { Cm(this, e), this.initialValue = t[i], this.domElement = document.createElement("div"), this.object = t, this.property = i, this.__onChange = void 0, this.__onFinishChange = void 0; } return Lm(e, [{ key: "onChange", value: function (e) { return this.__onChange = e, this; } }, { key: "onFinishChange", value: function (e) { return this.__onFinishChange = e, this; } }, { key: "setValue", value: function (e) { return this.object[this.property] = e, this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this; } }, { key: "getValue", value: function () { return this.object[this.property]; } }, { key: "updateDisplay", value: function () { return this; } }, { key: "isModified", value: function () { return this.initialValue !== this.getValue(); } }]), e; } (), Bm = {};
    _m.each({ HTMLEvents: ["change"], MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"], KeyboardEvents: ["keydown"] }, (function (e, t) { _m.each(e, (function (e) { Bm[e] = t; })); }));
    var Gm = /(\d+(\.\d+)?)px/;
    function Hm(e) {
    if ("0" === e || _m.isUndefined(e))
        return 0; var t = e.match(Gm); return _m.isNull(t) ? 0 : parseFloat(t[1]);
    }
    var Um = {
    makeSelectable: function (e, t) { void 0 !== e && void 0 !== e.style && (e.onselectstart = t ? function () { return !1; } : function () { }, e.style.MozUserSelect = t ? "auto" : "none", e.style.KhtmlUserSelect = t ? "auto" : "none", e.unselectable = t ? "on" : "off"); }, makeFullscreen: function (e, t, i) { var n = i, r = t; _m.isUndefined(r) && (r = !0), _m.isUndefined(n) && (n = !0), e.style.position = "absolute", r && (e.style.left = 0, e.style.right = 0), n && (e.style.top = 0, e.style.bottom = 0); }, fakeEvent: function (e, t, i, n) {
    var r = i || {}, a = Bm[t]; if (!a)
        throw new Error("Event type " + t + " not supported."); var o = document.createEvent(a); switch (a) {
            case "MouseEvents":
                var s = r.x || r.clientX || 0, l = r.y || r.clientY || 0;
                o.initMouseEvent(t, r.bubbles || !1, r.cancelable || !0, window, r.clickCount || 1, 0, 0, s, l, !1, !1, !1, !1, 0, null);
                break;
            case "KeyboardEvents":
                var c = o.initKeyboardEvent || o.initKeyEvent;
                _m.defaults(r, { cancelable: !0, ctrlKey: !1, altKey: !1, shiftKey: !1, metaKey: !1, keyCode: void 0, charCode: void 0 }), c(t, r.bubbles || !1, r.cancelable, window, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.keyCode, r.charCode);
                break;
            default: o.initEvent(t, r.bubbles || !1, r.cancelable || !0);
        } _m.defaults(o, n), e.dispatchEvent(o);
    }, bind: function (e, t, i, n) { var r = n || !1; return e.addEventListener ? e.addEventListener(t, i, r) : e.attachEvent && e.attachEvent("on" + t, i), Um; }, unbind: function (e, t, i, n) { var r = n || !1; return e.removeEventListener ? e.removeEventListener(t, i, r) : e.detachEvent && e.detachEvent("on" + t, i), Um; }, addClass: function (e, t) {
    if (void 0 === e.className)
        e.className = t;
    else if (e.className !== t) {
        var i = e.className.split(/ +/);
        -1 === i.indexOf(t) && (i.push(t), e.className = i.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""));
    } return Um;
    }, removeClass: function (e, t) {
    if (t)
        if (e.className === t)
            e.removeAttribute("class");
        else {
            var i = e.className.split(/ +/), n = i.indexOf(t);
            -1 !== n && (i.splice(n, 1), e.className = i.join(" "));
        }
    else
        e.className = void 0; return Um;
    }, hasClass: function (e, t) { return new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(e.className) || !1; }, getWidth: function (e) { var t = getComputedStyle(e); return Hm(t["border-left-width"]) + Hm(t["border-right-width"]) + Hm(t["padding-left"]) + Hm(t["padding-right"]) + Hm(t.width); }, getHeight: function (e) { var t = getComputedStyle(e); return Hm(t["border-top-width"]) + Hm(t["border-bottom-width"]) + Hm(t["padding-top"]) + Hm(t["padding-bottom"]) + Hm(t.height); }, getOffset: function (e) {
    var t = e, i = { left: 0, top: 0 }; if (t.offsetParent)
        do {
            i.left += t.offsetLeft, i.top += t.offsetTop, t = t.offsetParent;
        } while (t); return i;
    }, isActive: function (e) { return e === document.activeElement && (e.type || e.href); }
    }, zm = function (e) { function t(e, i) { Cm(this, t); var n = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)), r = n; return n.__prev = n.getValue(), n.__checkbox = document.createElement("input"), n.__checkbox.setAttribute("type", "checkbox"), Um.bind(n.__checkbox, "change", (function () { r.setValue(!r.__prev); }), !1), n.domElement.appendChild(n.__checkbox), n.updateDisplay(), n; } return Im(t, e), Lm(t, [{ key: "setValue", value: function (e) { var i = Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "setValue", this).call(this, e); return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), i; } }, { key: "updateDisplay", value: function () { return !0 === this.getValue() ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0, this.__prev = !0) : (this.__checkbox.checked = !1, this.__prev = !1), Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this); } }]), t; } (Nm), Vm = function (e) {
    function t(e, i, n) {
    Cm(this, t); var r = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)), a = n, o = r; if (r.__select = document.createElement("select"), _m.isArray(a)) {
        var s = {};
        _m.each(a, (function (e) { s[e] = e; })), a = s;
    } return _m.each(a, (function (e, t) { var i = document.createElement("option"); i.innerHTML = t, i.setAttribute("value", e), o.__select.appendChild(i); })), r.updateDisplay(), Um.bind(r.__select, "change", (function () { var e = this.options[this.selectedIndex].value; o.setValue(e); })), r.domElement.appendChild(r.__select), r;
    } return Im(t, e), Lm(t, [{ key: "setValue", value: function (e) { var i = Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "setValue", this).call(this, e); return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), i; } }, { key: "updateDisplay", value: function () { return Um.isActive(this.__select) ? this : (this.__select.value = this.getValue(), Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this)); } }]), t;
    } (Nm), jm = function (e) { function t(e, i) { Cm(this, t); var n = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)), r = n; function a() { r.setValue(r.__input.value); } return n.__input = document.createElement("input"), n.__input.setAttribute("type", "text"), Um.bind(n.__input, "keyup", a), Um.bind(n.__input, "change", a), Um.bind(n.__input, "blur", (function () { r.__onFinishChange && r.__onFinishChange.call(r, r.getValue()); })), Um.bind(n.__input, "keydown", (function (e) { 13 === e.keyCode && this.blur(); })), n.updateDisplay(), n.domElement.appendChild(n.__input), n; } return Im(t, e), Lm(t, [{ key: "updateDisplay", value: function () { return Um.isActive(this.__input) || (this.__input.value = this.getValue()), Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this); } }]), t; } (Nm);
    function Wm(e) { var t = e.toString(); return t.indexOf(".") > -1 ? t.length - t.indexOf(".") - 1 : 0; }
    var Xm = function (e) { function t(e, i, n) { Cm(this, t); var r = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)), a = n || {}; return r.__min = a.min, r.__max = a.max, r.__step = a.step, _m.isUndefined(r.__step) ? 0 === r.initialValue ? r.__impliedStep = 1 : r.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(r.initialValue)) / Math.LN10)) / 10 : r.__impliedStep = r.__step, r.__precision = Wm(r.__impliedStep), r; } return Im(t, e), Lm(t, [{ key: "setValue", value: function (e) { var i = e; return void 0 !== this.__min && i < this.__min ? i = this.__min : void 0 !== this.__max && i > this.__max && (i = this.__max), void 0 !== this.__step && i % this.__step != 0 && (i = Math.round(i / this.__step) * this.__step), Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "setValue", this).call(this, i); } }, { key: "min", value: function (e) { return this.__min = e, this; } }, { key: "max", value: function (e) { return this.__max = e, this; } }, { key: "step", value: function (e) { return this.__step = e, this.__impliedStep = e, this.__precision = Wm(e), this; } }]), t; } (Nm);
    var Ym = function (e) { function t(e, i, n) { Cm(this, t); var r = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i, n)); r.__truncationSuspended = !1; var a = r, o = void 0; function s() { a.__onFinishChange && a.__onFinishChange.call(a, a.getValue()); } function l(e) { var t = o - e.clientY; a.setValue(a.getValue() + t * a.__impliedStep), o = e.clientY; } function c() { Um.unbind(window, "mousemove", l), Um.unbind(window, "mouseup", c), s(); } return r.__input = document.createElement("input"), r.__input.setAttribute("type", "text"), Um.bind(r.__input, "change", (function () { var e = parseFloat(a.__input.value); _m.isNaN(e) || a.setValue(e); })), Um.bind(r.__input, "blur", (function () { s(); })), Um.bind(r.__input, "mousedown", (function (e) { Um.bind(window, "mousemove", l), Um.bind(window, "mouseup", c), o = e.clientY; })), Um.bind(r.__input, "keydown", (function (e) { 13 === e.keyCode && (a.__truncationSuspended = !0, this.blur(), a.__truncationSuspended = !1, s()); })), r.updateDisplay(), r.domElement.appendChild(r.__input), r; } return Im(t, e), Lm(t, [{ key: "updateDisplay", value: function () { var e, i, n; return this.__input.value = this.__truncationSuspended ? this.getValue() : (e = this.getValue(), i = this.__precision, n = Math.pow(10, i), Math.round(e * n) / n), Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this); } }]), t; } (Xm);
    function Qm(e, t, i, n, r) { return n + (e - t) / (i - t) * (r - n); }
    var qm = function (e) {
    function t(e, i, n, r, a) {
    Cm(this, t); var o = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i, { min: n, max: r, step: a })), s = o; function l(e) { e.preventDefault(); var t = s.__background.getBoundingClientRect(); return s.setValue(Qm(e.clientX, t.left, t.right, s.__min, s.__max)), !1; } function c() { Um.unbind(window, "mousemove", l), Um.unbind(window, "mouseup", c), s.__onFinishChange && s.__onFinishChange.call(s, s.getValue()); } function u(e) { var t = e.touches[0].clientX, i = s.__background.getBoundingClientRect(); s.setValue(Qm(t, i.left, i.right, s.__min, s.__max)); } function h() { Um.unbind(window, "touchmove", u), Um.unbind(window, "touchend", h), s.__onFinishChange && s.__onFinishChange.call(s, s.getValue()); } return o.__background = document.createElement("div"), o.__foreground = document.createElement("div"), Um.bind(o.__background, "mousedown", (function (e) { document.activeElement.blur(), Um.bind(window, "mousemove", l), Um.bind(window, "mouseup", c), l(e); })), Um.bind(o.__background, "touchstart", (function (e) {
    if (1 !== e.touches.length)
        return; Um.bind(window, "touchmove", u), Um.bind(window, "touchend", h), u(e);
    })), Um.addClass(o.__background, "slider"), Um.addClass(o.__foreground, "slider-fg"), o.updateDisplay(), o.__background.appendChild(o.__foreground), o.domElement.appendChild(o.__background), o;
    } return Im(t, e), Lm(t, [{ key: "updateDisplay", value: function () { var e = (this.getValue() - this.__min) / (this.__max - this.__min); return this.__foreground.style.width = 100 * e + "%", Rm(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this); } }]), t;
    } (Xm), $m = function (e) { function t(e, i, n) { Cm(this, t); var r = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)), a = r; return r.__button = document.createElement("div"), r.__button.innerHTML = void 0 === n ? "Fire" : n, Um.bind(r.__button, "click", (function (e) { return e.preventDefault(), a.fire(), !1; })), Um.addClass(r.__button, "button"), r.domElement.appendChild(r.__button), r; } return Im(t, e), Lm(t, [{ key: "fire", value: function () { this.__onChange && this.__onChange.call(this), this.getValue().call(this.object), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()); } }]), t; } (Nm), Zm = function (e) {
    function t(e, i) { Cm(this, t); var n = Om(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, i)); n.__color = new Dm(n.getValue()), n.__temp = new Dm(0); var r = n; n.domElement = document.createElement("div"), Um.makeSelectable(n.domElement, !1), n.__selector = document.createElement("div"), n.__selector.className = "selector", n.__saturation_field = document.createElement("div"), n.__saturation_field.className = "saturation-field", n.__field_knob = document.createElement("div"), n.__field_knob.className = "field-knob", n.__field_knob_border = "2px solid ", n.__hue_knob = document.createElement("div"), n.__hue_knob.className = "hue-knob", n.__hue_field = document.createElement("div"), n.__hue_field.className = "hue-field", n.__input = document.createElement("input"), n.__input.type = "text", n.__input_textShadow = "0 1px 1px ", Um.bind(n.__input, "keydown", (function (e) { 13 === e.keyCode && h.call(this); })), Um.bind(n.__input, "blur", h), Um.bind(n.__selector, "mousedown", (function () { Um.addClass(this, "drag").bind(window, "mouseup", (function () { Um.removeClass(r.__selector, "drag"); })); })), Um.bind(n.__selector, "touchstart", (function () { Um.addClass(this, "drag").bind(window, "touchend", (function () { Um.removeClass(r.__selector, "drag"); })); })); var a, o = document.createElement("div"); function s(e) { p(e), Um.bind(window, "mousemove", p), Um.bind(window, "touchmove", p), Um.bind(window, "mouseup", c), Um.bind(window, "touchend", c); } function l(e) { f(e), Um.bind(window, "mousemove", f), Um.bind(window, "touchmove", f), Um.bind(window, "mouseup", u), Um.bind(window, "touchend", u); } function c() { Um.unbind(window, "mousemove", p), Um.unbind(window, "touchmove", p), Um.unbind(window, "mouseup", c), Um.unbind(window, "touchend", c), d(); } function u() { Um.unbind(window, "mousemove", f), Um.unbind(window, "touchmove", f), Um.unbind(window, "mouseup", u), Um.unbind(window, "touchend", u), d(); } function h() { var e = Am(this.value); !1 !== e ? (r.__color.__state = e, r.setValue(r.__color.toOriginal())) : this.value = r.__color.toString(); } function d() { r.__onFinishChange && r.__onFinishChange.call(r, r.__color.toOriginal()); } function p(e) { -1 === e.type.indexOf("touch") && e.preventDefault(); var t = r.__saturation_field.getBoundingClientRect(), i = e.touches && e.touches[0] || e, n = i.clientX, a = i.clientY, o = (n - t.left) / (t.right - t.left), s = 1 - (a - t.top) / (t.bottom - t.top); return s > 1 ? s = 1 : s < 0 && (s = 0), o > 1 ? o = 1 : o < 0 && (o = 0), r.__color.v = s, r.__color.s = o, r.setValue(r.__color.toOriginal()), !1; } function f(e) { -1 === e.type.indexOf("touch") && e.preventDefault(); var t = r.__hue_field.getBoundingClientRect(), i = 1 - ((e.touches && e.touches[0] || e).clientY - t.top) / (t.bottom - t.top); return i > 1 ? i = 1 : i < 0 && (i = 0), r.__color.h = 360 * i, r.setValue(r.__color.toOriginal()), !1; } return _m.extend(n.__selector.style, { width: "122px", height: "102px", padding: "3px", backgroundColor: "#222", boxShadow: "0px 1px 3px rgba(0,0,0,0.3)" }), _m.extend(n.__field_knob.style, { position: "absolute", width: "12px", height: "12px", border: n.__field_knob_border + (n.__color.v < .5 ? "#fff" : "#000"), boxShadow: "0px 1px 3px rgba(0,0,0,0.5)", borderRadius: "12px", zIndex: 1 }), _m.extend(n.__hue_knob.style, { position: "absolute", width: "15px", height: "2px", borderRight: "4px solid #fff", zIndex: 1 }), _m.extend(n.__saturation_field.style, { width: "100px", height: "100px", border: "1px solid #555", marginRight: "3px", display: "inline-block", cursor: "pointer" }), _m.extend(o.style, { width: "100%", height: "100%", background: "none" }), Jm(o, "top", "rgba(0,0,0,0)", "#000"), _m.extend(n.__hue_field.style, { width: "15px", height: "100px", border: "1px solid #555", cursor: "ns-resize", position: "absolute", top: "3px", right: "3px" }), (a = n.__hue_field).style.background = "", a.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", a.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", _m.extend(n.__input.style, { outline: "none", textAlign: "center", color: "#fff", border: 0, fontWeight: "bold", textShadow: n.__input_textShadow + "rgba(0,0,0,0.7)" }), Um.bind(n.__saturation_field, "mousedown", s), Um.bind(n.__saturation_field, "touchstart", s), Um.bind(n.__field_knob, "mousedown", s), Um.bind(n.__field_knob, "touchstart", s), Um.bind(n.__hue_field, "mousedown", l), Um.bind(n.__hue_field, "touchstart", l), n.__saturation_field.appendChild(o), n.__selector.appendChild(n.__field_knob), n.__selector.appendChild(n.__saturation_field), n.__selector.appendChild(n.__hue_field), n.__hue_field.appendChild(n.__hue_knob), n.domElement.appendChild(n.__input), n.domElement.appendChild(n.__selector), n.updateDisplay(), n; } return Im(t, e), Lm(t, [{
    key: "updateDisplay", value: function () {
    var e = Am(this.getValue()); if (!1 !== e) {
        var t = !1;
        _m.each(Dm.COMPONENTS, (function (i) {
        if (!_m.isUndefined(e[i]) && !_m.isUndefined(this.__color.__state[i]) && e[i] !== this.__color.__state[i])
            return t = !0, {};
        }), this), t && _m.extend(this.__color.__state, e);
    } _m.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1; var i = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0, n = 255 - i; _m.extend(this.__field_knob.style, { marginLeft: 100 * this.__color.s - 7 + "px", marginTop: 100 * (1 - this.__color.v) - 7 + "px", backgroundColor: this.__temp.toHexString(), border: this.__field_knob_border + "rgb(" + i + "," + i + "," + i + ")" }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, this.__temp.v = 1, Jm(this.__saturation_field, "left", "#fff", this.__temp.toHexString()), this.__input.value = this.__color.toString(), _m.extend(this.__input.style, { backgroundColor: this.__color.toHexString(), color: "rgb(" + i + "," + i + "," + i + ")", textShadow: this.__input_textShadow + "rgba(" + n + "," + n + "," + n + ",.7)" });
    }
    }]), t;
    } (Nm), Km = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
    function Jm(e, t, i, n) { e.style.background = "", _m.each(Km, (function (r) { e.style.cssText += "background: " + r + "linear-gradient(" + t + ", " + i + " 0%, " + n + " 100%); "; })); }
    var ev = function (e, t) {
    var i = t || document, n = document.createElement("style"); n.type = "text/css", n.innerHTML = e; var r = i.getElementsByTagName("head")[0]; try {
        r.appendChild(n);
    }
        catch (e) { }
    }, tv = '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>', iv = function (e, t) { var i = e[t]; return _m.isArray(arguments[2]) || _m.isObject(arguments[2]) ? new Vm(e, t, arguments[2]) : _m.isNumber(i) ? _m.isNumber(arguments[2]) && _m.isNumber(arguments[3]) ? _m.isNumber(arguments[4]) ? new qm(e, t, arguments[2], arguments[3], arguments[4]) : new qm(e, t, arguments[2], arguments[3]) : _m.isNumber(arguments[4]) ? new Ym(e, t, { min: arguments[2], max: arguments[3], step: arguments[4] }) : new Ym(e, t, { min: arguments[2], max: arguments[3] }) : _m.isString(i) ? new jm(e, t) : _m.isFunction(i) ? new $m(e, t, "") : _m.isBoolean(i) ? new zm(e, t) : null; };
    var nv = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e) { setTimeout(e, 1e3 / 60); }, rv = function () { function e() { Cm(this, e), this.backgroundElement = document.createElement("div"), _m.extend(this.backgroundElement.style, { backgroundColor: "rgba(0,0,0,0.8)", top: 0, left: 0, display: "none", zIndex: "1000", opacity: 0, WebkitTransition: "opacity 0.2s linear", transition: "opacity 0.2s linear" }), Um.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), _m.extend(this.domElement.style, { position: "fixed", display: "none", zIndex: "1001", opacity: 0, WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear", transition: "transform 0.2s ease-out, opacity 0.2s linear" }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement); var t = this; Um.bind(this.backgroundElement, "click", (function () { t.hide(); })); } return Lm(e, [{ key: "show", value: function () { var e = this; this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), _m.defer((function () { e.backgroundElement.style.opacity = 1, e.domElement.style.opacity = 1, e.domElement.style.webkitTransform = "scale(1)"; })); } }, { key: "hide", value: function () { var e = this, t = function t() { e.domElement.style.display = "none", e.backgroundElement.style.display = "none", Um.unbind(e.domElement, "webkitTransitionEnd", t), Um.unbind(e.domElement, "transitionend", t), Um.unbind(e.domElement, "oTransitionEnd", t); }; Um.bind(this.domElement, "webkitTransitionEnd", t), Um.bind(this.domElement, "transitionend", t), Um.bind(this.domElement, "oTransitionEnd", t), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"; } }, { key: "layout", value: function () { this.domElement.style.left = window.innerWidth / 2 - Um.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - Um.getHeight(this.domElement) / 2 + "px"; } }]), e; } ();
    ev(function (e) {
    if (e && "undefined" != typeof window) {
        var t = document.createElement("style");
        return t.setAttribute("type", "text/css"), t.innerHTML = e, document.head.appendChild(t), e;
    }
    } (".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));
    var av = "Default", ov = function () {
    try {
        return !!window.localStorage;
    }
        catch (e) {
            return !1;
        }
    } (), sv = void 0, lv = !0, cv = void 0, uv = !1, hv = [], dv = function e(t) {
    var i = this, n = t || {}; this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), Um.addClass(this.domElement, "dg"), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], n = _m.defaults(n, { closeOnTop: !1, autoPlace: !0, width: e.DEFAULT_WIDTH }), n = _m.defaults(n, { resizable: n.autoPlace, hideable: n.autoPlace }), _m.isUndefined(n.load) ? n.load = { preset: av } : n.preset && (n.load.preset = n.preset), _m.isUndefined(n.parent) && n.hideable && hv.push(this), n.resizable = _m.isUndefined(n.parent) && n.resizable, n.autoPlace && _m.isUndefined(n.scrollable) && (n.scrollable = !0); var r, a = ov && "true" === localStorage.getItem(yv(this, "isLocal")), o = void 0, s = void 0; if (Object.defineProperties(this, {
    parent: { get: function () { return n.parent; } }, scrollable: { get: function () { return n.scrollable; } }, autoPlace: { get: function () { return n.autoPlace; } }, closeOnTop: { get: function () { return n.closeOnTop; } }, preset: {
    get: function () { return i.parent ? i.getRoot().preset : n.load.preset; }, set: function (e) {
    i.parent ? i.getRoot().preset = e : n.load.preset = e, function (e) {
    for (var t = 0; t < e.__preset_select.length; t++)
        e.__preset_select[t].value === e.preset && (e.__preset_select.selectedIndex = t);
    } (this), i.revert();
    }
    }, width: { get: function () { return n.width; }, set: function (e) { n.width = e, Tv(i, e); } }, name: { get: function () { return n.name; }, set: function (e) { n.name = e, s && (s.innerHTML = n.name); } }, closed: { get: function () { return n.closed; }, set: function (t) { n.closed = t, n.closed ? Um.addClass(i.__ul, e.CLASS_CLOSED) : Um.removeClass(i.__ul, e.CLASS_CLOSED), this.onResize(), i.__closeButton && (i.__closeButton.innerHTML = t ? e.TEXT_OPEN : e.TEXT_CLOSED); } }, load: { get: function () { return n.load; } }, useLocalStorage: { get: function () { return a; }, set: function (e) { ov && (a = e, e ? Um.bind(window, "unload", o) : Um.unbind(window, "unload", o), localStorage.setItem(yv(i, "isLocal"), e)); } }
    }), _m.isUndefined(n.parent)) {
        if (this.closed = n.closed || !1, Um.addClass(this.domElement, e.CLASS_MAIN), Um.makeSelectable(this.domElement, !1), ov && a) {
            i.useLocalStorage = !0;
            var l = localStorage.getItem(yv(this, "gui"));
            l && (n.load = JSON.parse(l));
        }
        this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = e.TEXT_CLOSED, Um.addClass(this.__closeButton, e.CLASS_CLOSE_BUTTON), n.closeOnTop ? (Um.addClass(this.__closeButton, e.CLASS_CLOSE_TOP), this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0])) : (Um.addClass(this.__closeButton, e.CLASS_CLOSE_BOTTOM), this.domElement.appendChild(this.__closeButton)), Um.bind(this.__closeButton, "click", (function () { i.closed = !i.closed; }));
    }
    else {
        void 0 === n.closed && (n.closed = !0);
        var c = document.createTextNode(n.name);
        Um.addClass(c, "controller-name"), s = pv(i, c);
        Um.addClass(this.__ul, e.CLASS_CLOSED), Um.addClass(s, "title"), Um.bind(s, "click", (function (e) { return e.preventDefault(), i.closed = !i.closed, !1; })), n.closed || (this.closed = !1);
    } n.autoPlace && (_m.isUndefined(n.parent) && (lv && (cv = document.createElement("div"), Um.addClass(cv, "dg"), Um.addClass(cv, e.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(cv), lv = !1), cv.appendChild(this.domElement), Um.addClass(this.domElement, e.CLASS_AUTO_PLACE)), this.parent || Tv(i, n.width)), this.__resizeHandler = function () { i.onResizeDebounced(); }, Um.bind(window, "resize", this.__resizeHandler), Um.bind(this.__ul, "webkitTransitionEnd", this.__resizeHandler), Um.bind(this.__ul, "transitionend", this.__resizeHandler), Um.bind(this.__ul, "oTransitionEnd", this.__resizeHandler), this.onResize(), n.resizable && wv(this), o = function () { ov && "true" === localStorage.getItem(yv(i, "isLocal")) && localStorage.setItem(yv(i, "gui"), JSON.stringify(i.getSaveObject())); }, this.saveToLocalStorageIfPossible = o, n.parent || ((r = i.getRoot()).width += 1, _m.defer((function () { r.width -= 1; })));
    };
    function pv(e, t, i) { var n = document.createElement("li"); return t && n.appendChild(t), i ? e.__ul.insertBefore(n, i) : e.__ul.appendChild(n), e.onResize(), n; }
    function fv(e) { Um.unbind(window, "resize", e.__resizeHandler), e.saveToLocalStorageIfPossible && Um.unbind(window, "unload", e.saveToLocalStorageIfPossible); }
    function mv(e, t) { var i = e.__preset_select[e.__preset_select.selectedIndex]; i.innerHTML = t ? i.value + "*" : i.value; }
    function vv(e, t) {
    var i = e.getRoot(), n = i.__rememberedObjects.indexOf(t.object); if (-1 !== n) {
        var r = i.__rememberedObjectIndecesToControllers[n];
        if (void 0 === r && (r = {}, i.__rememberedObjectIndecesToControllers[n] = r), r[t.property] = t, i.load && i.load.remembered) {
            var a = i.load.remembered, o = void 0;
            if (a[e.preset])
                o = a[e.preset];
            else {
                if (!a[av])
                    return;
                o = a[av];
            }
            if (o[n] && void 0 !== o[n][t.property]) {
                var s = o[n][t.property];
                t.initialValue = s, t.setValue(s);
            }
        }
    }
    }
    function gv(e, t, i, n) {
    if (void 0 === t[i])
        throw new Error('Object "' + t + '" has no property "' + i + '"'); var r = void 0; if (n.color)
            r = new Zm(t, i);
        else {
            var a = [t, i].concat(n.factoryArgs);
            r = iv.apply(e, a);
        } n.before instanceof Nm && (n.before = n.before.__li), vv(e, r), Um.addClass(r.domElement, "c"); var o = document.createElement("span"); Um.addClass(o, "property-name"), o.innerHTML = r.property; var s = document.createElement("div"); s.appendChild(o), s.appendChild(r.domElement); var l = pv(e, s, n.before); return Um.addClass(l, dv.CLASS_CONTROLLER_ROW), r instanceof Zm ? Um.addClass(l, "color") : Um.addClass(l, Pm(r.getValue())), function (e, t, i) {
        if (i.__li = t, i.__gui = e, _m.extend(i, {
        options: function (t) {
        if (arguments.length > 1) {
            var n = i.__li.nextElementSibling;
            return i.remove(), gv(e, i.object, i.property, { before: n, factoryArgs: [_m.toArray(arguments)] });
        } if (_m.isArray(t) || _m.isObject(t)) {
            var r = i.__li.nextElementSibling;
            return i.remove(), gv(e, i.object, i.property, { before: r, factoryArgs: [t] });
        }
        }, name: function (e) { return i.__li.firstElementChild.firstElementChild.innerHTML = e, i; }, listen: function () { return i.__gui.listen(i), i; }, remove: function () { return i.__gui.remove(i), i; }
        }), i instanceof qm) {
            var n = new Ym(i.object, i.property, { min: i.__min, max: i.__max, step: i.__step });
            _m.each(["updateDisplay", "onChange", "onFinishChange", "step", "min", "max"], (function (e) { var t = i[e], r = n[e]; i[e] = n[e] = function () { var e = Array.prototype.slice.call(arguments); return r.apply(n, e), t.apply(i, e); }; })), Um.addClass(t, "has-slider"), i.domElement.insertBefore(n.domElement, i.domElement.firstElementChild);
        }
        else if (i instanceof Ym) {
            var r = function (t) {
            if (_m.isNumber(i.__min) && _m.isNumber(i.__max)) {
                var n = i.__li.firstElementChild.firstElementChild.innerHTML, r = i.__gui.__listening.indexOf(i) > -1;
                i.remove();
                var a = gv(e, i.object, i.property, { before: i.__li.nextElementSibling, factoryArgs: [i.__min, i.__max, i.__step] });
                return a.name(n), r && a.listen(), a;
            } return t;
            };
            i.min = _m.compose(r, i.min), i.max = _m.compose(r, i.max);
        }
        else
            i instanceof zm ? (Um.bind(t, "click", (function () { Um.fakeEvent(i.__checkbox, "click"); })), Um.bind(i.__checkbox, "click", (function (e) { e.stopPropagation(); }))) : i instanceof $m ? (Um.bind(t, "click", (function () { Um.fakeEvent(i.__button, "click"); })), Um.bind(t, "mouseover", (function () { Um.addClass(i.__button, "hover"); })), Um.bind(t, "mouseout", (function () { Um.removeClass(i.__button, "hover"); }))) : i instanceof Zm && (Um.addClass(t, "color"), i.updateDisplay = _m.compose((function (e) { return t.style.borderLeftColor = i.__color.toString(), e; }), i.updateDisplay), i.updateDisplay()); i.setValue = _m.compose((function (t) { return e.getRoot().__preset_select && i.isModified() && mv(e.getRoot(), !0), t; }), i.setValue);
        } (e, l, r), e.__controllers.push(r), r;
    }
    function yv(e, t) { return document.location.href + "." + t; }
    function bv(e, t, i) { var n = document.createElement("option"); n.innerHTML = t, n.value = t, e.__preset_select.appendChild(n), i && (e.__preset_select.selectedIndex = e.__preset_select.length - 1); }
    function xv(e, t) { t.style.display = e.useLocalStorage ? "block" : "none"; }
    function _v(e) {
    var t = e.__save_row = document.createElement("li"); Um.addClass(e.domElement, "has-save"), e.__ul.insertBefore(t, e.__ul.firstChild), Um.addClass(t, "save-row"); var i = document.createElement("span"); i.innerHTML = "&nbsp;", Um.addClass(i, "button gears"); var n = document.createElement("span"); n.innerHTML = "Save", Um.addClass(n, "button"), Um.addClass(n, "save"); var r = document.createElement("span"); r.innerHTML = "New", Um.addClass(r, "button"), Um.addClass(r, "save-as"); var a = document.createElement("span"); a.innerHTML = "Revert", Um.addClass(a, "button"), Um.addClass(a, "revert"); var o = e.__preset_select = document.createElement("select"); if (e.load && e.load.remembered ? _m.each(e.load.remembered, (function (t, i) { bv(e, i, i === e.preset); })) : bv(e, av, !1), Um.bind(o, "change", (function () {
    for (var t = 0; t < e.__preset_select.length; t++)
        e.__preset_select[t].innerHTML = e.__preset_select[t].value; e.preset = this.value;
    })), t.appendChild(o), t.appendChild(i), t.appendChild(n), t.appendChild(r), t.appendChild(a), ov) {
        var s = document.getElementById("dg-local-explain"), l = document.getElementById("dg-local-storage");
        document.getElementById("dg-save-locally").style.display = "block", "true" === localStorage.getItem(yv(0, "isLocal")) && l.setAttribute("checked", "checked"), xv(e, s), Um.bind(l, "change", (function () { e.useLocalStorage = !e.useLocalStorage, xv(e, s); }));
    } var c = document.getElementById("dg-new-constructor"); Um.bind(c, "keydown", (function (e) { !e.metaKey || 67 !== e.which && 67 !== e.keyCode || sv.hide(); })), Um.bind(i, "click", (function () { c.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2), sv.show(), c.focus(), c.select(); })), Um.bind(n, "click", (function () { e.save(); })), Um.bind(r, "click", (function () { var t = prompt("Enter a new preset name."); t && e.saveAs(t); })), Um.bind(a, "click", (function () { e.revert(); }));
    }
    function wv(e) { var t = void 0; function i(i) { return i.preventDefault(), e.width += t - i.clientX, e.onResize(), t = i.clientX, !1; } function n() { Um.removeClass(e.__closeButton, dv.CLASS_DRAG), Um.unbind(window, "mousemove", i), Um.unbind(window, "mouseup", n); } function r(r) { return r.preventDefault(), t = r.clientX, Um.addClass(e.__closeButton, dv.CLASS_DRAG), Um.bind(window, "mousemove", i), Um.bind(window, "mouseup", n), !1; } e.__resize_handle = document.createElement("div"), _m.extend(e.__resize_handle.style, { width: "6px", marginLeft: "-3px", height: "200px", cursor: "ew-resize", position: "absolute" }), Um.bind(e.__resize_handle, "mousedown", r), Um.bind(e.__closeButton, "mousedown", r), e.domElement.insertBefore(e.__resize_handle, e.domElement.firstElementChild); }
    function Tv(e, t) { e.domElement.style.width = t + "px", e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"), e.__closeButton && (e.__closeButton.style.width = t + "px"); }
    function Mv(e, t) { var i = {}; return _m.each(e.__rememberedObjects, (function (n, r) { var a = {}, o = e.__rememberedObjectIndecesToControllers[r]; _m.each(o, (function (e, i) { a[i] = t ? e.initialValue : e.getValue(); })), i[r] = a; })), i; }
    dv.toggleHide = function () { uv = !uv, _m.each(hv, (function (e) { e.domElement.style.display = uv ? "none" : ""; })); }, dv.CLASS_AUTO_PLACE = "a", dv.CLASS_AUTO_PLACE_CONTAINER = "ac", dv.CLASS_MAIN = "main", dv.CLASS_CONTROLLER_ROW = "cr", dv.CLASS_TOO_TALL = "taller-than-window", dv.CLASS_CLOSED = "closed", dv.CLASS_CLOSE_BUTTON = "close-button", dv.CLASS_CLOSE_TOP = "close-top", dv.CLASS_CLOSE_BOTTOM = "close-bottom", dv.CLASS_DRAG = "drag", dv.DEFAULT_WIDTH = 245, dv.TEXT_CLOSED = "Close Controls", dv.TEXT_OPEN = "Open Controls", dv._keydownHandler = function (e) { "text" === document.activeElement.type || 72 !== e.which && 72 !== e.keyCode || dv.toggleHide(); }, Um.bind(window, "keydown", dv._keydownHandler, !1), _m.extend(dv.prototype, {
    add: function (e, t) { return gv(this, e, t, { factoryArgs: Array.prototype.slice.call(arguments, 2) }); }, addColor: function (e, t) { return gv(this, e, t, { color: !0 }); }, remove: function (e) { this.__ul.removeChild(e.__li), this.__controllers.splice(this.__controllers.indexOf(e), 1); var t = this; _m.defer((function () { t.onResize(); })); }, destroy: function () {
    if (this.parent)
        throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead."); this.autoPlace && cv.removeChild(this.domElement); var e = this; _m.each(this.__folders, (function (t) { e.removeFolder(t); })), Um.unbind(window, "keydown", dv._keydownHandler, !1), fv(this);
    }, addFolder: function (e) {
    if (void 0 !== this.__folders[e])
        throw new Error('You already have a folder in this GUI by the name "' + e + '"'); var t = { name: e, parent: this }; t.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]); var i = new dv(t); this.__folders[e] = i; var n = pv(this, i.domElement); return Um.addClass(n, "folder"), i;
    }, removeFolder: function (e) { this.__ul.removeChild(e.domElement.parentElement), delete this.__folders[e.name], this.load && this.load.folders && this.load.folders[e.name] && delete this.load.folders[e.name], fv(e); var t = this; _m.each(e.__folders, (function (t) { e.removeFolder(t); })), _m.defer((function () { t.onResize(); })); }, open: function () { this.closed = !1; }, close: function () { this.closed = !0; }, hide: function () { this.domElement.style.display = "none"; }, show: function () { this.domElement.style.display = ""; }, onResize: function () {
    var e = this.getRoot(); if (e.scrollable) {
        var t = Um.getOffset(e.__ul).top, i = 0;
        _m.each(e.__ul.childNodes, (function (t) { e.autoPlace && t === e.__save_row || (i += Um.getHeight(t)); })), window.innerHeight - t - 20 < i ? (Um.addClass(e.domElement, dv.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - 20 + "px") : (Um.removeClass(e.domElement, dv.CLASS_TOO_TALL), e.__ul.style.height = "auto");
    } e.__resize_handle && _m.defer((function () { e.__resize_handle.style.height = e.__ul.offsetHeight + "px"; })), e.__closeButton && (e.__closeButton.style.width = e.width + "px");
    }, onResizeDebounced: _m.debounce((function () { this.onResize(); }), 50), remember: function () {
    if (_m.isUndefined(sv) && ((sv = new rv).domElement.innerHTML = tv), this.parent)
        throw new Error("You can only call remember on a top level GUI."); var e = this; _m.each(Array.prototype.slice.call(arguments), (function (t) { 0 === e.__rememberedObjects.length && _v(e), -1 === e.__rememberedObjects.indexOf(t) && e.__rememberedObjects.push(t); })), this.autoPlace && Tv(this, this.width);
    }, getRoot: function () {
    for (var e = this; e.parent;)
        e = e.parent; return e;
    }, getSaveObject: function () { var e = this.load; return e.closed = this.closed, this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {}), e.remembered[this.preset] = Mv(this)), e.folders = {}, _m.each(this.__folders, (function (t, i) { e.folders[i] = t.getSaveObject(); })), e; }, save: function () { this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = Mv(this), mv(this, !1), this.saveToLocalStorageIfPossible(); }, saveAs: function (e) { this.load.remembered || (this.load.remembered = {}, this.load.remembered[av] = Mv(this, !0)), this.load.remembered[e] = Mv(this), this.preset = e, bv(this, e, !0), this.saveToLocalStorageIfPossible(); }, revert: function (e) { _m.each(this.__controllers, (function (t) { this.getRoot().load.remembered ? vv(e || this.getRoot(), t) : t.setValue(t.initialValue), t.__onFinishChange && t.__onFinishChange.call(t, t.getValue()); }), this), _m.each(this.__folders, (function (e) { e.revert(e); })), e || mv(this.getRoot(), !1); }, listen: function (e) { var t = 0 === this.__listening.length; this.__listening.push(e), t && function e(t) { 0 !== t.length && nv.call(window, (function () { e(t); })); _m.each(t, (function (e) { e.updateDisplay(); })); } (this.__listening); }, updateDisplay: function () { _m.each(this.__controllers, (function (e) { e.updateDisplay(); })), _m.each(this.__folders, (function (e) { e.updateDisplay(); })); }
    });
    var Av = dv, Sv = { uniforms: { tDiffuse: { value: null }, offset: { value: 1 }, darkness: { value: 1 } }, vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform float offset;", "uniform float darkness;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "\tvec4 texel = texture2D( tDiffuse, vUv );", "\tvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );", "\tgl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );", "}"].join("\n") }, Ev = { shaderID: "luminosityHighPass", uniforms: { tDiffuse: { value: null }, luminosityThreshold: { value: 1 }, smoothWidth: { value: 1 }, defaultColor: { value: new yn(0) }, defaultOpacity: { value: 0 } }, vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform sampler2D tDiffuse;", "uniform vec3 defaultColor;", "uniform float defaultOpacity;", "uniform float luminosityThreshold;", "uniform float smoothWidth;", "varying vec2 vUv;", "void main() {", "\tvec4 texel = texture2D( tDiffuse, vUv );", "\tvec3 luma = vec3( 0.299, 0.587, 0.114 );", "\tfloat v = dot( texel.xyz, luma );", "\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );", "\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );", "\tgl_FragColor = mix( outputColor, texel, alpha );", "}"].join("\n") }, Pv = function (e, t, i, n) {
    Af.call(this), this.strength = void 0 !== t ? t : 1, this.radius = i, this.threshold = n, this.resolution = void 0 !== e ? new Ut(e.x, e.y) : new Ut(256, 256), this.clearColor = new yn(0, 0, 0); var r = { minFilter: Ae, magFilter: Ae, format: ze }; this.renderTargetsHorizontal = [], this.renderTargetsVertical = [], this.nMips = 5; var a = Math.round(this.resolution.x / 2), o = Math.round(this.resolution.y / 2); this.renderTargetBright = new Jt(a, o, r), this.renderTargetBright.texture.name = "UnrealBloomPass.bright", this.renderTargetBright.texture.generateMipmaps = !1; for (var s = 0; s < this.nMips; s++) {
        var l = new Jt(a, o, r);
        l.texture.name = "UnrealBloomPass.h" + s, l.texture.generateMipmaps = !1, this.renderTargetsHorizontal.push(l);
        var c = new Jt(a, o, r);
        c.texture.name = "UnrealBloomPass.v" + s, c.texture.generateMipmaps = !1, this.renderTargetsVertical.push(c), a = Math.round(a / 2), o = Math.round(o / 2);
    } void 0 === Ev && console.error("UnrealBloomPass relies on LuminosityHighPassShader"); var u = Ev; this.highPassUniforms = xr.clone(u.uniforms), this.highPassUniforms.luminosityThreshold.value = n, this.highPassUniforms.smoothWidth.value = .01, this.materialHighPassFilter = new Tr({ uniforms: this.highPassUniforms, vertexShader: u.vertexShader, fragmentShader: u.fragmentShader, defines: {} }), this.separableBlurMaterials = []; var h = [3, 5, 7, 9, 11]; for (a = Math.round(this.resolution.x / 2), o = Math.round(this.resolution.y / 2), s = 0; s < this.nMips; s++)
            this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[s])), this.separableBlurMaterials[s].uniforms.texSize.value = new Ut(a, o), a = Math.round(a / 2), o = Math.round(o / 2); this.compositeMaterial = this.getCompositeMaterial(this.nMips), this.compositeMaterial.uniforms.blurTexture1.value = this.renderTargetsVertical[0].texture, this.compositeMaterial.uniforms.blurTexture2.value = this.renderTargetsVertical[1].texture, this.compositeMaterial.uniforms.blurTexture3.value = this.renderTargetsVertical[2].texture, this.compositeMaterial.uniforms.blurTexture4.value = this.renderTargetsVertical[3].texture, this.compositeMaterial.uniforms.blurTexture5.value = this.renderTargetsVertical[4].texture, this.compositeMaterial.uniforms.bloomStrength.value = t, this.compositeMaterial.uniforms.bloomRadius.value = .1, this.compositeMaterial.needsUpdate = !0; this.compositeMaterial.uniforms.bloomFactors.value = [1, .8, .6, .4, .2], this.bloomTintColors = [new Wt(1, 1, 1), new Wt(1, 1, 1), new Wt(1, 1, 1), new Wt(1, 1, 1), new Wt(1, 1, 1)], this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors, void 0 === Mf && console.error("UnrealBloomPass relies on CopyShader"); var d = Mf; this.copyUniforms = xr.clone(d.uniforms), this.copyUniforms.opacity.value = 1, this.materialCopy = new Tr({ uniforms: this.copyUniforms, vertexShader: d.vertexShader, fragmentShader: d.fragmentShader, blending: C, depthTest: !1, depthWrite: !1, transparent: !0 }), this.enabled = !0, this.needsSwap = !1, this.oldClearColor = new yn, this.oldClearAlpha = 1, this.basic = new An, this.fsQuad = new Af.FullScreenQuad(null);
    };
    Pv.prototype = Object.assign(Object.create(Af.prototype), {
    constructor: Pv, dispose: function () {
    for (var e = 0; e < this.renderTargetsHorizontal.length; e++)
        this.renderTargetsHorizontal[e].dispose(); for (e = 0; e < this.renderTargetsVertical.length; e++)
            this.renderTargetsVertical[e].dispose(); this.renderTargetBright.dispose();
    }, setSize: function (e, t) {
    var i = Math.round(e / 2), n = Math.round(t / 2); this.renderTargetBright.setSize(i, n); for (var r = 0; r < this.nMips; r++)
        this.renderTargetsHorizontal[r].setSize(i, n), this.renderTargetsVertical[r].setSize(i, n), this.separableBlurMaterials[r].uniforms.texSize.value = new Ut(i, n), i = Math.round(i / 2), n = Math.round(n / 2);
    }, render: function (e, t, i, n, r) {
    this.oldClearColor.copy(e.getClearColor()), this.oldClearAlpha = e.getClearAlpha(); var a = e.autoClear; e.autoClear = !1, e.setClearColor(this.clearColor, 0), r && e.state.buffers.stencil.setTest(!1), this.renderToScreen && (this.fsQuad.material = this.basic, this.basic.map = i.texture, e.setRenderTarget(null), e.clear(), this.fsQuad.render(e)), this.highPassUniforms.tDiffuse.value = i.texture, this.highPassUniforms.luminosityThreshold.value = this.threshold, this.fsQuad.material = this.materialHighPassFilter, e.setRenderTarget(this.renderTargetBright), e.clear(), this.fsQuad.render(e); for (var o = this.renderTargetBright, s = 0; s < this.nMips; s++)
        this.fsQuad.material = this.separableBlurMaterials[s], this.separableBlurMaterials[s].uniforms.colorTexture.value = o.texture, this.separableBlurMaterials[s].uniforms.direction.value = Pv.BlurDirectionX, e.setRenderTarget(this.renderTargetsHorizontal[s]), e.clear(), this.fsQuad.render(e), this.separableBlurMaterials[s].uniforms.colorTexture.value = this.renderTargetsHorizontal[s].texture, this.separableBlurMaterials[s].uniforms.direction.value = Pv.BlurDirectionY, e.setRenderTarget(this.renderTargetsVertical[s]), e.clear(), this.fsQuad.render(e), o = this.renderTargetsVertical[s]; this.fsQuad.material = this.compositeMaterial, this.compositeMaterial.uniforms.bloomStrength.value = this.strength, this.compositeMaterial.uniforms.bloomRadius.value = this.radius, this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors, e.setRenderTarget(this.renderTargetsHorizontal[0]), e.clear(), this.fsQuad.render(e), this.fsQuad.material = this.materialCopy, this.copyUniforms.tDiffuse.value = this.renderTargetsHorizontal[0].texture, r && e.state.buffers.stencil.setTest(!0), this.renderToScreen ? (e.setRenderTarget(null), this.fsQuad.render(e)) : (e.setRenderTarget(i), this.fsQuad.render(e)), e.setClearColor(this.oldClearColor, this.oldClearAlpha), e.autoClear = a;
    }, getSeperableBlurMaterial: function (e) { return new Tr({ defines: { KERNEL_RADIUS: e, SIGMA: e }, uniforms: { colorTexture: { value: null }, texSize: { value: new Ut(.5, .5) }, direction: { value: new Ut(.5, .5) } }, vertexShader: "varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}", fragmentShader: "#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}" }); }, getCompositeMaterial: function (e) { return new Tr({ defines: { NUM_MIPS: e }, uniforms: { blurTexture1: { value: null }, blurTexture2: { value: null }, blurTexture3: { value: null }, blurTexture4: { value: null }, blurTexture5: { value: null }, dirtTexture: { value: null }, bloomStrength: { value: 1 }, bloomFactors: { value: null }, bloomTintColors: { value: null }, bloomRadius: { value: 0 } }, vertexShader: "varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}", fragmentShader: "varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}" }); }
    }), Pv.BlurDirectionX = new Ut(1, 0), Pv.BlurDirectionY = new Ut(0, 1);
    var Cv = { uniforms: { tDiffuse: { type: "t", value: null }, resolution: { value: new Ut(window.innerWidth * window.devicePixelRatio, window.innerHeight * window.devicePixelRatio) }, power: { value: .5 }, maxDistortion: { value: .5 }, iterations: { value: 12 } }, vertexShader: "\n    \n        varying vec2 vUv;\n    \n        void main() {\n    \n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    \n        }\n        ", fragmentShader: "\n\t\t\tuniform sampler2D tDiffuse;\n\t\t\tuniform vec2 resolution;\n\t\t\tuniform float maxDistortion;\n\t\t\tuniform int iterations;\n\t\t\tuniform float power;\n\n\t\t\tvec2 barrelDistortion(vec2 coord, float amt) {\n\t\t\t\tvec2 cc = coord - 0.5;\n\t\t\t\tfloat dist = dot(cc, cc);\n\t\t\t\treturn coord + cc * dist * amt;\n\t\t\t}\n\n\t\t\tfloat sat( float t )\n\t\t\t{\n\t\t\t\treturn clamp( t, 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tfloat linterp( float t ) {\n\t\t\t\treturn sat( 1.0 - abs( 2.0*t - 1.0 ) );\n\t\t\t}\n\n\t\t\tfloat remap( float t, float a, float b ) {\n\t\t\t\treturn sat( (t - a) / (b - a) );\n\t\t\t}\n\n\t\t\tvec4 spectrum_offset( float t ) {\n\t\t\t\tvec4 ret;\n\t\t\t\tfloat lo = step(t,float(power));\n\t\t\t\tfloat hi = 1.0-lo;\n\t\t\t\tfloat w = linterp( remap( t, 1.0/6.0, 5.0/6.0 ) );\n\t\t\t\tret = vec4(lo,1.0,hi, 1.) * vec4(1.0-w, w, 1.0-w, 1.);\n\n\t\t\t\treturn pow( ret, vec4(1.0/2.2) );\n\t\t\t}\n\n\n\t\t\tvoid main()\n\t\t\t{\n\t\t\t\tvec2 uv=(gl_FragCoord.xy/resolution.xy);\n\n\t\t\t\tvec4 sumcol = vec4(0.0);\n\t\t\t\tvec4 sumw = vec4(0.0);\n\t\t\t\t\n        float reci_num_iter_f = 1.0 / float(iterations);\n        \n\t\t\t\tfor ( int i=0; i<20;++i )\n\t\t\t\t{\n\t\t\t\t\tfloat t = float(i) * reci_num_iter_f;\n\t\t\t\t\tvec4 w = spectrum_offset( t );\n\t\t\t\t\tsumw += w;\n\t\t\t\t\tsumcol += w * texture2D( tDiffuse, barrelDistortion(uv, .6 * maxDistortion*t ) );\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = sumcol / sumw;\n\t\t\t}\n      " }, Lv = { uniforms: { tDiffuse: { value: null }, h: { value: 1 / 512 } }, vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform sampler2D tDiffuse;", "uniform float h;", "varying vec2 vUv;", "void main() {", "\tvec4 sum = vec4( 0.0 );", "\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;", "\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;", "\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;", "\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;", "\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;", "\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;", "\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;", "\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;", "\tgl_FragColor = sum;", "}"].join("\n") }, Rv = { uniforms: { tDiffuse: { value: null }, v: { value: 1 / 512 } }, vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform sampler2D tDiffuse;", "uniform float v;", "varying vec2 vUv;", "void main() {", "\tvec4 sum = vec4( 0.0 );", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;", "\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;", "\tgl_FragColor = sum;", "}"].join("\n") }, Iv = Iv || {};
    Iv.SsLensFlare = {}, Iv.SsLensFlare.baseUrl = "assets/effects/ssLensFlare/", Iv.SsLensFlare.Passes = function (e, t, i, n) { var r = []; this.passes = r; var o = Iv.SsLensFlare.baseUrl, s = new Rf(t); r.push(s); s = new Sf(Iv.SsLensFlare.ThresholdShader); r.push(s), (s = new Sf(Iv.SsLensFlare.FeatureGenerationShader)).uniforms.tLensColor.value = qt.loadTexture(a.resourcesDomain + o + "lenscolor.png"), s.uniforms.textureSize.value.set(i.width, i.height), s.uniforms.uGhostDispersal.value = .236, s.uniforms.uHaloWidth.value = 0, s.uniforms.uDistortion.value = 29.57, r.push(s), (s = new Sf(Lv)).uniforms.h.value = .002, r.push(s), (s = new Sf(Rv)).uniforms.v.value = .006, r.push(s), (s = new Sf(Lv)).uniforms.h.value = .002, r.push(s), (s = new Sf(Rv)).uniforms.v.value = .006, r.push(s), this.addPassesTo = function (e) { r.forEach((function (t) { e.addPass(t); })); }, this.getPasses = function () { return this.passes; }; }, Iv.SsLensFlare.BlendPass = function (e) { var t = []; this.passes = t; var i = Iv.SsLensFlare.baseUrl, n = new Sf(Iv.SsLensFlare.BlendShader); n.uniforms.tLensDirt.value = qt.loadTexture(a.resourcesDomain + i + "lensdirt.png"), n.uniforms.tLensStar.value = qt.loadTexture(a.resourcesDomain + i + "lensstar.png"), n.uniforms.tLensColor.value = e, t.push(n), this.update = function (e) { var t = 6 * (e.rotation.y + e.rotation.z), i = (new li).makeTranslation(-.5, -.5, 0), r = (new li).makeRotationZ(t), a = (new li).makeTranslation(.5, .5, 0); n.uniforms.tLensStarMatrix.value.copy(a).multiply(r).multiply(i); }, this.addPassesTo = function (e) { t.forEach((function (t) { e.addPass(t); })); }; }, Iv.SsLensFlare.ThresholdShader = { uniforms: { tDiffuse: { type: "t", value: null }, uScale: { type: "v4", value: new Kt(10, 10, 10, 1) }, uBias: { type: "v4", value: new Kt(-.9, -.9, -.9, 0) } }, vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform sampler2D tDiffuse;", "varying vec2 vUv;", "uniform vec4 uScale;", "uniform vec4 uBias;", "void main() {", "gl_FragColor\t= max(vec4(0.0), texture2D(tDiffuse, vUv) + uBias) * uScale;", "}"].join("\n") }, Iv.SsLensFlare.FeatureGenerationShader = { uniforms: { tDiffuse: { type: "t", value: null }, tLensColor: { type: "t", value: null }, textureSize: { type: "v2", value: new Ut(window.innerWidth, window.innerHeight) }, uGhostDispersal: { type: "f", value: .236 }, uHaloWidth: { type: "f", value: 0 }, uDistortion: { type: "f", value: 29.57 } }, vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["#define MAX_GHOSTS 4", "uniform sampler2D tDiffuse;", "uniform sampler2D tLensColor;", "varying vec2\tvUv;", "uniform vec2\ttextureSize;", "uniform float\tuGhostDispersal;", "uniform float\tuHaloWidth;", "uniform float\tuDistortion;", "vec4 textureDistorted(", "\tin sampler2D\ttex,", "\tin vec2\t\tuv,", "\tin vec2\t\tdirection,", "\tin vec3\t\tdistortion ", ") {", "\treturn vec4(", "\t\ttexture2D(tex, uv + direction * distortion.r).r,", "\t\ttexture2D(tex, uv + direction * distortion.g).g,", "\t\ttexture2D(tex, uv + direction * distortion.b).b,", "\t\t1.0", "\t);", "}", "void main() {", "vec2 texcoord = -vUv + vec2(1.0);", "vec2 ghostVec = (vec2(0.5) - texcoord) * uGhostDispersal;", "for(int i = 0; i < MAX_GHOSTS; ++i){", "\tvec2 offset\t= fract(texcoord + ghostVec * float(i));", "\tfloat weight\t= length(vec2(0.5) - offset) / length(vec2(0.5));", "\tweight\t\t= pow(1.0 - weight, 10.0);", "\tgl_FragColor\t+= texture2D(tDiffuse, offset)* weight;", "}", "float distance2Center\t= length(vec2(0.5) - vUv) / length(vec2(0.5));", "vec2 uvLensColor\t= vec2(distance2Center, 1.0);", "gl_FragColor\t\t*= texture2D(tLensColor, uvLensColor);", "vec2 texelSize = 1.0 / textureSize;", "vec2 haloVec\t= normalize(ghostVec) * uHaloWidth;", "vec3 distortion= vec3(-texelSize.x * uDistortion, 0.0, texelSize.x * uDistortion);", "float weight\t= length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));", "weight\t\t= pow(1.0 - weight, 5.0);", "gl_FragColor\t+= textureDistorted(", "\ttDiffuse,", "\tfract(texcoord + haloVec),", "\tnormalize(ghostVec),", "\tdistortion", ") * weight;", "}"].join("\n") }, Iv.SsLensFlare.BlendShader = { uniforms: { artefactScale: { type: "f", value: 9 }, mixRatio: { type: "f", value: .5 }, opacity: { type: "f", value: 2 }, tDiffuse: { type: "t", value: null }, tLensDirt: { type: "t", value: null }, tLensColor: { type: "t", value: null }, tLensStar: { type: "t", value: null }, tLensStarMatrix: { type: "m4", value: (new li).identity() } }, vertexShader: ["varying vec2 vUv;", "uniform sampler2D tLensDirt; // full resolution dirt texture", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), fragmentShader: ["uniform sampler2D tDiffuse;", "uniform sampler2D tLensDirt;", "uniform sampler2D tLensColor;", "uniform sampler2D tLensStar;", "uniform mat4      tLensStarMatrix;", "varying vec2\tvUv;", "uniform float\tartefactScale;", "uniform float\topacity;", "uniform float\tmixRatio;", "void main() {", "vec4 artefactColor\t= texture2D(tLensDirt, vUv);", "vec2 lensStarUv\t= (tLensStarMatrix * vec4(vUv.x, vUv.y,0.0,1.0)).xy;", "artefactColor\t\t+= texture2D(tLensStar, lensStarUv);", "artefactColor\t\t*= vec4(vec3(artefactScale), 1.0);", "vec4 texelLensColor\t= texture2D(tLensColor, vUv) * artefactColor;", "vec4 texelDiffuse\t= texture2D(tDiffuse, vUv);", "gl_FragColor\t\t= opacity * mix(texelDiffuse, texelLensColor, mixRatio );", "}"].join("\n") };
    var Ov = Iv, Dv = function (e, t, i, n) { i = i || new Av; var r, a = (n = n || {}).features || {}, o = n.blend || {}, s = n.blur || {}, l = i.addFolder("LensFlare"), c = e.passes[1].uniforms, u = e.passes[2].uniforms, h = e.passes[3].uniforms, d = e.passes[4].uniforms, p = e.passes[5].uniforms, f = e.passes[6].uniforms, m = t.passes[0].uniforms, v = { threshold: n.threshold || .99, enabled: n.enabled, uGhostDispersal: a.uGhostDispersal || .236, uHaloWidth: a.uHaloWidth || 0, uDistortion: a.uDistortion || 29.57, artefactScale: o.artefactScale || 9, blendRatio: o.blendRatio || .48, opacity: o.opacity || 2, blendLensOnly: function () { v.blendRatio = 1, g(); }, blendDefault: function () { v.blendRatio = .5, g(); }, horizontalBlur: s.horizontalBlur || .002, verticalBlur: s.verticalBlur || .006, blurNone: function () { v.horizontalBlur = 0, v.verticalBlur = 0, g(); }, blurLow: function () { v.horizontalBlur = .002, v.verticalBlur = .006, g(); }, blurHigh: function () { v.horizontalBlur = .006, v.verticalBlur = .01, g(); } }, g = function () { n.enabled = v.enabled; var e = 1 / (1 - v.threshold), t = -v.threshold; c.uScale.value.set(e, e, e, 1), c.uBias.value.set(t, t, t, 0), u.uGhostDispersal.value = v.uGhostDispersal, u.uHaloWidth.value = v.uHaloWidth, u.uDistortion.value = v.uDistortion, h.h.value = v.horizontalBlur, d.v.value = v.verticalBlur, p.h.value = v.horizontalBlur, f.v.value = v.verticalBlur, m.artefactScale.value = v.artefactScale, m.mixRatio.value = v.blendRatio, m.opacity.value = v.opacity; }; g(), l.add(v, "threshold", 0, 1).step(.001).listen().onChange(g), l.add(v, "enabled").listen().onChange(g), (r = l).add({ Features: "Features Settings" }, "Features"), r.add(v, "uGhostDispersal", 0, 1).step(.001).listen().onChange(g), r.add(v, "uHaloWidth", 0, 2).step(.001).listen().onChange(g), r.add(v, "uDistortion", 0, 200).step(.01).listen().onChange(g), (r = l).add({ Blur: "Blur Settings" }, "Blur"), r.add(v, "horizontalBlur", 0, .01).listen().onChange(g), r.add(v, "verticalBlur", 0, .01).listen().onChange(g), r.add(v, "blurNone"), r.add(v, "blurLow"), r.add(v, "blurHigh"), (r = l).add({ Blend: "Blend Settings" }, "Blend"), r.add(v, "blendRatio", 0, 1).listen().onChange(g), r.add(v, "artefactScale", 0, 50).listen().onChange(g), r.add(v, "opacity", 0, 4).step(.01).listen().onChange(g), r.add(v, "blendLensOnly"), r.add(v, "blendDefault"); }, Fv = function () {
    function e(t, i, n) { var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [], a = arguments.length > 4 ? arguments[4] : void 0, o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : {}; c()(this, e), this.config = t, this.enabled = !1, this.scene = i, this.camera = n, this.renderer = a, this.disabledByDevicePerformance = !1, this.sizeParams = r, this.appliedEffects = o, this.effectPasses = [], this.directlyDisabled = !1, this.createdEffectsPull = [], this.baseEffectsPull = [], this.effectsCreated = !1, this.enableEffects = !1, this.gui = null, this.renderTargetParams = {}; } return h()(e, [{ key: "destroy", value: function () { this.config = null, this.enabled = null, this.scene = null, this.camera = null, this.renderer = null, this.disabledByDevicePerformance = null, this.sizeParams = null, this.appliedEffects = null, this.effectPasses = null, this.directlyDisabled = null, this.createdEffectsPull = null, this.baseEffectsPull = null, this.effectsCreated = null, this.enableEffects = null, this.gui = null, this.renderTargetParams = null; } }, { key: "setSize", value: function (e, t) { this.sizeParams = [e, t], [this.composerLens, this.composerBlend, this.effectComposer].filter(Boolean).forEach((function (i) { return i.setSize(e, t); })), this.chromaticAberrationPass && (this.chromaticAberrationPass.uniforms.resolution.value = new Ut(this.sizeParams[0], this.sizeParams[1])); } }, { key: "isDisabledByPerformance", value: function () { return this.disabledByDevicePerformance; } }, { key: "disabledByPerformance", value: function (e) { this.disabledByDevicePerformance = e, this.destroyGUI(); } }, { key: "applyBaseEffects", value: function () { var e = this.appliedEffects.composer; e && (this.baseEffectsPull.push((function (t) { e.render(t); })), this.createdEffectsPull.push((function (t) { e.render(t); }))); } }, { key: "changeMainComposer", value: function (e) { this.baseEffectsPull = [], this.baseEffectsPull.push((function (t) { e.render(t); })); } }, {
    key: "applyPostEffects", value: function () {
    if (!this.isDisabledByPerformance())
        if (this.effectsCreated && this.createdEffectsPull.length > 0)
            this.turnOnEffects();
        else {
            this._createInnerComposer(), this._createGUI(), this._makeExposureEffect(), this._makeBloomEffect(), this._makeVignetteEffect(), this._makeChromaticEffect(), this._makeLens();
            var e = this.config ? this.config.postEffects : {}, t = this.__getConfig(e, "enabled", !1);
            this.effectsCreated = !0, this.enableEffects = t, t || this.turnOffEffects(!1, !0);
        }
    }
    }, { key: "switchComposerEffectPassesEnabled", value: function (e) { this.directlyDisabled || this.effectPasses.forEach((function (t) { return t.enabled = e; })); } }, {
    key: "turnOnEffects", value: function () {
    var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; if (!this.isDisabledByPerformance()) {
        if (this.gui.domElement.style.display = (this.config.gui || {}).enabled ? "block" : "none", this.directlyDisabled) {
            if (!e)
                return;
            this.directlyDisabled = !1;
        }
        this.enableEffects = !0;
    }
    }
    }, { key: "turnOffEffects", value: function () { var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0], t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.disabledByDevicePerformance || (e && this.gui && (this.gui.domElement.style.display = "none"), t && (this.directlyDisabled = !0), this.enableEffects && (this.enableEffects = !1)); } }, { key: "destroyEffects", value: function () { this.enableEffects = !1, this.createdEffectsPull = [], this.effectPasses = []; } }, { key: "destroyGUI", value: function () { this.gui && this.gui.destroy(); } }, { key: "getRenderTarget", value: function () { return this.getLensConfig().enabled ? this.composerBlend.writeBuffer : this.renderTargetEffects; } }, { key: "getLensConfig", value: function () { return this.lensConfig ? this.lensConfig : this.lensConfig = this.config && this.config.postEffects && this.config.postEffects.lensFlare && this.config.postEffects.lensFlare.hasOwnProperty("enabled") ? this.config.postEffects.lensFlare : { enabled: !0 }; } }, { key: "_makeLens", value: function () { var e = this, t = this.renderTargetEffects, i = this.getLensConfig(), n = new Jt(t.width / 2, t.height / 2, { minFilter: Ae, magFilter: Ae, format: Ue }); this.composerLens = new Cf(this.renderer, n), this.createdEffectsPull.push(function (e) { i.enabled && this.composerLens.render(e); }.bind(this)); var r = new Ov.SsLensFlare.Passes(this.renderer, t, n); r.addPassesTo(this.composerLens); var a = new Cf(this.renderer); this.composerBlend = a; var o = new Rf(t.texture); a.addPass(o); var s = new Ov.SsLensFlare.BlendPass(n); s.addPassesTo(a), this.createdEffectsPull.push((function () { i.enabled && s.update(e.camera.threeCamera); })), a.addPass(new Sf(Mf)), this.createdEffectsPull.push((function (e) { i.enabled && a.render(e); })), r.getPasses().forEach((function (t) { e.effectPasses.push(t); })), Dv(r, s, this.gui, i); } }, { key: "_createInnerComposer", value: function () { var e = this.appliedEffects, t = e.effectsRenderTarget, i = e.renderPass, n = { format: ze, stencilBuffer: !1 }, r = this.renderTargetEffects = new Jt(this.sizeParams[0], this.sizeParams[1], n), a = this.effectComposer = new Cf(this.renderer, r); a.addPass(new Rf(t)), a.addPass(i), a.addPass(this.appliedEffects.taaRenderPass), this.createdEffectsPull.push((function (e) { a.render(e); })); } }, { key: "__getConfig", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null; return e.hasOwnProperty(t) ? e[t] : i; } }, { key: "_makeChromaticEffect", value: function () { var e = this; this.chromaticAberrationPass = new Sf(Cv); var t = this.config ? this.config.postEffects.chromaticAberration : {}; this.chromaticAberrationPass.uniforms.resolution.value = new Ut(this.sizeParams[0], this.sizeParams[1]); var i = this.__getConfig(t, "iterations", 12), n = this.__getConfig(t, "maxDistortion", .23), r = this.__getConfig(t, "power", .2), a = this.__getConfig(t, "enabled", !0); this.effectComposer.addPass(this.chromaticAberrationPass), this.effectComposer.addPass(new Sf(Mf)), this.effectComposer.addPass(new Sf(Mf)); var o = this.gui.addFolder("chromaticAbberation"); o.add({ enable: a }, "enable").onChange((function () { e.chromaticAberrationPass.enabled = !e.chromaticAberrationPass.enabled; })), this.chromaticAberrationPass.enabled = a, o.add({ iterations: i }, "iterations", 0, 20).step(1).onChange((function (t) { e.chromaticAberrationPass.uniforms.iterations.value = Number(t); })), this.chromaticAberrationPass.uniforms.iterations.value = i, o.add({ distortion: n }, "distortion", 0, 2).step(.001).onChange((function (t) { e.chromaticAberrationPass.uniforms.maxDistortion.value = t; })), this.chromaticAberrationPass.uniforms.maxDistortion.value = n, o.add({ offset: r }, "offset", 0, 1).step(.001).onChange((function (t) { e.chromaticAberrationPass.uniforms.power.value = t; })), this.chromaticAberrationPass.uniforms.power.value = r; } }, { key: "_makeBloomEffect", value: function () { var e = this.config ? this.config.postEffects.bloom : {}, t = this.__getConfig(e, "strength", .45), i = this.__getConfig(e, "radius", .2), n = this.__getConfig(e, "threshold", .99), r = this.__getConfig(e, "enabled", !0), a = new Pv(new Ut(this.sizeParams[0], this.sizeParams[1]), t, i, n); this.effectPasses.push(a), this.effectComposer.addPass(a), this.effectComposer.addPass(new Sf(Mf)); var o = this.gui.addFolder("bloom"); o.add({ enable: r }, "enable").onChange((function () { a.enabled = !a.enabled; })), a.enabled = r, o.add({ bloomThreshold: n }, "bloomThreshold", 0, 1).step(.001).onChange((function (e) { a.threshold = e; })), a.threshold = n, o.add({ bloomStrength: t }, "bloomStrength", 0, 3).step(.001).onChange((function (e) { a.strength = e; })), a.strength = t, o.add({ bloomRadius: i }, "bloomRadius", 0, 1).step(.001).onChange((function (e) { a.radius = e; })), a.radius = i; } }, { key: "_makeExposureEffect", value: function () { var e = this, t = this.config.postEffects.exposure, i = this.isDisabledByPerformance() ? 1 : t || 1; this.gui.add({ exposure: i }, "exposure", .1, 2).step(.001).onChange((function (t) { e.renderer.toneMappingExposure = t; })), this.renderer.toneMappingExposure = i; } }, { key: "_makeVignetteEffect", value: function () { var e = this.config ? this.config.postEffects.vignette : {}, t = this.__getConfig(e, "darkness", 1.1), i = this.__getConfig(e, "offset", 1), n = this.__getConfig(e, "enabled", !0), r = new Sf(Sv); this.effectComposer.addPass(r), this.effectPasses.push(r); var a = this.gui.addFolder("vignette"); a.add({ enable: n }, "enable").onChange((function () { r.enabled = !r.enabled; })), r.enabled = n, a.add({ darkness: t }, "darkness", 0, 2).step(.01).onChange((function (e) { r.uniforms.darkness.value = e; })), r.uniforms.darkness.value = t, a.add({ offset: i }, "offset", 0, 2).step(.01).onChange((function (e) { r.uniforms.offset.value = e; })), r.uniforms.offset.value = i; } }, {
    key: "_createGUI", value: function () {
    var e = this; this.gui = new Av, this.gui.domElement.style.top = "225px", this.gui.domElement.style.width = "245px", (this.config.gui || {}).enabled || (this.gui.domElement.style.display = "none"); var t = this.config ? this.config.postEffects : {}, i = this.__getConfig(t, "enabled", !1); this.gui.add({ enableEffects: i }, "enableEffects").onChange((function () {
    if (e.directlyDisabled)
        return e.turnOnEffects(!0); e.turnOffEffects(!1, !0);
    }));
    }
    }, { key: "render", value: function (e) { this.enableEffects ? this.createdEffectsPull.forEach((function (t) { t(e); })) : this.baseEffectsPull.forEach((function (t) { t(e); })); } }]), e;
    } (), kv = function (e, t, i, n) { Af.call(this), this.scene = e, this.camera = t, this.sampleLevel = 4, this.unbiased = !0, this.clearColor = void 0 !== i ? i : 0, this.clearAlpha = void 0 !== n ? n : 0, void 0 === Mf && console.error("SSAARenderPass relies on CopyShader"); var r = Mf; this.copyUniforms = xr.clone(r.uniforms), this.copyMaterial = new Tr({ uniforms: this.copyUniforms, vertexShader: r.vertexShader, fragmentShader: r.fragmentShader, premultipliedAlpha: !0, transparent: !0, blending: C, depthTest: !1, depthWrite: !1 }), this.fsQuad = new Af.FullScreenQuad(this.copyMaterial); };
    kv.prototype = Object.assign(Object.create(Af.prototype), {
    constructor: kv, dispose: function () { this.sampleRenderTarget && (this.sampleRenderTarget.dispose(), this.sampleRenderTarget = null); }, setSize: function (e, t) { this.sampleRenderTarget && this.sampleRenderTarget.setSize(e, t); }, render: function (e, t, i) {
    this.sampleRenderTarget || (this.sampleRenderTarget = new Jt(i.width, i.height, { minFilter: Ae, magFilter: Ae, format: ze }), this.sampleRenderTarget.texture.name = "SSAARenderPass.sample"); var n = kv.JitterVectors[Math.max(0, Math.min(this.sampleLevel, 5))], r = e.autoClear; e.autoClear = !1; var a = e.getClearColor().getHex(), o = e.getClearAlpha(), s = 1 / n.length; this.copyUniforms.tDiffuse.value = this.sampleRenderTarget.texture; for (var l = i.width, c = i.height, u = 0; u < n.length; u++) {
        var h = n[u];
        this.camera.setViewOffset && this.camera.setViewOffset(l, c, .0625 * h[0], .0625 * h[1], l, c);
        var d = s;
        if (this.unbiased)
            d += 1 / 32 * ((u + .5) / n.length - .5);
        this.copyUniforms.opacity.value = d, e.setClearColor(this.clearColor, this.clearAlpha), e.setRenderTarget(this.sampleRenderTarget), e.clear(), e.render(this.scene, this.camera), e.setRenderTarget(this.renderToScreen ? null : t), 0 === u && (e.setClearColor(0, 0), e.clear()), this.fsQuad.render(e);
    } this.camera.clearViewOffset && this.camera.clearViewOffset(), e.autoClear = r, e.setClearColor(a, o);
    }
    });
    var Nv = function (e, t, i, n) { void 0 === kv && console.error("TAARenderPass relies on SSAARenderPass"), kv.call(this, e, t, i, n), this.sampleLevel = 0, this.accumulate = !1; };
    function Bv(e, t) {
    var i = Object.keys(e); if (Object.getOwnPropertySymbols) {
        var n = Object.getOwnPropertySymbols(e);
        t && (n = n.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable; }))), i.push.apply(i, n);
    } return i;
    }
    Nv.JitterVectors = kv.JitterVectors = [[[0, 0]], [[4, 4], [-4, -4]], [[-2, -6], [6, -2], [-6, 2], [2, 6]], [[1, -3], [-1, 3], [5, 1], [-3, -5], [-5, 5], [-7, -1], [3, 7], [7, -7]], [[1, 1], [-1, -3], [-3, 2], [4, -1], [-5, -2], [2, 5], [5, 3], [3, -5], [-2, 6], [0, -7], [-4, -6], [-6, 4], [-8, 0], [7, -4], [6, 7], [-7, -8]], [[-4, -7], [-7, -5], [-3, -5], [-5, -4], [-1, -4], [-2, -2], [-6, -1], [-4, 0], [-7, 1], [-1, 2], [-6, 3], [-3, 3], [-7, 6], [-3, 6], [-5, 7], [-1, 7], [5, -7], [1, -6], [6, -5], [4, -4], [2, -3], [7, -2], [1, -1], [4, -1], [2, 1], [6, 2], [0, 4], [4, 4], [2, 5], [7, 5], [5, 6], [3, 7]]], Nv.prototype = Object.assign(Object.create(kv.prototype), {
    constructor: Nv, render: function (e, t, i, n) {
    if (!this.accumulate)
        return kv.prototype.render.call(this, e, t, i, n), void (this.accumulateIndex = -1); var r = Nv.JitterVectors[5]; this.sampleRenderTarget || (this.sampleRenderTarget = new Jt(i.width, i.height, this.params), this.sampleRenderTarget.texture.name = "TAARenderPass.sample"), this.holdRenderTarget || (this.holdRenderTarget = new Jt(i.width, i.height, this.params), this.holdRenderTarget.texture.name = "TAARenderPass.hold"), this.accumulate && -1 === this.accumulateIndex && (kv.prototype.render.call(this, e, this.holdRenderTarget, i, n), this.accumulateIndex = 0); var a = e.autoClear; e.autoClear = !1; var o = 1 / r.length; if (this.accumulateIndex >= 0 && this.accumulateIndex < r.length) {
            this.copyUniforms.opacity.value = o, this.copyUniforms.tDiffuse.value = t.texture;
            for (var s = Math.pow(2, this.sampleLevel), l = 0; l < s; l++) {
                var c = r[this.accumulateIndex];
                if (this.camera.setViewOffset && this.camera.setViewOffset(i.width, i.height, .0625 * c[0], .0625 * c[1], i.width, i.height), e.setRenderTarget(t), e.clear(), e.render(this.scene, this.camera), e.setRenderTarget(this.sampleRenderTarget), 0 === this.accumulateIndex && e.clear(), this.fsQuad.render(e), this.accumulateIndex++ , this.accumulateIndex >= r.length)
                    break;
            }
            this.camera.clearViewOffset && this.camera.clearViewOffset();
        } var u = this.accumulateIndex * o; u > 0 && (this.copyUniforms.opacity.value = 1, this.copyUniforms.tDiffuse.value = this.sampleRenderTarget.texture, e.setRenderTarget(t), e.clear(), this.fsQuad.render(e)), u < 1 && (this.copyUniforms.opacity.value = 1 - u, this.copyUniforms.tDiffuse.value = this.holdRenderTarget.texture, e.setRenderTarget(t), 0 === u && e.clear(), this.fsQuad.render(e)), e.autoClear = a;
    }
    });
    var Gv = "MSAA", Hv = "TAA", Uv = "FXAA", zv = "NONE", Vv = { mobile: "FXAA", tablet: "TAA2", ios: "TAA2", default: "MSAA8", fallback: "FXAA", panorama: void 0 }, jv = function () {
    function e(t, i, n) {
    c()(this, e), this.config = t, this.config.postEffects.antiAliasing = function (e) {
    for (var t = 1; t < arguments.length; t++) {
        var i = null != arguments[t] ? arguments[t] : {};
        t % 2 ? Bv(Object(i), !0).forEach((function (t) { Sd()(e, t, i[t]); })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(i)) : Bv(Object(i)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(i, t)); }));
    } return e;
    } ({}, Vv, {}, this.config.postEffects.antiAliasing), this.canvasCtx = i, this.webGL2IsSupported = !1, this._checkWebGL2Support(), this.agentParams = n, this.defaultAA = this._getAADefaultMethod(), this.aaMethod = this.defaultAA;
    } return h()(e, [{ key: "initEffectComposer", value: function (e, t, i, n, r) { this.effectComposer = new Cf(e); var a = this._parseAntiAliasingMethod(); this._initAAEffects(this.effectComposer, t, i, r), n.renderPass = this.mainRenderPass, n.composer = this.effectComposer, this._updateEffectComposer(n, a, r); } }, { key: "setAAMethod", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.defaultAA, t = arguments.length > 1 ? arguments[1] : void 0, i = arguments.length > 2 ? arguments[2] : void 0, n = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; e = e.toUpperCase(), this.defaultAA = n ? e : this.defaultAA, this.aaMethod = e, this._updateEffectComposer(t, this._parseAntiAliasingMethod(), i), console.log("ACTIVE AA MODE:" + this.aaMethod); } }, { key: "setAAFallbackMethod", value: function (e, t) { console.log("SETTING FALLBACK AA MODE:" + this.config.postEffects.antiAliasing.fallback), this.setAAMethod(this.config.postEffects.antiAliasing.fallback, e, t, !0); } }, { key: "setSizes", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.width, i = e.height; this.fxaaRenderPass.material.uniforms.resolution.value.x = 1 / t, this.fxaaRenderPass.material.uniforms.resolution.value.y = 1 / i, this.effectComposer.setSize(t, i); } }, { key: "destroy", value: function () { } }, { key: "_updateEffectComposer", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = t.method, n = t.samplesCount, r = arguments.length > 2 ? arguments[2] : void 0; i === Uv ? this._enableFXAA(r) : i === Gv ? this.webGL2IsSupported ? this._enableMSAA(n) : this._enableTAA(2) || console.log("your browser doesn't supports WebGL 2.0 to enable this aaMethod") : i === Hv ? this._enableTAA(n) : i === zv && this._disableAntiAliasing(), e.effectsRenderTarget = this.effectComposer.renderTarget1, e.copyPass = this.copyRenderPass, e.fxaaPass = this.fxaaRenderPass, e.taaRenderPass = this.taaRenderPass; } }, { key: "_initAAEffects", value: function (e, t, i, n) { var r = { format: ze, stencilBuffer: !1 }; this.mainRenderPass = new Yf(t, i.threeCamera), this.fxaaRenderPass = new Sf(Xf), this.copyRenderPass = new Sf(Mf), this.taaRenderPass = new Nv(t, i.threeCamera), this.simpleRenderTarget = new Jt(n.width, n.height, r), this.multisampleRenderTarget = new ei(n.width, n.height, r), e.addPass(this.mainRenderPass), e.addPass(this.fxaaRenderPass), e.addPass(this.copyRenderPass), e.addPass(this.taaRenderPass); } }, { key: "_parseAntiAliasingMethod", value: function () { var e = this.aaMethod.match(/^([a-zA-Z]+)([0-9]*)/); return { method: e[1].toUpperCase(), samplesCount: parseInt(e[2] || "0") }; } }, { key: "_enableFXAA", value: function (e) { var t = e.width, i = e.height; this.mainRenderPass.enabled = !0, this.fxaaRenderPass.enabled = !0, this.copyRenderPass.enabled = !1, this.taaRenderPass.enabled = !1, this.fxaaRenderPass.material.uniforms.resolution.value.x = 1 / t, this.fxaaRenderPass.material.uniforms.resolution.value.y = 1 / i, this.effectComposer.reset(this.simpleRenderTarget); } }, { key: "_enableMSAA", value: function (e) { this.mainRenderPass.enabled = !0, this.copyRenderPass.enabled = !0, this.fxaaRenderPass.enabled = !1, this.taaRenderPass.enabled = !1, this.multisampleRenderTarget.samples = e, this.effectComposer.reset(this.multisampleRenderTarget); } }, { key: "_enableTAA", value: function (e) { this.copyRenderPass.enabled = !0, this.taaRenderPass.enabled = !0, this.mainRenderPass.enabled = !1, this.fxaaRenderPass.enabled = !1, this.taaRenderPass.unbiased = !0, this.taaRenderPass.sampleLevel = e, this.taaRenderPass.accumulate = !1, this.effectComposer.reset(this.simpleRenderTarget); } }, { key: "_disableAntiAliasing", value: function () { this.copyRenderPass.enabled = !0, this.mainRenderPass.enabled = !0, this.taaRenderPass.enabled = !1, this.fxaaRenderPass.enabled = !1, this.effectComposer.reset(this.simpleRenderTarget); } }, {
    key: "_checkWebGL2Support", value: function () {
    try {
        return window.WebGL2RenderingContext && this.canvasCtx.getContext("webgl2") ? (this.webGL2IsSupported = !0, this.webGL2IsSupported) : (console.log("your browser has no WebGL2 support"), this.webGL2IsSupported);
    }
        catch (e) {
            return console.log("your browser has no WebGL2 support"), this.webGL2IsSupported;
        }
    }
    }, { key: "_getAADefaultMethod", value: function () { return this.agentParams.isIOS ? this.config.postEffects.antiAliasing.ios : this.agentParams.isTablet ? this.config.postEffects.antiAliasing.tablet : this.agentParams.isMobile ? this.config.postEffects.antiAliasing.mobile : this.config.postEffects.antiAliasing.default; } }]), e;
    } (), Wv = function () {
    function e(t, i, n, r) { c()(this, e), this.config = t, this.scene = i, this.container = n, this.useWebGL2 = qf.isWebGL2Available(), this._updateSizeCallback = this.updateSize.bind(this), this.sizeDownsample = null, this.postprocessing = null, this.defaultAA = null, this.disableAA = null, this.aaMethod = null, this.postPorcessor = null, this.agentParams = r, this._initThreeRenderer(), this.updateSize(), this._ejectGLUtils(), document.addEventListener("DOMContentLoaded", this._updateSizeCallback, !1), window.addEventListener("resize", this._updateSizeCallback, !1), window.addEventListener("onorientationchange", this._updateSizeCallback, !1); } return h()(e, [{ key: "destroy", value: function () { document.removeEventListener("DOMContentLoaded", this._updateSizeCallback), window.removeEventListener("resize", this._updateSizeCallback), window.removeEventListener("onorientationchange", this._updateSizeCallback), this.threeRenderer.getContext().getExtension("WEBGL_lose_context").loseContext(), this.threeRenderer.dispose(), this.threeRenderer.domElement.remove(), this.destroyPostProcessingEffects(), this.postPorcessor && this.postPorcessor.destroy(), this.antiAliasingService && this.antiAliasingService.destroy(), this.config = null, this.scene = null, this.container = null, this.useWebGL2 = null, this._updateSizeCallback = null, this.sizeDownsample = null, this.postprocessing = null, this.defaultAA = null, this.aaMethod = null, this.postPorcessor = null, this.threeRenderer = null, this.antiAliasingService = null; } }, { key: "_ejectGLUtils", value: function () { this._utils = new Io(this.threeRenderer.getContext(), this.threeRenderer.extensions, this.threeRenderer.capabilities), this._textures = new gm(this.threeRenderer.getContext(), this.threeRenderer.extensions, this.threeRenderer.state, this.threeRenderer.properties, this.threeRenderer.capabilities, this._utils, this.threeRenderer.info); } }, {
    key: "_initThreeRenderer", value: function () {
    var e = { powerPreference: "high-performance", antialias: !1, alpha: !1, logarithmicDepthBuffer: !1, preserveDrawingBuffer: !0 }; if (this.useWebGL2) {
        var t = document.createElement("canvas"), i = t.getContext("webgl2", e);
        this.threeRenderer = new Vo({ canvas: t, context: i, preserveDrawingBuffer: !0 });
    }
    else
        this.threeRenderer = new Vo(e); this.threeRenderer.shadowMap.enabled = !1, this.threeRenderer.toneMapping = oe, this.threeRenderer.autoClear = !1, this.threeRenderer.gammaFactor = 2.2, this.threeRenderer.gammaOutput = !0, this.config.fog.enable && this.threeRenderer.setClearColor(this.scene.fog.color), this.threeRenderer.setPixelRatio(1), this.container.appendChild(this.threeRenderer.domElement), this.threeRenderer.shadowMap.enabled = !1, this.threeRenderer.shadowMap.type = b, this.config.maxAnisotropy = this.threeRenderer.capabilities.getMaxAnisotropy(), this.sizeDownsample = 1, this.postprocessing = null;
    }
    }, { key: "_setGLReadPixel", value: function (e) { var t, i = (t = {}, Sd()(t, e.UNPACK_FLIP_Y_WEBGL, e.getParameter(e.UNPACK_FLIP_Y_WEBGL)), Sd()(t, e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL)), t); return e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !1), e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !1), i; } }, { key: "_restoreGLReadPizel", value: function (e, t) { e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t[e.UNPACK_FLIP_Y_WEBGL]), e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL]); } }, { key: "copyTextureToTexture", value: function (e, t, i, n) { var r = this.threeRenderer.getContext(), a = this._setGLReadPixel(r); this.threeRenderer.copyTextureToTexture(e, t, i, n), this._restoreGLReadPizel(r, a); } }, { key: "copyTextureToCubeTexture", value: function (e, t, i, n, r) { var a = this.threeRenderer.getContext(), o = this._setGLReadPixel(a), s = this._utils.convert(n.format), l = this._utils.convert(n.type); this._textures.setTextureCube(n, 0), a.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X + e, r || 0, t.x, t.y, s, l, i), this._restoreGLReadPizel(a, o); } }, { key: "updateTextureMipmaps", value: function (e) { this._textures.updateRenderTargetMipmap({ texture: e, isWebGLRenderTargetCube: !1, width: e.userData.width, height: e.userData.height }); } }, { key: "setAAMethod", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.antiAliasingService.setAAMethod(e, this.postprocessing, { width: this.getWidth(), height: this.getHeight() }, t); } }, { key: "setPanoAAMethod", value: function () { this.antiAliasingService.setAAMethod(this.config.postEffects.antiAliasing.panorama || this.config.postEffects.antiAliasing.fallback || void 0, this.postprocessing, { width: this.getWidth(), height: this.getHeight() }); } }, { key: "setAAFallbackMethod", value: function () { this.antiAliasingService.setAAFallbackMethod(this.postprocessing, { width: this.getWidth(), height: this.getHeight() }); } }, { key: "updateSize", value: function () { var e = { width: this.getWidth(), height: this.getHeight() }; this.threeRenderer.setSize(e.width, e.height, !1), this.antiAliasingService && this.antiAliasingService.setSizes(e), this.postPorcessor && this.postPorcessor.setSize(e.width, e.height); } }, { key: "getWidth", value: function () { return this.container.offsetWidth * this.sizeDownsample * bd.getPixelRatio(); } }, { key: "getHeight", value: function () { return this.container.offsetHeight * this.sizeDownsample * bd.getPixelRatio(); } }, { key: "enablePostprocessing", value: function (e) { this.antiAliasingService = new jv(this.config, this.threeRenderer, this.agentParams), this.postprocessing = {}, this.antiAliasingService.initEffectComposer(this.threeRenderer, this.scene, e, this.postprocessing, { width: this.getWidth(), height: this.getHeight() }), this.postPorcessor ? this.postPorcessor.changeMainComposer(this.antiAliasingService.effectComposer) : (this.postPorcessor = new Fv(this.config, this.scene, e, [this.getWidth(), this.getHeight()], this.threeRenderer, this.postprocessing), this.postPorcessor.applyBaseEffects()); } }, { key: "_initBlurComposer", value: function () { this.mainRenderTarget = this.renderTargetSimple.clone(), this.mainComposer = new Cf(this.threeRenderer, this.mainRenderTarget), this.mainTexturePass = new Rf(this.antiAliasingService.effectComposer.readBuffer.texture), this.mainComposer.addPass(this.mainTexturePass), this.mainComposer.addPass(new Sf(Mf)); } }, { key: "enablePostProcessingEffects", value: function () { this.postPorcessor && this.postPorcessor.applyPostEffects(); } }, { key: "disablePostProcessingEffects", value: function () { this.postPorcessor && this.postPorcessor.turnOffEffects(); } }, { key: "destroyPostProcessingEffects", value: function () { this.postPorcessor && this.postPorcessor.disabledByPerformance(!0), this.postPorcessor && this.postPorcessor.destroyEffects(); } }, { key: "normalizeMSAASamples", value: function (e) { return Math.min(e, this.threeRenderer.capabilities.maxSamples); } }, { key: "renderBase", value: function (e, t, i) { var n = this.threeRenderer, r = n.domElement.width, a = n.domElement.height; n.setViewport(0, 0, r, a), this.postprocessing && this.postPorcessor ? this.postPorcessor.render(i) : n.render(e, t.threeCamera); } }, { key: "renderBlur", value: function (e) { this.mainTexturePass.map = this.postPorcessor && this.postPorcessor.enableEffects ? this.postPorcessor.getRenderTarget().texture : this.effectComposer.readBuffer.texture, this.mainComposer.render(e); } }, { key: "render", value: function (e, t, i) { this.renderBase(e, t, i); } }, { key: "compile", value: function () { this.threeRenderer.compile(this.scene, this.camera.threeCamera); } }, { key: "render__", value: function (e, t) { var i = this.threeRenderer, n = i.domElement.width, r = i.domElement.height; i.setViewport(0, 0, n, r), i.clearColor(), i.render(e, t.threeCamera); } }, { key: "getSnapshot", value: function () { return this.threeRenderer.domElement.toDataURL("image/jpeg"); } }, { key: "_createGUI", value: function () { var e = this; this.gui = new Av, this.gui.domElement.style.top = "175px", this.gui.domElement.style.width = "245px", this.aaGuiController = this.gui.add({ aaMethod: "" }, "aaMethod", { FXAA: "FXAA", MSAA4: "MSAA4", MSAA8: "MSAA8", MSAA16: "MSAA16", TAA1: "TAA1", TAA2: "TAA2", TAA4: "TAA4", TAA8: "TAA8", TAA16: "TAA16", NONE: "NONE" }).onChange((function (t) { e.antiAliasingService.aaMethod !== t && e.setAAMethod(t), e.aaGuiController.__select.value = e.antiAliasingService.aaMethod; })); } }]), e;
    } (), Xv = function () { function e(t) { c()(this, e), this.config = t, this.gui = null; } return h()(e, [{ key: "init", value: function (e) { (this.config.gui || {}).enabled && (this.gui = new Av, this.gui.domElement.style.top = "70px", this.gui.domElement.style.width = "150px", this.gui.add({ enableWalls: this.config.walls.enabled }, "enableWalls").onChange((function (t) { return e("enableWalls", t); })), this.gui.add({ hideValue: this.config.walls.hideValue }, "hideValue", 0, 1).step(.001).onChange((function (t) { return e("hideValue", t); })), this.gui.add({ mipmapLevel: .15 }, "mipmapLevel", 0, 1).step(.01).onChange((function (t) { return e("mipmapLevel", t); }))); } }, { key: "destroy", value: function () { this.gui && this.gui.destroy(), this.config = null, this.gui = null; } }]), e; } (), Yv = { uniforms: { DiffuseMap0: { type: "t", value: null }, DiffuseMap1: { type: "t", value: null }, MatMapFactor: { value: 0 }, CameraDir: { type: "v3", value: new Wt(0, 0, 0) }, EnableWalls: { type: "b", value: a.walls.enabled }, HideValue: { type: "f", value: a.walls.hideValue }, MipmapLevel: { type: "f", value: .15 }, TextureSize: { type: "v2", value: new Ut(512, 512) } }, vertexShader: "\n      attribute vec3 color;\n      \n      varying vec2 vUv;\n      \n      uniform vec3 CameraDir;\n      uniform bool EnableWalls;\n      uniform float HideValue;\n      \n      void main() {\n        vUv = uv;\n        vec3 camDirNoY = vec3(CameraDir.x, 0.0, CameraDir.z);\n\n        vec3 inColor = color.grb;\n        vec3 normal = normalize(inColor * 2.0 - 1.0);\n        //vec3 color = normalize((normal + 1.0)/2.0);\n        \n        float dotNormalView = dot(normalize(camDirNoY), normal);\n        \n\t\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t  if (EnableWalls && length(color) > 0.0 && !(color.x == color.y && color.y == color.z)\n\t\t\t    && (\n            dotNormalView >= HideValue\n            )\n        ) {\n          gl_Position.z = 10000.0;\n        }\n\t\t  }\n      \n      ", fragmentShader: "\n\n      varying vec2 vUv;\n\n      uniform sampler2D DiffuseMap0;\n      uniform sampler2D DiffuseMap1;\n      uniform float MatMapFactor;\n      uniform vec2 TextureSize;\n      uniform float MipmapLevel;\n      \n      // Does not take into account GL_TEXTURE_MIN_LOD/GL_TEXTURE_MAX_LOD/GL_TEXTURE_LOD_BIAS,\n      // nor implementation-specific flexibility allowed by OpenGL spec\n      float mip_map_level(in vec2 texture_coordinate) // in texel units\n      {\n          vec2  dx_vtc        = dFdx(texture_coordinate);\n          vec2  dy_vtc        = dFdy(texture_coordinate);\n          float delta_max_sqr = max(dot(dx_vtc, dx_vtc), dot(dy_vtc, dy_vtc));\n          float mml = MipmapLevel * log2(delta_max_sqr);\n          return max( 0.0, mml ); // Thanks @Nims\n      }\n      \n      void main() {\n      \n        vec4 diffuse0 = vec4(0.0);\n        vec4 diffuse1 = vec4(0.0);\n        \n        float mipmapLevel = mip_map_level(vUv * TextureSize);\n        \n        if (MatMapFactor >= 0.0 && MatMapFactor < 1.0) {\n          #ifdef TEXTURE_LOD_EXT\n            diffuse0 = texture2DLodEXT(DiffuseMap0, vUv, mipmapLevel);\n          #else\n            diffuse0 = texture2D(DiffuseMap0, vUv, mipmapLevel);\n          #endif\n        }\n        \n        if (MatMapFactor <= 1.0 && MatMapFactor > 0.0) {\n          #ifdef TEXTURE_LOD_EXT\n            diffuse1 = texture2DLodEXT(DiffuseMap1, vUv, mipmapLevel);\n          #else\n            diffuse1 = texture2D(DiffuseMap1, vUv, mipmapLevel);\n          #endif\n        }\n        \n        vec4 fragColor = (1.0 - MatMapFactor) * diffuse0 + MatMapFactor * diffuse1;\n        \n\t\t\t  gl_FragColor = fragColor;\n\t\t  }\n      \n      " }, Qv = { uniforms: { Env0: { type: "t", value: null }, Env1: { type: "t", value: null }, EnvMapFactor: { value: 0 }, PanoPosition0: { value: new Wt(0, 0, 0) }, PanoPosition1: { value: new Wt(0, 0, 0) } }, vertexShader: "\n      \n      varying vec3 vWorldPosition;\n      \n      void main() {\n      \n        //vWorldPosition = vec3( position );\n        //\n        vWorldPosition = (modelMatrix * vec4( vec3( position ), 1.0 )).xyz;\n        \n\t\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t  \n\t\t  }\n      \n      ", fragmentShader: "\n     \n     #include <tonemapping_pars_fragment>\n      \n      varying vec3 vWorldPosition;\n      \n      uniform samplerCube Env0;\n      uniform samplerCube Env1;\n      uniform float EnvMapFactor;\n      uniform vec3 PanoPosition0;\n      uniform vec3 PanoPosition1;\n      \n      vec4 envColor0 = vec4(0.0);\n      vec4 envColor1 = vec4(0.0);\n      \n      void main() {\n        \n        if (EnvMapFactor >= 0.0 && EnvMapFactor < 1.0) {\n          envColor0 = textureCube(Env0, reflect(normalize(vWorldPosition + PanoPosition0), vec3(1,0,0)));\n        }\n        \n        if (EnvMapFactor <= 1.0 && EnvMapFactor > 0.0) {\n          envColor1 = textureCube(Env1, reflect(normalize(vWorldPosition + PanoPosition1), vec3(1,0,0)));\n        }\n        \n        vec4 fragColor = (1.0 - EnvMapFactor) * envColor0 + EnvMapFactor * envColor1;\n        \n\t\t\t  gl_FragColor = vec4(LinearToneMapping(fragColor.xyz), fragColor.w);\n\t\t\t  \n\t\t  }\n      \n      " }, qv = { uniforms: { CameraDir: { type: "v3", value: new Wt(0, 0, 0) }, EnableWalls: { type: "b", value: a.walls.enabled }, HideValue: { type: "f", value: a.walls.hideValue }, Color: { type: "v4", value: new Kt(1, 1, 1, .7) } }, vertexShader: "\n      attribute vec3 color;\n\n      uniform vec3 CameraDir;\n      uniform bool EnableWalls;\n      uniform float HideValue;\n      \n      void main() {\n        vec3 camDirNoY = vec3(CameraDir.x, 0.0, CameraDir.z);\n        vec3 inColor = color.grb;\n        vec3 normal = normalize(inColor * 2.0 - 1.0);\n        float dotNormalView = dot(normalize(camDirNoY), normal);\n        \n\t\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t  if (EnableWalls && length(color) > 0.0 && !(color.x == color.y && color.y == color.z)\n\t\t\t    && (\n            dotNormalView >= HideValue\n            )\n        ) {\n          gl_Position.z = 10000.0;\n        }\n\t\t  }\n      \n      ", fragmentShader: "\n  \n      uniform vec4 Color;\n      \n      void main() {\n\t\t\t  gl_FragColor = Color;\n\t\t  }\n      \n      " }, $v = function (e) {
    function t(e, i, n) { var r; return c()(this, t), (r = of()(this, uf()(t).call(this, i))).config = e, r.manager = i, r.renderer = n, r.texturesExtension = window.invrPlayerScope.texturesExtension, r.imageLoader = Gf() ? new Ou(i) : new Bc(i), r.imageLoader.setPath(r.path), r; } return ff()(t, e), h()(t, [{ key: "loadBaseTexture", value: function (e, t) { var i = this, n = t.width, r = t.height; return new Promise((function (t) { return i.imageLoader.load(i._addImageUrlExtension(e), (function (e) { var a = new zs(e); return a.flipY = !1, t(i._resizeTexture(a, { width: n, height: r })); })); })); } }, {
    key: "loadSlices", value: function (e, t) {
    for (var i = t.count, n = t.path, r = [], a = 0; a < i; a++)
        r.push(this.loadSlice(e, { index: a, count: i, path: n })); return Promise.all(r);
    }
    }, {
    key: "loadSlice", value: function (e, t) {
    var i = this, n = t.index, r = t.count, a = t.path, o = Math.sqrt(r), s = Math.floor(n / o), l = new Ut(n % o * (e.userData.width / o), s * (e.userData.height / o)); return new Promise((function (t) {
    return i.imageLoader.load(i._getSliceUrl(a, n), (function (n) {
    if (!i.renderer.threeRenderer)
        return t(); t(i._renderSliceToTexture(e, n, l));
    }));
    }));
    }
    }, { key: "_addImageUrlExtension", value: function (e) { return e + this.texturesExtension; } }, { key: "_getSliceUrl", value: function (e, t) { return this._addImageUrlExtension(e.replace("{i}", t.toString())); } }, { key: "_renderSliceToTexture", value: function (e, t, i) { var n = new Zt(t); return this._setupTexture(n), this.renderer.copyTextureToTexture(i, n, e), n.dispose(), e; } }, { key: "_resizeTexture", value: function (e, t) { var i = t.width, n = t.height, r = new Jt(i, n, { depthBuffer: !1, stencilBuffer: !1 }), a = new Cf(this.renderer.threeRenderer, r), o = new Rf(e); return this._setupTexture(r.texture), a.addPass(o), a.renderToScreen = !1, a.render(), a.renderTarget2.texture.userData = a.renderTarget2.texture.userData || {}, a.renderTarget2.texture.userData.width = i, a.renderTarget2.texture.userData.height = n, a.originalTexture = e, { texture: a.renderTarget2.texture, composer: a }; } }, { key: "_setupTexture", value: function (e) { var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]; e.flipY = !1, e.encoding = Tt, e.wrapS = be, e.wrapT = be, t ? (e.minFilter = Ee, e.magFilter = Ae, e.anisotropy = Math.min(this.config.maxAnisotropy, 8), e.generateMipmaps = !0) : (e.generateMipmaps = !1, e.minFilter = Ae); } }]), t;
    } (Ic), Zv = { uniforms: { envMapPano: { type: "t", value: null }, panoWorldPosition: { value: new Wt(0, 0, 0) } }, vertexShader: "\n      uniform vec3 panoWorldPosition;\n      \n      varying vec3 cameraToVertex;\n      varying vec3 panoNormal;\n      \n      //varying float vFragDepth;\n      \n      void main() {\n        vec4 worldPosition = modelMatrix * vec4( vec3( position ), 1.0 );\n        cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n        \n        panoNormal = normalize( panoWorldPosition - worldPosition.xyz);\n        \n\t\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t  \n\t\t\t  //vFragDepth = gl_Position.w;\n\t\t  }\n      \n      ", fragmentShader: "\n      \n      uniform samplerCube envMapPano;\n      \n      varying vec3 cameraToVertex;\n      varying vec3 panoNormal;\n      \n      //varying float vFragDepth;\n      \n      void main() {\n      \n        //const float C = 1.0;\n        //const float far = 1000000000.0;\n        //const float offset = 1.0;\n        //float depth = log(C * vFragDepth + offset) / log(C * far + offset);\n        //gl_FragDepth = depth;\n      \n        vec3 reflectVec = reflect( cameraToVertex, panoNormal );\n        reflectVec = reflect(reflectVec, vec3(1,0,0));\n        \n        vec4 envColor = textureCube( envMapPano, reflectVec );\n      \n\t\t\t  gl_FragColor = vec4(envColor.xyz, 1.0);\n\t\t  }\n      \n      " }, Kv = { uniforms: { ColorOne: { type: "v3", value: new Wt(bd.hexToRgb(a.materialConfig.OutWallsColor1).r, bd.hexToRgb(a.materialConfig.OutWallsColor1).g, bd.hexToRgb(a.materialConfig.OutWallsColor1).b) }, ColorTwo: { type: "v3", value: new Wt(bd.hexToRgb(a.materialConfig.OutWallsColor2).r, bd.hexToRgb(a.materialConfig.OutWallsColor2).g, bd.hexToRgb(a.materialConfig.OutWallsColor2).b) } }, vertexShader: "\n      varying vec3 worldNormal;\n      \n      void main() {\n        worldNormal = (modelMatrix * vec4( vec3( normal ), 0.0 )).xyz;\n                \n\t\t\t  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t  \n\t\t  }\n  ", fragmentShader: "\n        \n    varying vec3 worldNormal;\n    uniform vec3 ColorOne;\n    uniform vec3 ColorTwo;\n    \n    void main() {\n    \n      vec3 fwd_dir = vec3(1,0,0);\n      \n      float t = dot(abs(normalize(worldNormal)), fwd_dir);\n      \n      vec3 color = mix(ColorOne, ColorTwo, t);\n      \n      gl_FragColor = vec4(color, 1.0);\n    }\n  " }, Jv = function () {
    function e(t, i, n, r) { c()(this, e), this.config = t, this.loadingManager = i, this.renderer = n, this.panoCollection = r, this.slicedTextureLoader = new $v(t, i, n), this.roomTexturesData = [], this.modelConfig = t.modelConfig, this.activeTexturePreset = null, this.roomShaderMaterials = {}, this.textures = {}, this.mirrorsShaderMaterials = [], this.mirrorPanoramasTexturesData = {}, this.baseMaterialsByOwner = {}, this.baseMaterials = [], this.roomPanoramaTexturesData = { primary: null, secondary: null }, this.enableEnvTween = null, this.changeEnvTween = null, this.tasksPull = [], this.taskInWork = !1; } return h()(e, [{ key: "destroy", value: function () { var e = this; this.roomShaderMaterials && Object.keys(this.roomShaderMaterials).forEach((function (t) { Hf.disposeMaterial(e.roomShaderMaterials[t]), e.roomShaderMaterials[t] = null; })), this.roomTexturesData.forEach((function (t, i) { var n = t.composer, r = t.texture; Hf.disposeTexture(r), Hf.disposeEffectComposer(n), e.roomTexturesData[i].composer = null, e.roomTexturesData[i].texture = null, e.roomTexturesData[i] = null; })), this.mirrorsShaderMaterials && this.mirrorsShaderMaterials.forEach((function (e) { return Hf.disposeMaterial(e); })), this.mirrorPanoramasTexturesData && Object.keys(this.mirrorPanoramasTexturesData).forEach((function (t) { Hf.disposeEffectComposer(e.mirrorPanoramasTexturesData[t].composer), Hf.disposeTexture(e.mirrorPanoramasTexturesData[t].texture), e.mirrorPanoramasTexturesData[t] = null; })), this.baseMaterialsByOwner && Object.keys(this.baseMaterialsByOwner).forEach((function (t) { e.baseMaterialsByOwner[t] && e.baseMaterialsByOwner[t].forEach((function (e) { return Hf.disposeMaterial(e); })), e.baseMaterialsByOwner[t] = null; })), this.baseMaterials && this.baseMaterials.forEach((function (e) { return Hf.disposeMaterial(e); })), ["primary", "secondary"].forEach((function (t) { e.roomPanoramaTexturesData && e.roomPanoramaTexturesData[t] && (Hf.disposeEffectComposer(e.roomPanoramaTexturesData[t].composer), Hf.disposeTexture(e.roomPanoramaTexturesData[t].texture), e.roomPanoramaTexturesData[t] = null); })), this.config = null, this.loadingManager = null, this.renderer = null, this.panoCollection = null, this.slicedTextureLoader = null, this.modelConfig = null, this.activeTexturePreset = null, this.roomShaderMaterials = null, this.textures = null, this.mirrorsShaderMaterials = null, this.mirrorPanoramasTexturesData = null, this.baseMaterialsByOwner = null, this.baseMaterials = null, this.roomPanoramaTexturesData = null, this.roomTexturesData = null, this.enableEnvTween = null, this.changeEnvTween = null, this.tasksPull = null, this.taskInWork = null; } }, {
    key: "getTexturePresetNameForLoading", value: function () {
    if (!this.activeTexturePreset)
        return this.modelConfig.texturesLoadPriority[0]; var e = this.modelConfig.texturesLoadPriority.indexOf(this.activeTexturePreset) + 1; return e in this.modelConfig.texturesLoadPriority ? this.modelConfig.texturesLoadPriority[e] : null;
    }
    }, { key: "setBasicMaterialsOpacity", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, i = t ? this.baseMaterialsByOwner[t.name] || [] : this.baseMaterials; i.forEach((function (t) { "alpha_curtain" === t.name && (t.opacity = .7 * e), "alpha_bottle" === t.name && (t.opacity = .05 * e), t.needsUpdate = !0; })); } }, { key: "setActiveTexturePreset", value: function (e) { this.activeTexturePreset = e; } }, { key: "prepareBaseMaterials", value: function (e, t, i) { var n = this; return this.mapRootObjectMaterials(this._prepareObjectMaterials.bind(this, e), [t]).then((function () { return n.mapRootObjectMaterials(n._prepareLowObjectMaterials.bind(n), [i]); })); } }, { key: "prepareShaderMaterials", value: function (e, t, i) { var n = this; return this.mapRootObjectMaterials(this._preparePreviewMaterials.bind(this, e), [t]).then((function () { return n.mapRootObjectMaterials(n._preparePanoMaterials.bind(n, e), [i]); })); } }, { key: "loadNextTexturesPreset", value: function (e, t) { var i = this; return this._loadDiffusePreset(e, t).then((function () { return i._updateTexturesMipmaps(e); })); } }, {
    key: "updateCameraDirInShader", value: function (e, t) {
    var i = this; if (this.roomShaderMaterials.preview) {
        var n = new Wt(0, 0, -1).applyQuaternion(t.threeCamera.quaternion).normalize();
        this.mapRootObjectMaterials((function (e) { return i.changeShaderMaterial(e.material, { cameraDir: n }); }), [e]);
    }
    }
    }, { key: "mapRootObjectMaterials", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], i = []; return t.forEach((function (t) { bd.walkObjectsTree(t, (function () { var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, r = n.object; return bd.walkMaterialsTree(r.material, (function (n) { return i.push(e(Object.assign({ object: r, owner: t }, n))); })); })); })), Promise.all(i); } }, { key: "loadShaderMaterials", value: function () { return this._addShaderMaterial("preview", Yv, { transparent: !0, extensions: { derivatives: !0, shaderTextureLOD: !0 } }), this._addShaderMaterial("pano", Qv), this._addShaderMaterial("color", qv, { transparent: !0 }), this._addShaderMaterial("out_walls", Kv), Promise.resolve(); } }, { key: "preparePanoramaTextures", value: function () { var e = this, t = this.panoCollection.panoramas[0]; return t.makeBaseCubeTexture().then((function (t) { return e.roomPanoramaTexturesData.primary = t; })).then((function () { return t.makeBaseCubeTexture().then((function (t) { return e.roomPanoramaTexturesData.secondary = t; })); })); } }, {
    key: "prepareMirrorsPanoramasTextures", value: function (e) {
    var t = this; if (this.panoCollection.mirrorPanoramas.length)
        return this._makeMirrorsPanoramasTextures().then((function () { return t.panoCollection.mirrorPanoramas.forEach((function (i) { return t.mapRootObjectMaterials((function (e) { var n = e.object, r = e.material; r.name === i.config.material && t._setupMirrorMaterial(n, r, i); }), [e]); })); }));
    }
    }, {
    key: "changeShaderMaterial", value: function (e, t) {
    var i = this; "ShaderMaterial" === e.type && (["mapFactor", "envMapFactor", "matMapFactor", "mixFactor", "cameraDir", "enableWalls", "hideValue", "mipmapLevel"].forEach((function (n) {
    if (t.hasOwnProperty(n)) {
        var r = n.charAt(0).toUpperCase() + n.slice(1);
        i._setShaderValue(e, r, t[n]);
    }
    })), t.hasOwnProperty("envTexture") && (this._setShaderValue(e, "Env0", t.envTexture), this._setShaderValue(e, "EnvMapFactor", 0)), t.hasOwnProperty("newEnvTexture") && (1 === this._getShaderValue(e, "EnvMapFactor") && (this._setShaderValue(e, "Env0", this._getShaderValue(e, "Env1")), this._setShaderValue(e, "PanoPosition0", this._getShaderValue(e, "PanoPosition1"))), this._setShaderValue(e, "Env1", t.newEnvTexture)), t.hasOwnProperty("diffuseTexture") && (this._setShaderValue(e, "DiffuseMap0", t.diffuseTexture), this._setShaderValue(e, "MatMapFactor", 0)), t.hasOwnProperty("newDiffuseTexture") && (1 === this._getShaderValue(e, "MatMapFactor") && this._setShaderValue(e, "DiffuseMap0", this._getShaderValue(e, "DiffuseMap1")), this._setShaderValue(e, "DiffuseMap1", t.newDiffuseTexture)), t.hasOwnProperty("replaceEnvTexture") && this._setShaderValue(e, "Env0", t.replaceEnvTexture), t.hasOwnProperty("replaceNewEnvTexture") && (1 === this._getShaderValue(e, "EnvMapFactor") && (this._setShaderValue(e, "Env0", this._getShaderValue(e, "Env1")), this._setShaderValue(e, "PanoPosition0", this._getShaderValue(e, "PanoPosition1"))), this._setShaderValue(e, "Env1", t.replaceNewEnvTexture)), t.hasOwnProperty("position") && this._setShaderValue(e, "PanoPosition0", t.position), t.hasOwnProperty("newPosition") && this._setShaderValue(e, "PanoPosition1", t.newPosition), e.needsUpdate = !0);
    }
    }, {
    key: "enableEnv", value: function (e, t, i) {
    var n = this, a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0, o = t.config.position; t.setupBaseMode(); var s = t.updateBaseCubeTexture(this.roomPanoramaTexturesData.primary).texture; if (!this.enableEnvTween) {
        var l = this;
        this.enableEnvTween = new Promise((function (t) { return new r.a.Tween({ value: 1 }).to({ value: 0 }, n.config.tween.PreviewPano.texture.time).delay(a).easing(n.config.tween.PreviewPano.texture.easing).onStart((function () { n._setEnvTexture(e, o, s), i(); })).onUpdate((function () { l.setBasicMaterialsOpacity(this.value, e); })).onComplete((function () { n.enableEnvTween = null, t(); })).start(); }));
    }
    }
    }, { key: "changeEnv", value: function (e, t, i) { var n = this, a = t.config.position, o = this._getNormalizedPanoramaPosition(a), s = this; t.setupBaseMode(); var l = t.updateBaseCubeTexture(this.roomPanoramaTexturesData.secondary).texture; this.changeEnvTween = this.changeEnvTween ? this.changeEnvTween : Promise.resolve(), this.mapRootObjectMaterials((function (e) { return n.changeShaderMaterial(e.material, { newEnvTexture: l, newPosition: o }); }), [e]), this.mapRootObjectMaterials((function (e) { return n.changeShaderMaterial(e.material, { envMapFactor: 0 }); }), [e]), this.changeEnvTween = new Promise((function (t) { return new r.a.Tween({ value: 0 }).to({ value: 1 }, n.config.tween.PanoPano.texture.time * i).delay(n.config.tween.PanoPano.texture.delay).easing(n.config.tween.PanoPano.texture.easing).onUpdate((function () { var t = this; s.mapRootObjectMaterials((function (e) { return s.changeShaderMaterial(e.material, { envMapFactor: t.value }); }), [e]); })).onComplete((function () { n.roomPanoramaTexturesData = { primary: n.roomPanoramaTexturesData.secondary, secondary: n.roomPanoramaTexturesData.primary }, n.changeEnvTween = null, t(); })).start(); })); } }, { key: "enableDiffuse", value: function (e) { var t = this; this.enableDiffuseTween || (this.enableDiffuseTween = new r.a.Tween({ value: 0 }).to({ value: 1 }, this.config.tween.Preview.texture.time).easing(this.config.tween.Preview.texture.easing).onStart((function () { e(), t.setBasicMaterialsOpacity(1); })).onComplete((function () { t.enableDiffuseTween = null; })).start()); } }, { key: "_loadDiffusePreset", value: function (e, t) { var i = this, n = []; return this.mapRootObjectMaterials((function (e) { return n.push(i._updateMaterialDiffusePreset(t, e)); }), [e]), Promise.all(n); } }, {
    key: "_updateMaterialDiffusePreset", value: function (e, t) {
    var i = this, n = (t.object.userData.material || {}).name; if (this._checkMaterialHasTexture(n)) {
        var r = { count: this.modelConfig.slicedConfig[e].count, path: "".concat(this.modelConfig.texturesPath[e]).concat(n, "_") + "{i}" }, a = this._getTextureCacheObject(this._getObjectId(t.object), t.index, t.level).texture;
        return new Promise((function (e) { return i.tasksPull.push((function () { return i.slicedTextureLoader.loadSlices(a, r).then(e); })); }));
    }
    }
    }, { key: "_addShaderMaterial", value: function (e, t, i) { this.roomShaderMaterials[e] = new Tr(Object.assign({ uniforms: xr.clone(t.uniforms), vertexShader: t.vertexShader, fragmentShader: t.fragmentShader, name: e }, i)); } }, { key: "_prepareObjectMaterials", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = t.owner, n = t.object, r = t.material, a = t.index, o = t.level; return this._checkMaterialHasTexture(r.name) ? (n.renderOrder = 0, this._loadTextureForMaterial(this._getObjectId(n), r.name, a, o)) : (n.renderOrder = 2, Promise.resolve(this._setupBaseMaterial(n, r, i))); } }, {
    key: "_prepareLowObjectMaterials", value: function () {
    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.owner, i = e.object, n = e.material; if (!this._checkMaterialHasTexture(n.name))
        return i.renderOrder = 2, Promise.resolve(this._setupBaseMaterial(i, n, t)); i.renderOrder = 0;
    }
    }, {
    key: "_preparePreviewMaterials", value: function (e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = t.object, n = t.material, r = t.index, a = t.level; if (this._checkMaterialHasTexture(n.name)) {
        var o = this._getTextureCacheObject(this._getObjectId(i), r, a).texture;
        o && this._replaceShaderMaterial(i, "preview", o), this.renderer.compile();
    }
    }
    }, { key: "_replaceShaderMaterial", value: function (e, t) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = this.roomShaderMaterials[t], r = n.clone(); r.uniforms = xr.clone(n.uniforms), e.userData.material = e.material, e.material = r, r.uniforms.hasOwnProperty("DiffuseMap0") && (r.uniforms.DiffuseMap0.value = i, r.uniforms.TextureSize.value = new Ut(i.userData.width, i.userData.height)), r.needsUpdate = !0; } }, { key: "_checkMaterialHasTexture", value: function (e) { return e && e.startsWith(this.modelConfig.materialWithTexturePrefix); } }, { key: "_setupBaseMaterial", value: function (e, t, i) { this.baseMaterials.push(t), this.baseMaterialsByOwner[i.name] || (this.baseMaterialsByOwner[i.name] = []), this.baseMaterialsByOwner[i.name].push(t), t.metalness = 0, "wallconnector" === t.name && (e.renderOrder = 1, t.color.set(this.config.materialConfig.WallconnectorColor), t.transparent = !1, t.vertexColors = !1), "out_walls" === t.name && (e.material = this.roomShaderMaterials.out_walls), "alpha_curtain" === t.name && (e.material = this.roomShaderMaterials.color, e.renderOrder = 0), "alpha_bottle" === t.name && (e.renderOrder = 1, t.color.set(0), t.opacity = .05, t.vertexColors = !1); } }, { key: "_loadTextureForMaterial", value: function (e, t, i, n) { var r = this, a = this.modelConfig.texturesLoadPriority[0], o = "".concat(this.modelConfig.texturesPath[a]).concat(t, "_0"), s = this.modelConfig.slicedConfig[this.modelConfig.texturesLoadPriority.slice(-1)[0]], l = { width: s.width, height: s.height }; return new Promise((function (e) { return r.slicedTextureLoader.loadBaseTexture(o, l).then((function (t) { return e(t); })); })).then((function (a) { var o = a.texture, s = a.composer; r._setupTexture(o), r.roomTexturesData.push({ composer: s, texture: o }), r._cacheTexture(o, t, e, i, n); })); } }, { key: "_makeMirrorsPanoramasTextures", value: function () { var e = this; return Promise.all(this.panoCollection.mirrorPanoramas.map((function (t) { return t.makeBaseCubeTexture(!0).then((function (i) { e.mirrorPanoramasTexturesData[t.config.id] = i; })); }))); } }, { key: "_getObjectId", value: function (e) { return (e.userData.material || {}).name || e.material.name; } }, { key: "_setupTexture", value: function (e) { e.flipY = !1, e.encoding = Tt, e.wrapS = be, e.wrapT = be; } }, { key: "_cacheTexture", value: function (e, t, i, n, r) { var a = this._getTextureCacheObject(i, n, r); a.texture = e, a.materialName = t; } }, { key: "_getTextureCacheObject", value: function (e, t, i) { return this.textures[e] = this.textures[e] || {}, this.textures[e][i] = this.textures[e][i] || {}, this.textures[e][i][t] = this.textures[e][i][t] || {}, this.textures[e][i][t]; } }, {
    key: "_updateTexturesMipmaps", value: function (e) {
    var t = this; this.mapRootObjectMaterials((function (e) {
    var i = (e.object.userData.material || {}).name; if (t._checkMaterialHasTexture(i)) {
        var n = t._getTextureCacheObject(t._getObjectId(e.object), e.index, e.level).texture;
        t.renderer.updateTextureMipmaps(n);
    }
    }), [e]);
    }
    }, { key: "_setupMirrorMaterial", value: function (e, t, i) { var n = xr.clone(Zv.uniforms); n.envMapPano.value = this.mirrorPanoramasTexturesData[i.config.id].texture, n.panoWorldPosition.value = i.getGlobalOriginalPosition(), e.material = new Tr({ uniforms: n, vertexShader: Zv.vertexShader, fragmentShader: Zv.fragmentShader, name: t.name }), this.mirrorsShaderMaterials.push(e.material); } }, { key: "_getNormalizedPanoramaPosition", value: function (e) { return new Wt(-1 * e[0] / 100, -1 * e[2] / 100, -e[1] / 100); } }, { key: "_setEnvTexture", value: function (e, t, i) { var n = this, r = this._getNormalizedPanoramaPosition(t); this.mapRootObjectMaterials((function (e) { return n.changeShaderMaterial(e.material, { envTexture: i, position: r }); }), [e]); } }, { key: "_setShaderValue", value: function (e, t, i) { e.uniforms.hasOwnProperty(t) && (e.uniforms[t].value = i); } }, { key: "_preparePanoMaterials", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = t.object; this._replaceShaderMaterial(i, "pano"), this.renderer.compile(); } }, { key: "_getShaderValue", value: function (e, t) { return e.uniforms.hasOwnProperty(t) ? e.uniforms[t].value : null; } }]), e;
    } (), eg = function () {
    function e(t, i, n, r, a, o, l) {
    var u = this; c()(this, e), this.config = t, this.scene = i, this.loadingManager = n, this.renderer = r, this.events = a, this.panoCollection = o, this.performanceObserver = l, this.modelConfig = t.modelConfig, this.collisionModel = null, this.lowModel = null, this.mainModel = null, this.mapModel = null, this.currentPano = null, this.forceUpdateQuality = !1, this.roomModelGUI = new Xv(t), this.materialManager = new Jv(t, n, r, o), this.modelLoader = new $p(this.loadingManager), this.dracoLoader = new Zp(this.loadingManager), this.dracoLoader.setDecoderPath(this.modelConfig.decoderPath), this.modelLoader.setDRACOLoader(this.dracoLoader), s.a.async((function (e) {
    for (; ;)
        switch (e.prev = e.next) {
            case 0: return e.next = 2, s.a.awrap(bd.supportsWebp());
            case 2:
                if (!e.sent) {
                    e.next = 4;
                    break;
                }
                u.modelConfig.texturesPath = u.modelConfig.texturesPathWebp;
            case 4:
            case "end": return e.stop();
        }
    })), this.roomModelGUI.init(this._onGUIParamChange.bind(this));
    } return h()(e, [{ key: "destroy", value: function () { this.collisionModel && this.scene.remove(this.collisionModel), this.lowModel && this.scene.remove(this.lowModel), this.mainModel && this.scene.remove(this.mainModel), this.mapModel && this.scene.remove(this.mapModel), this.materialManager.mapRootObjectMaterials((function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = e.object, i = e.material; i && i.dispose(), t.geometry && t.geometry.dispose(); }), [this.collisionModel, this.lowModel, this.mainModel, this.mapModel]), this.dracoLoader && this.dracoLoader.dispose && this.dracoLoader.dispose(), this.collisionModel && this.collisionModel.geometry && this.collisionModel.geometry.dispose(), this.lowModel && this.lowModel.geometry && this.lowModel.geometry.dispose(), this.mainModel && this.mainModel.geometry && this.mainModel.geometry.dispose(), this.mapModel && this.mapModel.geometry && this.mapModel.geometry.dispose(), this.roomModelGUI && this.roomModelGUI.destroy(), this.materialManager.destroy(), this.config = null, this.scene = null, this.loadingManager = null, this.renderer = null, this.events = null, this.panoCollection = null, this.performanceObserver = null, this.modelConfig = null, this.collisionModel = null, this.lowModel = null, this.mainModel = null, this.mapModel = null, this.currentPano = null, this.forceUpdateQuality = null, this.roomModelGUI = null, this.materialManager = null, this.modelLoader = null, this.dracoLoader = null; } }, { key: "load", value: function () { var e = this, t = this.materialManager.getTexturePresetNameForLoading(); return this.materialManager.loadShaderMaterials().then((function () { return e._loadCollisionModel(); })).then((function () { return e._loadLowModel(); })).then((function () { return e._loadMainModel(); })).then((function () { return e.materialManager.prepareBaseMaterials(t, e.mainModel, e.lowModel); })).then((function () { return e.materialManager.prepareShaderMaterials(t, e.mainModel, e.lowModel); })).then((function () { return e.materialManager.setActiveTexturePreset(t); })); } }, { key: "preparePanoramaTextures", value: function () { return this.materialManager.preparePanoramaTextures(); } }, { key: "prepareMirrorsPanoramasTextures", value: function () { return this.materialManager.prepareMirrorsPanoramasTextures(this.mainModel); } }, { key: "loadNextTexturesPreset", value: function () { var e = this, t = this.materialManager.getTexturePresetNameForLoading(); return t ? this.materialManager.loadNextTexturesPreset(this.mainModel, t).then((function () { return e.materialManager.setActiveTexturePreset(t); })) : Promise.resolve(); } }, { key: "setupCurrentPano", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; this.currentPanoHasSecondaryTexture = t, this.currentPano && this.currentPano !== e && (this.currentPano.sliceCallbacksQuery = [], this.currentPano.isActive = !1), e && this.currentPano !== e ? (this.currentPano = e, this.currentPano.isActive = !0, e.sliceCache = {}, e.setupQualityMode()) : this.currentPano = e; } }, { key: "update", value: function (e, t, i) { this.panoCollection.update(this.findClosestPanorama(i)), this.materialManager.updateCameraDirInShader(this.mainModel, t), this._updateCurrentPanoQuality(t), this._updateTasksPull(e); } }, { key: "updateQualityCubeTexture", value: function (e) { var t = this.currentPanoHasSecondaryTexture ? "secondary" : "primary"; this.currentPano.updateQualityCubeTexture(this.materialManager.roomPanoramaTexturesData[t].texture, e); } }, { key: "createMapModel", value: function () { this.mapModel = this.mainModel.clone(), this.mapModel.layers.set(2), this.mapModel.children.forEach((function (e) { return e.layers.set(2); })), Kp.show(this.mapModel), this.scene.add(this.mapModel); } }, { key: "showLowModel", value: function () { Kp.show(this.lowModel), Kp.hide(this.mainModel); } }, { key: "showMainModel", value: function () { Kp.hide(this.lowModel), Kp.show(this.mainModel); } }, { key: "findClosestPanorama", value: function (e) { return this.panoCollection.findClosest(e, this.collisionModel); } }, { key: "enableEnv", value: function (e, t) { var i = this; this.materialManager.enableEnv(this.lowModel, e, (function () { return i.showLowModel(); }), t); } }, { key: "enableDiffuse", value: function () { var e = this; this.materialManager.enableDiffuse((function () { return e.showMainModel(); })); } }, { key: "changeEnv", value: function (e, t) { this.materialManager.changeEnv(this.lowModel, e, t); } }, { key: "_updateCurrentPanoQuality", value: function (e) { this.currentPano && (this.forceUpdateQuality || e.isChanged()) && (this.updateQualityCubeTexture({ ignoreLimit: this.forceUpdateQuality }), this.forceUpdateQuality = !1); } }, {
    key: "_updateTasksPull", value: function (e) {
    var t = this; if (this.performanceObserver.update(e), !this.materialManager.taskInWork && this.materialManager.tasksPull.length) {
        var i = this.performanceObserver.tryWaitHighPerformance();
        if (i) {
            var n = this.materialManager.tasksPull.shift();
            n && i && (this.materialManager.taskInWork = !0, n().then((function () { t.materialManager && (t.materialManager.taskInWork = !1); })));
        }
    }
    }
    }, { key: "_loadCollisionModel", value: function () { var e = this; this.modelLoader.load(this.config.collisionModelPath, (function (t) { t = t.scene || t, e.collisionModel = bd.nodeIsObject(t) ? t : t.children.find((function (e) { return bd.nodeIsObject(e); })), e.collisionModel.layers.set(5), e.collisionModel.children.forEach((function (e) { return e.layers.set(5); })), e.scene.add(e.collisionModel); }), bd.logProgress("MODEL: collision object LOADING progress: "), bd.logError("MODEL: collision object LOADING error: ")); } }, { key: "_loadLowModel", value: function () { var e = this; return new Promise((function (t) { return e.modelLoader.load(e.config.lowModelPath, (function (i) { i = i.scene || i, e.lowModel = bd.nodeIsObject(i) ? i : i.children.find((function (e) { return bd.nodeIsObject(e); })), e.lowModel.layers.set(1), e.lowModel.children.forEach((function (e) { return e.layers.set(1); })), Kp.hide(e.lowModel), e.scene.add(e.lowModel), t(); })); })); } }, { key: "_loadMainModel", value: function () { var e = this; return new Promise((function (t) { return e.modelLoader.load(e.config.modelPath, (function (i) { var n = i.scene || i; e.mainModel = i.scene, e.mainModel = n, n.children.forEach((function (e) { return !bd.nodeIsObject(e) && e.dispose && e.dispose(); })), e.mainModel = bd.nodeIsObject(n) ? n : n.children.find((function (e) { return bd.nodeIsObject(e); })), e.mainModel.layers.set(1), e.mainModel.children.forEach((function (e) { return e.layers.set(1); })), e.scene.add(e.mainModel), t(); })); })); } }, {
    key: "_onGUIParamChange", value: function (e, t) {
    var i = this; if (this.materialManager.roomShaderMaterials.preview)
        return this.materialManager.mapRootObjectMaterials((function (n) { return i.materialManager.changeShaderMaterial(n.material, Sd()({}, e, t)); }), [this.mainModel]);
    }
    }]), e;
    } (), tg = function () {
    function e(t, i, n, r, a, o) { c()(this, e), this.scene = t, this.model = o, this.mode = "preview", this.raycaster = new xh, this.camera = a, this.manager = i, this.renderer = r, this.config = n, this.loader = new $p(this.manager), this.dracoLoader = new Zp(this.manager), this.dracoLoader.setDecoderPath(this.config.modelConfig.decoderPath), this.loader.setDRACOLoader(this.dracoLoader), this.object = null, this.gui = null, this.enabled = this.config.blurredConfig.enable, this.saveState = { textPano: !1, textPreview: this.enabled, blurEffect: this.config.blurredConfig.enableBlurEffect }; } return h()(e, [{ key: "destroy", value: function () { this.gui && this.gui.destroy(), this.config = null, this.gui = null; } }, { key: "initGUI", value: function () { var e = this; (this.config.gui || {}).enabled && (this.gui = new Av, this.gui.domElement.style.top = "70px", this.gui.domElement.style.width = "150px", this.gui.domElement.style.float = "left", this.gui.add({ enableBlur: this.config.blurredConfig.enable }, "enableBlur").onChange((function (t) { t ? e.enable() : e.disable(); })), this.gui.add({ opacity: this.config.blurredConfig.opacity }, "opacity", 0, 1).step(.01).onChange((function (t) { e.object.material.opacity = t; })), this.gui.add({ repeat: 80 }, "repeat", 1, 200).step(1).onChange((function (t) { e.object.material.map.repeat.set(t, t), e.object.material.needsUpdate = !0; })), this.gui.addColor({ color: 15658734 }, "color").onChange((function (t) { e.object.material.color.set(t); }))); } }, { key: "_isObject", value: function (e) { return "Mesh" === e.type || "Group" === e.type; } }, {
    key: "load", value: function () {
    var e = this; if (this.config.blurredConfig.enable && this.config.blurredConfig.modelPath)
        return this.createLabels().then((function () { return new Promise((function (t) { return e.loader.load(e.config.blurredConfig.modelPath, (function (i) { i = i.scene || i, e.object = e._isObject(i) ? i : i.children.find((function (t) { return e._isObject(t); })), e._applyMaterials().then((function () { e.object.layers.set(1), e.object.layers.enable(2), e.object.children.forEach((function (e) { return e.layers.set(1); })), e.scene.add(e.object), e._addBlurEffect(), e.initGUI(), t(); })); })); })); }));
    }
    }, { key: "_applyMaterials", value: function () { var e = this; return new Promise((function (t) { new Hc(e.manager).load(e.config.blurredConfig.texturePath, (function (i) { i.wrapS = be, i.wrapT = be, i.repeat.set(80, 80), e.object.material = new An({ transparent: !0, color: 15658734, opacity: e.config.blurredConfig.opacity, map: i }), t(); })); })); } }, { key: "_cloneTextGroup", value: function (e) { var t = e.clone(); return t.layers.set(1), t.children.forEach((function (e, i) { t.children[i] = e.clone(), t.children[i].layers.set(1); })), t; } }, { key: "_addBlurEffect", value: function () { var e = this.scene; this.renderTextGroupPreview = this._cloneTextGroup(this.textGroupPreview), this.renderTextGroupPano = this._cloneTextGroup(this.textGroupPano), e.add(this.renderTextGroupPreview), e.add(this.renderTextGroupPano); } }, { key: "disable", value: function () { this.enabled && this.object && (Kp.hide(this.object), this.saveState.textPano = this.renderTextGroupPano.children[0].visible, this.saveState.textPreview = this.renderTextGroupPreview.children[0].visible, Kp.hide(this.renderTextGroupPano), Kp.hide(this.renderTextGroupPreview), this.disableBlur(), this.enabled = !1); } }, { key: "enable", value: function () { !this.enabled && this.object && (Kp.show(this.object), Kp.setVisible(this.renderTextGroupPano, this.saveState.textPano), Kp.setVisible(this.renderTextGroupPreview, this.saveState.textPreview), this.enabled = !0); } }, { key: "disableBlur", value: function () { this.blurPass && (this.blurPass.enabled = !1); } }, { key: "enableBlur", value: function () { this.blurPass && (this.blurPass.enabled = !0); } }, { key: "toggleBlur", value: function (e) { this.blurPass && this.enabled && (this.blurPass.enabled = e); } }, { key: "onPreview", value: function () { this.mode = "preview", Kp.hide(this.renderTextGroupPano), Kp.show(this.renderTextGroupPreview); } }, { key: "onPano", value: function () { this.mode = "pano", Kp.show(this.renderTextGroupPano), Kp.hide(this.renderTextGroupPreview); } }, { key: "onPlan", value: function () { this.mode = "plan", Kp.hide(this.renderTextGroupPano), Kp.hide(this.renderTextGroupPreview); } }, { key: "_calcTextScale", value: function (e, t) { var i = (new Ui).setFromObject(e), n = new Wt; return i.getSize(n), t / 100 / Math.max(n.x, n.y, n.z); } }, { key: "createLabels", value: function () { var e = this, t = new Nu; return new Promise((function (i) { return t.load(e.config.resourcesDomain + "fonts/SF_UI_Text_Regular.json", (function (t) { e.textGroupPreview = new Fo, e.textGroupPano = new Fo; var n = { index: 0, width: 0, textWidth: 0 }, r = { index: 0, width: 0, textWidth: 0 }, a = []; e.config.blurredConfig.labels.forEach((function (i, o) { var s = new Bl(i.text, { font: t, size: i.size || .2, height: .02, curveSegments: 120 }); s.center(), s.computeVertexNormals(); var l = new cr(s, [new An({ color: 0 })]); l.position.set(i.position[0] / 100, i.position[2] / 100, i.position[1] / 100), l.rotation.set(Ht.degToRad(i.rotation[0]), Ht.degToRad(i.rotation[2]), Ht.degToRad(i.rotation[1])), a[o] = l, 0 !== i.rotation[0] ? (e.textGroupPreview.add(l), (i.text.length > r.textWidth || i.text.length === r.textWidth && i.min_size < r.width) && (r.width = i.min_size, r.index = o, r.textWidth = i.text.length)) : (e.textGroupPano.add(l), (i.text.length > n.textWidth || i.text.length === n.textWidth && i.min_size < n.width) && (n.width = i.min_size, n.index = o, n.textWidth = i.text.length)); })); var o = e._calcTextScale(a[n.index], n.width), s = e._calcTextScale(a[r.index], r.width); e.textGroupPreview.children.forEach((function (e) { return e.scale.setScalar(s); })), e.textGroupPano.children.forEach((function (e) { return e.scale.setScalar(.8 * o); })), Kp.hide(e.textGroupPano), e.scene.add(e.textGroupPreview), i(t); })); })); } }, {
    key: "update", value: function (e, t) {
    var i = this; if ("pano" === this.mode) {
        var n = new Wt;
        this.camera.threeCamera.getWorldPosition(n);
        var r = new Wt;
        this.renderTextGroupPano && this.renderTextGroupPano.children.forEach((function (e) { e.getWorldPosition(r); var t = new Wt; t.subVectors(r, n), t.normalize(), i.raycaster.set(n, t); var a = i.raycaster.intersectObjects([i.object], !0); e.visible = !(0 !== a.length && n.distanceTo(r) > n.distanceTo(a[0].point)); }));
    }
    }
    }]), e;
    } (), ig = { left: 37, up: 38, right: 39, down: 40, space: 32, tab: 9, escape: 27, F9: 120 }, ng = function () {
    function e(t) { var i = this; c()(this, e), this.domElement = t || document, this.keyCodes = {}, this.domElement.addEventListener("keydown", (function (e) { return i.onKeyChange(e); }), !1), this.domElement.addEventListener("keyup", (function (e) { return i.onKeyChange(e); }), !1), window.addEventListener("blur", (function () { return i.onBlur; }), !1); } return h()(e, [{ key: "destroy", value: function () { var e = this; this.domElement.removeEventListener("keydown", (function (t) { return e.onKeyChange(t); }), !1), this.domElement.removeEventListener("keyup", (function (t) { return e.onKeyChange(t); }), !1), window.removeEventListener("blur", (function () { return e.onBlur; }), !1); } }, {
    key: "onBlur", value: function () {
    for (var e in this.keyCodes)
        this.keyCodes[e] = !1;
    }
    }, { key: "onKeyChange", value: function (e) { var t = e.keyCode; this.keyCodes[t] = "keydown" === e.type; } }, {
    key: "pressed", value: function (e) {
    for (var t = e.split("+"), i = 0; i < t.length; i++) {
        var n = t[i], r = !1;
        if (r = -1 != Object.keys(ig).indexOf(n) ? this.keyCodes[ig[n]] : this.keyCodes[n.toUpperCase().charCodeAt(0)], !r)
            return !1;
    } return !0;
    }
    }, {
    key: "eventMatches", value: function (e, t) {
    for (var i = ig, n = Object.keys(i), r = t.split("+"), a = 0; a < r.length; a++) {
        var o = r[a], s = !1;
        if ("shift" === o ? s = !!e.shiftKey : "ctrl" === o ? s = !!e.ctrlKey : "alt" === o ? s = !!e.altKey : "meta" === o ? s = !!e.metaKey : -1 !== n.indexOf(o) ? s = e.keyCode === i[o] : e.keyCode === o.toUpperCase().charCodeAt(0) && (s = !0), !s)
            return !1;
    } return !0;
    }
    }]), e;
    } (), rg = i(53), ag = function (e) { e.resizeObserver = new rg.a(bd.debounce((function () { e.events.emit("resize"); }))), e.resizeObserver.observe(e.$container); }, og = function (e) { e.events.on("resize", (function () { e.isNarrowScreen = Bf(e.$container), e.playerUI.setIsNarrowScreen(e.isNarrowScreen); })); }, sg = function () {
    function e(t, i) { c()(this, e), this.config = t, this.scene = i, this.raycaster = new xh, this.notMovingDelta = 0, this.visible = !0, this.showTween = null, this.hideTween = null, this.material = null, this.texture = null, this.geometry = null, this.shape = this.createCircleShape(this.config.pointShape.radius); } return h()(e, [{ key: "destroy", value: function () { this.scene.remove(this.shape), this.geometry.dispose(), this.material.dispose(), this.texture.dispose(), this.config = null, this.scene = null, this.shape = null, this.raycaster = null, this.notMovingDelta = null, this.visible = null, this.showTween = null, this.hideTween = null, this.material = null, this.texture = null, this.geometry = null; } }, { key: "init", value: function () { this.scene.add(this.shape), this.hide(); } }, {
    key: "update", value: function (e, t, i) {
    var n = null; if (this.config.isMouseMoving) {
        var r = this._getCursorIntersects(e, t);
        r.length > 0 && (n = this._projectShape(r[0]));
    } return this.config.isMouseMoving ? (this.visible || this.showTransition(), this.notMovingDelta = 0) : this.notMovingDelta += i, this.showTween || this.hideTween ? n : this.notMovingDelta > 1 && this.visible ? (this.hideTransition(), n) : n;
    }
    }, { key: "getRaycastCollisionPoint", value: function (e, t, i) { this.raycaster.setFromCamera(i, e); var n = [t], r = this.raycaster.intersectObjects(n, !0); return 0 === r.length ? null : r[0].point.clone(); } }, { key: "hide", value: function () { this.shape && Kp.hide(this.shape); } }, { key: "show", value: function () { this.shape && Kp.show(this.shape); } }, {
    key: "hideTransition", value: function () {
    var e = this; if (!this.hideTween) {
        var t = this;
        this.hideTween = new r.a.Tween({ opacity: 1 }).to({ opacity: 0 }, this.config.tween.Mouse.shapeShow.time).easing(this.config.tween.Mouse.shapeShow.easing).onStart((function () { e.show(), e.setOpacity(1); })).onUpdate((function () { t.setOpacity(this.opacity); })).onComplete((function () { e.hideTween = null, e.visible = !1; })).start();
    }
    }
    }, {
    key: "showTransition", value: function () {
    var e = this; if (!this.showTween) {
        var t = this;
        this.showTween = new r.a.Tween({ opacity: 0 }).to({ opacity: 1 }, this.config.tween.Mouse.shapeShow.time).easing(this.config.tween.Mouse.shapeShow.easing).onStart((function () { e.show(), e.setOpacity(0); })).onUpdate((function () { t.setOpacity(this.opacity); })).onComplete((function () { e.showTween = null, e.visible = !0; })).start();
    }
    }
    }, { key: "setOpacity", value: function (e) { this.material && (this.material.opacity = e, this.material.needsUpdate = !0); } }, { key: "createCircleShape", value: function (e) { var t = new Fo; this.texture = qt.loadTexture(this.config.cursorPath), this.material = new uc({ map: this.texture, color: new yn(16777215), transparent: !0, side: T, depthTest: !1, depthWrite: !1 }), this.geometry = new Gr(2 * e, 2 * e); var i = new cr(this.geometry, this.material); return i.renderOrder = 1, i.layers.set(1), t.add(i), t; } }, { key: "_getCursorIntersects", value: function (e, t) { this.raycaster.setFromCamera(this.config.mouse, e); var i = t ? [t] : []; return this.raycaster.intersectObjects(i, !0).filter((function (e) { return e.face; })); } }, { key: "_projectShape", value: function (e) { var t = e.point.clone(), i = e.face.normal.clone(), n = (new Qt).getNormalMatrix(e.object.matrixWorld); i = i.applyMatrix3(n).normalize(), t.add(i.multiplyScalar(this.config.pointShape.eps)), this.shape.position.copy(t); var r = i.toArray().map((function (e) { return Math.abs(e); })), a = Math.max.apply(null, r), o = r.indexOf(a); return this.shape.rotation.set(0, 0, 0), 0 === o && this.shape.rotateY(Ht.degToRad(90)), 1 === o && this.shape.rotateX(Ht.degToRad(90)), 2 === o && this.shape.rotateZ(Ht.degToRad(90)), this.shape.scale.set(1, 1, 1), this.show(), t; } }]), e;
    } (), lg = function () {
    function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, i = t.waitOptions, n = void 0 === i ? {} : i, r = t.predictOptions, a = void 0 === r ? {} : r, o = t.options, s = void 0 === o ? {} : o; c()(this, e), this._waitOptions = { frameCount: n.frameCount || 10, predictSecondsTime: n.predictSecondsTime || 5, targetFps: n.targetFps || 45, delayedFrames: n.delayedFrames || 10, maxWaitingAttempts: n.maxWaitingAttempts || 60 }, this._predictOptions = { frameCount: a.frameCount || 180, targetFps: a.targetFps || 30 }, this._debug = s.debug || !1, this._waitPerfomanceIsRequested = !1, this._waitPerfomanceIsHigh = !0, this._waitFrameTimeDeltaBuffer = [], this._waitPerformanceDelayedResult = 0, this._waitPerformanceCheckApptempts = 0, this._predictedPerformanceIsHigh = !0, this._predictedPerformanceIsProcessed = !1, this._predictedPerformanceNeedProcess = !1, this._predictedPerformanceDeltaCache = [], this._predictedPerformanceCallback = null; } return h()(e, [{ key: "update", value: function (e) { this._updateWaitFrameTimeDeltaBuffer(e), this._processPerformancePrediction(e), this._waitPerfomanceIsRequested = !1; } }, { key: "predictDevicePerformance", value: function (e) { this._predictedPerformanceNeedProcess = !0, this._predictedPerformanceCallback = e, this._predictedPerformanceDeltaCache = [], this._predictedPerformanceIsProcessed = !1; } }, { key: "checkDeviceHasHighPerformance", value: function () { return this._predictedPerformanceIsProcessed ? this._predictedPerformanceIsHigh : null; } }, { key: "_processPerformancePrediction", value: function (e) { this._predictedPerformanceNeedProcess && (this._predictedPerformanceDeltaCache.push(e), this._debug && console.log("PREDICT PERFORMANCE: push to buffer, current size - ", this._predictedPerformanceDeltaCache.length), Math.round(this._predictedPerformanceDeltaCache.reduce((function (e, t) { return e + t; }))) < this._waitOptions.predictSecondsTime || (this._debug && console.log("PREDICT PERFORMANCE: averageFps - ", this._getAverageFps(this._predictOptions.frameCount, this._predictedPerformanceDeltaCache)), this._debug && console.log("PREDICT PERFORMANCE: targetFps - ", this._predictOptions.targetFps), this._predictedPerformanceIsHigh = this._getAverageFps(this._predictOptions.frameCount, this._predictedPerformanceDeltaCache) >= this._predictOptions.targetFps, this._predictedPerformanceDeltaCache = [], this._predictedPerformanceNeedProcess = !1, this._predictedPerformanceIsProcessed = !0, this._predictedPerformanceCallback(this._predictedPerformanceIsHigh), this._predictedPerformanceCallback = null)); } }, {
    key: "tryWaitHighPerformance", value: function () {
    if (this._waitPerfomanceIsRequested)
        return this._waitPerfomanceIsHigh; if (this._waitPerfomanceIsRequested = !0, this._waitPerformanceCheckApptempts += 1, this._waitPerformanceCheckApptempts >= this._waitOptions.maxWaitingAttempts)
            return this._debug && console.log("WAIT PERFORMANCE: attemptsLimit FULL, TRUE", this._waitPerformanceCheckApptempts), this._debug && console.log(888888, "LETS WORK"), this._waitPerformanceCheckApptempts = 0, this._waitPerformanceDelayedResult = 0, this._waitPerfomanceIsHigh = !0; var e = this._getAverageFps(this._waitOptions.frameCount, this._waitFrameTimeDeltaBuffer); return e < this._waitOptions.targetFps ? (this._debug && console.log("WAIT PERFORMANCE: average is BAD(".concat(e, "), delay RESETED")), this._waitPerformanceDelayedResult = 0, this._waitPerfomanceIsHigh = !1) : (this._waitPerformanceDelayedResult += 1, this._debug && console.log("WAIT PERFORMANCE: perfomance GOOD(".concat(e, "), SET delay to: ").concat(this._waitPerformanceDelayedResult)), this._waitPerformanceDelayedResult >= this._waitOptions.delayedFrames ? (this._debug && console.log("WAIT PERFORMANCE: perfomance GOOD(".concat(e, "), delay COMPLETED")), this._debug && console.log(888888, "LETS WORK"), this._waitPerformanceDelayedResult = 0, this._waitPerfomanceIsHigh = !0) : this._waitPerfomanceIsHigh = !1);
    }
    }, { key: "_updateWaitFrameTimeDeltaBuffer", value: function (e) { this._waitFrameTimeDeltaBuffer.length === this._waitOptions.frameCount && this._waitFrameTimeDeltaBuffer.shift(), this._waitFrameTimeDeltaBuffer.push(e); } }, { key: "_getAverageFps", value: function (e, t) { return 1 / this._getAverageFrameTimeDelta(e, t); } }, { key: "_getAverageFrameTimeDelta", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; return e = this._normalizeFrameCount(e, t), t.slice(-e).reduce((function (e, t) { return e + t; }), 0) / e; } }, { key: "_normalizeFrameCount", value: function (e, t) { return !e || e > t.length ? t.length : e; } }]), e;
    } (), cg = i(54), ug = i.n(cg), hg = function () { function e(t) { c()(this, e), this.config = t, this.sceneStateManager = null, this.camera = null, this.model = null, this.controls = null, this.state = { cameraMode: null, currentPanoId: null, cameraRotation: null, cameraPosition: null, cameraTargetPosition: null, activeStyle: null }; } return h()(e, [{ key: "setActiveStyle", value: function (e) { this.state.activeStyle = e; } }, { key: "destroy", value: function () { } }, { key: "setDependencies", value: function (e, t, i, n) { this.sceneStateManager = e, this.camera = t, this.model = i, this.controls = n; } }, { key: "checkCacheIsExist", value: function () { return !!this.state.cameraMode; } }, { key: "generateSceneState", value: function () { var e = {}, t = this.sceneStateManager.getCameraMode(); return e.cameraMode = t, e.cameraRotation = this.camera.threeCamera.rotation.toVector3(), e.cameraPosition = this.camera.threeCamera.position.clone(), t === ef.CAMERA_MODES.PANORAMA && (e.currentPanoId = this.model.currentPano.config.id), t !== ef.CAMERA_MODES.PANORAMA && (e.cameraTargetPosition = this.controls.getTarget()), e; } }, { key: "cacheSceneState", value: function () { var e = this; return Object.entries(this.generateSceneState()).map((function (t) { var i = ug()(t, 2), n = i[0], r = i[1]; e.state[n] = r; })), this.state; } }, { key: "remoteRestoreSceneState", value: function (e) { Object.assign(this.state, e); } }, { key: "restoreCachedSceneState", value: function () { var e = this, t = {}; return this.state.cameraMode === ef.CAMERA_MODES.PANORAMA && (t.panorama = this.model.panoCollection.panoramas.find((function (t) { return t.config.id === e.state.currentPanoId; }))), this.sceneStateManager.setCameraMode(this.state.cameraMode, t).then((function () { e.camera.threeCamera.position.copy(e.state.cameraPosition), e.camera.threeCamera.rotation.setFromVector3(e.state.cameraRotation), e.camera.threeCamera.updateProjectionMatrix(), e.state.cameraMode !== ef.CAMERA_MODES.PANORAMA && e.controls.threeControls.target.copy(e.state.cameraTargetPosition), e.state.cameraMode === ef.CAMERA_MODES.PANORAMA && (e.model.forceUpdateQuality = !0), e.state = { cameraMode: null, currentPanoId: null, cameraRotation: null, cameraPosition: null, cameraTargetPosition: null }; })); } }]), e; } (), dg = function () {
    function e(t, i) {
    var n = this, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; c()(this, e), this.$container = t, this.config = i, this.$canvasContainer = "", this.params = r, this.events = new _d, this.deviceHasTap = Nf(window), this.agentParams = kf(), this.isMobile = this.agentParams.isMobile, this.isNarrowScreen = Bf(this.$container), this.clock = new Xu, this.performanceIsPredicted = !1, this.performanceObserver = new lg({ options: { debug: !1 } }), this.requestAnimationFrame = null, this.stats = null, this.configProcessor = new qp, this.stateCache = null, this.keyboard = null, this._clickCanvasCallback = null, this.loadingManager = null, this.scene = null, this.modelGroup = null, this.renderer = null, this.touchObserver = null, this.camera = null, this.controls = null, this.light = null, this.plan = null, this.panoCollection = null, this.model = null, this.blur = null, this.interaction = null, this.mouseShape = null, this.config = this.configProcessor.processExternal(this.config, this.params, (this.params.restoreStateParams || {}).activeStyle), this.disableAutoload = !this.config.restoreStateParams && (!!this.params.showStyleChooseWindow && this.params.styles.length > 1), this.playerUI = this._initPlayerUi(), ag(this), og(this), this.config.isShowingStats && (this.stats = new p.a, document.body.appendChild(this.stats.dom)), this.stateCache = new hg(this.config), this._updateUiTween(), window.invrPlayerScope = window.invrPlayerScope || {}, window.invrPlayerScope.texturesExtension = ".jpg", s.a.async((function (e) {
    for (; ;)
        switch (e.prev = e.next) {
            case 0: return e.next = 2, s.a.awrap(bd.supportsWebp());
            case 2:
                if (!e.sent) {
                    e.next = 4;
                    break;
                }
                window.invrPlayerScope.texturesExtension = ".webp";
            case 4:
                if (!n.disableAutoload) {
                    e.next = 6;
                    break;
                }
                return e.abrupt("return", n._listenStyleSelectEvent());
            case 6: n.initPlayer();
            case 7:
            case "end": return e.stop();
        }
    }));
    } return h()(e, [{ key: "initPlayer", value: function () { var e = this; this.$canvasContainer = document.createElement("div"), this.$canvasContainer.classList.add("intvr-scene"), this.$container.appendChild(this.$canvasContainer); var t = this._initLoadingManager(), i = function (e, t) { e.scene = new Ei, t.fog.enable && (e.scene.fog = new jo(t.fog.color, t.fog.near)), e.modelGroup = new Fo, e.scene.add(e.modelGroup), e.renderer = new Wv(e.config, e.scene, e.$canvasContainer, e.agentParams), e.touchObserver = new window.Hammer(e.renderer.threeRenderer.domElement), e.camera = new nf(t, e.renderer.threeRenderer), e.renderer.enablePostprocessing(e.camera), e.renderer.camera = e.camera, e.controls = new _f(e.config, e.camera.threeCamera, e.$canvasContainer), e.controls.setPreviewControls(), e.light = new Wf(t, e.scene), e.light.init(), e.plan = new Jp(e.modelGroup, e.loadingManager, t), e.plan.load(), e.panoCollection = new jf(t, e.loadingManager, e.events, e.renderer, e.camera, e.scene, e.isMobile); var i = e.panoCollection.preloadBaseImages(); e.panoCollection.addPlaceMarkers(e.modelGroup), e.model = new eg(t, e.modelGroup, e.loadingManager, e.renderer, e.events, e.panoCollection, e.performanceObserver); var n = e.model.load().then((function () { e.isMobile || (e.miniMap = new Qf(t, e.camera, e.scene, e.renderer), e.miniMap.init(), e.model.createMapModel()); })); return e.sceneStateManager = new ef(e.config, e, e.playerUI, new tf(t), window), e.sceneStateManager.initEvents(), e.stateCache.setDependencies(e.sceneStateManager, e.camera, e.model, e.controls), e.blur = new tg(e.modelGroup, e.loadingManager, e.config, e.renderer, e.camera, e.model), Promise.all([i, n]); } (this, this.config); this._listenChangeCustomStyleEvent(), this._listenGenerateStateLinkEvent(), this._loadBackground(), this.config.restoreStateParams && this.stateCache.remoteRestoreSceneState(this.config.restoreStateParams), Promise.all([t, i]).then((function () { return e.model.preparePanoramaTextures(), e.model.prepareMirrorsPanoramasTextures(), e.blur.load(); })).then((function () { return e._onSceneLoad(); })).then((function () { return e.stateCache.checkCacheIsExist() && e.stateCache.restoreCachedSceneState(); })).then((function () { return e.playerUI.finishPreloading(), e.model.loadNextTexturesPreset(), e.predictPerformance(); })); } }, { key: "destroy", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; cancelAnimationFrame(this.requestAnimationFrame), this.$canvasContainer.remove(), this.scene && Hf.disposeNodeDeep(this.scene), this.camera && this.camera.destroy(), this.controls && this.controls.destroy(), this.panoCollection && this.panoCollection.destroy(), this.light && this.light.destroy(), this.miniMap && this.miniMap.destroy(), this.mouseShape && this.mouseShape.destroy(), this.model && this.model.destroy(), this.blur && this.blur.destroy(), this.renderer.threeRenderer.domElement.removeEventListener("click", this._clickCanvasCallback), this.scene.background.dispose(), this.renderer && this.renderer.destroy(), this.loadingManager.onLoad = void 0, this.loadingManager.onProgress = void 0, this.loadingManager = null, this.touchObserver && this.touchObserver.off("tap"), this.sceneStateManager && this.sceneStateManager.offEvents(), this.events.offAll(), this.scene = null, this.$canvasContainer = null, this.camera = null, this.controls = null, this.panoCollection = null, this.light = null, this.miniMap = null, this.mouseShape = null, this.renderer = null, this.model = null, this.blur = null, this.performanceIsPredicted = !1, this._updateUiTween(), e && (this.playerUI.destroy(), this.playerUI = null); } }, { key: "predictPerformance", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]; return this.performanceIsPredicted = !t && this.performanceIsPredicted, this._predictFirstPerformance().then((function () { e._predictSecondPerformance(); })); } }, { key: "changeStyle", value: function (e) { this.config = this.configProcessor.processExternal(this.config, this.params, e), this.stateCache.setActiveStyle(e), this.playerUI.reinit(), this.initPlayer(); } }, {
    key: "_onSceneLoad", value: function () {
    if (this.interaction = new xd(this), this.mouseShape = new sg(this.config, this.scene), this.mouseShape.init(), this.config.isDev) {
        var e = new gd(10);
        e.layers.set(1), this.scene.add(e);
    } var t; (t = this)._clickCanvasCallback = function () { t.events.emit("camera-mode:panorama"); }.bind(t), t.renderer.threeRenderer.domElement.addEventListener("click", t._clickCanvasCallback), t.events.on("resize", (function () { t.camera.updateSize(), t.renderer.updateSize(), t.miniMap && t.miniMap.updateSize(), t.predictPerformance(!0); })), t.touchObserver.on("tap", (function (e) {
    var i = t.$container.getBoundingClientRect(), n = { x: (e.center.x - i.x) / t.$container.offsetWidth * 2 - 1, y: -(e.center.y - i.y) / t.$container.offsetHeight * 2 + 1 }, r = t.mouseShape.getRaycastCollisionPoint(t.camera.threeCamera, t.model.collisionModel, n); if (!r)
        return r; var a = t.model.findClosestPanorama(r); a && t.events.emit("camera-mode:panorama", { panorama: a });
    })), t.keyboard || (t.keyboard = new ng, t.keyboard.domElement.addEventListener("keydown", (function (e) { e.repeat || (t.keyboard.eventMatches(e, "1") && t.renderer.setAAMethod("fxaa"), t.keyboard.eventMatches(e, "2") && t.renderer.setAAMethod("MSAA4"), t.keyboard.eventMatches(e, "3") && t.renderer.setAAMethod("MSAA8"), t.keyboard.eventMatches(e, "4") && t.renderer.setAAMethod("MSAA16"), t.keyboard.eventMatches(e, "5") && t.renderer.setAAMethod("NONE"), t.keyboard.eventMatches(e, "8") && t.model.showLowModel(), t.keyboard.eventMatches(e, "9") && t.model.showHiModel(), t.keyboard.eventMatches(e, "space") && t.events.emit("camera-mode:preview"), t.keyboard.eventMatches(e, "tab") && t.events.emit("camera-mode:plan"), t.keyboard.eventMatches(e, "q") && t.renderer.setAAMethod("TAA1"), t.keyboard.eventMatches(e, "w") && t.renderer.setAAMethod("TAA2"), t.keyboard.eventMatches(e, "e") && t.renderer.setAAMethod("TAA4"), t.keyboard.eventMatches(e, "r") && t.renderer.setAAMethod("TAA8"), t.keyboard.eventMatches(e, "t") && t.renderer.setAAMethod("TAA16"), t.keyboard.eventMatches(e, "F9") && t.playerUI.showGenerateLinkButton()); }))), this._cancelUiTween(), this._render();
    }
    }, { key: "_updateUiTween", value: function () { r.a.update(), this.updateTweenRAF = requestAnimationFrame(this._updateUiTween.bind(this)); } }, { key: "_cancelUiTween", value: function () { cancelAnimationFrame(this.updateTweenRAF); } }, { key: "_render", value: function (e) { this.config.isShowingStats && this.stats.begin(); var t = this.clock.getDelta(); this.renderer.render(this.scene, this.camera, t), r.a.update(e), this.controls.update(t); var i = this.mouseShape.update(this.camera.threeCamera, this.model.collisionModel, t); this.isMobile || this.isNarrowScreen || this.miniMap && this.miniMap.update(t), this.model.update(t, this.camera, i), this.blur && this.blur.update(t, this.camera), this.config.isShowingStats && this.stats.end(), this.requestAnimationFrame = requestAnimationFrame(this._render.bind(this)); } }, {
    key: "_predictFirstPerformance", value: function () {
    var e = this; return new Promise((function (t) {
    if (e.performanceIsPredicted)
        return t(); e.performanceObserver.predictDevicePerformance((function (i) { i || e.renderer.destroyPostProcessingEffects(), t(); }));
    }));
    }
    }, { key: "_predictSecondPerformance", value: function () { var e = this; this.performanceIsPredicted || (this.performanceIsPredicted = !0, this.performanceObserver.predictDevicePerformance((function (t) { t || e.renderer.setAAFallbackMethod(); }))); } }, { key: "_listenChangeCustomStyleEvent", value: function () { var e = this; this.playerUI.events.on("change-custom-style", (function (t) { e.stateCache.cacheSceneState(), e.playerUI.startPreloading(e.renderer.getSnapshot(), !0), setTimeout((function () { e.destroy(), setTimeout((function () { e.changeStyle(t); }), 500); }), 500); })); } }, { key: "_listenStyleSelectEvent", value: function () { var e = this; this.playerUI.events.on("style-select", (function (t) { var i = t.name, n = t.image; e.playerUI.startPreloading(n), e.changeStyle(i), e.playerUI.hideStyleSelectWindow(); })); } }, { key: "_listenGenerateStateLinkEvent", value: function () { var e = this; this.playerUI.events.on("scene:generate-state-link", (function () { var t = e.stateCache.cacheSceneState(), i = new URL(window.location.href); i.searchParams.set("state", btoa(JSON.stringify(t))), console.log(i.href), e.playerUI.setDeepLink(i.href); })); } }, { key: "_initLoadingManager", value: function () { var e = this; this.loadingManager = new Lc; var t = this._calculateLoadingPercentage("low"); return this.loadingManager.onProgress = function (i, n, r) { var a = Math.ceil(n / t * 100); e.playerUI.updatePreloadingState(a > 100 ? 100 : a); }, new Promise((function (t) { return e.loadingManager.onLoad = t; })); } }, { key: "_calculateLoadingPercentage", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "low", i = this.config.styles.find((function (t) { return t.name === e.config.activeStyle; })) || this.config.styles[0], n = this.config.defaultLoadAssetsCount; return n += bd.getNestedProp(i, "texturesCount.".concat(t), 0), n += bd.getNestedProp(i, "panoramaTexturesCount.".concat(t), 0), n += bd.getNestedProp(i, "mirrorTexturesCount.".concat(t), 0), n += bd.getNestedProp(i, "plan.texturesCount", 1); } }, { key: "_loadBackground", value: function () { var e = this, t = "dark" === this.config.materialConfig.BackgroundMode ? this.config.materialConfig.BackgroundDarkPath : this.config.materialConfig.BackgroundPath; new Hc(this.loadingManager).load(t, (function (t) { t.minFilter = Ae, t.magFilter = Ae, e.scene.background = t; })); } }, { key: "_initPlayerUi", value: function () { var e = new Qp(this.$container, new _d, this.isNarrowScreen, document, this.config, this.params.apartmentInfo); return e.init({ usePreloader: !0, showStyleSelect: this.disableAutoload }), e; } }]), e;
    } (), pg = (i(108), function (e, t) { return new dg(document.getElementById(e), a, t); });
    i(109);
    i.d(t, "init", (function () { return pg; }));
} ]);
}));