import { useState } from 'react'
import classnames from 'classnames'

export default ({
  flat,
  mebelShown,
  clickGallery,
  rakursButtonShown = true
}) => {
  const [galleryBtnShown, setGalleryBtnShown] = useState(true)
  return (
    <div
      className="render"
      onMouseEnter={() => setGalleryBtnShown(true)}
      onMouseLeave={() => setGalleryBtnShown(false)}
    >
      {rakursButtonShown && (
        <div
          onClick={clickGallery}
          className={classnames('gallery-button', { shown: galleryBtnShown })}
        >
          {/* prettier-ignore */}
          <svg width="67" height="68" viewBox="0 0 67 68" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="33.5" cy="33.5464" r="33.5" fill="#262729" fillOpacity="0.5"/>
            <path d="M16.01 40.1984C15.826 40.9424 15.266 41.4624 14.338 41.4624C13.258 41.4624 12.49 40.6064 12.49 39.1344C12.49 37.6304 13.29 36.8304 14.314 36.8304C15.234 36.8304 15.81 37.3664 15.978 38.0944H16.77C16.514 36.8544 15.554 36.1424 14.354 36.1424C12.722 36.1424 11.658 37.3424 11.658 39.1344C11.658 40.8944 12.626 42.1504 14.29 42.1504C15.546 42.1504 16.546 41.4784 16.802 40.1984H16.01ZM21.1027 42.0464L22.7027 36.9904V42.0464H23.5187V36.2464H22.1507L20.6707 41.0784L19.1907 36.2464H17.8227V42.0464H18.6387V36.9904L20.2387 42.0464H21.1027ZM25.5291 39.1424C25.5291 37.6464 26.3611 36.8304 27.4171 36.8304C28.4731 36.8304 29.3051 37.6464 29.3051 39.1424C29.3051 40.6384 28.4731 41.4624 27.4171 41.4624C26.3611 41.4624 25.5291 40.6384 25.5291 39.1424ZM30.1371 39.1424C30.1371 37.3904 29.0891 36.1424 27.4171 36.1424C25.7451 36.1424 24.6971 37.3904 24.6971 39.1424C24.6971 40.8944 25.7451 42.1504 27.4171 42.1504C29.0891 42.1504 30.1371 40.8944 30.1371 39.1424ZM32.1302 42.0464H32.9462V36.9504H34.8342V36.2464H30.2422V36.9504H32.1302V42.0464ZM35.6039 36.2464V42.0464H36.4199V39.7504H37.4199C38.8359 39.7504 39.8279 39.4384 39.8279 37.9984C39.8279 36.5664 38.8359 36.2464 37.4199 36.2464H35.6039ZM37.4839 36.9344C38.3399 36.9344 38.9959 37.0544 38.9959 37.9984C38.9959 38.9504 38.3399 39.0384 37.4839 39.0384H36.4199V36.9344H37.4839ZM40.7133 42.0464H44.6493V41.3424H41.5293V39.4144H44.4653V38.7104H41.5293V36.9504H44.6493V36.2464H40.7133V42.0464ZM46.9349 42.0464H47.7509V36.9504H49.6389V36.2464H45.0469V36.9504H46.9349V42.0464ZM50.4086 42.0464H52.0806C53.5126 42.0464 54.5526 41.6864 54.5526 40.2144C54.5526 38.7184 53.5126 38.3824 52.0806 38.3824H51.2246V36.2464H50.4086V42.0464ZM51.2246 41.3424V39.0864H52.1126C52.9846 39.0864 53.6966 39.2544 53.6966 40.2144C53.6966 41.1504 52.9846 41.3424 52.1126 41.3424H51.2246ZM14.6664 46.2464V52.0464H15.4824V49.7504H16.4824C17.8984 49.7504 18.8904 49.4384 18.8904 47.9984C18.8904 46.5664 17.8984 46.2464 16.4824 46.2464H14.6664ZM16.5464 46.9344C17.4024 46.9344 18.0584 47.0544 18.0584 47.9984C18.0584 48.9504 17.4024 49.0384 16.5464 49.0384H15.4824V46.9344H16.5464ZM18.4853 52.0464H19.3173L19.7653 50.7904H22.4293L22.8853 52.0464H23.7653L21.5813 46.2464H20.6373L18.4853 52.0464ZM21.0853 47.0704L22.1733 50.0944H20.0133L21.0853 47.0704ZM28.0127 52.0464H28.9887L26.6687 48.9904L28.9087 46.2464H27.9247L25.9727 48.7024H25.3887V46.2464H24.5727V52.0464H25.3887V49.4064H25.9967L28.0127 52.0464ZM30.5974 52.1584C31.2694 52.1584 31.7654 51.7664 32.0774 51.0944L34.2134 46.2464H33.3094L31.7574 50.0144L30.0694 46.2464H29.1894L31.3494 50.8624L31.2374 51.0704C31.0774 51.3664 30.8294 51.4544 30.5414 51.4544H29.9974V52.1584H30.5974ZM34.8227 46.2464V52.0464H35.6387V49.7504H36.6387C38.0547 49.7504 39.0467 49.4384 39.0467 47.9984C39.0467 46.5664 38.0547 46.2464 36.6387 46.2464H34.8227ZM36.7027 46.9344C37.5587 46.9344 38.2147 47.0544 38.2147 47.9984C38.2147 48.9504 37.5587 49.0384 36.7027 49.0384H35.6387V46.9344H36.7027ZM43.9241 50.1984C43.7401 50.9424 43.1801 51.4624 42.2521 51.4624C41.1721 51.4624 40.4041 50.6064 40.4041 49.1344C40.4041 47.6304 41.2041 46.8304 42.2281 46.8304C43.1481 46.8304 43.7241 47.3664 43.8921 48.0944H44.6841C44.4281 46.8544 43.4681 46.1424 42.2681 46.1424C40.6361 46.1424 39.5721 47.3424 39.5721 49.1344C39.5721 50.8944 40.5401 52.1504 42.2041 52.1504C43.4601 52.1504 44.4601 51.4784 44.7161 50.1984H43.9241ZM51.3368 52.0464V46.2464H50.5208V52.0464H51.3368ZM45.7368 52.0464H47.2488C48.6808 52.0464 49.7208 51.6864 49.7208 50.2144C49.7208 48.7184 48.6808 48.3824 47.2488 48.3824H46.5528V46.2464H45.7368V52.0464ZM46.5528 51.3424V49.0864H47.2808C48.1528 49.0864 48.8648 49.2544 48.8648 50.2144C48.8648 51.1504 48.1528 51.3424 47.2808 51.3424H46.5528Z" fill="white"/>
            <path d="M30.4028 25.8546C28.2497 25.8546 26.0957 25.0356 24.4577 23.3966C21.1807 20.1186 21.1807 14.7846 24.4577 11.5056C27.7347 8.22664 33.0707 8.22664 36.3488 11.5056C39.6258 14.7836 39.6258 20.1176 36.3488 23.3966C34.7098 25.0356 32.5568 25.8546 30.4028 25.8546ZM30.4028 11.1456C28.7878 11.1456 27.1727 11.7606 25.9418 12.9906C23.4838 15.4506 23.4838 19.4526 25.9418 21.9126C28.4008 24.3696 32.4028 24.3716 34.8638 21.9126C37.3218 19.4526 37.3218 15.4506 34.8638 12.9906C33.6338 11.7606 32.0188 11.1456 30.4028 11.1456Z" fill="white"/>
            <path d="M35.994 21.559L34.5098 23.0432L43.2156 31.749L44.6998 30.2648L35.994 21.559Z" fill="white"/>
          </svg>
        </div>
      )}
      {mebelShown ? (
        <img className="mebel" src={flat.plan_type.render_view_url} />
      ) : (
        <img className="empty" src={flat.plan_type.render_plan_url} />
      )}
      <style jsx>{`
        .render {
          flex: 1;
          padding: 2rem;
          display: flex;
          position: relative;
        }
        .render-wrap {
          position: relative;
        }
        .empty,
        .mebel {
          width: 100%;
          height: 100%;
          display: block;
          top: 0;
          left: 0;
          position: absolute;
          object-fit: contain;
        }
        .gallery-button {
          top: 50%;
          left: 50%;
          z-index: 20;
          cursor: pointer;
          position: absolute;
          opacity: 0;
          transition: 0.15s;
          transform: translate(-50%, -50%) scale(0.5);
          &:hover {
            & :global(circle) {
              fill-opacity: 1;
            }
          }
          &.shown {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
          }
        }
      `}</style>
    </div>
  )
}
